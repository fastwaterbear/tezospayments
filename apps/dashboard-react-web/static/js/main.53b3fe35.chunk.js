(this["webpackJsonp@tezospayments/dashboard-react-web"]=this["webpackJsonp@tezospayments/dashboard-react-web"]||[]).push([[0],{224:function(e,t){},309:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var s=a(86);class n{constructor(e,t,a){this.tezosToolkit=e,this.servicesProvider=t,this.servicesFactoryContractAddress=a}async getServices(e){return this.servicesProvider.getServices(e.address)}async getService(e){return this.servicesProvider.getService(e)}async getOperations(e){return this.servicesProvider.getOperations(e)}async updateService(e){const t=await this.getServiceContract(e.contractAddress),a=this.encodeMetadata(e);return await t.methodsObject.update_service_parameters({metadata:a,allowed_tokens:{tez:e.allowedTokens.tez,assets:[...e.allowedTokens.assets]},allowed_operation_type:e.allowedOperationType}).send()}async setPaused(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_pause(t).send()}async setDeleted(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_deleted(t).send()}async createService(e){const t=await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress),a=await t.storage(),n=await this.getFactoryImplementationContract(a.factory_implementation),i=this.encodeMetadata(e),r=new s.a;for(const s of e.signingKeys.values())r.set(s.publicKey,{public_key:s.publicKey,name:s.name});return await n.methodsObject.create_service({metadata:i,allowed_tokens:{tez:e.allowedTokens.tez,assets:e.allowedTokens.assets},allowed_operation_type:e.allowedOperationType,signing_keys:r}).send()}addApiKey(e,t){const a=new s.a;return a.set(t.publicKey,{public_key:t.publicKey,name:t.name}),this.updateSigningKeys(e,a)}deleteApiKey(e,t){const a=new s.a;return a.set(t,void 0),this.updateSigningKeys(e,a)}async updateSigningKeys(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.update_signing_keys(t).send()}encodeMetadata(t){const a={name:t.name||void 0,links:t.links.length?t.links:void 0,description:t.description||void 0,iconUrl:t.iconUrl||void 0};return e.from(JSON.stringify(a),"utf8").toString("hex")}async getServiceContract(e){return await this.tezosToolkit.wallet.at(e)}async getFactoryImplementationContract(e){return await this.tezosToolkit.wallet.at(e)}}}).call(this,a(21).Buffer)},346:function(e,t){},348:function(e,t){},359:function(e,t){},361:function(e,t){},387:function(e,t){},388:function(e,t){},394:function(e,t){},413:function(e,t){},452:function(e,t){},454:function(e,t){},476:function(e,t){},493:function(e,t,a){},563:function(e,t,a){},564:function(e,t,a){},565:function(e,t,a){},566:function(e,t,a){},567:function(e,t,a){},568:function(e,t,a){},569:function(e,t,a){},570:function(e,t,a){},571:function(e,t,a){},572:function(e,t,a){},573:function(e,t,a){},574:function(e,t,a){},575:function(e,t,a){},576:function(e,t,a){},577:function(e,t,a){},578:function(e,t,a){},579:function(e,t,a){},586:function(e,t,a){},587:function(e,t,a){},588:function(e,t,a){},589:function(e,t,a){},590:function(e,t,a){},591:function(e,t,a){},592:function(e,t,a){},593:function(e,t,a){},594:function(e,t,a){},595:function(e,t,a){},596:function(e,t,a){},597:function(e,t,a){},598:function(e,t,a){},599:function(e,t,a){},600:function(e,t,a){},601:function(e,t,a){},602:function(e,t,a){},603:function(e,t,a){},604:function(e,t,a){},605:function(e,t,a){},606:function(e,t,a){},607:function(e,t,a){},608:function(e,t,a){},609:function(e,t,a){},610:function(e,t,a){},611:function(e,t,a){},612:function(e,t,a){},614:function(e,t,a){},615:function(e,t,a){},616:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"beaconNetworkToNetwork",(function(){return ht})),a.d(s,"networkToBeaconNetwork",(function(){return bt}));var n=a(40),i=a(12),r=a.n(i),c=a(44),o=a(0),l=a.n(o),d=a(38),u=a.n(d),m=a(64),p=a(37),v=a(30),h=a(305),b=a(86),y=a(29),j=a.n(y),g=a(290),O=a(21),w=a(308),x=a.n(w),k=a(140),f=a(74),S=a(9),A=a(10),_=a.n(A),N=a(75);const C=O.Buffer.isEncoding("base64url"),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";return"base64"!==t&&"base64url"!==t?"":(C||(t="base64",e=z.prepareValueForDecoding(e)),O.Buffer.from(e,t).toString("utf8"))},P=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";if("base64"!==t&&"base64url"!==t)return"";if(C)return O.Buffer.from(e,"utf8").toString(t);const a=O.Buffer.from(e,"utf8").toString("base64");return z.prepareEncodedValue(a)},z={prepareEncodedValue:e=>e.split("=")[0].replace(/\+/g,"-").replace(/\//g,"_"),prepareValueForDecoding:e=>{switch((e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4){case 0:return e;case 2:return e+"==";case 3:return e+"=";default:throw new Error("Invalid base64url value")}}};const D=e=>{var t;const a=null===(t=e.match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return new Uint8Array(a)},U=e=>O.Buffer.from(e,"utf8").toString("hex"),I=e=>O.Buffer.from(D(e)).toString("utf8"),K=(e,t)=>new r.a(e).multipliedBy(10**t).integerValue(),E=(e,t)=>new r.a(e).integerValue().div(10**t),L=e=>K(e,6);var F=Object.freeze({__proto__:null,stringToUint8Array:D,stringToBytes:U,bytesToString:I,objectToBytes:e=>U(JSON.stringify(e)),bytesToObject:e=>{try{return JSON.parse(I(e))}catch{return null}},tokensAmountToNat:K,numberToTokensAmount:E,tezToMutez:L,mutezToTez:e=>E(e,6)});const B=e=>x()(e);var M=Object.freeze({__proto__:null,isArray:e=>Array.isArray(e),isReadonlyArray:e=>Array.isArray(e),isPlainObject:B});const R=(e,t)=>e===t,W=(e,t,a)=>{if(null===t||null===a||t.length!==a.length)return!1;const s=t.length;for(let n=0;n<s;n++)if(!e(t[n],a[n]))return!1;return!0},V=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,a=null,s=null;return function(){return W(t,a,arguments)||(s=e.apply(null,arguments)),a=arguments,s}};var H={emptyArray:[],emptyMap:new Map,emptySet:new Set,emptyObject:{},zeroBigNumber:new r.a(0)};const Z=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";if(void 0!==String.prototype.padStart)return e.padStart(a,s);const n=e.length;if(a<=n||""==s)return e;const i=a-n;let r=s.repeat(Math.ceil(i/s.length));return r.length>i&&(r=r.slice(0,i)),t?r+e:e+r},Y=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return void 0!==String.prototype.padStart?e.padStart(t,a):Z(e,!0,t,a)};var G=Object.freeze({__proto__:null,capitalize:e=>{var t;return e&&(null===(t=e[0])||void 0===t?void 0:t.toLocaleUpperCase())+e.slice(1)},getAvatarText:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e||!t)return"";let a="";for(let s=0,n=0,i=!1;s<e.length;s++)if(i||" "===e[s])i&&" "===e[s]&&(i=!1);else if(i=!0,a+=e[s],++n===t)return a;return a},padStart:Y,padEnd:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return void 0!==String.prototype.padEnd?e.padEnd(t,a):Z(e,!1,t,a)}});const J=e=>new Promise((t=>setTimeout(t,e)));var X;!function(e){e[e.Common=0]="Common",e[e.Email=1]="Email",e[e.Telegram=2]="Telegram",e[e.Facebook=3]="Facebook",e[e.Twitter=4]="Twitter",e[e.Instagram=5]="Instagram",e[e.GitHub=6]="GitHub",e[e.Reddit=7]="Reddit"}(X||(X={}));const q=V((e=>e.trim())),Q=V((e=>e.trim().replace(/\/$/,""))),$=(e,t,a)=>{if(!e.startsWith(t))return!1;const s=q(e);return s!==t&&{rawLink:e,formattedLink:s,displayLink:Q(e).replace(t,""),icon:a}},ee=/^[^\s/@]+@[^\s@/]+$/,te=/^([a-z][a-z0-9+\-.]*):/;class ae{getLinkInfo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const a of ae.linkInfoProviders){const t=a(e);if(t)return this.linkInfoIsValid(t)?t:null}return t?(e=>({rawLink:e,formattedLink:q(e),displayLink:Q(e),icon:X.Common}))(e):null}linkInfoIsValid(e){return"#"!==e.formattedLink}}var se;j()(ae,"linkInfoProviders",[e=>!!e.startsWith("javascript")&&(e=>({rawLink:e,formattedLink:"#",displayLink:"Invalid Link",icon:X.Common}))(e),e=>$(e,"https://t.me/",X.Telegram),e=>$(e,"https://facebook.com/",X.Facebook),e=>$(e,"https://twitter.com/",X.Twitter),e=>$(e,"https://instagram.com/",X.Instagram),e=>$(e,"https://github.com/",X.GitHub),e=>{const t=q(e);return ee.test(t)&&{rawLink:e,formattedLink:"mailto:".concat(t),displayLink:Q(e),icon:X.Email}},e=>$(e,"https://www.reddit.com/",X.Reddit),e=>{const t=q(e);return te.test(t)&&{rawLink:e,formattedLink:t,displayLink:Q(e),icon:X.Common}}]),function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(se||(se={}));class ne{validate(e){let t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!B(e))return[this.invalidPaymentObjectError];for(const s of this.validationMethods){const n=s(e);if(n){if(!a)return n;t=(t||[]).concat(n)}}return t}}const ie={mainnet:{id:"NetXdQprcVkpaWU",name:"mainnet"},hangzhounet:{id:"NetXZSsxBpMQeAT",name:"hangzhounet"}},re=ie,ce=Object.values(ie),oe=/^[a-zA-Z]\w*$/,le=oe,de="XTZ",ue="Tezos",me=6,pe="https://dashboard.tezospayments.com/tokens/tezos.png",ve={name:"Unknown",symbol:"Unknown",decimals:0,thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"},he=[{network:re.hangzhounet,type:"fa1.2",contractAddress:"KT19sYK89XKYTeGHekWK9wL5iDHVF4YYf26t",metadata:{decimals:6,symbol:"FA12",name:"Test FA 1.2",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:re.hangzhounet,type:"fa2",contractAddress:"KT1EKo1Eihucz9N4cQyaDKeYRoMzTEoiZRAT",id:0,metadata:{decimals:6,symbol:"FA20",name:"Test FA 2.0",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}}],be=new Map(ce.map((e=>[e,new Map(he.filter((t=>t.network===e)).map((e=>[e.contractAddress,e])))]))),ye=["KT"],je=["tz1","tz2","tz3"],ge={addressLength:36,contractAddressPrefixes:ye,implicitAddressPrefixes:je,addressPrefixes:[...ye,...je]};var Oe;!function(e){e.Ed25519="Ed25519",e.Secp256k1="Secp256k1",e.P256="P256"}(Oe||(Oe={}));const we=k.URL||globalThis.URL;var xe=Object.freeze({__proto__:null,URL:we});const ke=(e,t)=>"string"!==typeof e?[t.invalidTargetAddress]:e.length!==ge.addressLength?[t.targetAddressHasInvalidLength]:ge.addressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.targetAddressIsNotNetworkAddress],fe=(e,t)=>r.a.isBigNumber(e)&&!e.isNaN()&&e.isFinite()?e.isZero()||e.isNegative()?[t.amountIsNonPositive]:void 0:[t.invalidAmount],Se=(e,t)=>{if(void 0!==e)return e instanceof we?e.protocol.indexOf("javascript")>-1?[t.invalidProtocol]:void 0:[t.invalidUrl]},Ae=(e,t)=>{if(void 0!==e)return B(e)?void 0:[t.invalidData]},_e=(e,t)=>Ne(e.address,t)||Ce(e.id,t),Ne=(e,t)=>"string"!==typeof e?[t.invalidAssetAddress]:e.length!==ge.addressLength?[t.assetAddressHasInvalidLength]:ge.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.assetAddressIsNotContractAddress],Ce=(e,t)=>{if(null!==e)return"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetId]:e<0?[t.assetIdIsNegative]:Number.isInteger(e)?void 0:[t.assetIdIsNotInteger]},Te=(e,t)=>"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetDecimals]:e<0?[t.assetDecimalsNumberIsNegative]:Number.isInteger(e)?void 0:[t.assetDecimalsNumberIsNotInteger];class Pe extends ne{constructor(){super(...arguments),j()(this,"validationMethods",[e=>e.type!==se.Payment?[Pe.errors.invalidType]:void 0,e=>ke(e.targetAddress,Pe.errors),e=>{return t=e.id,a=Pe.errors,"string"!==typeof t?[a.invalidId]:""===t?[a.emptyId]:void 0;var t,a},e=>fe(e.amount,Pe.errors),e=>((e,t)=>{if(void 0!==e)return B(e)?_e(e,t)||Te(e.decimals,t):[t.invalidAsset]})(e.asset,Pe.errors),e=>Ae(e.data,Pe.errors),e=>Se(e.successUrl,Pe.successUrlErrors),e=>Se(e.cancelUrl,Pe.cancelUrlErrors),e=>((e,t)=>{if(!(e instanceof Date)||isNaN(e.getTime()))return[t.invalidCreatedDate]})(e.created,Pe.errors),e=>((e,t,a,s)=>{if(void 0!==e)return e instanceof Date&&!isNaN(e.getTime())?e.getTime()-t.getTime()<a?[s.paymentLifetimeIsShort]:void 0:[s.invalidExpiredDate]})(e.expired,e.created,Pe.minimumPaymentLifetime,Pe.errors)]),j()(this,"invalidPaymentObjectError",Pe.errors.invalidPaymentObject)}}j()(Pe,"errors",{invalidPaymentObject:"Payment is undefined or not object",invalidType:"Payment type is invalid",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidId:"Id is invalid",emptyId:"Id is empty",invalidAmount:"Amount is invalid",amountIsNonPositive:"Amount is less than or equal to zero",invalidData:"Payment data is invalid",invalidAsset:"Asset is invalid",invalidAssetAddress:"Asset address is invalid",assetAddressIsNotContractAddress:"Asset address isn't a contract address",assetAddressHasInvalidLength:"Asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidAssetDecimals:"Asset number of decimals is invalid",assetDecimalsNumberIsNegative:"Asset number of decimals is negative",assetDecimalsNumberIsNotInteger:"Asset number of decimals isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol",invalidCreatedDate:"Created date is invalid",invalidExpiredDate:"Expired date is invalid",paymentLifetimeIsShort:"Payment lifetime is short"}),j()(Pe,"minimumPaymentLifetime",6e5),j()(Pe,"successUrlErrors",{invalidUrl:Pe.errors.invalidSuccessUrl,invalidProtocol:Pe.errors.successUrlHasInvalidProtocol}),j()(Pe,"cancelUrlErrors",{invalidUrl:Pe.errors.invalidCancelUrl,invalidProtocol:Pe.errors.cancelUrlHasInvalidProtocol});class ze extends ne{constructor(){super(...arguments),j()(this,"validationMethods",[e=>e.type!==se.Donation?[ze.errors.invalidType]:void 0,e=>Ae(e.data,ze.errors),e=>ke(e.targetAddress,ze.errors),e=>{return t=e.desiredAmount,a=ze.errors,void 0===t?void 0:fe(t,a);var t,a},e=>((e,t)=>{if(void 0!==e)return B(e)?_e(e,t):[t.invalidAsset]})(e.desiredAsset,ze.errors),e=>Se(e.successUrl,ze.successUrlErrors),e=>Se(e.cancelUrl,ze.cancelUrlErrors)]),j()(this,"invalidPaymentObjectError",ze.errors.invalidDonationObject)}}j()(ze,"errors",{invalidDonationObject:"Donation is undefined or not object",invalidType:"Donation type is invalid",invalidData:"Donation data is invalid",invalidAmount:"Desired amount is invalid",amountIsNonPositive:"Desired amount is less than or equal to zero",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidAsset:"Desired asset is invalid",invalidAssetAddress:"Desired asset address is invalid",assetAddressIsNotContractAddress:"Desired asset address isn't a contract address",assetAddressHasInvalidLength:"Desired asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol"}),j()(ze,"successUrlErrors",{invalidUrl:ze.errors.invalidSuccessUrl,invalidProtocol:ze.errors.successUrlHasInvalidProtocol}),j()(ze,"cancelUrlErrors",{invalidUrl:ze.errors.invalidCancelUrl,invalidProtocol:ze.errors.cancelUrlHasInvalidProtocol});class De{constructor(){}}class Ue{constructor(){j()(this,"listeners",new Set)}addListener(e){return this.listeners.add(e),this}removeListener(e){return this.listeners.has(e)&&this.listeners.delete(e),this}removeAllListeners(){return this.listeners=new Set,this}emit(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.listeners.size&&(1===this.listeners.size?this.listeners.values().next().value(...t):[...this.listeners].forEach((e=>e(...t))))}}class Ie{constructor(e){this.objectFieldTypes=e}get minObjectFieldsCount(){if(!this._minObjectFieldsCount){let e=0;for(const t of this.objectFieldTypes)("string"===typeof t[1]?"undefined"!==t[1]:t[1].every((e=>"undefined"!==e)))&&e++;this._minObjectFieldsCount=e}return this._minObjectFieldsCount}get maxObjectFieldsCount(){return this.objectFieldTypes.size}validate(e){if(!e)return!1;const t=Object.getOwnPropertyNames(e);if(t.length<this.minObjectFieldsCount||t.length>this.maxObjectFieldsCount)return!1;for(const[a,s]of this.objectFieldTypes){const t=e[a],n=null===t?"null":typeof t;if(Array.isArray(s)?!s.some((e=>n===e)):n!==s)return!1}return!0}}class Ke{constructor(e){this.objectSerializationValidator=new Ie(e)}serialize(e){try{if(!this.objectSerializationValidator.validate(e))return null;const t=JSON.stringify(e);return P(t,"base64url")}catch{return null}}}class Ee{constructor(e){this.objectSerializationValidator=new Ie(e)}deserialize(e){try{let t;if(e){const a=T(e,"base64url");t=JSON.parse(a)}else t={};return this.objectSerializationValidator.validate(t)?t:null}catch{return null}}}(new Map).set("a","string").set("d","number").set("i",["number","undefined","null"]),(new Map).set("c","string").set("cl",["string","undefined","null"]).set("k","string");const Le=(new Map).set("i","string").set("a","string").set("t","string").set("as",["object","undefined","null"]).set("d",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("c","number").set("e",["number","undefined","null"]).set("s","object");class Fe{serialize(e){try{const t=this.mapPaymentToSerializedPayment(e);return Fe.serializedPaymentBase64Serializer.serialize(t)}catch{return null}}mapPaymentToSerializedPayment(e){var t,a,s;return{i:e.id,a:e.amount.toString(10),t:e.targetAddress,as:e.asset?this.mapPaymentAssetToSerializedPaymentAsset(e.asset):void 0,d:e.data,su:null===(t=e.successUrl)||void 0===t?void 0:t.toString(),cu:null===(a=e.cancelUrl)||void 0===a?void 0:a.toString(),c:e.created.getTime(),e:null===(s=e.expired)||void 0===s?void 0:s.getTime(),s:this.mapPaymentSignatureToSerializedPaymentSignature(e.signature)}}mapPaymentAssetToSerializedPaymentAsset(e){return{a:e.address,d:e.decimals,i:null!==e.id?e.id:void 0}}mapPaymentSignatureToSerializedPaymentSignature(e){return{k:e.signingPublicKey,c:e.contract,cl:e.client}}}j()(Fe,"serializedPaymentBase64Serializer",new Ke(Le));class Be{deserialize(e){try{const t=Be.serializedPaymentBase64Deserializer.deserialize(e);return t?this.mapSerializedPaymentToPayment(t):null}catch{return null}}mapSerializedPaymentToPayment(e){return{type:se.Payment,id:e.i,amount:new r.a(e.a),targetAddress:e.t,asset:e.as?this.mapSerializedPaymentAssetToPaymentAsset(e.as):void 0,data:e.d,successUrl:e.su?new we(e.su):void 0,cancelUrl:e.cu?new we(e.cu):void 0,created:new Date(e.c),expired:e.e?new Date(e.e):void 0,signature:this.mapSerializedPaymentSignatureToPaymentSignature(e.s)}}mapSerializedPaymentAssetToPaymentAsset(e){return{address:e.a,decimals:e.d,id:void 0!==e.i?e.i:null}}mapSerializedPaymentSignatureToPaymentSignature(e){return{signingPublicKey:e.k,contract:e.c,client:e.cl}}}j()(Be,"serializedPaymentBase64Deserializer",new Ee(Le)),(new Map).set("a","string").set("i",["number","undefined","null"]),(new Map).set("cl","string").set("k","string");const Me=(new Map).set("d",["object","undefined","null"]).set("da",["string","undefined","null"]).set("das",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("s",["object","undefined","null"]);class Re{serialize(e){try{const t=this.mapDonationToSerializedDonation(e),a=Re.serializedDonationBase64Serializer.serialize(t);return"e30"===a?"":a}catch{return null}}mapDonationToSerializedDonation(e){var t,a,s;return{d:e.data,da:null===(t=e.desiredAmount)||void 0===t?void 0:t.toString(10),das:e.desiredAsset?this.mapDonationAssetToSerializedDonationAsset(e.desiredAsset):void 0,su:null===(a=e.successUrl)||void 0===a?void 0:a.toString(),cu:null===(s=e.cancelUrl)||void 0===s?void 0:s.toString(),s:e.signature?this.mapDonationSignatureToSerializedDonationSignature(e.signature):void 0}}mapDonationAssetToSerializedDonationAsset(e){return{a:e.address,i:null!==e.id?e.id:void 0}}mapDonationSignatureToSerializedDonationSignature(e){return{k:e.signingPublicKey,cl:e.client}}}j()(Re,"serializedDonationBase64Serializer",new Ke(Me));class We{deserialize(e,t){try{const a=We.serializedDonationBase64Deserializer.deserialize(e);return a?this.mapSerializedDonationToDonation(a,t):null}catch{return null}}mapSerializedDonationToDonation(e,t){return{type:se.Donation,data:e.d,desiredAmount:e.da?new r.a(e.da):void 0,desiredAsset:e.das?this.mapSerializedDonationAssetToDonationAsset(e.das):void 0,successUrl:e.su?new we(e.su):void 0,cancelUrl:e.cu?new we(e.cu):void 0,targetAddress:t.targetAddress,signature:e.s?this.mapSerializedDonationSignatureToDonationSignature(e.s):void 0}}mapSerializedDonationAssetToDonationAsset(e){return{address:e.a,id:void 0!==e.i?e.i:null}}mapSerializedDonationSignatureToDonationSignature(e){return{signingPublicKey:e.k,client:e.cl}}}j()(We,"serializedDonationBase64Deserializer",new Ee(Me));class Ve extends De{static validate(e){return Ve.defaultValidator.validate(e)}static deserialize(e){return Ve.defaultDeserializer.deserialize(e)}}j()(Ve,"defaultDeserializer",new Be),j()(Ve,"defaultValidator",new Pe);class He extends De{static validate(e){return He.defaultValidator.validate(e)}static deserialize(e,t){return He.defaultDeserializer.deserialize(e,t)}}var Ze;j()(He,"defaultDeserializer",new We),j()(He,"defaultValidator",new ze),function(e){e[e.Base64=0]="Base64"}(Ze||(Ze={}));const Ye=new Map(Object.keys(Ze).filter((e=>!isNaN(+e))).map((e=>[+e,Y(e,2,"0")]))),Ge=(e,t)=>(e.template=t,e);var Je;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation",e[e.All=3]="All"}(Je||(Je={}));const Xe={name:"",description:"",links:H.emptyArray,version:0,metadata:"",contractAddress:"",allowedTokens:{tez:!0,assets:H.emptyArray},allowedOperationType:Je.Payment,owner:"",paused:!1,deleted:!1,network:re.mainnet,signingKeys:H.emptyMap};var qe,Qe,$e;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(qe||(qe={})),function(e){e[e.Incoming=0]="Incoming",e[e.Outgoing=1]="Outgoing"}(Qe||(Qe={})),function(e){e[e.Pending=0]="Pending",e[e.Success=1]="Success",e[e.Cancelled=2]="Cancelled"}($e||($e={}));class et extends De{static parsePayload(e){const t=I(e);let a=null;try{a=JSON.parse(t)}catch{}return{value:a,valueString:t,encodedValue:e}}}const tt={prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"mutez"}]},at={prim:"pair",args:[{prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"pair",args:[{prim:"nat"},{prim:"address"}]}]},{prim:"option",args:[{prim:"nat"}]}]};class st{encode(e){return{contractSignPayload:this.getContractSignPayload(e),clientSignPayload:this.getClientSignPayload(e)}}getContractSignPayload(e){return"0x"+(e.asset?Object(f.b)({prim:"Pair",args:[{prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{prim:"Pair",args:[{int:K(e.amount,e.asset.decimals).toString(10)},{string:e.asset.address}]}]},void 0!==e.asset.id&&null!==e.asset.id?{prim:"Some",args:[{int:e.asset.id.toString()}]}:{prim:"None"}]},at):Object(f.b)({prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{int:L(e.amount).toString(10)}]},tt)).bytes}getClientSignPayload(e){var t,a;const s={data:e.data,successUrl:null===(t=e.successUrl)||void 0===t?void 0:t.href,cancelUrl:null===(a=e.cancelUrl)||void 0===a?void 0:a.href},n=JSON.stringify(s,((e,t)=>void 0!==t&&null!==t&&""!==t?t:void 0));if("{}"===n)return null;const i="54657a6f73205369676e6564204d6573736167653a205061796d656e7420436c69656e7420446174613a20"+U(n);return"0x0501"+Y((i.length/2).toString(16),8,"0")+i}}j()(st,"contractPaymentInTezSignPayloadMichelsonType",tt),j()(st,"contractPaymentInAssetSignPayloadMichelsonType",at);class nt{constructor(){j()(this,"_isInitialized",!1)}get isInitialized(){return this._isInitialized}generate(){if(!this.isInitialized)throw new Error("Ed25519 key generator is not initialized");const e=_.a.crypto_sign_keypair("uint8array"),t={keyType:Oe.Ed25519,privateKey:e.privateKey,publicKey:e.publicKey};return{raw:t,encoded:{keyType:Oe.Ed25519,privateKey:Object(S.d)(t.privateKey,S.n.edsk),publicKey:Object(S.d)(t.publicKey,S.n.edpk)}}}async initialize(){await _.a.ready,this._isInitialized=!0}static async create(){const e=new nt;return await e.initialize(),e}}class it{constructor(e){this.ec=new N.ec(e),this.curveInfo=it.curveInfo[e]}generate(){const e=this.ec.genKeyPair();console.log(e);const t=e.getPublic(),a=t.getX().toArray(),s=t.getY().toArray(),n=s[s.length-1]%2?3:2,i=new Uint8Array(e.getPrivate().toArray()),r=new Array(32).fill(0),c=new Uint8Array([n].concat(r.concat(a).slice(-32)));return{raw:{keyType:Oe.P256,privateKey:i,publicKey:c},encoded:{keyType:this.curveInfo.keyType,privateKey:Object(S.d)(i,this.curveInfo.privateKeyPrefix),publicKey:Object(S.d)(c,this.curveInfo.publicKeyPrefix)}}}}j()(it,"curveInfo",{secp256k1:{name:"secp256k1",keyType:Oe.Secp256k1,privateKeyPrefix:S.n.spsk,publicKeyPrefix:S.n.sppk},p256:{name:"p256",keyType:Oe.P256,privateKeyPrefix:S.n.p2sk,publicKeyPrefix:S.n.p2pk}});class rt{async publicKeyHash(){return"tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A"}async publicKey(){return"edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K"}async secretKey(){throw new Error("Secret key cannot be exposed")}async sign(){throw new Error("Cannot sign")}}const ct={links:{tezosPayments:{webSite:"https://tezospayments.com",paymentsApp:"https://payment.tezospayments.com",gitHub:"https://github.com/fastwaterbear/tezospayments",telegram:"https://t.me/fastwaterbear",twitter:"https://twitter.com/fastwaterbear",reddit:"https://www.reddit.com/user/fastwaterbear"}},tezos:{defaultNetwork:"hangzhounet",networks:{mainnet:{title:"Mainnet",color:"83b300",minimumSupportedServiceVersion:3,default:{rpc:"ecadLabs",indexer:"tzKT",explorer:"tzKT"},rpcUrls:{ecadLabs:"https://mainnet.api.tez.ie",smartPy:"https://mainnet.smartpy.io"},indexerUrls:{tzKT:"https://api.tzkt.io",betterCallDev:"https://api.better-call.dev"},explorers:{tzKT:{baseUrl:"https://tzkt.io",title:"TzKT"},betterCallDev:{baseUrl:"https://better-call.dev",title:"Better Call Dev"},tzStats:{baseUrl:"https://tzstats.com",title:"TzStats"}},servicesFactoryContractAddress:"Not implemented"},hangzhounet:{title:"Hangzhou Testnet",color:"#b83280",minimumSupportedServiceVersion:1,default:{rpc:"smartPy",indexer:"tzKT",explorer:"tzKT"},rpcUrls:{ecadLabs:"https://hangzhounet.api.tez.ie",smartPy:"https://hangzhounet.smartpy.io"},indexerUrls:{tzKT:"https://api.hangzhou2net.tzkt.io",betterCallDev:"https://api.better-call.dev"},explorers:{tzKT:{baseUrl:"https://hangzhou2net.tzkt.io",title:"TzKT"},betterCallDev:{baseUrl:"https://better-call.dev",title:"Better Call Dev"},tzStats:{baseUrl:"https://hangzhou.tzstats.com",title:"TzStats"}},servicesFactoryContractAddress:"KT1BLQ4tfy5iizuCSaR5D8sSDiQSemhvnAif"}}}};class ot{constructor(e,t){this.network=e,this.baseUrl=t}}class lt extends ot{getEntityUrl(e){return"".concat(this.baseUrl,"/").concat(e)}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class dt extends ot{getEntityUrl(e){return ge.addressPrefixes.some((t=>e.startsWith(t)))?this.getAccountUrl(e):this.getOperationUrl(e)}getOperationUrl(e){return"".concat(this.baseUrl,"/").concat(this.network.name,"/opg/").concat(e,"/contents")}getAccountUrl(e){return"".concat(this.baseUrl,"/").concat(this.network.name,"/").concat(e)}}class ut extends ot{getEntityUrl(e){return"".concat(this.baseUrl,"/").concat(e)}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class mt{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=be.get(this.network)||H.emptyMap}async getService(e){const t=await fetch("".concat(this.baseUrl,"/v1/contracts/").concat(e,"/storage")),a=await t.json();if("version"in a&&+a.version<this.minimumSupportedServiceVersion)return null;const s=this.mapServiceDtoToService(a,e,this.network);if(!s)throw new Error("Service not found");return s}async getServices(e){const t="".concat(this.baseUrl,"/v1/contracts/").concat(this.servicesFactoryContractAddress,"/bigmaps/services/keys"),a=await fetch(t);if((await a.json()).every((t=>t.key!==e)))return[];const s=await fetch("".concat(t,"/").concat(e)),n=(await s.json()).value;return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL("v1/accounts/".concat(e,"/operations"),this.baseUrl);t.searchParams.set("type","transaction"),t.searchParams.set("entrypoint.in","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).map((e=>this.mapOperationDtoToServiceOperation(e))).filter(Boolean)}mapServiceDtoToService(e,t,a){const s=F.bytesToObject(e.metadata);return!s||"string"!==typeof s.name||!M.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||H.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e.version,metadata:e.metadata,contractAddress:t,network:a,allowedTokens:{tez:e.allowed_tokens.tez,assets:e.allowed_tokens.assets},allowedOperationType:+e.allowed_operation_type,owner:e.owner,paused:e.paused,deleted:e.deleted,signingKeys:this.mapSigningKeyDtosToSigningKeys(e.signing_keys)}}mapSigningKeyDtosToSigningKeys(e){return Object.keys(e).reduce(((t,a)=>{var s;return t.set(a,{publicKey:a,name:(null===(s=e[a])||void 0===s?void 0:s.name)||void 0})}),new Map)}mapOperationDtoToServiceOperation(e){var t,a,s;const n=e.parameter.value.asset_value?(null===(a=null===(t=this.tokenWhiteList.get(e.parameter.value.asset_value.token_address))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:me,i=e.parameter.value.asset_value?e.parameter.value.asset_value.value:e.amount.toString(),c="send_payment"===e.parameter.entrypoint?qe.Payment:qe.Donation,o={hash:e.hash,type:c,direction:Qe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,amount:F.numberToTokensAmount(new r.a(i),n),asset:null===(s=e.parameter.value.asset_value)||void 0===s?void 0:s.token_address,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.sender.address,target:e.target.address};switch(o.type){case qe.Payment:{const t=o;return t.paymentId=e.parameter.value.id,t}case qe.Donation:{const t=o;return t.payload=et.parsePayload(e.parameter.value.payload),t}default:return null}}}class pt{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=be.get(this.network)||H.emptyMap}async getService(e){var t;const a=await fetch("".concat(this.baseUrl,"/v1/contract/").concat(this.network.name,"/").concat(e,"/storage")),s=await a.json();if(+(null===(t=null===s||void 0===s?void 0:s[0].children)||void 0===t?void 0:t[s[0].children.length-1]).value<this.minimumSupportedServiceVersion)return null;const n=this.mapServiceDtoToService(s,e,this.network);if(!n)throw new Error("Service not found");return n}async getServices(e){const t=(await this.getServicesFactoryDto())[0].children[4].value,a=await fetch("".concat(this.baseUrl,"/v1/bigmap/").concat(this.network.name,"/").concat(t,"/keys")),s=(await a.json()).find((t=>t.data.key_string===e));if(!s)return H.emptyArray;const n=s.data.value.children.map((e=>e.value));return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL("v1/contract/".concat(this.network.name,"/").concat(e,"/operations"),this.baseUrl);t.searchParams.set("entrypoints","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).operations.filter((e=>!e.internal)).filter((e=>"send_payment"===e.entrypoint||"send_donation"===e.entrypoint)).map((e=>"send_payment"===e.entrypoint?this.mapSendPaymentOperationToServiceOperation(e):this.mapSendDonationOperationToServiceOperation(e))).filter(Boolean)}async getServicesFactoryDto(){return(await fetch("".concat(this.baseUrl,"/v1/contract/").concat(this.network.name,"/").concat(this.servicesFactoryContractAddress,"/storage"))).json()}mapServiceDtoToService(e,t,a){let s;try{s=JSON.parse(e[0].children[4].value)}catch{return null}return!s||"string"!==typeof s.name||!M.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||H.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e[0].children[8].value,metadata:F.stringToBytes(e[0].children[4].value),contractAddress:t,network:a,allowedTokens:{tez:e[0].children[1].children[0].value,assets:H.emptyArray},allowedOperationType:+e[0].children[0].value,owner:e[0].children[5].value,paused:e[0].children[6].value,deleted:e[0].children[3].value,signingKeys:e[0].children[7].children?this.mapSigningKeyDtosToSigningKeys(e[0].children[7].children):new Map}}mapSigningKeyDtosToSigningKeys(e){return e.reduce(((e,t)=>{const a=t.children[0].value,s=t.children[1].value;return e.set(a,{publicKey:a,name:"None"!==s?s:void 0})}),new Map)}mapSendPaymentOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[1].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(a=null===(t=this.tokenWhiteList.get(n))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:me,o=i||(e.amount||0).toString();return{hash:e.hash,type:qe.Payment,direction:Qe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,paymentId:e.parameters[0].children[0].value,amount:F.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination}}mapSendDonationOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[0].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(a=null===(t=this.tokenWhiteList.get(n))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:me,o=i||(e.amount||0).toString();return{hash:e.hash,type:qe.Donation,direction:Qe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,amount:F.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination,payload:et.parsePayload(F.stringToBytes(e.parameters[0].children[1].value))}}}class vt{constructor(e){this.tezosToolkit=e}async getTezosBalance(e){return(await this.tezosToolkit.tz.getBalance(e)).div(10**me)}async getTokenBalance(e,t){let a=null;switch(t.type){case"fa1.2":a=await this.getFA12TokenBalance(e,t);break;case"fa2":a=await this.getFA2TokenBalance(e,t);break;default:throw new Error("Not Supported")}const s=t.metadata?10**t.metadata.decimals:1;return a.div(s)}async getFA12TokenBalance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return await(null===(s=(a=n.views).getBalance)||void 0===s?void 0:s.call(a,e).read())||0}async getFA2TokenBalance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return(await(null===(s=null===(a=n.views)||void 0===a?void 0:a.balance_of)||void 0===s?void 0:s.call(a,[{owner:e,token_id:t.id}]).read()))[0].balance||0}}const ht=e=>{if(e===v.p.HANGZHOUNET)return re.hangzhounet;throw new Error("Not Supported network type")},bt=e=>{if(e===re.hangzhounet)return v.p.HANGZHOUNET;throw new Error("Not Supported network type")},yt="6d37c86",jt={...ct,app:{publicUrl:"/",name:"Tezos Payments Dashboard",title:"Tezos Payments",version:{name:"Dev Version",link:"https://github.com/fastwaterbear/tezospayments/tree/master"},buildInfo:{commitShortSha:yt,link:"https://github.com/fastwaterbear/tezospayments/tree/".concat(yt)}},routers:{overview:"/",analytics:"/analytics",operations:"/operations",services:"/services",service:Ge(((e,t)=>t?"/services/".concat(e,"?edit=true"):"/services/".concat(e)),"/services/:address"),createService:"/services/create",acceptPayments:"/accept",acceptServicePayments:Ge((e=>"/accept/".concat(e)),"/accept/:address"),connect:"/connect",about:"/about"},links:{...ct.links,tzKT:"https://tzkt.io"}};class gt{constructor(e,t){this.dAppClient=e,this.balancesProvider=t}async connect(e){return this.dAppClient.requestPermissions({network:{type:s.networkToBeaconNetwork(e)}}).then((t=>({address:t.address,publicKey:t.publicKey,network:e}))).catch((e=>(console.error(e),this.dAppClient.clearActiveAccount(),null)))}disconnect(){return this.dAppClient.clearActiveAccount()}async getActiveAccount(){const e=await this.dAppClient.getActiveAccount();return e?{address:e.address,publicKey:e.publicKey,network:s.beaconNetworkToNetwork(e.network.type)}:void 0}async getTezosBalance(e){return this.balancesProvider.getTezosBalance(e.address)}async getTokenBalance(e,t){return this.balancesProvider.getTokenBalance(e.address,t)}}var Ot=a(309),wt=a(58);const xt=e=>e.accountsState,kt=Object(wt.createSelector)(xt,(e=>e.currentAccount&&e.connectedAccounts.find((t=>{var a;return t.address===(null===(a=e.currentAccount)||void 0===a?void 0:a.address)&&t.network.id===e.currentAccount.network.id}))||null)),ft=Object(wt.createSelector)(xt,(e=>e.connectedAccounts.reduce(((e,t)=>e.set(t.network,[...e.get(t.network)||[],t])),new Map))),St=Object(wt.createSelector)(kt,(e=>e&&jt.tezos.networks[e.network.name])),At=Object(wt.createSelector)(xt,(e=>{var t;const a=null===(t=e.currentAccount)||void 0===t?void 0:t.network;return a&&be.get(a)||H.emptyMap})),_t=e=>e.servicesState,Nt=Object(wt.createSelector)(_t,At,((e,t)=>{const a=new Set;return e.services.forEach((e=>e.allowedTokens.assets.forEach((e=>{const s=t.get(e);s&&a.add(s)})))),[...a]})),Ct=Object(wt.createSelector)(_t,(e=>e.services.some((e=>e.allowedTokens.tez)))),Tt=Object(wt.createSelector)(_t,(e=>[...e.services].sort(((e,t)=>e.name.localeCompare(t.name))))),Pt=Object(wt.createSelector)(_t,(e=>{if(!e.pendingOperations.length)return H.emptyMap;const t=new Map;return e.pendingOperations.forEach((e=>{const a=t.get(e.serviceAddress);a?a.push(e):t.set(e.serviceAddress,[e])})),t})),zt={tezos:H.zeroBigNumber,tokens:H.emptyObject,initialized:!1},Dt="balances",Ut=Object(n.b)("".concat(Dt,"/loadBalances"),(async(e,t)=>{let{extra:a,getState:s}=t;const n=await a.services.accountsService.getTezosBalance(e),i=Nt(s()),r={},c=i.map((t=>a.services.accountsService.getTokenBalance(e,t)));return(await Promise.all(c)).forEach(((e,t)=>{var a;const s=null===(a=i[t])||void 0===a?void 0:a.contractAddress;s&&(r[s]=e)})),{tezos:n,tokens:r}})),It=Object(n.c)({name:Dt,initialState:zt,reducers:{clearBalances:e=>{e.tezos=H.zeroBigNumber,e.tokens=H.emptyObject,e.initialized=!1}},extraReducers:e=>{e.addCase(Ut.fulfilled,((e,t)=>{const{tezos:a,tokens:s}=t.payload;e.tezos=a,e.tokens=s,e.initialized=!0}))}}),{clearBalances:Kt}=It.actions,Et={operations:H.emptyArray,initialized:!1},Lt="operations",Ft=Object(n.b)("".concat(Lt,"/loadOperations"),(async(e,t)=>{let{servicesAddresses:a}=e,{extra:s}=t;const n=a.map((e=>s.services.servicesService.getOperations(e)));return(await Promise.all(n)).flat()})),Bt=Object(n.c)({name:Lt,initialState:Et,reducers:{clearOperations:e=>{e.operations=H.emptyArray,e.initialized=!1}},extraReducers:e=>{e.addCase(Ft.fulfilled,((e,t)=>{e.operations=t.payload,e.initialized=!0}))}}),{clearOperations:Mt}=Bt.actions;let Rt;!function(e){e[e.loading=0]="loading",e[e.success=1]="success",e[e.error=2]="error"}(Rt||(Rt={}));const Wt={services:H.emptyArray,initialized:!1,pendingOperations:H.emptyArray},Vt="services",Ht=Object(n.b)("".concat(Vt,"/loadServices"),(async(e,t)=>{let{extra:a,dispatch:s}=t;const n=await a.services.servicesService.getServices(e);return n.length&&s(Ft({servicesAddresses:n.map((e=>e.contractAddress)),network:e.network})),n})),Zt=Object(n.b)("".concat(Vt,"/updateService"),(async(e,t)=>{let{extra:a,dispatch:s,getState:n}=t;const i=await a.services.servicesService.updateService(e);await ta(s,i,e.contractAddress,"updating"),ea(s,n)})),Yt=Object(n.b)("".concat(Vt,"/createService"),(async(e,t)=>{let{extra:a,dispatch:s,getState:n}=t;const i=await a.services.servicesService.createService(e);await ta(s,i,e.contractAddress,"creating new service"),ea(s,n)})),Gt=Object(n.b)("".concat(Vt,"/setPaused"),(async(e,t)=>{let{service:a,paused:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.setPaused(a,s);await ta(i,c,a.contractAddress,s?"pausing":"unpausing"),ea(i,r)})),Jt=Object(n.b)("".concat(Vt,"/setDeleted"),(async(e,t)=>{let{service:a,deleted:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.setDeleted(a,s);await ta(i,c,a.contractAddress,s?"deleting":"undeleting"),ea(i,r)})),Xt=Object(n.b)("".concat(Vt,"/addApiKey"),(async(e,t)=>{let{service:a,signingKey:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.addApiKey(a,s);await ta(i,c,a.contractAddress,"adding API key"),ea(i,r)})),qt=Object(n.b)("".concat(Vt,"/deleteApiKey"),(async(e,t)=>{let{service:a,publicKey:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.deleteApiKey(a,s);await ta(i,c,a.contractAddress,"deleting API key"),ea(i,r)})),Qt=Object(n.b)("".concat(Vt,"/clearServices"),(async(e,t)=>{let{dispatch:a}=t;a(Mt())})),$t=(e,t,a,s)=>({hash:e,action:a,serviceAddress:t,targetConfirmationCount:s,confirmationCount:0,status:Rt.loading}),ea=(e,t)=>{const a=kt(t());a&&e(Ht(a))},ta=function(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;const i=$t(t.opHash,a,s,n);return e(sa(i)),new Promise(((a,s)=>{t.confirmationObservable(n).subscribe((t=>e(ia({hash:i.hash,confirmationCount:t.currentConfirmation}))),(async t=>{e(na({hash:i.hash,status:Rt.error})),s(t),await J(1e3),e(ra(i.hash))}),(async()=>{e(na({hash:i.hash,status:Rt.success})),a(),await J(1e3),e(ra(i.hash))}))}))},aa=Object(n.c)({name:Vt,initialState:Wt,reducers:{addPendingOperation:(e,t)=>{const a=t.payload;e.pendingOperations.push(a)},setPendingOperationStatus:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.status=t.payload.status)},setPendingOperationConfirmationCount:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.confirmationCount=t.payload.confirmationCount)},deletePendingOperation:(e,t)=>{e.pendingOperations=e.pendingOperations.filter((e=>e.hash!==t.payload))}},extraReducers:e=>{e.addCase(Ht.fulfilled,((e,t)=>({...e,services:t.payload,initialized:!0}))),e.addCase(Qt.fulfilled,(e=>({...e,services:H.emptyArray,initialized:!1})))}}),{addPendingOperation:sa,setPendingOperationStatus:na,setPendingOperationConfirmationCount:ia,deletePendingOperation:ra}=aa.actions;const ca=l.a.createContext({});var oa=a(630),la=a(28);const da={currentAccount:null,connectedAccounts:H.emptyArray,initialized:!1},ua="accounts",ma=Object(n.b)("".concat(ua,"/loadActiveAccount"),(async(e,t)=>{let{extra:a}=t;return await a.services.accountsService.getActiveAccount()||null})),pa=Object(n.b)("".concat(ua,"/connect"),((e,t)=>{let{extra:a}=t;return a.services.accountsService.connect(e)})),va=Object(n.b)("".concat(ua,"/disconnect"),((e,t)=>{let{extra:a}=t;return a.services.accountsService.disconnect()})),ha=Object(n.c)({name:ua,initialState:da,reducers:{},extraReducers:e=>{e.addCase(ma.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a)),e.initialized=!0})),e.addCase(pa.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a))})),e.addCase(va.fulfilled,(e=>{e.connectedAccounts=e.connectedAccounts.filter((t=>{var a,s;return t.address!==(null===(a=e.currentAccount)||void 0===a?void 0:a.address)||t.network.id!==(null===(s=e.currentAccount)||void 0===s?void 0:s.network.id)}));const t=e.connectedAccounts[0];e.currentAccount=t?{address:t.address,network:t.network}:null}))}}),ba={id:"en-US",resources:{common:{comingSoon:"Coming soon",copy:"Copy",copyLink:"Copy Link",open:"Open",new:"New",cancel:"Cancel",save:"Save",yes:"Yes",no:"No",period:{allTime:"All time",lastWeek:"Last week",lastMonth:"Last month",lastYear:"Last year"}},views:{header:{accountActions:{copyAddress:{title:"Copy address"},viewOn:"View on",connectAnotherAccount:{title:"Connect another account"},disconnect:{title:"Disconnect"}}},overview:{title:"Overview",balances:{title:"Balances"},incoming:{title:"Incoming"},outgoing:{title:"Outgoing"},operationCount:{title:"Operation count"},volume:{title:"Volume"}},analytics:{title:"Analytics",revenue:"Revenue",profit:"Profit",volume:"Volume",all:"All",incoming:"Incoming",outgoing:"Outgoing",maximumPayment:"Maximum Payment",maximumDonation:"Maximum Donation",newCustomers:"New Customers",newDonators:"New Donators",refund:"Refund",success:"Success",failed:"Failed",operationsCountByTokens:"Operations Count by Tokens",operationsCountByTypes:"Operations Count by Types",currency:{usd:"USD"},view:{services:"Services",donations:"Donations"}},createService:{title:"Create Service"},connect:{actions:{connect:{title:"Connect",connectTo:"Connect to",description:"In order to use the ".concat(jt.app.title," service you have to connect a Tezos account")}}},about:{title:"About",detailedTitle:"Decentralized Payment Solution built on Tezos blockchain",build:"build",poweredBy:"Powered by",tzKt:"TzKT",api:"API"},operations:{title:"Operations",operationList:{paymentId:"Payment Id:",donationData:"Donation Data:",income:"Income",expense:"Expense",cancelled:"Cancelled",pending:"Pending",noOperationsPerformedYet:"No operations performed yet"}},services:{title:"Services",status:{active:"Active",paused:"Paused",deleted:"Deleted",updating:"Updating"},createNewService:"Create New Service",acceptPayments:"Accept Payments",acceptPaymentsDescription:"Generate a payment link using our constructor to accept payments on your service",youDoNotHaveAnyServicesYet:"You don't have any services yet",createYourFirstService:"Create your first service to accept payments or connect another Tezos account",operations:{paymentsEnabled:"Payments Enabled",donationsEnabled:"Donations Enabled"},allowedCurrencies:"Allowed Currencies",service:"Service",links:"Links",dangerZone:{title:"Danger Zone",pauseService:"Pause Service",pauseServiceConfirmation:"Are you sure you want to pause the service",pauseServiceDescription:"Pause accepting payments and donations",unPauseService:"Unpause Service",unPauseServiceConfirmation:"Are you sure you want to unpause the service",unPauseServiceDescription:"Accepting payments and donations are paused",deleteService:"Delete Service",deleteServiceConfirmation:"Are you sure you want to delete the service",deleteServiceDescription:"Delete this service. After deleting this service can\u2019t accept payments and donations. You can restore the deleted service",unDeleteService:"Undelete Service",unDeleteServiceConfirmation:"Are you sure you want to undelete the service",unDeleteServiceDescription:"Service is marked as deleted"},devZone:{title:"API Keys",addKey:"Add Key",saveKeys:"Save Keys",generateKeys:"Generate Keys",name:"Name",algorithm:"Algorithm",publicKey:"Public Key",secretKey:"Secret Key",saveSecretKeyWarning:"Write down the secret key, we will never show it again",saveSecretKeyConfirm:"Have you written down the secret key?",noApiKeysAddedYet:"No API keys added yet",deleteKeyConfirmation:"Are you sure you want to delete the API key"},editing:{editService:"Edit Service",updateService:"Update Service",createService:"Create Service",addCurrency:"Add Currency",addLink:"Add Link",serviceName:"Service Name",description:"Description",accept:"Accept",acceptPayments:"Accept Payments",acceptDonations:"Accept Donations"}},settings:{title:"Settings"},acceptPayments:{title:"Accept Payments",type:"Type",amount:"Amount",paymentData:"Payment Data",paymentId:"Payment ID",paymentIdHelpText:"Payment ID/invoice number/any unique identifier in your system",donationData:"Donation Data",donationDescription:"Short description on the page",generateAndSignPaymentLink:"Generate and Sign Payment Link",donationDescriptionHelpText:"This message will be shown to your donators when they will donate",directLinkPaymentHelpText:"Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc",directLinkDonationHelpText:"Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link",errors:{fillRequiredData:"Fill required data to generate corresponding content"}}}}},ya=()=>ba.resources,ja=m.b,ga=m.c,Oa=()=>Object(o.useContext)(ca);var wa=a(310),xa=a(328),ka={defaultNetworkName:"mainnet",paymentAppBaseUrl:"https://payment.tezospayments.com"};const fa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce(((e,t,a)=>"".concat(e,"\n\t").concat(a+1,". ").concat(t,";")),t)};class Sa extends Error{constructor(e){super(e),this.name=this.constructor.name}}class Aa extends Sa{constructor(e){super(M.isReadonlyArray(e)?Aa.getMessage(e):e)}static getMessage(e){return fa(e,"options are invalid, see details below:")}}class _a extends Sa{}class Na extends Sa{constructor(e){super(M.isReadonlyArray(e)?Na.getMessage(e):e)}static getMessage(e){return fa(e,"payment is invalid, see details below:")}}class Ca extends Sa{}class Ta extends Sa{}class Pa extends Sa{}var za=Object.freeze({__proto__:null,TezosPaymentsError:Sa,InvalidTezosPaymentsOptionsError:Aa,InvalidPaymentCreateParametersError:_a,InvalidPaymentError:Na,UnsupportedPaymentUrlTypeError:Ca,PaymentUrlError:Ta,DonationUrlError:Pa});class Da{constructor(e){this.urlType=e}}class Ua extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua.baseUrl;super(Ze.Base64),j()(this,"paymentSerializer",new Fe),j()(this,"donationSerializer",new Re),this.baseUrl=e}createPaymentUrl(e,t){return e.type===se.Payment?this.createPaymentUrlInternal(e,t):this.createDonationUrlInternal(e,t)}createPaymentUrlInternal(e,t){const a=this.paymentSerializer.serialize(e);if(!a)throw new Ta("It's impossible to serialize the payment");try{const e=new xe.URL(this.baseUrl);return this.createUrl(e,a,t)}catch(s){throw new Ta("It's impossible to create an URL for the payment")}}createDonationUrlInternal(e,t){const a=this.donationSerializer.serialize(e);if(!a&&""!==a)throw new Pa("It's impossible to serialize the donation");try{const s=new xe.URL("".concat(e.targetAddress,"/donation"),this.baseUrl);return this.createUrl(s,a,t)}catch(s){throw new Pa("It's impossible to create an URL for the donation")}}createUrl(e,t,a){var s;return""!==t&&(e.hash=(s=this.urlType,(Ye.get(s)||"")+t)),a.name!==ka.defaultNetworkName&&e.searchParams.append("network",a.name),e.href}}j()(Ua,"baseUrl",ka.paymentAppBaseUrl);var Ia,Ka=Object.freeze({__proto__:null,PaymentUrlFactory:Da,Base64PaymentUrlFactory:Ua});class Ea{constructor(e){this.signingType=e}}!function(e){e[e.ApiSecretKey=0]="ApiSecretKey",e[e.Wallet=1]="Wallet",e[e.Custom=2]="Custom"}(Ia||(Ia={}));class La extends Ea{constructor(e){super(Ia.ApiSecretKey),j()(this,"paymentSignPayloadEncoder",new st),this.apiSecretKey=e,this.inMemorySigner=new wa.a(this.apiSecretKey)}async sign(e){var t;const a=this.paymentSignPayloadEncoder.encode(e),s=this.inMemorySigner.sign(a.contractSignPayload),n=a.clientSignPayload?[s,this.inMemorySigner.sign(a.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:await this.inMemorySigner.publicKey(),contract:i[0].prefixSig,client:null===(t=i[1])||void 0===t?void 0:t.prefixSig}}}class Fa extends Ea{constructor(e,t){super(Ia.Wallet),j()(this,"paymentSignPayloadEncoder",new st),this.signingPublicKey=e,this.walletSignCallback=t}async sign(e){const t=this.paymentSignPayloadEncoder.encode(e),a=t.contractSignPayload.substring(2),s=this.walletSignCallback(a),n=t.clientSignPayload?[s,this.walletSignCallback(t.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:this.signingPublicKey,contract:i[0],client:i[1]}}}class Ba extends Ea{constructor(e){super(Ia.Custom),this.customSigning=e}sign(e){return this.customSigning(e)}}var Ma=Object.freeze({__proto__:null,TezosPaymentsSigner:Ea,ApiSecretKeySigner:La,WalletSigner:Fa,CustomSigner:Ba});class Ra{validateOptions(e){return[this.validateServiceContractAddress(e.serviceContractAddress),this.validateNetwork(e.network),this.validateSigningOptions(e.signing),this.validateDefaultPaymentParameters(e.defaultPaymentParameters)].reduce(((e,t)=>t?(e||[]).concat(t):e),void 0)}validateServiceContractAddress(e){return e&&"string"===typeof e?e.length!==ge.addressLength?[Ra.errors.serviceContractAddressHasInvalidLength]:ge.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[Ra.errors.serviceContractAddressIsNotContractAddress]:[Ra.errors.invalidServiceContractAddressType]}validateNetwork(e){if(void 0!==e&&null!==e)return"object"!==typeof e?[Ra.errors.invalidNetwork]:void 0===e.name||""===e.name?[Ra.errors.emptyNetworkName]:"string"===typeof e.name&&le.test(e.name)?!e.id||"string"===typeof e.id&&oe.test(e.id)?void 0:[Ra.errors.invalidNetworkId]:[Ra.errors.invalidNetworkName]}validateSigningOptions(e){return"object"!==typeof e?[Ra.errors.invalidSigningOption]:"apiSecretKey"in e||"wallet"in e||"custom"in e?"apiSecretKey"in e?this.validateApiSecretKeySigningOptions(e):"wallet"in e?this.validateWalletSigningOptions(e):"custom"in e?this.validateCustomSigningOptions(e):void 0:[Ra.errors.invalidSigningOption]}validateApiSecretKeySigningOptions(e){return"string"!==typeof e.apiSecretKey?[Ra.errors.invalidApiSecretKeyType]:e.apiSecretKey?void 0:[Ra.errors.emptyApiSecretKey]}validateWalletSigningOptions(e){return"object"!==typeof e.wallet?[Ra.errors.invalidWalletSigningOption]:"string"!==typeof e.wallet.signingPublicKey?[Ra.errors.invalidWalletSigningPublicKey]:e.wallet.signingPublicKey?"function"!==typeof e.wallet.sign?[Ra.errors.invalidWalletSignFunctionType]:void 0:[Ra.errors.emptyWalletSigningPublicKey]}validateCustomSigningOptions(e){if("function"!==typeof e.custom)return[Ra.errors.invalidCustomSigningOption]}validateDefaultPaymentParameters(e){if(void 0!==e)return"object"!==typeof e?[Ra.errors.invalidDefaultPaymentParameters]:"urlType"in e&&e.urlType!==Ze.Base64?[Ra.errors.invalidUrlType]:void 0}}j()(Ra,"errors",{invalidServiceContractAddressType:"Type of the serviceContractAddress option is invalid",serviceContractAddressHasInvalidLength:"The serviceContractAddress option has an invalid address",serviceContractAddressIsNotContractAddress:"The serviceContractAddress option isn't a contract address",invalidSigningOption:"The signing option is invalid",invalidApiSecretKeyType:"The API secret key has an invalid type, it should be a string",emptyApiSecretKey:"The API secret key is empty",invalidWalletSigningOption:'The "signing.wallet" option is invalid',invalidWalletSigningPublicKey:"The wallet signing public key has an invalid type, it should be a string",emptyWalletSigningPublicKey:"The wallet signing public key is empty",invalidWalletSignFunctionType:"The wallet sign function has an invalid type, it should be a function",invalidCustomSigningOption:'The "signing.custom" option has an invalid type, it should be a function',emptyNetworkName:"The network name is empty",invalidNetwork:"The network is invalid",invalidNetworkName:"The network name is invalid",invalidNetworkId:"The network id is invalid",invalidDefaultPaymentParameters:"The default payment parameters are invalid",invalidUrlType:"The url type is invalid"});class Wa{constructor(e){j()(this,"optionsValidator",new Ra),j()(this,"paymentValidator",new Pe),j()(this,"paymentUrlFactories",new Map);const t=this.optionsValidator.validateOptions(e);if(t)throw new Aa(t);this.serviceContractAddress=e.serviceContractAddress,this.network=e.network||re.mainnet,this.defaultPaymentParameters=e.defaultPaymentParameters?{urlType:e.defaultPaymentParameters.urlType||Wa.defaultPaymentParameters.urlType}:Wa.defaultPaymentParameters,this.signer=this.createSigner(e.signing),this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType)}async createPayment(e){if(!e)throw new _a(e);let t;if(e.urlType&&(t=this.optionsValidator.validateDefaultPaymentParameters(e),t))throw new Na(t);const a=this.createPaymentByCreateParameters(e);if(t=this.paymentValidator.validate(a,!0),t)throw new Na(t);const s=await this.getSignedPayment(a);if(t=this.paymentValidator.validate(s,!0),t)throw new Na(t);const n=await this.getPaymentUrl(s,e.urlType);return this.applyPaymentUrl(s,n)}getPaymentUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPaymentParameters.urlType;return this.getPaymentUrlFactory(t).createPaymentUrl(e,this.network)}applyPaymentUrl(e,t){return e.url=t,e}getPaymentUrlFactory(e){let t=this.paymentUrlFactories.get(e);return t||(t=this.createPaymentUrlFactory(e),this.paymentUrlFactories.set(e,t)),t}async getSignedPayment(e){return e.signature=await this.signer.sign(e),e}createSigner(e){return"apiSecretKey"in e?new La(e.apiSecretKey):"wallet"in e?new Fa(e.wallet.signingPublicKey,e.wallet.sign):new Ba(e.custom)}createPaymentUrlFactory(e){if(e===Ze.Base64)return new Ua;throw new Ca("This payment url type is not supported: ".concat(e))}createPaymentByCreateParameters(e){const t={type:se.Payment,id:e.id||Object(xa.a)(),targetAddress:this.serviceContractAddress,amount:new r.a(e.amount),data:e.data,created:e.created?new Date(e.created):new Date};return e.asset&&(t.asset=e.asset),e.expired&&(t.expired=new Date(e.expired)),e.successUrl&&(t.successUrl=new xe.URL(e.successUrl)),e.cancelUrl&&(t.cancelUrl=new xe.URL(e.cancelUrl)),t}}j()(Wa,"defaultPaymentParameters",{urlType:Ze.Base64});const Va={constants:ka,errors:za,paymentUrlFactories:Ka,signers:Ma},Ha=new Map,Za=e=>{var t,a;const s=Oa(),n=null===(t=ga(kt))||void 0===t?void 0:t.network,i=null===(a=ga(kt))||void 0===a?void 0:a.publicKey;if(!e||!i||!n)return null;let r=Ha.get(e);return r||(r=((e,t,a,s)=>new Wa({serviceContractAddress:e,signing:{wallet:{signingPublicKey:t,sign:e=>s.client.requestSignPayload({signingType:v.C.MICHELINE,payload:e}).then((e=>e.signature))}},network:a}))(e,i,n,s.tezosWallet),Ha.set(e,r)),r},Ya={ed25519:new nt,secp256k1:new it("secp256k1"),p256:new it("p256")},Ga=e=>{switch(e){case Oe.Ed25519:return Ya.ed25519.generate().encoded;case Oe.Secp256k1:return Ya.secp256k1.generate().encoded;case Oe.P256:return Ya.p256.generate().encoded;default:throw new Error("Unknown algorithm type")}},Ja=()=>{const[e,t]=Object(o.useState)(Ya.ed25519.isInitialized);return Object(o.useEffect)((()=>{let a=!1;return e||Ya.ed25519.initialize().then((()=>!a&&t(!0))),()=>{a=!0}}),[e]),!!e&&Ga};var Xa=a(1);const qa=jt.routers.connect,Qa=e=>{let{children:t,isConnected:a,connectPath:s=qa}=e;const n=Object(la.f)();return a?t:Object(Xa.jsx)(la.a,{to:s,state:{from:n}})},$a=e=>{const t=ga((e=>e.accountsState.currentAccount));return Object(Xa.jsx)(Qa,{...e,isConnected:!!t})};var es=a(641),ts=a(66),as=a(103);a(493);const ss=e=>{const t=e.value&&!e.value.isZero()&&e.value.isPositive(),a=e.highlightPlus&&t,s=e.value&&!e.value.isZero()&&e.value.isNegative(),n=Object(g.a)("token-list-item__value",{"token-list-item__value_positive":a},{"token-list-item__value_negative":s}),i=s?"-":a?"+":"",r=e.value&&e.value.abs(),[c,o]=void 0!==r&&null!==r?(e=>{const t=e.toFormat(6,{groupSeparator:"",decimalSeparator:"."}),a=e.toString();return[a.substring(0,t.length),a]})(r):[null,null],l=null!==c&&null!==o&&(c===o||o.substr(c.length).split("").every((e=>"0"===e))),d=c&&Object(Xa.jsx)("span",{className:n,children:"".concat(i).concat(c).concat(l?"":"...")});return Object(Xa.jsxs)("li",{className:Object(g.a)("token-list-item",e.className),children:[Object(Xa.jsx)("img",{className:"token-list-item__icon",src:e.iconSrc,alt:e.name}),Object(Xa.jsxs)("div",{children:[Object(Xa.jsxs)("div",{className:"token-list-item__name-container",children:[Object(Xa.jsx)("span",{className:"token-list-item__ticker",children:e.ticker}),Object(Xa.jsx)("span",{className:"token-list-item__name",children:e.name}),e.handleDelete&&Object(Xa.jsx)(ts.a,{className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Xa.jsx)(es.a,{}),onClick:()=>{var t;return null===(t=e.handleDelete)||void 0===t?void 0:t.call(e,e.contractAddress)}})]}),l||void 0===r||null===r?d:Object(Xa.jsx)(as.a,{title:o,children:d})]})]})};a(563);const ns=e=>Object(Xa.jsx)("ul",{className:"token-list",children:e.children});ns.Item=ss;var is=a(329);a(564);const rs=e=>{const t=Oa(),a=ya().common,s=Object(o.useCallback)((()=>{navigator.clipboard.writeText(e.hash)}),[e.hash]);return Object(Xa.jsxs)("div",{className:"explorer-link__container",children:[Object(Xa.jsx)("a",{href:t.tezosExplorer.getEntityUrl(e.hash),target:"_blank",rel:"noreferrer",className:e.className,children:e.children}),e.showCopyButton&&Object(Xa.jsx)(is.a,{className:"explorer-link__copy-icon",title:a.copy,onClick:s})]})},cs=l.a.memo(rs),os=e=>Object(Xa.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer",children:e.children});var ls=a(625);let ds,us;!function(e){e[e.All=0]="All",e[e.LastYear=1]="LastYear",e[e.LastMonth=2]="LastMonth",e[e.LastWeek=3]="LastWeek"}(ds||(ds={})),function(e){e[e.Services=0]="Services",e[e.Donations=1]="Donations"}(us||(us={}));a(565);const ms=()=>{const e=ya().views.services,t=Object(la.g)(),a=Object(o.useCallback)((()=>{t(jt.routers.createService)}),[t]);return Object(Xa.jsx)("div",{className:"no-services-created",children:Object(Xa.jsxs)("div",{children:[Object(Xa.jsx)("p",{children:e.youDoNotHaveAnyServicesYet}),Object(Xa.jsx)("p",{children:e.createYourFirstService}),Object(Xa.jsx)(ts.a,{type:"primary",onClick:a,children:e.editing.createService})]})})},ps=l.a.memo(ms);var vs=a(87);const hs=e=>e.operationsState,bs=Object(vs.createCachedSelector)(hs,((e,t)=>t),((e,t)=>{const a="all"!==t?e.operations.filter((e=>e.type===t)):[...e.operations];return a.sort(((e,t)=>+t.date-+e.date)),a}))(((e,t)=>t)),ys=Object(vs.createCachedSelector)(hs,((e,t)=>t),((e,t,a)=>a),((e,t,a)=>{let s="all"!==t?e.operations.filter((e=>e.type===t)):[...e.operations];if(a!==ds.All){const e=Os(a);s=s.filter((t=>t.date.getTime()>=e.getTime()))}return s.sort(((e,t)=>+t.date-+e.date)),s}))(((e,t,a)=>"".concat(t,":").concat(a))),js=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate()),gs=()=>js(new Date),Os=e=>{const t=gs();switch(e){case ds.LastWeek:t.setDate(t.getDate()-7);break;case ds.LastMonth:t.setMonth(t.getMonth()-1);break;case ds.LastYear:t.setFullYear(t.getFullYear()-1);break;default:throw new Error("Unsupported Period ".concat(e))}return t},ws=e=>{switch(e){case void 0:return 4.58;case"KT19sYK89XKYTeGHekWK9wL5iDHVF4YYf26t":return 1;case"KT1EKo1Eihucz9N4cQyaDKeYRoMzTEoiZRAT":return.1;default:throw new Error("Unsupported token ".concat(e))}},xs=(e,t)=>Math.floor(e*10**t)/10**t,ks=e=>js(e).toLocaleDateString("en-US"),fs=(e,t,a)=>{const s={},n=e.getTime();let i=t.getTime();for(;n<=i;)s[ks(t)]=a(),i=t.getTime()-864e5,t.setTime(i);return s},Ss=(e,t)=>e===ds.All?t[t.length-1]?js(t[t.length-1].date):gs():Os(e),As=(e,t)=>gs(),_s=Object(vs.createCachedSelector)(ys,((e,t)=>t),((e,t,a)=>a),((e,t,a)=>{const s=Ss(a,e),n=As(),i=fs(s,n,(()=>({profit:0,volume:0,incoming:0,outgoing:0}))),r=e.reduce(((e,t)=>{if(t.status===$e.Success){const a=e[ks(t.date)],s=t.amount.toNumber(),n=t.direction===Qe.Outgoing,i=ws(t.asset);a.profit+=s*(n?-1:1)*i,a.volume+=1*s*i,a.incoming+=s*(n?0:1)*i,a.outgoing+=s*(n?1:0)*i}return e}),i);Object.values(r).forEach((e=>{Object.entries(e).forEach((t=>{let[a,s]=t;e[a]=xs(s,2)}))}));return Object.entries(r).map((e=>{let[t,a]=e;return{day:new Date(t).toLocaleDateString("en-US"),...a}})).reverse()}))(((e,t,a)=>"".concat(t,":").concat(a))),Ns=Object(vs.createCachedSelector)(ys,Nt,((e,t)=>t),((e,t,a)=>a),((e,t,a,s)=>{const n=Ss(s,e),i=As(),r=new Map(t.map((e=>[e.contractAddress,e]))),c={};c[de]=0,t.forEach((e=>c[(e.metadata||ve).symbol]=0));const o=fs(n,i,(()=>({...c}))),l=e.reduce(((e,t)=>{if(t.status===$e.Success){var a;const s=e[ks(t.date)],n=t.asset?((null===(a=r.get(t.asset))||void 0===a?void 0:a.metadata)||ve).symbol:de;s[n]=(s[n]||0)+1}return e}),o);return Object.entries(l).map((e=>{let[t,a]=e;return{day:new Date(t).toLocaleDateString("en-US"),...a}})).reverse()}))(((e,t,a)=>"".concat(t,":").concat(a))),Cs=Object(vs.createCachedSelector)(ys,((e,t)=>t),((e,t,a)=>a),((e,t,a)=>{const s=Ss(a,e),n=As(),i=fs(s,n,(()=>({incoming:0,outgoing:0,failed:0}))),r=e.reduce(((e,t)=>{const a=e[ks(t.date)];return t.status===$e.Cancelled?a.failed++:t.status===$e.Success&&(t.direction===Qe.Incoming?a.incoming++:a.outgoing++),e}),i);return Object.entries(r).map((e=>{let[t,a]=e;return{day:new Date(t).toLocaleDateString("en-US"),...a}})).reverse()}))(((e,t,a)=>"".concat(t,":").concat(a))),Ts=Object(vs.createCachedSelector)(ys,Nt,((e,t)=>t),((e,t,a)=>a),((e,t,a,s)=>s),((e,t,a,s,n)=>{const i=new Map(t.map((e=>[e.contractAddress,e]))),r=e.reduce(((e,t)=>{if(t.status===$e.Success&&t.direction===n){var a,s;const n=t.asset?null===(a=i.get(t.asset))||void 0===a||null===(s=a.metadata)||void 0===s?void 0:s.symbol:de;n&&(e[n]=(e[n]||0)+t.amount.toNumber()*ws(t.asset))}return e}),{});return Object.entries(r).map((e=>{let[t,a]=e;return{value:xs(a,2),name:t}}))}))(((e,t,a,s)=>"".concat(t,":").concat(a,":").concat(s))),Ps=Object(vs.createCachedSelector)(ys,((e,t)=>t),((e,t,a)=>a),((e,t,a)=>{const s=Ss(a,e),n=As(),i=fs(s,n,(()=>({max:0}))),r=e.reduce(((e,t)=>{if(t.status===$e.Success&&t.direction===Qe.Incoming){const a=e[ks(t.date)],s=t.amount.toNumber(),n=ws(t.asset);a.max=Math.max(a.max,s*n)}return e}),i);return Object.entries(r).map((e=>{let[t,a]=e;return{day:new Date(t).toLocaleDateString("en-US"),...a}})).reverse()}))(((e,t,a)=>"".concat(t,":").concat(a))),zs=Object(vs.createCachedSelector)(bs,((e,t)=>t),((e,t,a)=>a),((e,t,a)=>{const s=Ss(a,e),n=As(),i={newSendersCount:0},r=fs(s,n,(()=>({...i}))),c=new Set,o=e.reduceRight(((e,t)=>{if(t.status===$e.Success&&t.direction===Qe.Incoming&&!c.has(t.sender)){c.add(t.sender);const a=e[ks(t.date)];a&&a.newSendersCount++}return e}),r);return Object.entries(o).map((e=>{let[t,a]=e;return{day:new Date(t).toLocaleDateString("en-US"),...a}})).reverse()}))(((e,t,a)=>"".concat(t,":").concat(a))),Ds=Object(vs.createCachedSelector)(ys,Nt,((e,t)=>t),((e,t,a)=>a),((e,t,a,s)=>s),((e,t,a,s,n)=>{const i=new Map(t.map((e=>[e.contractAddress,e])));return e.reduce(((e,t)=>{if(t.status===$e.Success&&t.direction===n){var a;const s=t.asset?((null===(a=i.get(t.asset))||void 0===a?void 0:a.metadata)||ve).symbol:de;e.set(s,(e.get(s)||new r.a(0)).plus(t.amount))}return e}),new Map)}))(((e,t,a)=>"".concat(t,":").concat(a)));var Us=a(191);a(566);const Is=e=>{const t=Object(o.useRef)(null),a=e.theme||"light",s=Object(o.useMemo)((()=>{const t=void 0===e.showZoom||e.showZoom;return{title:{text:e.title,padding:0},dataZoom:t?[{type:"inside"},{type:"slider"}]:void 0,...e.option,grid:{top:80,left:"left",right:0,containLabel:!0,...!t&&{bottom:0},...e.option.grid},legend:{top:35,left:"left",padding:0,type:"scroll",...e.option.legend}}}),[e.option,e.showZoom,e.title]);return Object(o.useEffect)((()=>{let e;t.current&&(e=Object(Us.b)(t.current,a));const s=()=>{var t;null===(t=e)||void 0===t||t.resize()};return window.addEventListener("resize",s),()=>{var t;window.removeEventListener("resize",s),null===(t=e)||void 0===t||t.dispose()}}),[a]),Object(o.useEffect)((()=>{if(t.current){const a=Object(Us.a)(t.current);null===a||void 0===a||a.setOption(s,e.settings)}}),[s,e.settings,a]),Object(o.useEffect)((()=>{if(t.current){const a=Object(Us.a)(t.current);!0===e.loading?null===a||void 0===a||a.showLoading():null===a||void 0===a||a.hideLoading()}}),[e.loading,a]),Object(Xa.jsx)("div",{className:Object(g.a)("chart-container",e.className),ref:t,style:{width:"100%",height:"100%",...e.style}})},Ks=l.a.memo(Is),Es=e=>{const t=ga(hs).initialized,a=ya().views.analytics,s=ga((t=>Ns(t,e.operationType,e.period))),n=ga(Nt).map((e=>({name:(e.metadata||ve).symbol}))),i=new Array(n.length+1).fill({type:"bar",stack:"main-stack"}),r={dataset:{dimensions:["day",{name:de},...n],source:s},tooltip:{trigger:"axis"},xAxis:{type:"category"},yAxis:{type:"value"},series:i};return Object(Xa.jsx)(Ks,{className:e.className,title:a.operationsCountByTokens,option:r,loading:!t,showZoom:e.showZoom})},Ls=l.a.memo(Es);let Fs;!function(e){e.Green="#91cc75",e.Yellow="#fac858",e.Blue="#5470c6",e.Red="#ee6666"}(Fs||(Fs={}));const Bs=e=>{const t=ya().views.analytics,a=ga(hs).initialized,s=ga((t=>_s(t,e.operationType,e.period))),n="".concat(t.volume," (").concat(t.currency.usd,")"),i={dataset:{dimensions:["day",{name:"volume",displayName:t.all},{name:"incoming",displayName:t.incoming},{name:"outgoing",displayName:t.outgoing}],source:s},tooltip:{trigger:"axis"},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",color:Fs.Blue},{type:"line",color:Fs.Green},{type:"line",color:Fs.Red}]};return Object(Xa.jsx)(Ks,{className:e.className,option:i,title:n,loading:!a,showZoom:e.showZoom})},Ms=l.a.memo(Bs),Rs=e=>{const t=Object(g.a)(e.className,"view__title");return l.a.createElement(e.as,{className:t},e.children)};Rs.defaultProps={as:"h1"};a(567);const Ws=e=>{var t;t=e.title?"".concat(e.title," | ").concat(jt.app.title):jt.app.title,Object(o.useEffect)((()=>{document.title=t}),[t]);const a=Object(g.a)("view",e.className);return l.a.createElement(e.as,{className:a},e.children)};Ws.defaultProps={as:"main"},Ws.Title=Rs;const Vs=e=>e.balancesState,Hs=()=>{const e=ga(Ct),t=ga(Nt),a=ga(_t),s=ga(Vs);if(!a.initialized||!s.initialized)return Object(Xa.jsx)(oa.a,{active:!0});const n=[];return e&&n.push(Object(Xa.jsx)(ns.Item,{contractAddress:"",ticker:de,name:ue,decimals:me,value:s.tezos,iconSrc:pe},de)),t.forEach((e=>{e.metadata&&n.push(Object(Xa.jsx)(ns.Item,{contractAddress:"",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:s.tokens[e.contractAddress]||H.zeroBigNumber,iconSrc:e.metadata.thumbnailUri},e.metadata.symbol))})),Object(Xa.jsx)(ns,{children:n})},Zs=l.a.memo(Hs),Ys=e=>{const t=ga(Ct),a=ga(_t),s=ga(Nt),n=ga((t=>Ds(t,"all",ds.LastWeek,e.direction)));if(!a.initialized)return Object(Xa.jsx)(oa.a,{active:!0});const i=e.direction===Qe.Incoming?1:-1,c=[];return t&&c.push(Object(Xa.jsx)(ns.Item,{contractAddress:"",ticker:de,name:ue,decimals:me,value:(n.get(de)||new r.a(0)).multipliedBy(i),iconSrc:pe,highlightPlus:!0},de)),s.forEach((e=>{e.metadata&&c.push(Object(Xa.jsx)(ns.Item,{contractAddress:e.contractAddress,ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:(n.get(e.metadata.symbol)||new r.a(0)).multipliedBy(i),iconSrc:e.metadata.thumbnailUri,highlightPlus:!0},e.metadata.symbol))})),Object(Xa.jsx)(ns,{children:c})},Gs=l.a.memo(Ys);a(568);const Js=()=>{const e=ya(),t=e.common,a=e.views.overview,s=ga(_t);return Object(Xa.jsxs)(Ws,{title:a.title,className:"overview",children:[Object(Xa.jsx)(Ws.Title,{children:a.title}),s.initialized&&!s.services.length?Object(Xa.jsx)(ps,{}):Object(Xa.jsxs)("div",{children:[Object(Xa.jsxs)("div",{className:"cards-container",children:[Object(Xa.jsx)(ls.a,{className:"cards-container__small-card",size:"small",title:a.balances.title,children:Object(Xa.jsx)(Zs,{})}),Object(Xa.jsx)(ls.a,{className:"cards-container__small-card",size:"small",title:a.incoming.title,extra:t.period.lastWeek,children:Object(Xa.jsx)(Gs,{direction:Qe.Incoming})}),Object(Xa.jsx)(ls.a,{className:"cards-container__small-card",size:"small",title:a.outgoing.title,extra:t.period.lastWeek,children:Object(Xa.jsx)(Gs,{direction:Qe.Outgoing})})]}),Object(Xa.jsxs)("div",{className:"overview-analytics",children:[Object(Xa.jsx)(Ls,{className:"overview-analytics__chart",period:ds.LastWeek,operationType:"all",showZoom:!1}),Object(Xa.jsx)(Ms,{className:"overview-analytics__chart",period:ds.LastWeek,operationType:"all",showZoom:!1})]})]})]})},Xs=l.a.memo(Js);var qs=a(639),Qs=a(640),$s=a(642),en=a(183);a(569);const tn=e=>{const t=ya().views.operations.operationList,a=e.direction===Qe.Incoming,s=Object(g.a)(e.className,"operation-icon",{"operation-icon_income":a},{"operation-icon_expense":!a},{"operation-icon_cancelled":e.status===$e.Cancelled});return Object(Xa.jsxs)("div",{className:s,children:[a?Object(Xa.jsx)(qs.a,{title:t.income}):Object(Xa.jsx)(Qs.a,{title:t.expense}),e.status===$e.Pending&&Object(Xa.jsx)($s.a,{className:"operation-icon__status operation-icon__status_pending",title:t.pending}),e.status===$e.Cancelled&&Object(Xa.jsx)(en.a,{className:"operation-icon__status operation-icon__status_cancelled",title:t.cancelled})]})},an=l.a.memo(tn);a(570);const sn=e=>Object(Xa.jsx)("table",{className:"operation-list",children:e.children}),nn=e=>"".concat(e.substr(0,9),"...").concat(e.substr(e.length-6,6));sn.Item=e=>{const t=ya().views.operations.operationList,a=e.direction===Qe.Incoming,s=a?e.accountAddress:e.serviceAddress,n=a?e.serviceAddress:e.accountAddress,i=nn(e.hash),r=e.type===qe.Donation,c="".concat(r?t.donationData:t.paymentId," ").concat(e.data),o=a?"+":"\u2212",l=Object(g.a)("operation-list-item__amount",{"operation-list-item__amount_income":a},{"operation-list-item__amount_expense":!a},{"operation-list-item__amount_cancelled":e.status===$e.Cancelled}),d="".concat(jt.routers.services,"/").concat(e.serviceAddress);return Object(Xa.jsxs)("tbody",{className:"operation-list-group",children:[Object(Xa.jsxs)("tr",{className:"operation-list-row operation-list-row_general",children:[Object(Xa.jsx)("td",{className:"operation-list-item__icon",children:Object(Xa.jsx)(an,{direction:e.direction,status:e.status})}),Object(Xa.jsxs)("td",{className:"operation-list-item__main-info",children:[Object(Xa.jsx)("span",{className:"operation-list-item__date",children:e.date.toLocaleString()}),Object(Xa.jsx)(rs,{hash:e.hash,className:"operation-list-item__operation-hash",children:i})]}),Object(Xa.jsxs)("td",{className:"operation-list-item__transfer-info",children:[s===e.serviceAddress?Object(Xa.jsx)(p.b,{to:d,children:e.serviceName}):Object(Xa.jsx)(rs,{hash:s,children:nn(s)}),"\xa0\u2192\xa0",n===e.serviceAddress?Object(Xa.jsx)(p.b,{to:d,children:e.serviceName}):Object(Xa.jsx)(rs,{hash:n,children:nn(n)})]}),Object(Xa.jsxs)("td",{className:l,children:[o,e.value.toFormat()," ",e.ticker]})]}),Object(Xa.jsxs)("tr",{className:"operation-list-row operation-list-row_order-data",children:[Object(Xa.jsx)("td",{}),Object(Xa.jsx)("td",{className:"operation-list-item__data",colSpan:3,children:c})]})]})};a(571);const rn=()=>{const e=ya().views.operations.operationList;return Object(Xa.jsx)("div",{className:"no-operations-performed-container",children:e.noOperationsPerformedYet})},cn=l.a.memo(rn),on=e=>{var t;switch(e.type){case qe.Payment:return e.paymentId;case qe.Donation:return null===(t=e.payload)||void 0===t?void 0:t.valueString;default:return}},ln=()=>{const e=ya().views.operations,t=ga((e=>bs(e,"all"))),a=ga(_t),s=ga(At),n=t.map((e=>{var t,n,i;const r=e.asset&&(null===(t=s.get(e.asset))||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.symbol);return{date:e.date,hash:e.hash,data:on(e)||"",accountAddress:e.sender,serviceAddress:e.target,serviceName:(null===(i=a.services.filter((t=>t.contractAddress===e.target))[0])||void 0===i?void 0:i.name)||"",ticker:r||"XTZ",value:e.amount,status:e.status,type:e.type,direction:Qe.Incoming}}));return Object(Xa.jsxs)(Ws,{title:e.title,children:[Object(Xa.jsx)(Ws.Title,{children:e.title}),a.initialized?a.services.length?t.length?Object(Xa.jsx)(sn,{children:n.map((e=>Object(Xa.jsx)(sn.Item,{...e},e.hash)))}):Object(Xa.jsx)(cn,{}):Object(Xa.jsx)(ms,{}):Object(Xa.jsx)(oa.a,{active:!0})]})},dn=l.a.memo(ln);var un=a(327);a(572);const mn=()=>{const e=ya(),t=e.common,a=e.views.services,s=Object(la.g)(),n=Object(o.useCallback)((()=>{s(jt.routers.createService)}),[s]);return Object(Xa.jsx)(ls.a,{bodyStyle:{padding:0},className:"new-service-card-container",onClick:n,children:Object(Xa.jsx)("div",{className:"new-service-card",title:a.createNewService,children:Object(Xa.jsxs)("div",{className:"new-service-card__info",children:[Object(Xa.jsx)(un.a,{className:"new-service-card__icon"}),Object(Xa.jsx)("span",{children:t.new})]})})})},pn=l.a.memo(mn);var vn=a(643),hn=a(184),bn=a(644),yn=a(185),jn=a(636);a(573);const gn=e=>{const t=ya().views.services;return e.isUpdating?Object(Xa.jsx)(jn.a,{icon:Object(Xa.jsx)(vn.a,{spin:!0}),className:"tag-active tag-active_updating",children:t.status.updating}):e.deleted?Object(Xa.jsx)(jn.a,{icon:Object(Xa.jsx)(hn.a,{}),className:"tag-active tag-active_deleted",children:t.status.deleted}):e.paused?Object(Xa.jsx)(jn.a,{icon:Object(Xa.jsx)(bn.a,{}),className:"tag-active tag-active_paused",children:t.status.paused}):Object(Xa.jsx)(jn.a,{icon:Object(Xa.jsx)(yn.a,{}),className:"tag-active tag-active_active",children:t.status.active})},On=l.a.memo(gn);a(574);const wn=e=>Object(Xa.jsx)(jn.a,{className:"tag-custom",children:e.text}),xn=l.a.memo(wn);a(575);const kn=e=>{const t=Object(la.g)(),a=ya().common,s=Object(o.useCallback)((a=>{const s=a.target.tagName.toLowerCase();"svg"!==s&&"a"!==s&&"path"!==s&&t(jt.routers.service(e.service.contractAddress))}),[t,e.service.contractAddress]),n=Object(g.a)("service-card__logo",e.service.iconUrl?"service-card__logo_image":"service-card__logo_text");return Object(Xa.jsx)(ls.a,{size:"small",bodyStyle:{padding:0},className:"service-card-container",onClick:s,children:Object(Xa.jsxs)("div",{className:"service-card",children:[Object(Xa.jsxs)("div",{className:"service-card__info-container",children:[Object(Xa.jsxs)("div",{className:"service-card__main-info",children:[e.service.iconUrl?Object(Xa.jsx)("img",{className:n,alt:"logo",src:e.service.iconUrl}):Object(Xa.jsx)("span",{className:n,children:G.getAvatarText(e.service.name)}),Object(Xa.jsxs)("div",{className:"service-card__name-container",children:[Object(Xa.jsx)("span",{className:"service-card__name",title:e.service.name,children:e.service.name}),Object(Xa.jsx)("div",{className:"service-card__tags-container",children:Object(Xa.jsx)(On,{paused:e.service.paused,deleted:e.service.deleted,isUpdating:e.isUpdating})})]})]}),Object(Xa.jsx)("div",{className:"service-card__link-container",children:Object(Xa.jsx)(cs,{hash:e.service.contractAddress,className:"service-card__link",showCopyButton:!0,children:e.service.contractAddress})})]}),Object(Xa.jsx)("div",{className:"service-card__button-container",children:Object(Xa.jsx)(ts.a,{className:"service-card__button",type:"primary",children:a.open})})]})})},fn=l.a.memo(kn);a(576);const Sn=()=>{const e=ya().views.services,t=ga(_t),a=ga(Pt),s=ga(Tt).map((e=>Object(Xa.jsx)(fn,{service:e,isUpdating:a.has(e.contractAddress)},e.contractAddress)));return Object(Xa.jsxs)(Ws,{title:e.title,children:[Object(Xa.jsx)(Ws.Title,{children:e.title}),t.initialized?t.services.length?Object(Xa.jsxs)("div",{className:"services-container",children:[s,Object(Xa.jsx)(pn,{})]}):Object(Xa.jsx)(ps,{}):Object(Xa.jsx)(oa.a,{active:!0})]})},An=l.a.memo(Sn);a(577);const _n=e=>{let{service:t,readOnly:a}=e;const s=ya().views.services,n=Object(la.g)(),i=Object(o.useCallback)((()=>{n(jt.routers.acceptServicePayments(t.contractAddress))}),[n,t.contractAddress]);return Object(Xa.jsxs)("div",{className:"service-actions-zone",children:[Object(Xa.jsx)("span",{className:"service-actions-zone__header",children:"Actions"}),Object(Xa.jsxs)("div",{className:"service-actions-zone__button-container",children:[Object(Xa.jsx)("p",{children:s.acceptPaymentsDescription}),Object(Xa.jsx)(ts.a,{disabled:a,onClick:i,className:"service-button",type:"primary",children:s.acceptPayments})]})]})},Nn=l.a.memo(_n);var Cn=a(631);a(578);const Tn=e=>{const t=ya().views.services.dangerZone,a=ja(),s=Object(o.useCallback)((()=>{a(Gt({service:e.service,paused:!e.service.paused}))}),[a,e.service]),n=Object(o.useCallback)((()=>{a(Jt({service:e.service,deleted:!e.service.deleted}))}),[a,e.service]),i=Object(o.useCallback)(((e,t,a)=>{Cn.a.confirm({title:"Confirm Operation",onOk:a,content:Object(Xa.jsx)("p",{children:e}),okText:"Yes",okType:t?"danger":"primary",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((()=>{const a=e.service.paused?t.unPauseServiceConfirmation:t.pauseServiceConfirmation;i(a,!1,s)}),[i,t.pauseServiceConfirmation,t.unPauseServiceConfirmation,s,e.service.paused]),c=Object(o.useCallback)((()=>{const a=e.service.deleted?t.unDeleteServiceConfirmation:t.deleteServiceConfirmation;i(a,!e.service.deleted,n)}),[i,t.deleteServiceConfirmation,t.unDeleteServiceConfirmation,n,e.service.deleted]);return Object(Xa.jsx)(Xa.Fragment,{children:Object(Xa.jsxs)("div",{className:"service-danger-zone",children:[Object(Xa.jsx)("span",{className:"service-danger-zone__header",children:t.title}),Object(Xa.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Xa.jsx)("p",{children:e.service.paused?t.unPauseServiceDescription:t.pauseServiceDescription}),Object(Xa.jsx)(ts.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:r,children:e.service.paused?t.unPauseService:t.pauseService})]}),Object(Xa.jsx)("hr",{className:"service-danger-zone__divider"}),Object(Xa.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Xa.jsx)("p",{children:e.service.deleted?t.unDeleteServiceDescription:t.deleteServiceDescription}),Object(Xa.jsx)(ts.a,{disabled:e.readOnly,className:"service-button",type:"primary",danger:!0,onClick:c,children:e.service.deleted?t.unDeleteService:t.deleteService})]})]})})},Pn=l.a.memo(Tn);var zn=a(632),Dn=a(633),Un=a(624),In=a(627),Kn=a(637),En=a(316);a(579);const Ln=zn.a.Search,Fn=Object.values(Oe).map((e=>({label:e,value:e}))),Bn=e=>{var t;const a=Ja(),s=ya(),n=s.common,i=s.views.services,[r,c]=Object(o.useState)(),l=Object(o.useRef)(null),d=Object(o.useRef)(null),u=Object(m.b)(),[p,v]=Object(o.useState)((null===(t=Fn[0])||void 0===t?void 0:t.value)||Oe.Ed25519),h=Object(o.useCallback)((e=>{v(e.target.value)}),[]),[b,y]=Object(o.useState)(""),j=Object(o.useCallback)((e=>{y(e.target.value)}),[]);Object(o.useEffect)((()=>{a&&c(a(p))}),[p,a]);const g=Object(o.useCallback)((e=>{const t=e.current;t&&(t.select(),navigator.clipboard.writeText(t.state.value))}),[]),O=Object(o.useCallback)((()=>{a&&c(a(p))}),[p,a]),w=Object(o.useCallback)((()=>{null!==r&&void 0!==r&&r.publicKey&&u(Xt({service:e.service,signingKey:{name:b,publicKey:r.publicKey}})),e.onCancel()}),[u,b,e,r]),x=!r,k=Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.name,":"]}),Object(Xa.jsx)(zn.a,{disabled:x,autoFocus:!0,value:b,onChange:j}),Object(Xa.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.algorithm,":"]}),Object(Xa.jsxs)("div",{className:"api-key-modal__algorithm-container",children:[Object(Xa.jsx)(Dn.a.Group,{disabled:x,options:Fn,value:p,onChange:h}),Object(Xa.jsx)(ts.a,{disabled:x,onClick:O,children:i.devZone.generateKeys})]}),Object(Xa.jsx)(Un.a,{}),Object(Xa.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.publicKey,":"]}),Object(Xa.jsx)(Ln,{ref:l,disabled:x,readOnly:!0,value:null===r||void 0===r?void 0:r.publicKey,enterButton:Object(Xa.jsx)(ts.a,{icon:Object(Xa.jsx)(is.a,{})}),onSearch:()=>g(l)}),Object(Xa.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.secretKey,":"]}),Object(Xa.jsx)(Ln,{ref:d,disabled:x,readOnly:!0,value:null===r||void 0===r?void 0:r.privateKey,enterButton:Object(Xa.jsx)(ts.a,{icon:Object(Xa.jsx)(is.a,{})}),onSearch:()=>g(d)}),Object(Xa.jsx)(In.a.Text,{mark:!0,children:i.devZone.saveSecretKeyWarning})]});return Object(Xa.jsx)(Cn.a,{className:"api-key-modal",title:i.devZone.addKey,centered:!0,destroyOnClose:!0,visible:e.visible,onCancel:e.onCancel,footer:Object(Xa.jsxs)("div",{className:"api-key-modal__footer",children:[Object(Xa.jsx)(ts.a,{onClick:e.onCancel,children:n.cancel},"back"),Object(Xa.jsx)(Kn.a,{disabled:!b,title:i.devZone.saveSecretKeyConfirm,placement:"topRight",onConfirm:w,okText:n.yes,cancelText:n.no,children:Object(Xa.jsx)(ts.a,{className:"api-key-modal__ok-button",type:"primary",disabled:!b,children:i.devZone.saveKeys},"submit")})]}),children:r?k:Object(Xa.jsx)(En.a,{size:"large",children:k})})},Mn=l.a.memo(Bn);var Rn=a(626);a(586);const Wn=e=>{const t=ya().views.services,a=ga(kt),s=Object(m.b)(),n=Object(o.useMemo)((()=>{let t=[...e.service.signingKeys.values()];return a&&(t=t.filter((e=>e.publicKey!==a.publicKey))),t}),[a,e.service.signingKeys]),i=Object(o.useCallback)(((e,t)=>{Cn.a.confirm({title:"Confirm Operation",onOk:t,content:Object(Xa.jsx)("p",{children:e}),okText:"Yes",okType:"danger",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((a=>{const n=t.devZone.deleteKeyConfirmation+(a.name?": ".concat(a.name):"");i(n,(()=>{s(qt({service:e.service,publicKey:a.publicKey}))}))}),[i,s,e.service,t.devZone.deleteKeyConfirmation]);return Object(Xa.jsx)(Rn.b,{size:"small",bordered:!0,children:n.length?n.map((t=>Object(Xa.jsxs)(Rn.b.Item,{className:"api-keys__item",children:[Object(Xa.jsx)("span",{children:t.name}),Object(Xa.jsxs)("div",{children:[Object(Xa.jsx)("span",{className:"api-keys__item-key",children:t.publicKey}),Object(Xa.jsx)(ts.a,{disabled:e.readOnly,onClick:()=>r(t),icon:Object(Xa.jsx)(es.a,{}),danger:!0,type:"link"})]})]},t.publicKey))):Object(Xa.jsx)(Rn.b.Item,{className:"api-keys__item api-keys__item_empty",children:t.devZone.noApiKeysAddedYet})})},Vn=l.a.memo(Wn);a(587);const Hn=e=>{const t=ya().views.services,[a,s]=Object(o.useState)(!1),n=Object(o.useCallback)((()=>s(!0)),[]),i=Object(o.useCallback)((()=>s(!1)),[]);return Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsxs)("div",{className:"service-dev-zone__button-container",children:[Object(Xa.jsx)("span",{className:"service-dev-zone__header",children:t.devZone.title}),Object(Xa.jsx)(ts.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:n,children:t.devZone.addKey})]}),Object(Xa.jsx)(Vn,{service:e.service,readOnly:e.readOnly}),Object(Xa.jsx)(Mn,{service:e.service,visible:a,onCancel:i})]})},Zn=l.a.memo(Hn);var Yn=a(645);a(588);const Gn=e=>{let{service:t,isUpdating:a,readOnly:s}=e;const n=Object(la.g)(),i=ya().views.services,r=Object(g.a)("service__logo",null!==t&&void 0!==t&&t.iconUrl?"service__logo_image":"service__logo_text"),c=(null===t||void 0===t?void 0:t.allowedOperationType)===Je.Payment||(null===t||void 0===t?void 0:t.allowedOperationType)===Je.All,l=(null===t||void 0===t?void 0:t.allowedOperationType)===Je.Donation||(null===t||void 0===t?void 0:t.allowedOperationType)===Je.All,d=Object(o.useCallback)((()=>{n(jt.routers.service(t.contractAddress,!0))}),[n,t.contractAddress]);return Object(Xa.jsxs)("div",{className:"service-header",children:[Object(Xa.jsxs)("div",{className:"service-header__logo-container",children:[t.iconUrl?Object(Xa.jsx)("img",{className:r,alt:"logo",src:t.iconUrl}):Object(Xa.jsx)("span",{className:r,children:G.getAvatarText(t.name)}),Object(Xa.jsxs)("div",{className:"service-header__main-info",children:[Object(Xa.jsx)("h1",{children:t.name}),Object(Xa.jsx)(cs,{hash:t.contractAddress,className:"service__link",showCopyButton:!0,children:t.contractAddress}),Object(Xa.jsxs)("div",{className:"service-header__tags-container",children:[Object(Xa.jsx)(On,{paused:t.paused,deleted:t.deleted,isUpdating:a}),c&&Object(Xa.jsx)(xn,{text:i.operations.paymentsEnabled}),l&&Object(Xa.jsx)(xn,{text:i.operations.donationsEnabled})]})]})]}),Object(Xa.jsx)(ts.a,{disabled:s,className:"service-button",icon:Object(Xa.jsx)(Yn.a,{}),type:"primary",onClick:d,children:i.editing.editService})]})},Jn=l.a.memo(Gn);var Xn,qn=a(635),Qn=a(646),$n=a(647),ei=a(648),ti=a(649),ai=a(650),si=a(651),ni=a(652);function ii(){return ii=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e},ii.apply(this,arguments)}function ri(e,t){let{title:a,titleId:s,...n}=e;return o.createElement("svg",ii({width:"1000px",height:"1000px",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":s},n),a?o.createElement("title",{id:s},a):null,Xn||(Xn=o.createElement("g",{id:"Artboard",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("circle",{id:"Oval",fill:"currentColor",cx:500,cy:500,r:500}),o.createElement("path",{d:"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z",id:"Path-3",fill:"#FFFFFF"}))))}const ci=o.forwardRef(ri);a.p;const oi={[X.Common]:Qn.a,[X.Email]:$n.a,[X.Telegram]:ci,[X.Facebook]:ei.a,[X.Twitter]:ti.a,[X.Instagram]:ai.a,[X.GitHub]:si.a,[X.Reddit]:ni.a};a(589);const li=new ae,di=e=>{const t=li.getLinkInfo(e.link);if(!t)return null;const a=oi[t.icon];return Object(Xa.jsxs)("span",{className:"service-link",children:[Object(Xa.jsx)(a,{className:"service-link__icon"}),Object(Xa.jsx)(os,{className:"service-link__link",href:t.formattedLink,children:t.displayLink})]})};a(590);const ui=e=>Object(Xa.jsx)("div",{className:Object(g.a)("service-links",e.className),children:e.links.map((e=>Object(Xa.jsx)(di,{link:e},e))).filter(Boolean)});a(591);const mi=new ae,pi=e=>{const t=mi.getLinkInfo(e.value,!0),a=Object(o.useCallback)((t=>{e.onChange({value:t.target.value})}),[e]);if(!t)return null;const s=oi[t.icon];return Object(Xa.jsxs)("div",{className:"service-link-editor",children:[Object(Xa.jsx)(s,{className:"service-link-editor__icon"}),Object(Xa.jsx)(zn.a,{readOnly:e.readOnly,className:"service-link-editor__input",value:e.value,onChange:a}),Object(Xa.jsx)(ts.a,{disabled:e.readOnly,className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Xa.jsx)(es.a,{}),onClick:e.onDelete})]})};a(592);const vi=e=>{const t=ya().views.services,a=Object(o.useCallback)(((t,a)=>{const s=[...e.value];s[t]=a.value,e.onChange({value:s})}),[e]),s=Object(o.useCallback)((t=>{const a=[...e.value];a.splice(t,1),e.onChange({value:a})}),[e]),n=Object(o.useCallback)((()=>{const t=[...e.value,""];e.onChange({value:t})}),[e]),i=e.value.map(((t,n)=>Object(Xa.jsx)(pi,{readOnly:e.readOnly,value:t,onDelete:()=>s(n),onChange:e=>a(n,e)},n)));return Object(Xa.jsxs)("div",{className:"service-links-editor",children:[i,Object(Xa.jsx)(ts.a,{disabled:e.readOnly,className:"service-links-editor__button",icon:Object(Xa.jsx)(un.a,{}),onClick:n,children:t.editing.addLink})]})};var hi=a(629),bi=a(634);a(593);const yi=e=>{const t=ya().views.services,a=ga(At),s=Object(o.useMemo)((()=>{const t=[];return e.allowedTokens.tez&&t.push(""),e.allowedTokens.assets.forEach((e=>{const s=a.get(e);s&&t.push(s.contractAddress)})),t}),[e.allowedTokens.assets,e.allowedTokens.tez,a]),n=new Map;n.set("",{ticker:de,address:"",name:ue,iconSrc:pe});Array.from(a.values()).forEach((e=>{e.metadata&&n.set(e.contractAddress,{ticker:e.metadata.symbol,address:e.contractAddress,name:e.metadata.name,iconSrc:e.metadata.thumbnailUri})}));const i=Object(o.useCallback)((t=>{e.onChange({tez:t.some((e=>""===e)),assets:t.filter((e=>!!e))})}),[e]),r=Object(o.useCallback)((e=>i([...s,e])),[i,s]),c=Object(o.useCallback)((e=>i(s.filter((t=>t!==e)))),[i,s]),l=s.map((e=>n.get(e))),d=Array.from(n.values()).filter((e=>s.every((t=>t!==e.address)))),u=Object(Xa.jsx)(hi.a,{children:d.map((e=>Object(Xa.jsxs)(hi.a.Item,{className:"token-list-editor-menu-item",onClick:()=>r(e.address),children:[Object(Xa.jsx)("img",{className:"token-list-editor-menu-item__icon",src:e.iconSrc,alt:e.name}),Object(Xa.jsx)("span",{className:"token-list-editor-menu-item__ticker",children:e.ticker}),Object(Xa.jsx)("span",{className:"token-list-editor-menu-item__name",children:e.name})]},e.ticker)))});return Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsx)("ul",{className:"token-list-editor",children:l.map((e=>Object(Xa.jsx)(ss,{className:"token-list-editor__item",name:e.name,contractAddress:e.address,ticker:e.ticker,iconSrc:e.iconSrc,handleDelete:c},e.address)))}),d.length>0&&Object(Xa.jsx)(bi.a,{trigger:["click"],overlay:u,placement:"bottomCenter",children:Object(Xa.jsx)(ts.a,{className:"token-list-editor__add-button",icon:Object(Xa.jsx)(un.a,{}),children:t.editing.addCurrency})})]})};a(594);const ji=new ae,gi=e=>{const t=Object(la.g)(),a=ya(),s=a.common,n=a.views.services,i=ga(kt),r=ja(),c=Object(o.useCallback)((()=>{t(jt.routers.service(e.service.contractAddress))}),[t,e.service.contractAddress]),[l,d]=Object(o.useState)(!1),[u,m]=Object(o.useState)(e.service.name),[p,v]=Object(o.useState)(e.service.description),[h,b]=Object(o.useState)(e.service.links),[y,j]=Object(o.useState)(e.service.allowedTokens),g=Object(o.useCallback)((()=>{const e=!!u&&h.every((e=>!!ji.getLinkInfo(e)))&&(y.tez||y.assets.length>0);d(e)}),[y.assets.length,y.tez,h,u]);Object(o.useEffect)((()=>g()),[g]);const O=Object(o.useCallback)((e=>{m(e.target.value),g()}),[g]),w=Object(o.useCallback)((e=>{v(e.target.value),g()}),[g]),x=Object(o.useCallback)((e=>{b(e.value),g()}),[g]),[k,f]=Object(o.useState)(e.service.allowedOperationType===Je.All||e.service.allowedOperationType===Je.Payment),[S,A]=Object(o.useState)(e.service.allowedOperationType===Je.All||e.service.allowedOperationType===Je.Donation),_=Object(o.useCallback)((e=>{j(e),g()}),[g]),N=Object(o.useCallback)((e=>{f(e.target.checked),e.target.checked||S||A(!0)}),[S]),C=Object(o.useCallback)((e=>{A(e.target.checked),e.target.checked||k||f(!0)}),[k]),T=Object(o.useCallback)((()=>{const t=k&&S?Je.All:k?Je.Payment:Je.Donation,a=e.isCreateMode&&!!i,s={...e.service,name:u,description:p,allowedOperationType:t,allowedTokens:y,links:h,signingKeys:a?(new Map).set(i.publicKey,{publicKey:i.publicKey}):e.service.signingKeys,network:a?i.network:e.service.network};e.isCreateMode?r(Yt(s)):r(Zt(s)),c()}),[S,k,y,i,p,r,c,h,u,e.isCreateMode,e.service]),P=e.isCreateMode?n.editing.createService:n.editing.updateService;return Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsx)(Ws.Title,{children:P}),Object(Xa.jsxs)("div",{className:"service-edit",children:[Object(Xa.jsx)("span",{className:"service-edit__caption",children:n.editing.serviceName}),Object(Xa.jsx)(zn.a,{readOnly:e.readOnly,placeholder:n.editing.serviceName,value:u,onChange:O}),Object(Xa.jsx)("span",{className:"service-edit__caption",children:n.editing.description}),Object(Xa.jsx)(zn.a.TextArea,{readOnly:e.readOnly,rows:5,placeholder:n.editing.description,value:p,onChange:w}),Object(Xa.jsxs)("div",{className:"service-edit__lists-container",children:[Object(Xa.jsxs)("div",{className:"service-edit__list-container",children:[Object(Xa.jsx)("span",{className:"service-edit__list-header",children:n.allowedCurrencies}),Object(Xa.jsx)(yi,{allowedTokens:y,onChange:_})]}),Object(Xa.jsxs)("div",{className:"service-edit__list-container",children:[Object(Xa.jsx)("span",{className:"service-edit__list-header",children:n.links}),Object(Xa.jsx)(vi,{readOnly:e.readOnly,value:h,onChange:x})]})]}),Object(Xa.jsx)("span",{className:"service-edit__caption",children:n.editing.accept}),Object(Xa.jsxs)("div",{className:"service-edit__accept-list",children:[Object(Xa.jsx)(qn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:k,onChange:N,children:n.editing.acceptPayments}),Object(Xa.jsx)(qn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:S,onChange:C,children:n.editing.acceptDonations})]}),Object(Xa.jsxs)("div",{className:"service-edit__buttons-container",children:[Object(Xa.jsx)(ts.a,{className:"service-edit__button",onClick:c,children:s.cancel}),Object(Xa.jsx)(ts.a,{className:"service-edit__button",onClick:T,disabled:!l||e.readOnly,type:"primary",children:P})]})]})]})},Oi=l.a.memo(gi);a(595);const wi=e=>{let{service:t}=e;const a=ga(At),s=[];null===t||void 0===t||t.allowedTokens.assets.forEach((e=>{const t=a.get(e);t&&s.push(t)}));const n=[];return null!==t&&void 0!==t&&t.allowedTokens.tez&&n.push(Object(Xa.jsx)(ns.Item,{contractAddress:"",className:"service-token-list-item",ticker:de,name:ue,decimals:me,iconSrc:pe,highlightPlus:!0},de)),s.forEach((e=>{e.metadata&&n.push(Object(Xa.jsx)(ns.Item,{contractAddress:e.contractAddress,className:"service-token-list-item",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,iconSrc:e.metadata.thumbnailUri,highlightPlus:!0},e.metadata.symbol))})),Object(Xa.jsx)(ns,{children:n})},xi=l.a.memo(wi);a(596);const ki=e=>{let{service:t}=e;const a=ya().views.services;return Object(Xa.jsxs)("div",{className:"service-view-zone",children:[Object(Xa.jsx)("p",{className:"service-view-zone__description",children:t.description}),Object(Xa.jsxs)("div",{className:"service-view-zone__lists-container",children:[Object(Xa.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Xa.jsx)("span",{className:"service-view-zone__list-header",children:a.allowedCurrencies}),Object(Xa.jsx)(xi,{service:t})]}),Object(Xa.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Xa.jsx)("span",{className:"service-view-zone__list-header",children:a.links}),Object(Xa.jsx)(ui,{className:"service-info__links",links:t.links})]})]})]})},fi=l.a.memo(ki);a(597);let Si;!function(e){e[e.ViewAndEdit=0]="ViewAndEdit",e[e.Create=1]="Create"}(Si||(Si={}));const Ai=e=>{const t=!!new URLSearchParams(Object(la.f)().search).get("edit"),{address:a}=Object(la.h)(),{services:s,initialized:n}=ga(_t),i=ga(Pt),r=i.has(a),c=!!i.size,o=e.mode===Si.Create,l=o?{...Xe}:s.filter((e=>e.contractAddress===a))[0],d=n&&l?l.name:a,u=Object(g.a)("service-container",t||o?"service-container_edit":"service-container_view");return Object(Xa.jsx)(Ws,{title:d,className:u,children:n&&l?t||o?Object(Xa.jsx)(Oi,{service:l,isCreateMode:o,readOnly:c}):Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsx)(Jn,{service:l,isUpdating:r,readOnly:c}),Object(Xa.jsx)(fi,{service:l}),Object(Xa.jsx)(Nn,{service:l,readOnly:r||l.deleted}),Object(Xa.jsx)(Zn,{service:l,readOnly:c}),Object(Xa.jsx)(Pn,{service:l,readOnly:c})]}):Object(Xa.jsx)(oa.a,{active:!0})})},_i=l.a.memo(Ai);var Ni=a(653),Ci=a(654),Ti=a(655),Pi=a(656);a(598);const zi=()=>{const e=ya().views.about;return Object(Xa.jsxs)(Ws,{title:e.title,className:"about-view",children:[Object(Xa.jsx)(Ws.Title,{className:"about-view__title",children:e.detailedTitle}),Object(Xa.jsxs)("div",{className:"about-view__version-info",children:[Object(Xa.jsx)(os,{href:jt.app.version.link,children:jt.app.version.name}),"\xa0",e.build,"\xa0",Object(Xa.jsx)(os,{href:jt.app.buildInfo.link,children:jt.app.buildInfo.commitShortSha})]}),Object(Xa.jsxs)("div",{className:"about-view__links",children:[Object(Xa.jsx)(os,{className:"about-link",href:jt.links.tezosPayments.webSite,children:Object(Xa.jsx)(Ni.a,{className:"about-link__icon"})}),Object(Xa.jsx)(os,{className:"about-link",href:jt.links.tezosPayments.gitHub,children:Object(Xa.jsx)(Ci.a,{className:"about-link__icon"})}),Object(Xa.jsx)(os,{className:"about-link",href:jt.links.tezosPayments.telegram,children:Object(Xa.jsx)(ci,{className:"about-link__icon"})}),Object(Xa.jsx)(os,{className:"about-link",href:jt.links.tezosPayments.twitter,children:Object(Xa.jsx)(Ti.a,{className:"about-link__icon"})}),Object(Xa.jsx)(os,{className:"about-link",href:jt.links.tezosPayments.reddit,children:Object(Xa.jsx)(Pi.a,{className:"about-link__icon"})})]}),Object(Xa.jsxs)("div",{className:"about-view__powered-by",children:[e.poweredBy,"\xa0",Object(Xa.jsx)(os,{href:jt.links.tzKT,children:e.tzKt}),"\xa0",e.api]})]})},Di=l.a.memo(zi);a(599);const Ui=()=>{const e=ja(),t=Object(o.useCallback)((()=>{e(pa(re.hangzhounet))}),[e]),a=Object(o.useCallback)((t=>{const a=ce.find((e=>e.id===t.key));a&&e(pa(a))}),[e]),s=ya().views.connect.actions.connect,n=[].map((e=>{const t=jt.tezos.networks[e.name];return Object(Xa.jsx)(hi.a.Item,{children:Object(Xa.jsxs)("div",{className:"connect-dropdown__item-container",children:[Object(Xa.jsx)("div",{className:"connect-dropdown__item-icon-container",children:Object(Xa.jsx)("div",{className:"connect-dropdown__item-icon",style:{backgroundColor:t.color}})}),Object(Xa.jsx)("div",{className:"connect-dropdown__item-text",children:"".concat(s.connectTo," ").concat(t.title)})]})},e.id)})),i=Object(Xa.jsx)(hi.a,{onClick:a,children:n}),r="".concat(s.connectTo," ").concat(jt.tezos.networks.hangzhounet.title);return n.length?Object(Xa.jsx)(bi.a.Button,{className:"connect-dropdown",type:"primary",onClick:t,overlay:i,children:r}):Object(Xa.jsx)(ts.a,{type:"primary",onClick:t,children:r})},Ii=l.a.memo(Ui);a(600);const Ki=()=>{const e=ya().views.connect.actions.connect;return ga(kt)?Object(Xa.jsx)(la.a,{to:jt.routers.overview}):Object(Xa.jsx)(Ws,{title:"Connect",className:"connect",children:Object(Xa.jsxs)("div",{className:"connect-info-container",children:[Object(Xa.jsx)("div",{className:"connect-info-container__message",children:e.description}),Object(Xa.jsx)(Ii,{})]})})},Ei=l.a.memo(Ki);var Li=a(148),Fi=a(628);a(601);const Bi=e=>{const t=ga(_t).services.find((t=>t.contractAddress===e.serviceAddress)),a=ga(At),s=[];if(t){const e=[];t.allowedTokens.assets.forEach((t=>{const s=a.get(t);s&&e.push(s)})),t.allowedTokens.tez&&s.push({label:de,value:"",imageUrl:pe}),e.forEach((e=>e.metadata&&s.push({label:e.metadata.symbol,value:e.contractAddress,imageUrl:e.metadata.thumbnailUri})))}const n=s.map((e=>Object(Xa.jsx)(Li.a.Option,{value:e.value,label:e.label,children:Object(Xa.jsxs)("div",{className:"payment-amount__select-option",children:[Object(Xa.jsx)("img",{className:"payment-amount__select-option-image",alt:e.label,src:e.imageUrl}),Object(Xa.jsx)("span",{className:"payment-amount__select-option-label",children:e.label})]})},e.label))),i=0===s.length;return Object(Xa.jsxs)("div",{className:"payment-amount",children:[Object(Xa.jsx)(Li.a,{className:"payment-amount__select",value:e.asset||"",onChange:e.onAssetChange,disabled:i,children:n}),Object(Xa.jsx)(Fi.a,{className:"payment-amount__input",stringMode:!0,min:"0",value:e.amount.toString(),onChange:e.onAmountChange,disabled:i})]})},Mi=l.a.memo(Bi);a(602);const Ri=e=>{const t=ya(),a=t.views.acceptPayments,s=t.views.services,n=Object(m.c)(Pt),i=ga(Tt).filter((e=>!e.deleted)).map((e=>({label:e.name,value:e.contractAddress,disabled:n.has(e.contractAddress)}))),r=[{label:"Payment",value:se.Payment},{label:"Donation",value:se.Donation}];return Object(Xa.jsxs)("div",{className:"accept-payments-settings",children:[Object(Xa.jsx)("span",{className:"accept-payments-settings__caption",children:s.service}),Object(Xa.jsx)(Li.a,{className:"accept-payments-settings__service-select",options:i,value:e.serviceAddress,onChange:e.onServiceAddressChange}),Object(Xa.jsx)("span",{className:"accept-payments-settings__caption",children:a.type}),Object(Xa.jsx)(Dn.a.Group,{className:"accept-payments-settings__type-select",optionType:"button",buttonStyle:"outline",options:r,value:e.paymentType,onChange:e.onPaymentTypeChange}),e.paymentType===se.Payment?Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsx)("span",{className:"accept-payments-settings__caption",children:a.amount}),Object(Xa.jsx)(Mi,{serviceAddress:e.serviceAddress,amount:e.amount,onAmountChange:e.onAmountChange,asset:e.asset,onAssetChange:e.onAssetChange}),Object(Xa.jsx)("span",{className:"accept-payments-settings__header",children:a.paymentData}),Object(Xa.jsx)("span",{className:"accept-payments-settings__caption",children:a.paymentId}),Object(Xa.jsx)(zn.a,{className:"accept-payments-settings__payment-id-input",value:e.paymentId,onChange:e.onPaymentIdChange}),Object(Xa.jsx)("span",{className:"accept-payments-settings__help-text",children:a.paymentIdHelpText})]}):Object(Xa.jsxs)(Xa.Fragment,{children:[Object(Xa.jsx)("span",{className:"accept-payments-settings__header",children:a.donationData}),Object(Xa.jsx)("span",{className:"accept-payments-settings__description-caption",children:a.donationDescription}),Object(Xa.jsx)(zn.a.TextArea,{className:"accept-payments-settings__description-input",value:e.donationDescription,onChange:e.onDonationDescriptionChange,showCount:!0,rows:5,maxLength:250}),Object(Xa.jsx)("span",{className:"accept-payments-settings__help-text",children:a.donationDescriptionHelpText})]})]})};a(603);const Wi=new Va.paymentUrlFactories.Base64PaymentUrlFactory(jt.links.tezosPayments.paymentsApp),Vi=e=>{let{paymentOrDonation:t,serviceAddress:a}=e;const s=ya(),n=s.common,i=s.views.acceptPayments,r=ga(kt),c=Za(a),[l,d]=Object(o.useState)(""),u=Object(o.useCallback)((async()=>{const e=(null===r||void 0===r?void 0:r.network)||re[jt.tezos.defaultNetwork];if(t.type===se.Donation)return Wi.createPaymentUrl(t,e);if(!c)return"";try{return(await c.createPayment({id:t.id,amount:t.amount.toString(),asset:t.asset,created:Date.now(),data:t.data})).url}catch(a){return console.error(a),""}}),[null===r||void 0===r?void 0:r.network,t,c]);Object(o.useEffect)((()=>{(async()=>{d(t.type===se.Payment?"":await u())})()}),[u,t]);const m=t.type===se.Payment?i.directLinkPaymentHelpText:i.directLinkDonationHelpText,p=Object(o.useCallback)((()=>{(async()=>{d(await u())})()}),[u]),v=Object(o.useCallback)((()=>{navigator.clipboard.writeText(l)}),[l]);return Object(Xa.jsxs)("div",{className:"generator__direct-link",children:[l&&Object(Xa.jsx)("span",{className:"generator__direct-link-help-text",children:m}),Object(Xa.jsx)(os,{className:"generator__direct-link-link",href:l,children:l}),Object(Xa.jsxs)("div",{className:"generator__direct-link-buttons",children:[!l&&Object(Xa.jsx)(ts.a,{type:"primary",onClick:p,children:i.generateAndSignPaymentLink}),l&&Object(Xa.jsx)(ts.a,{onClick:v,icon:Object(Xa.jsx)(is.a,{}),children:n.copyLink})]})]})},Hi=l.a.memo(Vi);a(604);const Zi=e=>{const t=ya().views.acceptPayments;return Object(Xa.jsx)("div",{className:"failed-validation-result",children:t.errors.fillRequiredData})};a(605);const Yi=e=>{var t;const a=ga(At),s=Za(e.serviceAddress),n=e.assetAddress?a.get(e.assetAddress):void 0,i=[{key:"widget",tab:"Widget",disabled:!0},{key:"typescript",tab:"TypeScript Library",disabled:!0},{key:"dotnet",tab:".NET Library",disabled:!0}];s&&i.splice(0,0,{key:"directLink",tab:"Direct Link"});const c=e.paymentType===se.Payment?{type:e.paymentType,targetAddress:e.serviceAddress,id:e.paymentId,asset:n?{address:n.contractAddress,decimals:(null===(t=n.metadata)||void 0===t?void 0:t.decimals)||0,id:"fa2"===n.type?n.id:null}:void 0,amount:new r.a(e.amount),created:new Date,signature:{signingPublicKey:"edpkuWJYhY5TVZ6xaoubNkidXArJmVhjA2yuZZuucEN6FF4fQeV9Dd",contract:"edsigtaNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNog2Ndso"}}:{type:e.paymentType,targetAddress:e.serviceAddress,data:e.clientData},o=c.type===se.Payment?Ve.validate(c):He.validate(c);return Object(Xa.jsx)(ls.a,{className:"generator",style:{width:"100%"},tabList:i,activeTabKey:"directLink",children:o?Object(Xa.jsx)(Zi,{results:o}):Object(Xa.jsx)(Hi,{paymentOrDonation:c,serviceAddress:e.serviceAddress})})},Gi=l.a.memo(Yi);a(606);const Ji=()=>{var e,t;const a=ya().views.acceptPayments,s=ga(_t),n=ga(At),{address:i}=Object(la.h)(),[c,l]=Object(o.useState)(i),[d,u]=Object(o.useState)(se.Payment),[m,p]=Object(o.useState)(""),v=Object(o.useCallback)((e=>{const t=s.services.filter((t=>t.contractAddress===e))[0];return t?t.allowedTokens.tez?void 0:t.allowedTokens.assets[0]:void 0}),[s.services]),[h,b]=Object(o.useState)(v(c)),[y,j]=Object(o.useState)(""),[g,O]=Object(o.useState)(),w=h?(null===(e=n.get(h))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.decimals)||0:me,x=Object(o.useCallback)((e=>{const t=e;l(t),b(v(t))}),[v]),k=Object(o.useCallback)((e=>{u(e.target.value)}),[]),f=Object(o.useCallback)((e=>{const t=e?new r.a(e).toFormat(w,{groupSeparator:"",decimalSeparator:"."}):"";p(t)}),[w]),S=Object(o.useCallback)((e=>{b(e||void 0),p("")}),[]),A=Object(o.useCallback)((e=>{j(e.target.value)}),[]),_=Object(o.useCallback)((e=>{O({description:e.target.value})}),[]);return Object(Xa.jsxs)(Ws,{title:a.title,children:[Object(Xa.jsx)(Ws.Title,{children:a.title}),s.initialized?s.services.length?Object(Xa.jsxs)("div",{className:"accept-payments",children:[Object(Xa.jsx)("div",{className:"accept-payments__settings",children:Object(Xa.jsx)(Ri,{serviceAddress:c,onServiceAddressChange:x,paymentType:d,onPaymentTypeChange:k,amount:m,onAmountChange:f,asset:h,onAssetChange:S,paymentId:y,onPaymentIdChange:A,donationDescription:(null===g||void 0===g?void 0:g.description)||"",onDonationDescriptionChange:_})}),Object(Xa.jsx)("div",{className:"accept-payments__generator",children:Object(Xa.jsx)(Gi,{serviceAddress:c,paymentType:d,assetAddress:h,amount:m,paymentId:y,clientData:g})})]}):Object(Xa.jsx)(ps,{}):Object(Xa.jsx)(oa.a,{active:!0})]})},Xi=l.a.memo(Ji),qi=e=>{const t=ya().views.analytics,a=ga(hs).initialized,s=ga((t=>Ps(t,e.operationType,e.period))),n=e.operationType===qe.Donation?t.maximumDonation:t.maximumPayment,i={dataset:{dimensions:["day",{name:"max",displayName:t.currency.usd}],source:s},tooltip:{trigger:"axis"},legend:{selectedMode:!1},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",color:Fs.Blue}]};return Object(Xa.jsx)(Ks,{className:e.className,title:n,option:i,loading:!a})},Qi=l.a.memo(qi),$i=e=>{const t=ya().views.analytics,a=ga(hs).initialized,s=ga((t=>zs(t,e.operationType,e.period))),n=e.operationType===qe.Donation?t.newDonators:t.newCustomers,i={dataset:{dimensions:["day",{name:"newSendersCount",displayName:n}],source:s},tooltip:{trigger:"axis"},legend:{selectedMode:!1},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",color:Fs.Blue}]};return Object(Xa.jsx)(Ks,{className:e.className,title:n,option:i,loading:!a})},er=l.a.memo($i),tr=e=>{const t=ya().views.analytics,a=ga(hs).initialized,s=ga((t=>_s(t,e.operationType,e.period))),n={dataset:{dimensions:["day",{name:"profit",displayName:t.currency.usd}],source:s},tooltip:{trigger:"axis"},legend:{selectedMode:!1},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"line",color:Fs.Blue}]};return Object(Xa.jsx)(Ks,{className:e.className,title:t.profit,option:n,loading:!a})},ar=l.a.memo(tr),sr=e=>{const t=qe.Donation;return Object(Xa.jsxs)("div",{className:"analytics",children:[Object(Xa.jsx)(ar,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(Ls,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(er,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(Qi,{className:"analytics__chart",period:e.period,operationType:t})]})},nr=l.a.memo(sr);a(607);const ir=(e,t)=>{switch(e){case us.Services:return t.views.analytics.view.services;case us.Donations:return t.views.analytics.view.donations;default:throw new Error("Unsupported view type: ".concat(e))}},rr=(e,t)=>{switch(e){case ds.All:return t.common.period.allTime;case ds.LastWeek:return t.common.period.lastWeek;case ds.LastMonth:return t.common.period.lastMonth;case ds.LastYear:return t.common.period.lastYear;default:throw new Error("Unsupported period type: ".concat(e))}},cr=Object.keys(ds).map((e=>Number(e))).filter((e=>!isNaN(e))),or=Object.keys(us).map((e=>Number(e))).filter((e=>!isNaN(e))),lr=e=>{const t=ya(),a=t.views.analytics,s=Object(o.useCallback)((t=>{e.onViewChange(t.target.value)}),[e]),n=Object(o.useCallback)((t=>{e.onPeriodChange(t)}),[e]),i=cr.map((e=>Object(Xa.jsx)(Li.a.Option,{value:e,children:rr(e,t)},e))),r=or.map((e=>Object(Xa.jsx)(Dn.a.Button,{value:e,children:ir(e,t)},e)));return Object(Xa.jsxs)("div",{className:"analytics-header",children:[Object(Xa.jsx)("h1",{className:"analytics-header__title",children:a.title}),Object(Xa.jsxs)("div",{className:"analytics-header__selector-container",children:[Object(Xa.jsx)(Li.a,{className:"analytics-header__period",value:e.period,onChange:n,children:i}),Object(Xa.jsx)(Dn.a.Group,{value:e.view,onChange:s,children:r})]})]})},dr=l.a.memo(lr),ur=e=>{const t=ga(hs).initialized,a=ya().views.analytics,s=ga((t=>Cs(t,e.operationType,e.period))),n={dataset:{dimensions:["day",{name:"incoming",displayName:a.success},{name:"outgoing",displayName:a.refund},{name:"failed",displayName:a.failed}],source:s},tooltip:{trigger:"axis"},xAxis:{type:"category"},yAxis:{type:"value"},series:[{type:"bar",color:Fs.Green,stack:"main-stack"},{type:"bar",color:Fs.Yellow,stack:"main-stack"},{type:"bar",color:Fs.Red,stack:"main-stack"}]};return Object(Xa.jsx)(Ks,{className:e.className,title:a.operationsCountByTypes,option:n,loading:!t})},mr=l.a.memo(ur),pr=e=>{const t=ya().views.analytics,a=ga(hs).initialized,s=ga((t=>Ts(t,e.operationType,e.period,e.operationDirection))),n=e.operationDirection===Qe.Incoming?t.incoming:t.outgoing,i={tooltip:{trigger:"item"},legend:{orient:"vertical"},toolbox:void 0,series:[{name:n,type:"pie",radius:["40%","80%"],avoidLabelOverlap:!1,label:{show:!1,position:"center"},emphasis:{label:{show:!0,fontSize:30}},data:s}]};return Object(Xa.jsx)(Ks,{className:e.className,title:"".concat(n," (").concat(t.currency.usd,")"),option:i,loading:!a})},vr=l.a.memo(pr),hr=e=>{const t=qe.Payment;return Object(Xa.jsxs)("div",{className:"analytics",children:[Object(Xa.jsx)(ar,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(Ms,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(vr,{className:"analytics__chart",period:e.period,operationType:t,operationDirection:Qe.Incoming}),Object(Xa.jsx)(vr,{className:"analytics__chart",period:e.period,operationType:t,operationDirection:Qe.Outgoing}),Object(Xa.jsx)(Ls,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(mr,{className:"analytics__chart",period:e.period,operationType:t}),Object(Xa.jsx)(er,{className:"analytics__chart",period:e.period,operationType:t})]})},br=l.a.memo(hr);a(608);const yr=()=>{const e=ya().views.analytics,t=ga(_t),[a,s]=Object(o.useState)(us.Services),n=Object(o.useCallback)((e=>{s(e)}),[]),[i,r]=Object(o.useState)(ds.LastWeek),c=Object(o.useCallback)((e=>{r(e)}),[]);return Object(Xa.jsxs)(Ws,{title:e.title,className:"overview",children:[Object(Xa.jsx)(dr,{view:a,onViewChange:n,period:i,onPeriodChange:c}),t.initialized&&!t.services.length?Object(Xa.jsx)(ps,{}):a===us.Services?Object(Xa.jsx)(br,{period:i}):Object(Xa.jsx)(nr,{period:i})]})},jr=l.a.memo(yr);var gr=a(85),Or=a(657),wr=a(658),xr=a(659);a(609);class kr extends De{static getShortAddress(e){return"".concat(e.address.substr(0,9),"...").concat(e.address.substr(e.address.length-6,6))}}a(610);const fr=e=>{const t=jt.tezos.networks[e.network.name];return Object(Xa.jsxs)("div",{className:"account-network-group",children:[Object(Xa.jsx)("div",{className:"account-network-group__icon-container",children:Object(Xa.jsx)("div",{className:"account-network-group__icon",style:{backgroundColor:t.color}})}),Object(Xa.jsx)("div",{children:t.title})]})},Sr=l.a.memo(fr),Ar=()=>{const e=Oa(),t=ya(),a=t.views.header.accountActions,s=ga(ft),n=ga(kt),i=(null===n||void 0===n?void 0:n.address)||"",r=ga(St),c=r&&r.explorers[r.default.explorer],l=Object(o.useCallback)((()=>{navigator.clipboard.writeText(i)}),[i]),d=Object(o.useCallback)((()=>{c&&window.open(e.tezosExplorer.getAccountUrl(i),"_blank")}),[e.tezosExplorer,i,c]),u=ja(),m=Object(o.useCallback)((()=>{u(va())}),[u]);if(!n)return null;const p=[...s.keys()].map((e=>{var t;return Object(Xa.jsx)(hi.a.ItemGroup,{title:Object(Xa.jsx)(Sr,{network:e}),children:null===(t=s.get(e))||void 0===t?void 0:t.map((e=>Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Or.a,{}),className:Object(g.a)("account-menu-item",{"account-menu-item_selected":e.address===n.address}),style:e.address!==n.address?void 0:{backgroundColor:gr.a[0],color:gr.a.primary},children:e.address},e.address)))},e.id)})),v=Object(Xa.jsxs)(hi.a,{children:[p,Object(Xa.jsx)(hi.a.Divider,{}),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(is.a,{}),onClick:l,children:a.copyAddress.title},1),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(qs.a,{}),onClick:d,children:"".concat(a.viewOn," ").concat(null===c||void 0===c?void 0:c.title)},2),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(wr.a,{}),children:"".concat(a.connectAnotherAccount.title," (").concat(t.common.comingSoon.toLowerCase(),")")},3),Object(Xa.jsx)(hi.a.Divider,{}),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(xr.a,{}),onClick:m,children:a.disconnect.title},5)]});return Object(Xa.jsx)(bi.a,{overlay:v,placement:"bottomRight",children:Object(Xa.jsx)(ts.a,{style:{borderColor:gr.a.primary,color:gr.a.primary},className:"account-dropdown",children:kr.getShortAddress(n)})})},_r=l.a.memo(Ar);a(611);const Nr=()=>{const e=ga(kt);return Object(Xa.jsxs)("header",{className:"header",children:[Object(Xa.jsx)(p.b,{className:"header__title",to:jt.routers.overview,children:jt.app.title}),e&&Object(Xa.jsx)(_r,{})]})},Cr=l.a.memo(Nr);var Tr=a(660),Pr=a(661),zr=a(662),Dr=a(663),Ur=a(664),Ir=a(187);a(612);const Kr=()=>{const e=Object(la.f)(),t=ya().views,a=Object(la.g)(),s=Object(o.useCallback)((()=>{a(jt.routers.createService)}),[a]),n=Object(o.useCallback)((()=>{a(jt.routers.acceptPayments)}),[a]);return Object(Xa.jsxs)("nav",{className:"navbar",children:[Object(Xa.jsxs)(hi.a,{className:"navbar__menu",mode:"inline",selectedKeys:[e.pathname],children:[Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Tr.a,{}),children:Object(Xa.jsx)(p.b,{to:jt.routers.overview,children:t.overview.title})},jt.routers.overview),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Pr.a,{}),children:Object(Xa.jsx)(p.b,{to:jt.routers.analytics,children:t.analytics.title})},jt.routers.analytics),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(zr.a,{}),children:Object(Xa.jsx)(p.b,{to:jt.routers.operations,children:t.operations.title})},jt.routers.operations),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Dr.a,{}),children:Object(Xa.jsx)(p.b,{to:jt.routers.services,children:t.services.title})},jt.routers.services),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Ur.a,{}),disabled:!0,children:t.settings.title},"settings"),Object(Xa.jsx)(hi.a.Item,{icon:Object(Xa.jsx)(Ir.a,{}),children:Object(Xa.jsx)(p.b,{to:jt.routers.about,children:t.about.title})},jt.routers.about)]}),Object(Xa.jsxs)("div",{className:"navbar__bottom-buttons",children:[Object(Xa.jsx)(ts.a,{onClick:s,children:t.createService.title}),Object(Xa.jsx)(ts.a,{onClick:n,type:"primary",children:t.acceptPayments.title})]})]})},Er=l.a.memo(Kr);var Lr=a(323);const Fr=()=>{const{services:e,pendingOperations:t}=Object(m.c)(_t);return Object(o.useEffect)((()=>{t.forEach((t=>{const a=e.find((e=>e.contractAddress===t.serviceAddress)),s=Object(Xa.jsxs)("span",{children:[Object(Xa.jsx)("b",{children:t.action}),a&&Object(Xa.jsxs)(Xa.Fragment,{children:[" for service: ",Object(Xa.jsx)("b",{children:"".concat(a.name)})]})]}),n=t.hash;switch(t.status){case Rt.loading:{const e="".concat(t.confirmationCount," / ").concat(t.targetConfirmationCount);Lr.b.loading({content:Object(Xa.jsxs)("span",{children:["Executing operation: ",s," (",e,")"]}),key:n,duration:0});break}case Rt.success:Lr.b.success({content:Object(Xa.jsxs)("span",{children:["Finished operation: ",s]}),key:n,duration:4});break;case Rt.error:Lr.b.error({content:Object(Xa.jsxs)("span",{children:["Failed operation: ",s]}),key:n,duration:4})}}))}),[t,e]),null},Br=l.a.memo(Fr);a(613),a(614);const Mr=jt.routers.acceptServicePayments.template.substring(jt.routers.acceptServicePayments.template.indexOf(jt.routers.acceptPayments)),Rr=()=>{const e=ga(xt).initialized,t=ja();return Object(o.useEffect)((()=>{t(ma())}),[t]),Object(Xa.jsxs)("div",{className:"main-container",children:[Object(Xa.jsx)(Br,{}),Object(Xa.jsx)(Cr,{}),Object(Xa.jsx)(Er,{}),e?Object(Xa.jsxs)(la.d,{children:[Object(Xa.jsx)(la.b,{path:jt.routers.overview,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(Xs,{})})}),Object(Xa.jsx)(la.b,{path:jt.routers.analytics,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(jr,{})})}),Object(Xa.jsx)(la.b,{path:jt.routers.operations,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(dn,{})})}),Object(Xa.jsx)(la.b,{path:jt.routers.createService,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(_i,{mode:Si.Create})})}),Object(Xa.jsx)(la.b,{path:jt.routers.service.template,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(_i,{mode:Si.ViewAndEdit})})}),Object(Xa.jsx)(la.b,{path:jt.routers.services,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(An,{})})}),Object(Xa.jsxs)(la.b,{path:jt.routers.acceptPayments,children:[Object(Xa.jsx)(la.b,{path:"",element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(Xi,{})})}),Object(Xa.jsx)(la.b,{path:Mr,element:Object(Xa.jsx)($a,{children:Object(Xa.jsx)(Xi,{})})})]}),Object(Xa.jsx)(la.b,{path:jt.routers.about,element:Object(Xa.jsx)(Di,{})}),Object(Xa.jsx)(la.b,{path:jt.routers.connect,element:Object(Xa.jsx)(Ei,{})})]}):Object(Xa.jsx)(oa.a,{})]})},Wr=e=>{let{getReactAppContext:t,networkChangedEvent:a,children:s}=e;const[n,i]=Object(o.useState)(t()),r=Object(o.useCallback)((()=>i(t())),[t]);return Object(o.useEffect)((()=>(a.addListener(r),()=>{a.removeListener(r)})),[a,r]),Object(Xa.jsx)(ca.Provider,{value:n,children:s})};var Vr=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,665)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:i,getTTFB:r}=t;a(e),s(e),n(e),i(e),r(e)}))},Hr=a(83);const Zr=Object(Hr.b)({accountsState:ha.reducer,servicesState:aa.reducer,balancesState:It.reducer,operationsState:Bt.reducer});a(615);Object(c.d)();const Yr=new class{constructor(e){this.store=void 0,this.tezosWallet=new h.a({name:jt.app.name,colorMode:v.i.LIGHT}),this.networkChanged=new Ue,this.onStoreChangedListener=this.onStoreChanged.bind(this),this.unsubscribeStoreChanged=void 0,this._network=void 0,this._tezosToolkit=void 0,this._services=void 0,this._reactAppContext=void 0,this.currentAccountAddress=void 0,this.store=e(this),this.applyNetwork(re[jt.tezos.defaultNetwork]),this.currentAccountAddress=null,this.unsubscribeStoreChanged=this.store.subscribe(this.onStoreChangedListener)}get network(){if(!this._network)throw this.getNetworkError();return this._network}get tezosToolkit(){if(!this._tezosToolkit)throw this.getNetworkError();return this._tezosToolkit}get services(){if(!this._services)throw this.getNetworkError();return this._services}get reactAppContext(){if(!this._reactAppContext)throw this.getNetworkError();return this._reactAppContext}onStoreChanged(){const e=this.store.getState(),t=kt(e),a=t&&t.address;a!==this.currentAccountAddress&&(this.currentAccountAddress=a,this.clearAccountData(),t&&(t.network!==this.network&&this.applyNetwork(t.network),this.fetchAccountData(t)))}async fetchAccountData(e){await this.store.dispatch(Ht(e)),await this.store.dispatch(Ut(e))}async clearAccountData(){await Promise.all([this.store.dispatch(Kt()),this.store.dispatch(Qt())])}applyNetwork(e){this._network=e;const t=jt.tezos.networks[this.network.name];this._tezosToolkit=new b.b(t.rpcUrls[t.default.rpc]),this.tezosToolkit.setSignerProvider(new rt),this.tezosToolkit.setWalletProvider(this.tezosWallet),this._services=this.createServices(),this._reactAppContext=this.createReactAppContext(),this.networkChanged.emit(this._network,e)}createServices(){const e=jt.tezos.networks[this.network.name],t=this.createServicesProvider(this.network),a=new vt(this.tezosToolkit);return{accountsService:new gt(this.tezosWallet.client,a),servicesService:new Ot.a(this.tezosToolkit,t,e.servicesFactoryContractAddress)}}createReactAppContext(){return{tezosWallet:this.tezosWallet,tezosExplorer:this.createTezosBlockchainUrlExplorer(this.network)}}createServicesProvider(e){const t=jt.tezos.networks[e.name];switch(t.default.indexer){case"tzKT":return new mt(e,t.indexerUrls.tzKT,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);case"betterCallDev":return new pt(e,t.indexerUrls.betterCallDev,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);default:throw new Error("Unknown service provider")}}createTezosBlockchainUrlExplorer(e){const t=jt.tezos.networks[e.name];switch(t.default.explorer){case"tzKT":return new lt(e,t.explorers.tzKT.baseUrl);case"tzStats":return new ut(e,t.explorers.tzStats.baseUrl);case"betterCallDev":return new dt(e,t.explorers.betterCallDev.baseUrl);default:throw new Error("Unknown blockchain explorer")}}getNetworkError(){return new Error("Network is not defined")}}((e=>Object(n.a)({reducer:Zr,devTools:{serialize:!0},middleware:t=>t({thunk:{extraArgument:e},serializableCheck:{isSerializable:e=>Object(n.d)(e)||e instanceof Map||e instanceof Set||i.BigNumber.isBigNumber(e)||e instanceof Date,getEntries:e=>e instanceof Map||e instanceof Set?[...e.entries()]:Object.entries(e)}})})));u.a.render(Object(Xa.jsx)(l.a.StrictMode,{children:Object(Xa.jsx)(m.a,{store:Yr.store,children:Object(Xa.jsx)(p.a,{children:Object(Xa.jsx)(Wr,{getReactAppContext:()=>Yr.reactAppContext,networkChangedEvent:Yr.networkChanged,children:Object(Xa.jsx)(Rr,{})})})})}),document.getElementById("root")),window.webApp=Yr,window.config=jt,Vr()}},[[616,1,2]]]);
//# sourceMappingURL=main.53b3fe35.chunk.js.map