{"version":3,"sources":["services/servicesService.ts","../../src/utils/base64.ts","../../src/utils/converters.ts","../../src/utils/guards.ts","../../src/utils/memoize.ts","../../src/utils/optimization.ts","../../src/utils/text.ts","../../src/utils/index.ts","../../src/helpers/serviceLinkHelper.ts","../../src/models/payment/paymentBase.ts","../../src/helpers/paymentValidator/paymentValidatorBase.ts","../../src/models/blockchain/network.ts","../../src/models/blockchain/token.ts","../../src/models/blockchain/tezosInfo.ts","../../src/models/blockchain/keyType.ts","../../src/native/index.ts","../../src/helpers/paymentValidator/validationMethods.ts","../../src/helpers/paymentValidator/paymentValidator.ts","../../src/helpers/paymentValidator/donationValidator.ts","../../src/models/core/stateModel.ts","../../src/models/core/eventEmitter.ts","../../src/serialization/base64/objectSerializationValidator.ts","../../src/serialization/base64/base64Serializer.ts","../../src/serialization/base64/base64Deserializer.ts","../../src/serialization/payment/serializedPaymentFieldTypes.ts","../../src/serialization/payment/paymentSerializer.ts","../../src/serialization/payment/paymentDeserializer.ts","../../src/serialization/donation/serializedDonationFieldTypes.ts","../../src/serialization/donation/donationSerializer.ts","../../src/serialization/donation/donationDeserializer.ts","../../src/models/payment/payment.ts","../../src/models/payment/donation.ts","../../src/models/payment/paymentUrlType.ts","../../src/models/routing/parameterizedRoute.ts","../../src/models/service/serviceOperationType.ts","../../src/models/service/service.ts","../../src/models/operation/operationType.ts","../../src/models/operation/operationDirection.ts","../../src/models/operation/operationStatus.ts","../../src/models/operation/donationOperation.ts","../../src/signing/signPayloadEncoders/clientSignPayload.ts","../../src/signing/signPayloadEncoders/michelsonTypes.ts","../../src/signing/signPayloadEncoders/paymentSignPayloadEncoder.ts","../../src/signing/keyPairGenerators/ed25519KeyGenerator.ts","../../src/signing/keyPairGenerators/ellipticCurveKeyGenerator.ts","../../src/signing/readOnlySigner.ts","../../../src/config/defaultConfig.ts","../../../src/explorers/blockchainUrlExplorer.ts","../../../src/explorers/tzKTBlockchainUrlExplorer.ts","../../../src/explorers/betterCallDevUrlBlockchainExplorer.ts","../../../src/explorers/tzStatsBlockchainUrlExplorer.ts","../../../../src/providers/tzKTDataProvider/tzKTDataProvider.ts","../../../../src/providers/betterCallDevDataProvider/betterCallDevDataProvider.ts","../../../../src/providers/tezosNodeDataProvider/tezosNodeDataProvider.ts","../../../src/utils/converters.ts","config/config.ts","services/accountsService.ts","store/accounts/selectors.ts","store/services/selectors.ts","store/balances/slice.ts","store/operations/slice.ts","store/services/slice.ts","app/reactAppContext.ts","store/accounts/slice.ts","localization/en-US/index.ts","localization/en-US/common/index.ts","localization/en-US/views/header.ts","localization/en-US/views/overview.ts","localization/en-US/views/analytics.ts","localization/en-US/views/createService.ts","localization/en-US/views/connect.ts","localization/en-US/views/about.ts","localization/en-US/views/operations.ts","localization/en-US/views/services.ts","localization/en-US/views/settings.ts","localization/en-US/views/acceptPayments.ts","components/hooks/useCurrentLanguage.tsx","components/hooks/reduxHooks.ts","components/hooks/useAppContext.tsx","../../src/constants.ts","../../src/errors.ts","../../src/paymentUrlFactories/paymentUrlFactory.ts","../../src/paymentUrlFactories/base64PaymentUrlFactory.ts","../../src/models.ts","../../src/signers/tezosPaymentsSigner.ts","../../src/signers/apiSecretKeySigner.ts","../../src/signers/walletSigner.ts","../../src/signers/customSigner.ts","../../src/validation/tezosPaymentsOptionsValidator.ts","../../src/tezosPayments.ts","../../src/index.ts","components/hooks/useTezosPayments.tsx","components/hooks/useKeyPairGenerator.ts","components/common/RequireConnection.tsx","components/common/TokenList/TokenListItem.tsx","components/common/TokenList/TokenList.tsx","components/common/ExplorerLink/ExplorerLink.tsx","components/common/ExternalLink.tsx","models/system/period.ts","models/system/analyticsView.ts","components/common/NoServicesCreated/NoServicesCreated.tsx","store/operations/selectors.ts","components/common/Chart/Chart.tsx","components/views/Analytics/Charts/OperationsCountByTokens/OperationsCountByTokens.tsx","models/charts/lineColor.ts","components/views/Analytics/Charts/Volume/Volume.tsx","components/views/View/ViewTitle.tsx","components/views/View/View.tsx","components/hooks/useViewTitle.tsx","store/balances/selectors.ts","components/views/Overview/SmallCards/Balances.tsx","components/views/Overview/SmallCards/TotalVolume.tsx","components/views/Overview/Overview.tsx","components/common/OperationList/OperationIcon.tsx","components/common/OperationList/OperationList.tsx","components/views/Operations/NoOperationsPerformed/NoOperationsPerformed.tsx","components/views/Operations/Operations.tsx","components/views/Services/ServiceCards/NewServiceCard.tsx","components/common/Tags/ActiveTag/ActiveTag.tsx","components/common/Tags/CustomTag/CustomTag.tsx","components/views/Services/ServiceCards/ServiceCard.tsx","components/views/Services/Services.tsx","components/views/Service/ActionsZone/ActionsZone.tsx","components/views/Service/DangerZone/DangerZone.tsx","components/views/Service/DevZone/AddApiKeyModal/AddApiKeyModal.tsx","components/views/Service/DevZone/ApiKeyList/ApiKeyList.tsx","components/views/Service/DevZone/DevZone.tsx","components/views/Service/Header/Header.tsx","assets/icons/telegram.svg","components/common/ServiceLinks/iconIdMap.ts","components/common/ServiceLinks/ServiceLink.tsx","components/common/ServiceLinks/ServiceLinks.tsx","components/common/ServiceLinks/ServiceLinkEditor.tsx","components/common/ServiceLinks/ServiceLinksEditor.tsx","components/views/Service/ServiceEditForm/TokensEditor/TokensEditor.tsx","components/views/Service/ServiceEditForm/ServiceEditForm.tsx","components/views/Service/ViewZone/Tokens/Tokens.tsx","components/views/Service/ViewZone/ViewZone.tsx","components/views/Service/Service.tsx","components/hooks/useQuery.tsx","components/views/About/About.tsx","components/views/Connect/ConnectDropdown/ConnectDropdown.tsx","components/views/Connect/Connect.tsx","components/views/AcceptPayments/PaymentAmount/PaymentAmount.tsx","components/views/AcceptPayments/AcceptPaymentsSettings/AcceptPaymentsSettings.tsx","components/views/AcceptPayments/Generator/DirectLinkGenerator/DirectLinkGenerator.tsx","components/views/AcceptPayments/Generator/FailedValidationResult/FailedValidationResult.tsx","components/views/AcceptPayments/Generator/Generator.tsx","components/views/AcceptPayments/AcceptPayments.tsx","components/views/Analytics/Charts/MaxTransaction/MaxTransaction.tsx","components/views/Analytics/Charts/NewSenders/NewSenders.tsx","components/views/Analytics/Charts/Profit/Profit.tsx","components/views/Analytics/Donations/Donations.tsx","components/views/Analytics/Header/Header.tsx","components/views/Analytics/Charts/OperationsCountByTypes/OperationsCountByTypes.tsx","components/views/Analytics/Charts/VolumeByTokens/VolumeByTokens.tsx","components/views/Analytics/Services/Services.tsx","components/views/Analytics/Analytics.tsx","models/blockchain/account.ts","components/App/AccountDropdown/AccountNetworkGroup/AccountNetworkGroup.tsx","components/App/AccountDropdown/AccountDropdown.tsx","components/App/Header/Header.tsx","components/App/NavBar/NavBar.tsx","components/App/Notifications/Notifications.tsx","components/App/App.tsx","components/AppContextProvider/AppContextProvider.tsx","reportWebVitals.ts","store/index.ts","index.tsx","app/webApp.ts"],"names":["ServicesService","constructor","tezosToolkit","servicesProvider","servicesFactoryContractAddress","account","this","getServices","address","serviceContractAddress","getService","getOperations","service","serviceContract","getServiceContract","contractAddress","encodedServiceMetadata","encodeMetadata","methodsObject","update_service_parameters","metadata","allowed_tokens","tez","allowedTokens","assets","allowed_operation_type","allowedOperationType","send","paused","set_pause","deleted","set_deleted","factoryContract","contract","at","factoryStorage","storage","factoryImplementationContract","getFactoryImplementationContract","factory_implementation","signingKeysMichelsonMap","MichelsonMap","signingKey","signingKeys","values","set","publicKey","public_key","name","create_service","signing_keys","addApiKey","signingKeyUpdatesMap","updateSigningKeys","deleteApiKey","undefined","update_signing_keys","serviceMetadata","links","length","description","iconUrl","Buffer","from","JSON","stringify","toString","wallet","isBase64UrlFormatSupported","decode","format","base64String","base64UrlPreprocessor","encode","encodedValue","prepareEncodedValue","base64value","prepareValueForDecoding","Error","stringToUint8Array","hex","integers","val","parseInt","Uint8Array","stringToBytes","value","bytesToString","tokensAmountToNat","tokensAmount","numberToTokensAmount","tezToMutez","mutez","isPlainObject","isPlainObjectLodashFunction","arg","Array","defaultEqualityCheck","a","areArgumentsShallowlyEqual","prev","next","i","equalityCheck","memoize","lastArgs","lastResult","func","zeroBigNumber","stringPad","fillString","String","string","stringLength","maxLength","fillLength","filler","Math","isStart","padStart","result","j","isWord","wait","ms","Promise","resolve","setTimeout","IconId","prepareFormattedLink","link","prepareDisplayLink","socialMediaLinkInfoProvider","formattedLink","rawLink","displayLink","icon","emailCheckingRegEx","urlSchemeRegEx","ServiceLinkHelper","getLinkInfo","isEditMode","linkInfo","provider","linkInfoIsValid","Common","editLinkInfoProvider","PaymentType","getInvalidLinkInfo","preparedFormattedLink","Email","PaymentValidatorBase","validate","payment","bail","guards","currentFailedValidationResults","validationMethod","failedValidationResults","networksInternal","mainnet","id","hangzhounet","networks","networksCollection","Object","networkIdRegExp","networkNameRegExp","tezosMeta","unknownAssetMeta","symbol","decimals","thumbnailUri","tokenWhitelist","network","type","tokenWhitelistMap","Map","nc","t","contractAddressPrefixes","implicitAddressPrefixes","tezosInfo","addressLength","addressPrefixes","KeyType","URL","NodeURL","globalThis","validateTargetAddress","targetAddress","errors","prefix","validateAmount","BigNumber","amount","validateUrl","url","validateData","data","validateAsset","validateAssetAddress","asset","validateAssetId","assetAddress","assetId","Number","validateAssetDecimals","assetDecimals","PaymentValidator","validateId","validatePaymentAsset","date","isNaN","validateCreatedDate","expiredDate","createdDate","validateExpiredDate","invalidPaymentObject","invalidType","invalidTargetAddress","targetAddressIsNotNetworkAddress","targetAddressHasInvalidLength","invalidId","emptyId","invalidAmount","amountIsNonPositive","invalidData","invalidAsset","invalidAssetAddress","assetAddressIsNotContractAddress","assetAddressHasInvalidLength","invalidAssetId","assetIdIsNegative","assetIdIsNotInteger","invalidAssetDecimals","assetDecimalsNumberIsNegative","assetDecimalsNumberIsNotInteger","invalidSuccessUrl","successUrlHasInvalidProtocol","invalidCancelUrl","cancelUrlHasInvalidProtocol","invalidCreatedDate","invalidExpiredDate","paymentLifetimeIsShort","invalidUrl","invalidProtocol","DonationValidator","donation","validateDesiredAmount","desiredAmount","validateDonationAsset","invalidDonationObject","StateModel","EventEmitter","Set","addListener","listener","removeListener","listeners","has","delete","removeAllListeners","emit","args","size","ObjectSerializationValidator","objectFieldTypes","minObjectFieldsCount","count","info","maxObjectFieldsCount","fieldNames","fieldName","fieldValue","actualFieldType","expectedFieldType","expectedType","Base64Serializer","fieldTypes","serialize","objectSerializationValidator","jsonString","base64","Base64Deserializer","deserialize","serializedValue","serializedValueString","serializedPaymentFieldTypes","PaymentSerializer","serializedPayment","mapPaymentToSerializedPayment","as","mapPaymentAssetToSerializedPaymentAsset","d","su","cu","c","e","s","mapPaymentSignatureToSerializedPaymentSignature","paymentAsset","paymentSignature","k","cl","client","PaymentDeserializer","serializedPaymentBase64","mapSerializedPaymentToPayment","mapSerializedPaymentAssetToPaymentAsset","successUrl","cancelUrl","created","Date","expired","signature","mapSerializedPaymentSignatureToPaymentSignature","serializedPaymentAsset","serializedPaymentSignature","signingPublicKey","serializedDonationFieldTypes","DonationSerializer","serializedDonation","mapDonationToSerializedDonation","serializedDonationBase64","da","das","mapDonationAssetToSerializedDonationAsset","mapDonationSignatureToSerializedDonationSignature","donationAsset","donationSignature","DonationDeserializer","mapSerializedDonationToDonation","desiredAsset","mapSerializedDonationAssetToDonationAsset","nonSerializedDonationSlice","mapSerializedDonationSignatureToDonationSignature","serializedDonationAsset","serializedDonationSignature","Payment","Donation","PaymentUrlType","encodedPaymentUrlTypeMap","text","getParameterizedRoute","factory","ServiceOperationType","emptyService","optimization","version","emptyArray","owner","emptyMap","OperationType","OperationDirection","OperationStatus","DonationOperation","valueString","converters","contractPaymentInTezSignPayloadMichelsonType","prim","contractPaymentInAssetSignPayloadMichelsonType","PaymentSignPayloadEncoder","contractSignPayload","getContractSignPayload","clientSignPayload","getClientSignPayload","packDataBytes","int","href","serializedClientSignPayload","_key","signedMessageBytes","tezosSignedMessagePrefixBytes","Ed25519KeyGenerator","isInitialized","generate","keyPair","sodium","raw","keyType","privateKey","encoded","b58cencode","instance","EllipticCurveKeyGenerator","curveName","ec","console","publicBasePoint","publicPointX","publicPointY","firstByte","pad","fill","concat","curveInfo","secp256k1","privateKeyPrefix","publicKeyPrefix","p256","ReadOnlySigner","commitShortSha","process","config","defaultConfig","app","publicUrl","title","buildInfo","routers","overview","analytics","operations","services","isEdit","createService","acceptPayments","acceptServicePayments","connect","about","tzKT","AccountsService","dAppClient","balancesProvider","requestPermissions","networkToBeaconNetwork","then","permissions","catch","error","clearActiveAccount","disconnect","activeAccount","getActiveAccount","beaconNetworkToNetwork","getTezosBalance","token","getTokenBalance","selectAccountsState","state","accountsState","selectCurrentAccount","createSelector","currentAccount","connectedAccounts","find","selectAccountsByNetwork","reduce","p","get","selectCurrentNetworkConfig","tezos","selectTokensState","selectServicesState","servicesState","selectAllAcceptedTokens","tokensState","forEach","add","selectAcceptTezos","some","selectSortedServices","sort","b","localeCompare","selectPendingOperationsByService","pendingOperations","operationsMap","op","serviceAddress","push","initialState","tokens","emptyObject","initialized","namespace","loadBalances","createAsyncThunk","async","extra","getState","accountsService","acceptedTokens","balancesPromises","map","all","balancesSlice","createSlice","reducers","clearBalances","extraReducers","builder","addCase","fulfilled","action","payload","actions","loadOperations","servicesAddresses","operationsPromises","servicesService","flat","operationsSlice","clearOperations","PendingOperationStatus","loadServices","dispatch","updateService","operation","waitOperationConfirmation","reloadServices","setPaused","setDeleted","clearServices","_","createPendingOperation","hash","targetConfirmationCount","confirmationCount","status","loading","operationName","confirmationsNumber","pendingOperation","opHash","addPendingOperation","reject","confirmationObservable","subscribe","confirmation","setPendingOperationConfirmationCount","currentConfirmation","setPendingOperationStatus","deletePendingOperation","success","servicesSlice","o","filter","ReactAppContext","React","createContext","loadActiveAccount","connectAccount","disconnectAccount","accountsSlice","nextAccount","enUS","resources","common","comingSoon","copy","copyLink","open","new","cancel","save","yes","no","period","allTime","lastWeek","lastMonth","lastYear","views","header","accountActions","copyAddress","viewOn","connectAnotherAccount","balances","incoming","outgoing","operationCount","volume","revenue","profit","maximumPayment","maximumDonation","newCustomers","newDonators","refund","failed","operationsCountByTokens","operationsCountByTypes","currency","usd","view","donations","connectTo","detailedTitle","build","poweredBy","tzKt","api","operationList","paymentId","donationData","income","expense","cancelled","pending","noOperationsPerformedYet","active","updating","createNewService","acceptPaymentsDescription","youDoNotHaveAnyServicesYet","createYourFirstService","paymentsEnabled","donationsEnabled","allowedCurrencies","dangerZone","pauseService","pauseServiceConfirmation","pauseServiceDescription","unPauseService","unPauseServiceConfirmation","unPauseServiceDescription","deleteService","deleteServiceConfirmation","deleteServiceDescription","unDeleteService","unDeleteServiceConfirmation","unDeleteServiceDescription","devZone","addKey","saveKeys","generateKeys","algorithm","secretKey","saveSecretKeyWarning","saveSecretKeyConfirm","noApiKeysAddedYet","deleteKeyConfirmation","editing","editService","addCurrency","addLink","serviceName","accept","acceptDonations","settings","paymentData","paymentIdHelpText","donationDescription","generateAndSignPaymentLink","donationDescriptionHelpText","directLinkPaymentHelpText","directLinkDonationHelpText","fillRequiredData","useCurrentLanguageResources","useAppDispatch","useDispatch","useAppSelector","useSelector","useAppContext","useContext","defaultNetworkName","paymentAppBaseUrl","getErrorMessageByValidationErrors","brief","validationErrors","index","TezosPaymentsError","message","super","InvalidTezosPaymentsOptionsError","messageOrValidationErrors","InvalidPaymentCreateParametersError","InvalidPaymentError","UnsupportedPaymentUrlTypeError","PaymentUrlError","DonationUrlError","PaymentUrlFactory","urlType","Base64PaymentUrlFactory","baseUrl","createPaymentUrl","paymentOrDonation","createPaymentUrlInternal","createDonationUrlInternal","paymentSerializer","native","createUrl","donationSerializer","paymentUrlType","serializedPaymentOrDonationBase64","getEncodedPaymentUrlType","constants","SigningType","TezosPaymentsSigner","signingType","ApiSecretKeySigner","apiSecretKey","signPayload","paymentSignPayloadEncoder","contractSigningPromise","inMemorySigner","sign","signingPromises","signatures","prefixSig","WalletSigner","walletSignCallback","walletContractSignPayload","CustomSigner","customSigning","TezosPaymentsOptionsValidator","validateOptions","options","validateServiceContractAddress","validateNetwork","validateSigningOptions","validateDefaultPaymentParameters","currentErrors","signingOptions","validateApiSecretKeySigningOptions","validateWalletSigningOptions","validateCustomSigningOptions","defaultPaymentParameters","invalidServiceContractAddressType","serviceContractAddressHasInvalidLength","serviceContractAddressIsNotContractAddress","invalidSigningOption","invalidApiSecretKeyType","emptyApiSecretKey","invalidWalletSigningOption","invalidWalletSigningPublicKey","emptyWalletSigningPublicKey","invalidWalletSignFunctionType","invalidCustomSigningOption","emptyNetworkName","invalidNetwork","invalidNetworkName","invalidNetworkId","invalidDefaultPaymentParameters","invalidUrlType","TezosPayments","optionsValidator","createSigner","createParameters","unsignedPayment","createPaymentByCreateParameters","paymentValidator","signedPayment","getSignedPayment","paymentUrl","getPaymentUrl","applyPaymentUrl","getPaymentUrlFactory","paymentUrlFactory","paymentUrlFactories","createPaymentUrlFactory","signer","nanoid","Base64","internal","signers","tezosPaymentsInstancesMap","useTezosPayments","appContext","currentNetwork","tezosPaymentsInstance","tezosWallet","signing","requestSignPayload","MICHELINE","r","createTezosPayments","keyPairGenerators","ed25519","Ed25519","Secp256k1","P256","useKeyPairGenerator","isLoaded","setIsLoaded","useState","useEffect","isCanceled","initialize","defaultConnectPath","RequireConnection","children","isConnected","connectPath","location","useLocation","to","RequireConnectionContainer","props","TokenListItem","isPositive","isZero","isHighlightedPositive","highlightPlus","isNegative","valueClassNames","combineClassNames","abs","shortAmount","toFormat","groupSeparator","decimalSeparator","substring","getStringAmounts","allDecimalsShown","substr","split","every","amountSpan","className","src","iconSrc","alt","ticker","handleDelete","danger","DeleteOutlined","onClick","TokenList","Item","ExplorerLink","commonLangResources","handleCopyAddressClick","useCallback","navigator","clipboard","writeText","tezosExplorer","getEntityUrl","target","rel","showCopyButton","CopyOutlined","ExplorerLinkPure","memo","ExternalLink","Period","AnalyticsView","NoServicesCreated","servicesLangResources","navigate","useNavigate","handleCreateServiceClick","NoServicesCreatedPure","selectOperationsState","operationsState","selectSortedOperations","createCachedSelector","_state","filteredOperations","selectSortedOperationsForPeriod","_type","All","startDate","getStartDateByDatePeriod","getTime","getDate","getFullYear","getMonth","getTodayDate","LastWeek","setDate","LastMonth","setMonth","LastYear","setFullYear","getUsdRate","toFixedNumber","fractionDigits","floor","getDateKey","toLocaleDateString","initializeChartData","endDate","initItem","startDateTime","endDateTime","setTime","getStartDate","getEndDate","_period","_operations","selectProfitChartData","operationType","_operationType","initialData","profitByDay","Success","dayData","toNumber","isOutgoing","direction","Outgoing","usdRate","entries","metricName","metricDayData","dayStr","day","reverse","selectOperationsCountByTokensChartData","tokensMap","initialDayItem","operationsCountByDay","assetKey","selectOperationsCountByTypesChartData","Cancelled","Incoming","selectProfitByTokensChartData","selectMaxTransactionChartData","max","maxByDay","selectNewSendersCountChartData","newSendersCount","sendersSet","newSendersByDay","reduceRight","sender","datData","selectTotalVolumeByTokens","plus","Chart","chartElRef","useRef","theme","option","useMemo","showZoom","padding","dataZoom","grid","top","left","right","containLabel","bottom","legend","chart","current","init","handleResize","resize","window","addEventListener","removeEventListener","dispose","getInstanceByDom","setOption","showLoading","hideLoading","ref","style","width","height","ChartPure","OperationsCountByTokens","analyticsLangResources","dataSource","tokensDimensions","series","stack","dataset","dimensions","source","tooltip","trigger","xAxis","yAxis","OperationsCountByTokensPure","LineColor","Volume","displayName","color","Blue","Green","Red","VolumePure","ViewTitle","createElement","defaultProps","View","document","Title","selectBalancesState","balancesState","Balances","acceptTezos","items","BalancesPure","TotalVolume","multiplier","multipliedBy","TotalVolumePure","Overview","langResources","overviewLangResources","OverviewPure","OperationIcon","operationsLangResources","isIncoming","ArrowRightOutlined","ArrowLeftOutlined","Pending","ClockCircleTwoTone","ExclamationCircleFilled","OperationIconPure","OperationList","getShortHash","accountAddress","isDonation","amountClassNames","serviceLink","toLocaleString","colSpan","NoOperationsPerformed","NoOperationsPerformedPure","getFormattedOperationData","Operations","operationProps","tokenSymbol","OperationsPure","NewServiceCard","handleCardClick","bodyStyle","PlusOutlined","NewServiceCardPure","ActiveTag","isUpdating","SyncOutlined","spin","CloseCircleOutlined","PauseCircleOutlined","CheckCircleOutlined","ActiveTagPure","CustomTag","CustomTagPure","ServiceCard","tagName","toLowerCase","logoClassName","getAvatarText","ServiceCardPure","Services","pendingOperationsByService","servicesCards","ServicesPure","ActionsZone","readOnly","handleAcceptPaymentsClick","disabled","ActionsZonePure","DangerZone","dangerZoneLangResources","handlePauseModalOkClick","handleDeleteModalOkClick","confirm","isDanger","onOk","Modal","content","okText","okType","cancelText","centered","transitionName","maskTransitionName","handlePauseClick","handleDeleteClick","DangerZonePure","Search","Input","algorithmOptions","v","label","AddApiKeyModal","generateKeyPair","setKeyPair","publicKeyRef","secretKeyRef","algorithmType","setAlgorithmType","handleAlgorithmTypeChanges","setName","handleNameChanged","handleCopyClick","input","select","handleGenerateKeysButton","handleAddKeyConfirm","onCancel","editorsDisabled","modalBody","autoFocus","onChange","Group","enterButton","onSearch","Text","mark","destroyOnClose","visible","footer","placement","onConfirm","AddApiKeyModalPure","ApiKeyList","apiKeys","keys","handleRemoveItem","item","bordered","apiKey","ApiKeyListPure","DevZone","addKeyModalVisible","setAddKeyModalVisible","handleAddKeyButtonClick","handleClosePopupClick","DevZonePure","Header","arePaymentsAllowed","areDonationsAllowed","handleEditClick","EditFilled","HeaderPure","_g","_extends","assign","arguments","key","prototype","hasOwnProperty","call","apply","SvgTelegram","_ref","svgRef","titleId","viewBox","xmlns","xmlnsXlink","stroke","strokeWidth","fillRule","cx","cy","ForwardRef","iconIdMap","LinkOutlined","MailOutlined","Telegram","TelegramIcon","Facebook","FacebookOutlined","Twitter","TwitterOutlined","Instagram","InstagramOutlined","GitHub","GithubOutlined","Reddit","RedditOutlined","serviceLinkHelper","ServiceLink","Icon","ServiceLinks","Boolean","ServiceLinkEditor","handleChange","onDelete","ServiceLinksEditor","splice","handleAdd","editors","l","TokensEditor","selectedAddresses","allItems","handleTokensChanged","addresses","selectedItems","unSelectedItems","menu","overlay","ServiceEditForm","handleCancelClick","isFormValid","setIsFormValid","setDescription","setLinks","setAllowedTokens","isValid","handleNameChange","handleDescriptionChange","handleLinksChange","setAcceptPayments","setAcceptDonations","handleAllowedTokensChange","handleAcceptPaymentsChange","checked","handleDonationsPaymentsChange","handleUpdateClick","isNewService","isCreateMode","updatedService","placeholder","TextArea","rows","ServiceEditFormPure","Tokens","tokenItems","TokensPure","ViewZone","ViewZonePure","ServiceViewMode","Service","URLSearchParams","search","useParams","mode","Create","ServicePure","About","aboutLangResources","tezosPayments","webSite","GlobalOutlined","gitHub","GithubFilled","telegram","twitter","TwitterCircleFilled","reddit","RedditCircleFilled","AboutPure","ConnectDropdown","handleConnectButtonClick","handleMenuItemButtonClick","selectedNetwork","n","connectLangResources","connectMenuItems","backgroundColor","connectMenu","connectButtonTitle","Button","ConnectDropdownPure","Connect","ConnectPure","PaymentAmount","imageUrl","Option","onAssetChange","stringMode","min","onAmountChange","PaymentAmountPure","AcceptPaymentsSettings","acceptPaymentsLangResources","serviceLangResources","serviceOptions","typeOptions","onServiceAddressChange","optionType","buttonStyle","paymentType","onPaymentTypeChange","onPaymentIdChange","onDonationDescriptionChange","showCount","base64PaymentUrlFactory","tezosPaymentsInternal","paymentsApp","DirectLinkGenerator","setUrl","getPaymentLink","defaultNetwork","createPayment","now","helpText","handleGenerateAndSignClick","DirectLinkGeneratorPure","FailedValidationResult","_props","Generator","currentAssetToken","tabList","tab","clientData","activeTabKey","results","GeneratorPure","AcceptPayments","addressFromUrl","setServiceAddress","setPaymentType","setAmount","getDefaultAsset","setAsset","setPaymentId","setClientData","handleServiceAddressChange","handlePaymentTypeChange","handleAmountChange","rawValue","formattedValue","handleAssetChange","handlePaymentIdChange","handleDonationDescriptionChange","AcceptPaymentsPure","MaxTransaction","selectedMode","MaxTransactionPure","NewSenders","NewSendersPure","Profit","ProfitPure","Donations","DonationsPure","getViewText","getPeriodText","periodOptionsValues","viewOptionsValues","handleViewChange","onViewChange","handlePeriodChange","onPeriodChange","periodOptions","viewOptions","OperationsCountByTypes","Yellow","OperationsCountByTypesPure","VolumeByTokens","operationDirection","orient","toolbox","radius","avoidLabelOverlap","show","position","emphasis","fontSize","VolumeByTokensPure","Analytics","setView","setPeriod","AnalyticsPure","Account","AccountNetworkGroup","AccountNetworkGroupPure","AccountDropDown","actionsLangResources","accountsByNetwork","currentAccountAddress","currentNetworkConfig","currentExplorer","explorers","default","explorer","handleViewOnExplorerClick","getAccountUrl","handleDisconnectButtonClick","ItemGroup","UserOutlined","blue","primary","Divider","LoginOutlined","LogoutOutlined","borderColor","getShortAddress","AccountDropDownPure","NavBar","viewsLangResources","selectedKeys","pathname","DashboardOutlined","BarChartOutlined","UnorderedListOutlined","ProfileOutlined","SettingOutlined","InfoCircleOutlined","NavBarPure","Notifications","confirmations","duration","NotificationsPure","acceptServicePaymentsNestedPath","template","indexOf","App","path","element","ViewAndEdit","AppContextProvider","getReactAppContext","networkChangedEvent","currentValue","setCurrentValue","handleNetworkChanged","Provider","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","appReducer","combineReducers","reducer","enableMapSet","webApp","storeFactory","store","BeaconWallet","colorMode","ColorMode","LIGHT","networkChanged","onStoreChangedListener","onStoreChanged","bind","unsubscribeStoreChanged","_network","_tezosToolkit","_services","_reactAppContext","applyNetwork","getNetworkError","reactAppContext","appState","currentAccountFromState","currentAccountAddressFromState","clearAccountData","fetchAccountData","networkConfig","TezosToolkit","rpcUrls","rpc","setSignerProvider","setWalletProvider","createServices","createReactAppContext","createServicesProvider","TezosNodeDataProvider","createTezosBlockchainUrlExplorer","indexer","TzKTDataProvider","indexerUrls","minimumSupportedServiceVersion","BetterCallDevDataProvider","betterCallDev","TzKTBlockchainUrlExplorer","TzStatsBlockchainUrlExplorer","tzStats","BetterCallDevBlockchainUrlExplorer","configureStore","devTools","middleware","getDefaultMiddleware","thunk","extraArgument","serializableCheck","isSerializable","isPlain","isBigNumber","getEntries","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.53b3fe35.chunk.js","sourcesContent":["import { MichelsonMap, TezosToolkit, TransactionWalletOperation, Wallet } from '@taquito/taquito';\n\nimport type { Service, ServiceOperation, ServiceSigningKey } from '@tezospayments/common';\nimport type { ServicesProvider, TezosPaymentsFactoryImplementationContract, TezosPaymentsServiceContract } from '@tezospayments/react-web-core';\n\nimport type { Account } from '../models/blockchain';\nimport type { ServiceFactoryStorage } from '../models/contracts';\n\nexport class ServicesService {\n  constructor(\n    private readonly tezosToolkit: TezosToolkit,\n    private readonly servicesProvider: ServicesProvider,\n    private readonly servicesFactoryContractAddress: string\n  ) {\n  }\n\n  async getServices(account: Account): Promise<readonly Service[]> {\n    return this.servicesProvider.getServices(account.address);\n  }\n\n  async getService(serviceContractAddress: string): Promise<Service> {\n    return this.servicesProvider.getService(serviceContractAddress);\n  }\n\n  async getOperations(serviceContractAddress: string): Promise<readonly ServiceOperation[]> {\n    return this.servicesProvider.getOperations(serviceContractAddress);\n  }\n\n  async updateService(service: Service): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    const encodedServiceMetadata = this.encodeMetadata(service);\n    return await serviceContract.methodsObject.update_service_parameters({\n      metadata: encodedServiceMetadata,\n      allowed_tokens: {\n        tez: service.allowedTokens.tez,\n        assets: [...service.allowedTokens.assets] // immerjs fix (without it we will fail in taquito on sorting the array)\n      },\n      allowed_operation_type: service.allowedOperationType\n    }).send();\n  }\n\n  async setPaused(service: Service, paused: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.set_pause(paused).send();\n  }\n\n  async setDeleted(service: Service, deleted: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.set_deleted(deleted).send();\n  }\n\n  async createService(service: Service): Promise<TransactionWalletOperation> {\n    const factoryContract = await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress);\n    const factoryStorage = await factoryContract.storage<ServiceFactoryStorage>();\n    const factoryImplementationContract = await this.getFactoryImplementationContract(factoryStorage.factory_implementation);\n\n    const encodedServiceMetadata = this.encodeMetadata(service);\n\n    const signingKeysMichelsonMap = new MichelsonMap<string, { public_key: string, name?: string }>();\n    for (const signingKey of service.signingKeys.values())\n      signingKeysMichelsonMap.set(signingKey.publicKey, { public_key: signingKey.publicKey, name: signingKey.name });\n\n    return await factoryImplementationContract.methodsObject.create_service({\n      metadata: encodedServiceMetadata,\n      allowed_tokens: {\n        tez: service.allowedTokens.tez,\n        assets: service.allowedTokens.assets,\n      },\n      allowed_operation_type: service.allowedOperationType,\n      signing_keys: signingKeysMichelsonMap\n    }).send();\n  }\n\n  addApiKey(service: Service, signingKey: ServiceSigningKey): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, { public_key: string, name?: string }>();\n    signingKeyUpdatesMap.set(signingKey.publicKey, { public_key: signingKey.publicKey, name: signingKey.name });\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  deleteApiKey(service: Service, publicKey: ServiceSigningKey['publicKey']): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, undefined>();\n    signingKeyUpdatesMap.set(publicKey, undefined);\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  private async updateSigningKeys(\n    service: Service,\n    signingKeyUpdatesMap: MichelsonMap<string, { public_key: string, name?: string } | undefined>\n  ): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.update_signing_keys(signingKeyUpdatesMap).send();\n  }\n\n  private encodeMetadata(service: Service): string {\n    const serviceMetadata = {\n      name: service.name || undefined,\n      links: service.links.length ? service.links : undefined,\n      description: service.description || undefined,\n      iconUrl: service.iconUrl || undefined\n    };\n\n    return Buffer.from(JSON.stringify(serviceMetadata), 'utf8').toString('hex');\n  }\n\n  private async getServiceContract(contractAddress: string): Promise<TezosPaymentsServiceContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsServiceContract<Wallet>>(contractAddress);\n  }\n\n  private async getFactoryImplementationContract(contractAddress: string): Promise<TezosPaymentsFactoryImplementationContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsFactoryImplementationContract<Wallet>>(contractAddress);\n  }\n}\n","import { Buffer } from 'buffer';\n\ntype ValidBase64Format = 'base64' | 'base64url';\n\n// Node.js < 15\nconst isBase64UrlFormatSupported = Buffer.isEncoding('base64url');\n\nexport const decode = (base64String: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (!isBase64UrlFormatSupported) {\n    format = 'base64';\n    base64String = base64UrlPreprocessor.prepareValueForDecoding(base64String);\n  }\n\n  return Buffer.from(base64String, format).toString('utf8');\n};\n\nexport const encode = (value: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (isBase64UrlFormatSupported)\n    return Buffer.from(value, 'utf8').toString(format);\n\n  const encodedValue = Buffer.from(value, 'utf8').toString('base64');\n  return base64UrlPreprocessor.prepareEncodedValue(encodedValue);\n};\n\nconst base64UrlPreprocessor = {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  prepareEncodedValue: (base64value: string) => base64value\n    .split('=')[0]!\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_'),\n\n  prepareValueForDecoding: (base64value: string) => {\n    base64value = base64value\n      .replace(/-/g, '+')\n      .replace(/_/g, '/');\n\n    switch (base64value.length % 4) {\n      case 0: return base64value;\n      case 2: return base64value + '==';\n      case 3: return base64value + '=';\n      default:\n        throw new Error('Invalid base64url value');\n    }\n  }\n};\n","import { Buffer } from 'buffer';\n\nimport BigNumber from 'bignumber.js';\n\nexport const stringToUint8Array = (hex: string): Uint8Array => {\n  const integers = hex.match(/[\\da-f]{2}/gi)?.map(val => parseInt(val, 16));\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return new Uint8Array(integers!);\n};\n\nexport const stringToBytes = (value: string): string => Buffer.from(value, 'utf8').toString('hex');\nexport const bytesToString = (value: string): string => Buffer.from(stringToUint8Array(value)).toString('utf8');\n\nexport const objectToBytes = (value: Record<string, unknown>): string => stringToBytes(JSON.stringify(value));\nexport const bytesToObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: string): T | null => {\n  try {\n    return JSON.parse(bytesToString(value));\n  }\n  catch {\n    return null;\n  }\n};\n\nexport const tokensAmountToNat = (tokensAmount: BigNumber | number, decimals: number): BigNumber => {\n  return new BigNumber(tokensAmount).multipliedBy(10 ** decimals).integerValue();\n};\n\nexport const numberToTokensAmount = (value: BigNumber | number, decimals: number): BigNumber => {\n  return new BigNumber(value).integerValue().div(10 ** decimals);\n};\n\nexport const tezToMutez = (tez: BigNumber | number): BigNumber => tokensAmountToNat(tez, 6);\nexport const mutezToTez = (mutez: BigNumber | number): BigNumber => numberToTokensAmount(mutez, 6);\n","import isPlainObjectLodashFunction from 'lodash.isplainobject';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isArray = (arg: any): arg is any[] => {\n  return Array.isArray(arg);\n};\n\nexport const isReadonlyArray = (arg: unknown): arg is readonly unknown[] => {\n  return Array.isArray(arg);\n};\n\nexport const isPlainObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: unknown): value is T => {\n  return isPlainObjectLodashFunction(value);\n};\n","const defaultEqualityCheck = <T>(a: T, b: T) => a === b;\n\nconst areArgumentsShallowlyEqual = <T extends IArguments | null>(equalityCheck: (a: T, b: T) => boolean, prev: T, next: T) => {\n    if (prev === null || next === null || prev.length !== next.length) {\n        return false;\n    }\n\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n    const length = prev.length;\n    for (let i = 0; i < length; i++) {\n        if (!equalityCheck(prev[i], next[i])) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n/* eslint-disable prefer-rest-params  */\n/* eslint-disable prefer-spread */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const memoize = <TF extends (...args: any) => any>(func: TF, equalityCheck = defaultEqualityCheck): TF => {\n    let lastArgs: IArguments | null = null;\n    let lastResult: unknown = null;\n\n    return (function () {\n        if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n            // apply arguments instead of spreading for performance.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            lastResult = func.apply(null, arguments as any);\n        }\n\n        lastArgs = arguments;\n        return lastResult;\n    } as TF);\n};\n/* eslint-enable prefer-spread */\n/* eslint-enable prefer-rest-params */\n/* eslint-enable @typescript-eslint/no-explicit-any */\n","import BigNumber from 'bignumber.js';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst emptyArray: any[] = [];\nconst emptyObject = {};\nconst emptyMap = new Map();\nconst emptySet: Set<any> = new Set();\nconst zeroBigNumber = new BigNumber(0);\n\nexport default {\n    emptyArray,\n    emptyMap,\n    emptySet,\n    emptyObject,\n    zeroBigNumber\n};\n","export const capitalize = (value: string): string => value && (value[0]?.toLocaleUpperCase() + value.slice(1));\n\nexport const getAvatarText = (value: string, maxLength = 2) => {\n  if (!value || !maxLength)\n    return '';\n\n  let result = '';\n\n  for (let i = 0, j = 0, isWord = false; i < value.length; i++) {\n    if (!isWord && value[i] !== ' ') {\n      isWord = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      result += value[i]!;\n\n      if (++j === maxLength)\n        return result;\n    }\n    else if (isWord && value[i] === ' ') {\n      isWord = false;\n    }\n  }\n\n  return result;\n};\n\nconst stringPad = (string: string, isStart: boolean, maxLength: number, fillString = ' ') => {\n  if (String.prototype.padStart !== undefined)\n    return string.padStart(maxLength, fillString);\n\n  const stringLength = string.length;\n  // eslint-disable-next-line eqeqeq\n  if (maxLength <= stringLength || fillString == '')\n    return string;\n\n  const fillLength = maxLength - stringLength;\n  let filler = fillString.repeat(Math.ceil(fillLength / fillString.length));\n\n  if (filler.length > fillLength)\n    filler = filler.slice(0, fillLength);\n\n  return isStart ? filler + string : string + filler;\n};\n\nexport const padStart = (string: string, maxLength: number, fillString = ' ') => String.prototype.padStart !== undefined\n  ? string.padStart(maxLength, fillString)\n  : stringPad(string, true, maxLength, fillString);\n\nexport const padEnd = (string: string, maxLength: number, fillString = ' ') => String.prototype.padEnd !== undefined\n  ? string.padEnd(maxLength, fillString)\n  : stringPad(string, false, maxLength, fillString);\n","import combineClassNames from 'clsx';\n\nimport * as base64 from './base64';\nimport * as converters from './converters';\nimport * as guards from './guards';\nimport { memoize } from './memoize';\nimport optimization from './optimization';\nimport shallowEqual from './shallowEqual';\nimport * as text from './text';\n\nconst wait = (ms: number) => new Promise<void>(resolve => setTimeout(resolve, ms));\n\nexport {\n  wait,\n  combineClassNames,\n  memoize,\n  shallowEqual,\n  base64,\n  optimization,\n  guards,\n  text,\n  converters,\n};\n","import { memoize } from '../utils';\n\nexport enum IconId {\n  Common = 0,\n  Email = 1,\n  Telegram = 2,\n  Facebook = 3,\n  Twitter = 4,\n  Instagram = 5,\n  GitHub = 6,\n  Reddit = 7\n}\n\ninterface LinkInfo {\n  readonly rawLink: string;\n  readonly formattedLink: string;\n  readonly displayLink: string;\n  readonly icon: IconId;\n}\n\nconst getInvalidLinkInfo = (link: string): LinkInfo => ({\n  rawLink: link,\n  formattedLink: '#',\n  displayLink: 'Invalid Link',\n  icon: IconId.Common\n});\n\ntype LinkInfoProvider = (link: string) => LinkInfo | false;\n\nconst prepareFormattedLink = memoize((link: string) => link.trim());\nconst prepareDisplayLink = memoize((link: string) => link.trim().replace(/\\/$/, ''));\n\nconst socialMediaLinkInfoProvider = (link: string, baseUrl: string, icon: IconId): LinkInfo | false => {\n  if (!link.startsWith(baseUrl))\n    return false;\n\n  const formattedLink = prepareFormattedLink(link);\n  if (formattedLink === baseUrl)\n    return false;\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link).replace(baseUrl, ''),\n    icon\n  };\n};\n\nconst telegramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://t.me/', IconId.Telegram);\nconst facebookLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://facebook.com/', IconId.Facebook);\nconst twitterLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://twitter.com/', IconId.Twitter);\nconst instagramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://instagram.com/', IconId.Instagram);\nconst gitHubLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://github.com/', IconId.GitHub);\nconst redditLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://www.reddit.com/', IconId.Reddit);\n\n// This regex should not use for email validation\nconst emailCheckingRegEx = /^[^\\s/@]+@[^\\s@/]+$/;\nconst emailLinkInfoProvider: LinkInfoProvider = link => {\n  const preparedFormattedLink = prepareFormattedLink(link);\n\n  return emailCheckingRegEx.test(preparedFormattedLink) && {\n    rawLink: link,\n    formattedLink: `mailto:${preparedFormattedLink}`,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Email\n  };\n};\n\nconst javascriptLinkInfoProvider: LinkInfoProvider = link => link.startsWith('javascript') ? getInvalidLinkInfo(link) : false;\n\n// https://datatracker.ietf.org/doc/html/rfc3986#section-3.1\nconst urlSchemeRegEx = /^([a-z][a-z0-9+\\-.]*):/;\nconst commonLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return urlSchemeRegEx.test(formattedLink) && {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nconst editLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nexport class ServiceLinkHelper {\n  // Order is important\n  static readonly linkInfoProviders: readonly LinkInfoProvider[] = [\n    // Disallowed\n    javascriptLinkInfoProvider,\n    // Allowed\n    telegramLinkInfoProvider,\n    facebookLinkInfoProvider,\n    twitterLinkInfoProvider,\n    instagramLinkInfoProvider,\n    gitHubLinkInfoProvider,\n    emailLinkInfoProvider,\n    redditLinkInfoProvider,\n    commonLinkInfoProvider\n  ];\n\n  getLinkInfo(link: string, isEditMode = false): LinkInfo | null {\n    for (const provider of ServiceLinkHelper.linkInfoProviders) {\n      const linkInfo = provider(link);\n\n      if (linkInfo)\n        return this.linkInfoIsValid(linkInfo) ? linkInfo : null;\n    }\n\n    if (isEditMode)\n      return editLinkInfoProvider(link) as LinkInfo;\n\n    return null;\n  }\n\n  linkInfoIsValid(linkInfo: LinkInfo) {\n    return linkInfo.formattedLink !== '#';\n  }\n}\n","export enum PaymentType {\n  Payment = 1,\n  Donation = 2\n}\n\nexport interface PaymentBase {\n  readonly type: PaymentType;\n  readonly targetAddress: string;\n}\n","import { PaymentBase } from '../../models/payment/paymentBase';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { guards } from '../../utils';\nimport { PaymentValidationMethod } from './paymentValidationMethod';\n\nexport abstract class PaymentValidatorBase<TPayment extends PaymentBase> {\n  protected readonly abstract validationMethods: ReadonlyArray<PaymentValidationMethod<TPayment>>;\n  protected readonly abstract invalidPaymentObjectError: string;\n\n  validate(payment: TPayment, bail = false): FailedValidationResults {\n    if (!guards.isPlainObject(payment))\n      return [this.invalidPaymentObjectError];\n\n    let failedValidationResults: FailedValidationResults;\n    for (const validationMethod of this.validationMethods) {\n      const currentFailedValidationResults = validationMethod(payment);\n      if (currentFailedValidationResults) {\n        if (!bail)\n          return currentFailedValidationResults;\n\n        failedValidationResults = (failedValidationResults || []).concat(currentFailedValidationResults);\n      }\n    }\n\n    return failedValidationResults;\n  }\n}\n","const networksInternal = {\n  mainnet: {\n    id: 'NetXdQprcVkpaWU',\n    name: 'mainnet',\n  },\n  hangzhounet: {\n    id: 'NetXZSsxBpMQeAT',\n    name: 'hangzhounet'\n  }\n} as const;\n\ninterface NetworkInternal {\n  readonly id: string;\n  readonly name: string;\n}\n\ntype Networks = {\n  readonly [P in keyof typeof networksInternal]: (typeof networksInternal)[P] extends NetworkInternal & {\n    readonly name: P;\n  }\n  ? (typeof networksInternal)[P]\n  : never\n};\n\nexport type Network = Networks[keyof Networks];\nexport interface CustomNetwork {\n  readonly id?: string;\n  readonly name: string;\n}\n\nexport const networks: Networks = networksInternal;\nexport const networksCollection = Object.values(networksInternal);\n\nexport const networkIdRegExp = /^[a-zA-Z]\\w*$/;\nexport const networkNameRegExp = networkIdRegExp;\n","import { Network, networks, networksCollection } from './network';\n\ninterface TokenBase {\n  readonly network: Network;\n  readonly contractAddress: string;\n  readonly metadata?: TokenMetadata;\n}\n\nexport interface TokenFA12 extends TokenBase {\n  readonly type: 'fa1.2';\n}\n\nexport interface TokenFA2 extends TokenBase {\n  readonly type: 'fa2';\n  readonly id: number;\n}\n\nexport type Token = TokenFA12 | TokenFA2;\n\nexport type TokenMetadata = {\n  readonly decimals: number;\n  readonly symbol: string;\n  readonly name: string;\n  readonly thumbnailUri: string;\n};\n\nexport const tezosMeta: TokenMetadata = {\n  symbol: 'XTZ',\n  name: 'Tezos',\n  decimals: 6,\n  thumbnailUri: 'https://dashboard.tezospayments.com/tokens/tezos.png'\n};\n\nexport const unknownAssetMeta: TokenMetadata = {\n  name: 'Unknown',\n  symbol: 'Unknown',\n  decimals: 0,\n  thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png'\n};\n\nexport const tokenWhitelist: readonly Token[] = [\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa1.2',\n  //   contractAddress: 'KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV',\n  //   metadata: {\n  //     decimals: 18,\n  //     symbol: 'KUSD',\n  //     name: 'Kolibri',\n  //     thumbnailUri: 'https://kolibri-data.s3.amazonaws.com/logo.png',\n  //   },\n  // },\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa2',\n  //   contractAddress: 'KT1REEb5VxWRjcHm5GzDMwErMmNFftsE5Gpf',\n  //   fa2TokenId: 0,\n  //   metadata: {\n  //     decimals: 6,\n  //     symbol: 'USDS',\n  //     name: 'Stably USD',\n  //     thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n  //   },\n  // },\n  {\n    network: networks.hangzhounet,\n    type: 'fa1.2',\n    contractAddress: 'KT19sYK89XKYTeGHekWK9wL5iDHVF4YYf26t',\n    metadata: {\n      decimals: 6,\n      symbol: 'FA12',\n      name: 'Test FA 1.2',\n      thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png',\n    },\n  },\n  {\n    network: networks.hangzhounet,\n    type: 'fa2',\n    contractAddress: 'KT1EKo1Eihucz9N4cQyaDKeYRoMzTEoiZRAT',\n    id: 0,\n    metadata: {\n      decimals: 6,\n      symbol: 'FA20',\n      name: 'Test FA 2.0',\n      thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png',\n    },\n  },\n];\n\nexport const tokenWhitelistMap: ReadonlyMap<Network, ReadonlyMap<Token['contractAddress'], Token>> = new Map(\n  networksCollection.map(nc => [nc, new Map(tokenWhitelist.filter(t => t.network === nc).map(t => [t.contractAddress, t]))])\n);\n","const contractAddressPrefixes = ['KT'] as const;\nconst implicitAddressPrefixes = ['tz1', 'tz2', 'tz3'] as const;\nconst addressPrefixes = [...contractAddressPrefixes, ...implicitAddressPrefixes] as const;\n\nexport const tezosInfo = {\n  addressLength: 36,\n  contractAddressPrefixes,\n  implicitAddressPrefixes,\n  addressPrefixes,\n} as const;\n","export enum KeyType {\n  Ed25519 = 'Ed25519',\n  Secp256k1 = 'Secp256k1',\n  P256 = 'P256'\n}\n","/* eslint-disable @typescript-eslint/no-redeclare */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { URL as NodeURL } from 'url';\n\nexport type URL = NodeURL;\nexport const URL = NodeURL || (globalThis as any).URL;\n","import BigNumber from 'bignumber.js';\n\nimport { tezosInfo } from '../../models/blockchain';\nimport { DonationAsset, Payment, PaymentAsset } from '../../models/payment';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { URL } from '../../native';\nimport { guards } from '../../utils';\n\ntype Errors<FieldNames extends string> = {\n  readonly [P in FieldNames]: string;\n};\n\nexport const validateTargetAddress = (\n  targetAddress: string,\n  errors: Errors<'invalidTargetAddress' | 'targetAddressHasInvalidLength' | 'targetAddressIsNotNetworkAddress'>\n): FailedValidationResults => {\n  if (typeof targetAddress !== 'string')\n    return [errors.invalidTargetAddress];\n\n  if (targetAddress.length !== tezosInfo.addressLength)\n    return [errors.targetAddressHasInvalidLength];\n\n  if (!tezosInfo.addressPrefixes.some(prefix => targetAddress.startsWith(prefix)))\n    return [errors.targetAddressIsNotNetworkAddress];\n};\n\nexport const validateId = (\n  id: string,\n  errors: Errors<'invalidId' | 'emptyId'>\n): FailedValidationResults => {\n  if (typeof id !== 'string')\n    return [errors.invalidId];\n\n  if (id === '')\n    return [errors.emptyId];\n};\n\nexport const validateAmount = (\n  amount: BigNumber,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  if (!BigNumber.isBigNumber(amount) || amount.isNaN() || !amount.isFinite())\n    return [errors.invalidAmount];\n\n  if (amount.isZero() || amount.isNegative())\n    return [errors.amountIsNonPositive];\n};\n\nexport const validateDesiredAmount = (\n  desiredAmount: BigNumber | undefined,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  return desiredAmount === undefined ? undefined : validateAmount(desiredAmount, errors);\n};\n\nexport const validatePaymentAsset = (\n  asset: PaymentAsset | undefined,\n  errors: Errors<\n    | 'invalidAsset'\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n    | 'invalidAssetDecimals' | 'assetDecimalsNumberIsNegative' | 'assetDecimalsNumberIsNotInteger'\n  >\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (!guards.isPlainObject(asset))\n    return [errors.invalidAsset];\n\n  return validateAsset(asset, errors) || validateAssetDecimals(asset.decimals, errors);\n};\n\nexport const validateDonationAsset = (\n  asset: DonationAsset | undefined,\n  errors: Errors<\n    | 'invalidAsset'\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n  >\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (!guards.isPlainObject(asset))\n    return [errors.invalidAsset];\n\n  return validateAsset(asset, errors);\n};\n\nexport const validateCreatedDate = (\n  date: Date,\n  errors: Errors<'invalidCreatedDate'>\n): FailedValidationResults => {\n  if (!(date instanceof Date) || isNaN(date.getTime()))\n    return [errors.invalidCreatedDate];\n};\n\nexport const validateUrl = (\n  url: URL | undefined,\n  errors: Errors<'invalidUrl' | 'invalidProtocol'>\n): FailedValidationResults => {\n  if (url === undefined)\n    return;\n\n  if (!(url instanceof URL))\n    return [errors.invalidUrl];\n\n  if (url.protocol.indexOf('javascript') > -1)\n    return [errors.invalidProtocol];\n};\n\nexport const validateExpiredDate = (\n  expiredDate: Date | undefined,\n  createdDate: Date,\n  minimumPaymentLifetime: number,\n  errors: Errors<'invalidExpiredDate' | 'paymentLifetimeIsShort'>\n): FailedValidationResults => {\n  if (expiredDate === undefined)\n    return;\n\n  if (!(expiredDate instanceof Date) || isNaN(expiredDate.getTime()))\n    return [errors.invalidExpiredDate];\n\n  if (expiredDate.getTime() - createdDate.getTime() < minimumPaymentLifetime) {\n    return [errors.paymentLifetimeIsShort];\n  }\n};\n\nexport const validateData = (\n  data: Payment['data'],\n  errors: Errors<'invalidData'>\n): FailedValidationResults => {\n  if (data === undefined)\n    return;\n\n  if (!guards.isPlainObject(data))\n    return [errors.invalidData];\n};\n\nconst validateAsset = (\n  asset: PaymentAsset | DonationAsset,\n  errors: Errors<\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n  >\n): FailedValidationResults => {\n  return validateAssetAddress(asset.address, errors) || validateAssetId(asset.id, errors);\n};\n\nconst validateAssetAddress = (\n  assetAddress: string,\n  errors: Errors<'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'>\n): FailedValidationResults => {\n  if (typeof assetAddress !== 'string')\n    return [errors.invalidAssetAddress];\n\n  if (assetAddress.length !== tezosInfo.addressLength)\n    return [errors.assetAddressHasInvalidLength];\n\n  if (!tezosInfo.contractAddressPrefixes.some(prefix => assetAddress.startsWith(prefix)))\n    return [errors.assetAddressIsNotContractAddress];\n};\n\nconst validateAssetId = (\n  assetId: number | null,\n  errors: Errors<'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'>\n): FailedValidationResults => {\n  if (assetId === null)\n    return;\n\n  if (typeof assetId !== 'number' || Number.isNaN(assetId) || !Number.isFinite(assetId))\n    return [errors.invalidAssetId];\n\n  if (assetId < 0)\n    return [errors.assetIdIsNegative];\n\n  if (!Number.isInteger(assetId))\n    return [errors.assetIdIsNotInteger];\n};\n\nconst validateAssetDecimals = (\n  assetDecimals: number,\n  errors: Errors<'invalidAssetDecimals' | 'assetDecimalsNumberIsNegative' | 'assetDecimalsNumberIsNotInteger'>\n): FailedValidationResults => {\n  if (typeof assetDecimals !== 'number' || Number.isNaN(assetDecimals) || !Number.isFinite(assetDecimals))\n    return [errors.invalidAssetDecimals];\n\n  if (assetDecimals < 0)\n    return [errors.assetDecimalsNumberIsNegative];\n\n  if (!Number.isInteger(assetDecimals))\n    return [errors.assetDecimalsNumberIsNotInteger];\n};\n","import type { Payment, UnsignedPayment } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport {\n  validateTargetAddress, validateId, validateAmount, validateData, validatePaymentAsset,\n  validateCreatedDate, validateExpiredDate, validateUrl\n} from './validationMethods';\n\nexport class PaymentValidator extends PaymentValidatorBase<Payment | UnsignedPayment> {\n  static readonly errors = {\n    invalidPaymentObject: 'Payment is undefined or not object',\n    invalidType: 'Payment type is invalid',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidId: 'Id is invalid',\n    emptyId: 'Id is empty',\n    invalidAmount: 'Amount is invalid',\n    amountIsNonPositive: 'Amount is less than or equal to zero',\n    invalidData: 'Payment data is invalid',\n    invalidAsset: 'Asset is invalid',\n    invalidAssetAddress: 'Asset address is invalid',\n    assetAddressIsNotContractAddress: 'Asset address isn\\'t a contract address',\n    assetAddressHasInvalidLength: 'Asset address has an invalid address',\n    invalidAssetId: 'Asset Id is invalid',\n    assetIdIsNegative: 'Asset Id is negative',\n    assetIdIsNotInteger: 'Asset Id isn\\'t an integer',\n    invalidAssetDecimals: 'Asset number of decimals is invalid',\n    assetDecimalsNumberIsNegative: 'Asset number of decimals is negative',\n    assetDecimalsNumberIsNotInteger: 'Asset number of decimals isn\\'t an integer',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol',\n    invalidCreatedDate: 'Created date is invalid',\n    invalidExpiredDate: 'Expired date is invalid',\n    paymentLifetimeIsShort: 'Payment lifetime is short'\n  } as const;\n  static readonly minimumPaymentLifetime = 600000; // 10 * 60 * 1000;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Payment | UnsignedPayment>> = [\n    payment => payment.type !== PaymentType.Payment ? [PaymentValidator.errors.invalidType] : undefined,\n    payment => validateTargetAddress(payment.targetAddress, PaymentValidator.errors),\n    payment => validateId(payment.id, PaymentValidator.errors),\n    payment => validateAmount(payment.amount, PaymentValidator.errors),\n    payment => validatePaymentAsset(payment.asset, PaymentValidator.errors),\n    payment => validateData(payment.data, PaymentValidator.errors),\n    payment => validateUrl(payment.successUrl, PaymentValidator.successUrlErrors),\n    payment => validateUrl(payment.cancelUrl, PaymentValidator.cancelUrlErrors),\n    payment => validateCreatedDate(payment.created, PaymentValidator.errors),\n    payment => validateExpiredDate(payment.expired, payment.created, PaymentValidator.minimumPaymentLifetime, PaymentValidator.errors),\n  ];\n\n  protected readonly invalidPaymentObjectError = PaymentValidator.errors.invalidPaymentObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidSuccessUrl,\n    invalidProtocol: PaymentValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidCancelUrl,\n    invalidProtocol: PaymentValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","import type { Donation, UnsignedDonation } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport { validateTargetAddress, validateDesiredAmount, validateDonationAsset, validateUrl, validateData } from './validationMethods';\n\nexport class DonationValidator extends PaymentValidatorBase<Donation | UnsignedDonation> {\n  static readonly errors = {\n    invalidDonationObject: 'Donation is undefined or not object',\n    invalidType: 'Donation type is invalid',\n    invalidData: 'Donation data is invalid',\n    invalidAmount: 'Desired amount is invalid',\n    amountIsNonPositive: 'Desired amount is less than or equal to zero',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidAsset: 'Desired asset is invalid',\n    invalidAssetAddress: 'Desired asset address is invalid',\n    assetAddressIsNotContractAddress: 'Desired asset address isn\\'t a contract address',\n    assetAddressHasInvalidLength: 'Desired asset address has an invalid address',\n    invalidAssetId: 'Asset Id is invalid',\n    assetIdIsNegative: 'Asset Id is negative',\n    assetIdIsNotInteger: 'Asset Id isn\\'t an integer',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol'\n  } as const;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Donation | UnsignedDonation>> = [\n    donation => donation.type !== PaymentType.Donation ? [DonationValidator.errors.invalidType] : undefined,\n    donation => validateData(donation.data, DonationValidator.errors),\n    donation => validateTargetAddress(donation.targetAddress, DonationValidator.errors),\n    donation => validateDesiredAmount(donation.desiredAmount, DonationValidator.errors),\n    donation => validateDonationAsset(donation.desiredAsset, DonationValidator.errors),\n    donation => validateUrl(donation.successUrl, DonationValidator.successUrlErrors),\n    donation => validateUrl(donation.cancelUrl, DonationValidator.cancelUrlErrors)\n  ];\n\n  protected readonly invalidPaymentObjectError = DonationValidator.errors.invalidDonationObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidSuccessUrl,\n    invalidProtocol: DonationValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidCancelUrl,\n    invalidProtocol: DonationValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","export abstract class StateModel {\n    protected constructor() {\n    // All derived classes should be static\n    }\n}\n","export interface PublicEventEmitter<T extends readonly unknown[]> {\n    addListener(listener: (...args: T) => void): this;\n    removeListener(listener: (...args: T) => void): this;\n    removeAllListeners(): this;\n}\n\nexport class EventEmitter<T extends readonly unknown[]> implements PublicEventEmitter<T> {\n    private listeners: Set<(...args: T) => void> = new Set();\n\n    addListener(listener: (...args: T) => void) {\n        this.listeners.add(listener);\n        return this;\n    }\n\n    removeListener(listener: (...args: T) => void) {\n        if (this.listeners.has(listener))\n            this.listeners.delete(listener);\n        return this;\n    }\n\n    removeAllListeners() {\n        this.listeners = new Set();\n        return this;\n    }\n\n    emit(...args: T) {\n        if (!this.listeners.size)\n            return;\n\n        if (this.listeners.size === 1) {\n            this.listeners.values().next().value(...args);\n        } else {\n            // We copy listeners to prevent an unbounded loop if there is the adding of a new event handler inside the handler; \n            [...this.listeners].forEach(listener => listener(...args));\n        }\n    }\n}\n","import { SerializedFieldType } from './serializedFieldType';\n\nexport class ObjectSerializationValidator<T extends Record<string | number, unknown>> {\n  private _minObjectFieldsCount: number | undefined;\n\n  constructor(\n    protected readonly objectFieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>\n  ) {\n  }\n\n  private get minObjectFieldsCount() {\n    if (!this._minObjectFieldsCount) {\n      let count = 0;\n      for (const info of this.objectFieldTypes) {\n        if (typeof info[1] === 'string' ? info[1] !== 'undefined' : info[1].every(type => type !== 'undefined'))\n          count++;\n      }\n\n      this._minObjectFieldsCount = count;\n    }\n\n    return this._minObjectFieldsCount;\n  }\n\n  private get maxObjectFieldsCount() {\n    return this.objectFieldTypes.size;\n  }\n\n  validate(value: T): value is T {\n    if (!value)\n      return false;\n\n    const fieldNames = Object.getOwnPropertyNames(value) as ReadonlyArray<keyof T>;\n\n    // Prevent the field checking if the deserializedValue has an invalid number of fields\n    if (fieldNames.length < this.minObjectFieldsCount || fieldNames.length > this.maxObjectFieldsCount)\n      return false;\n\n    for (const [fieldName, expectedFieldType] of this.objectFieldTypes) {\n      const fieldValue = value[fieldName];\n      const actualFieldType = fieldValue === null ? 'null' : typeof fieldValue;\n\n      if (Array.isArray(expectedFieldType)\n        ? !expectedFieldType.some(expectedType => actualFieldType === expectedType)\n        : actualFieldType !== expectedFieldType\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Serializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  serialize(value: T): string | null {\n    try {\n      if (!this.objectSerializationValidator.validate(value))\n        return null;\n\n      const jsonString = JSON.stringify(value);\n      return base64.encode(jsonString, 'base64url');\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Deserializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  deserialize(serializedValue: string): T | null {\n    try {\n      let value: T;\n\n      if (serializedValue) {\n        const serializedValueString = base64.decode(serializedValue, 'base64url');\n        value = JSON.parse(serializedValueString);\n      }\n      else\n        value = {} as T;\n\n      return this.objectSerializationValidator.validate(value)\n        ? value\n        : null;\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nconst _serializedPaymentAssetFieldTypes: ReadonlyMap<\n  keyof SerializedPaymentAsset, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPaymentAsset, SerializedFieldType | readonly SerializedFieldType[]>()\n  // address\n  .set('a', 'string')\n  // decimals\n  .set('d', 'number')\n  // id\n  .set('i', ['number', 'undefined', 'null']);\n\nconst _serializedPaymentSignatureFieldTypes: ReadonlyMap<\n  keyof SerializedPaymentSignature, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPaymentSignature, SerializedFieldType | readonly SerializedFieldType[]>()\n  // contract\n  .set('c', 'string')\n  // client\n  .set('cl', ['string', 'undefined', 'null'])\n  // signature.signingPublicKey\n  .set('k', 'string');\n\nexport const serializedPaymentFieldTypes: ReadonlyMap<\n  keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]>()\n  // id\n  .set('i', 'string')\n  // amount\n  .set('a', 'string')\n  // target\n  .set('t', 'string')\n  // asset\n  .set('as', ['object', 'undefined', 'null'])\n  // .set('as', serializedPaymentAssetFieldTypes)\n  // data\n  .set('d', ['object', 'undefined', 'null'])\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null'])\n  // created\n  .set('c', 'number')\n  // expired\n  .set('e', ['number', 'undefined', 'null'])\n  // signature\n  .set('s', 'object');\n  // .set('s', serializedPaymentSignatureFieldTypes);\n","import type {\n  Payment, PaymentAsset, PaymentSignature,\n  SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature\n} from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentSerializer {\n  protected static readonly serializedPaymentBase64Serializer = new Base64Serializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  serialize(payment: Payment): string | null {\n    try {\n      const serializedPayment = this.mapPaymentToSerializedPayment(payment);\n      return PaymentSerializer.serializedPaymentBase64Serializer.serialize(serializedPayment);\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapPaymentToSerializedPayment(payment: Payment): SerializedPayment {\n    return {\n      i: payment.id,\n      a: payment.amount.toString(10),\n      t: payment.targetAddress,\n      as: payment.asset ? this.mapPaymentAssetToSerializedPaymentAsset(payment.asset) : undefined,\n      d: payment.data,\n      su: payment.successUrl?.toString(),\n      cu: payment.cancelUrl?.toString(),\n      c: payment.created.getTime(),\n      e: payment.expired?.getTime(),\n      s: this.mapPaymentSignatureToSerializedPaymentSignature(payment.signature)\n    };\n  }\n\n  protected mapPaymentAssetToSerializedPaymentAsset(paymentAsset: PaymentAsset): SerializedPaymentAsset {\n    return {\n      a: paymentAsset.address,\n      d: paymentAsset.decimals,\n      i: paymentAsset.id !== null ? paymentAsset.id : undefined\n    };\n  }\n\n  protected mapPaymentSignatureToSerializedPaymentSignature(paymentSignature: PaymentSignature): SerializedPaymentSignature {\n    return {\n      k: paymentSignature.signingPublicKey,\n      c: paymentSignature.contract,\n      cl: paymentSignature.client\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type {\n  Payment, PaymentAsset, PaymentSignature,\n  SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature\n} from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentDeserializer {\n  protected static readonly serializedPaymentBase64Deserializer = new Base64Deserializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  deserialize(serializedPaymentBase64: string): Payment | null {\n    try {\n      const serializedPayment = PaymentDeserializer.serializedPaymentBase64Deserializer.deserialize(serializedPaymentBase64);\n\n      return serializedPayment ? this.mapSerializedPaymentToPayment(serializedPayment) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedPaymentToPayment(serializedPayment: SerializedPayment): Payment {\n    return {\n      type: PaymentType.Payment,\n      id: serializedPayment.i,\n      amount: new BigNumber(serializedPayment.a),\n      targetAddress: serializedPayment.t,\n      asset: serializedPayment.as ? this.mapSerializedPaymentAssetToPaymentAsset(serializedPayment.as) : undefined,\n      data: serializedPayment.d,\n      successUrl: serializedPayment.su ? new URL(serializedPayment.su) : undefined,\n      cancelUrl: serializedPayment.cu ? new URL(serializedPayment.cu) : undefined,\n      created: new Date(serializedPayment.c),\n      expired: serializedPayment.e ? new Date(serializedPayment.e) : undefined,\n\n      signature: this.mapSerializedPaymentSignatureToPaymentSignature(serializedPayment.s)\n    };\n  }\n\n  protected mapSerializedPaymentAssetToPaymentAsset(serializedPaymentAsset: SerializedPaymentAsset): PaymentAsset {\n    return {\n      address: serializedPaymentAsset.a,\n      decimals: serializedPaymentAsset.d,\n      id: serializedPaymentAsset.i !== undefined ? serializedPaymentAsset.i : null\n    };\n  }\n\n  protected mapSerializedPaymentSignatureToPaymentSignature(serializedPaymentSignature: SerializedPaymentSignature): PaymentSignature {\n    return {\n      signingPublicKey: serializedPaymentSignature.k,\n      contract: serializedPaymentSignature.c,\n      client: serializedPaymentSignature.cl\n    };\n  }\n}\n","import { SerializedDonation, SerializedDonationAsset, SerializedDonationSignature } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nconst _serializedDonationAssetFieldTypes: ReadonlyMap<\n  keyof SerializedDonationAsset, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonationAsset, SerializedFieldType | readonly SerializedFieldType[]>()\n  // address\n  .set('a', 'string')\n  // id\n  .set('i', ['number', 'undefined', 'null']);\n\nconst _serializedDonationSignatureFieldTypes: ReadonlyMap<\n  keyof SerializedDonationSignature, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonationSignature, SerializedFieldType | readonly SerializedFieldType[]>()\n  // client\n  .set('cl', 'string')\n  // signature.signingPublicKey\n  .set('k', 'string');\n\nexport const serializedDonationFieldTypes: ReadonlyMap<\n  keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]>()\n  // data\n  .set('d', ['object', 'undefined', 'null'])\n  // desiredAmount\n  .set('da', ['string', 'undefined', 'null'])\n  // desiredAsset\n  .set('das', ['object', 'undefined', 'null'])\n  // .set('das', serializedDonationAssetFieldTypes)\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null'])\n  // signature\n  .set('s', ['object', 'undefined', 'null']);\n  // .set('da', serializedDonationSignatureFieldTypes)\n","import type {\n  Donation, DonationAsset, DonationSignature,\n  SerializedDonation, SerializedDonationAsset, SerializedDonationSignature\n} from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nconst serializedEmptyObjectBase64 = 'e30';\nexport class DonationSerializer {\n  protected static readonly serializedDonationBase64Serializer = new Base64Serializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  serialize(donation: Donation): string | null {\n    try {\n      const serializedDonation = this.mapDonationToSerializedDonation(donation);\n      const serializedDonationBase64 = DonationSerializer.serializedDonationBase64Serializer.serialize(serializedDonation);\n\n      return serializedDonationBase64 === serializedEmptyObjectBase64 ? '' : serializedDonationBase64;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapDonationToSerializedDonation(donation: Donation): SerializedDonation {\n    return {\n      d: donation.data,\n      da: donation.desiredAmount?.toString(10),\n      das: donation.desiredAsset ? this.mapDonationAssetToSerializedDonationAsset(donation.desiredAsset) : undefined,\n      su: donation.successUrl?.toString(),\n      cu: donation.cancelUrl?.toString(),\n      s: donation.signature ? this.mapDonationSignatureToSerializedDonationSignature(donation.signature) : undefined\n    };\n  }\n\n  protected mapDonationAssetToSerializedDonationAsset(donationAsset: DonationAsset): SerializedDonationAsset {\n    return {\n      a: donationAsset.address,\n      i: donationAsset.id !== null ? donationAsset.id : undefined\n    };\n  }\n\n  protected mapDonationSignatureToSerializedDonationSignature(donationSignature: DonationSignature): SerializedDonationSignature {\n    return {\n      k: donationSignature.signingPublicKey,\n      cl: donationSignature.client\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type {\n  NonSerializedDonationSlice, Donation, DonationAsset, DonationSignature,\n  SerializedDonation, SerializedDonationSignature, SerializedDonationAsset,\n} from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nexport class DonationDeserializer {\n  protected static readonly serializedDonationBase64Deserializer = new Base64Deserializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  deserialize(serializedDonationBase64: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    try {\n      const serializedDonation = DonationDeserializer.serializedDonationBase64Deserializer.deserialize(serializedDonationBase64);\n\n      return serializedDonation ? this.mapSerializedDonationToDonation(serializedDonation, nonSerializedDonationSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedDonationToDonation(serializedDonation: SerializedDonation, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation {\n    return {\n      type: PaymentType.Donation,\n      data: serializedDonation.d,\n      desiredAmount: serializedDonation.da ? new BigNumber(serializedDonation.da) : undefined,\n      desiredAsset: serializedDonation.das ? this.mapSerializedDonationAssetToDonationAsset(serializedDonation.das) : undefined,\n      successUrl: serializedDonation.su ? new URL(serializedDonation.su) : undefined,\n      cancelUrl: serializedDonation.cu ? new URL(serializedDonation.cu) : undefined,\n      targetAddress: nonSerializedDonationSlice.targetAddress,\n      signature: serializedDonation.s ? this.mapSerializedDonationSignatureToDonationSignature(serializedDonation.s) : undefined\n    };\n  }\n\n  protected mapSerializedDonationAssetToDonationAsset(serializedDonationAsset: SerializedDonationAsset): DonationAsset {\n    return {\n      address: serializedDonationAsset.a,\n      id: serializedDonationAsset.i !== undefined ? serializedDonationAsset.i : null\n    };\n  }\n\n  protected mapSerializedDonationSignatureToDonationSignature(serializedDonationSignature: SerializedDonationSignature): DonationSignature {\n    return {\n      signingPublicKey: serializedDonationSignature.k,\n      client: serializedDonationSignature.cl\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { PaymentValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { PaymentDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport type { PaymentSignature } from '../signing';\nimport { PaymentBase, PaymentType } from './paymentBase';\n\nexport interface Payment extends PaymentBase {\n  readonly type: PaymentType.Payment;\n  readonly id: string;\n  readonly amount: BigNumber;\n  readonly asset?: PaymentAsset;\n  readonly created: Date;\n  readonly expired?: Date;\n  readonly data?: PaymentData;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n  readonly signature: PaymentSignature;\n}\n\nexport type UnsignedPayment = Omit<Payment, 'signature'>;\n\ninterface PaymentData {\n  readonly [fieldName: string]: unknown;\n}\n\nexport interface PaymentAsset {\n  readonly address: string;\n  readonly decimals: number;\n  readonly id: number | null;\n}\n\nexport class Payment extends StateModel {\n  static readonly defaultDeserializer: PaymentDeserializer = new PaymentDeserializer();\n  static readonly defaultValidator: PaymentValidator = new PaymentValidator();\n\n  static validate(payment: Payment) {\n    return Payment.defaultValidator.validate(payment);\n  }\n\n  static deserialize(serializedPayment: string): Payment | null {\n    return Payment.defaultDeserializer.deserialize(serializedPayment);\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { DonationValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { DonationDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport type { DonationSignature } from '../signing';\nimport { PaymentBase, PaymentType } from './paymentBase';\nimport { NonSerializedDonationSlice } from './serializedDonation';\n\nexport interface Donation extends PaymentBase {\n  readonly type: PaymentType.Donation;\n  readonly data?: DonationData;\n  readonly desiredAmount?: BigNumber;\n  readonly desiredAsset?: DonationAsset;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n  readonly signature?: DonationSignature;\n}\n\nexport type UnsignedDonation = Omit<Donation, 'signature'>;\n\ninterface DonationData {\n  readonly [fieldName: string]: unknown;\n}\n\nexport interface DonationAsset {\n  readonly address: string;\n  readonly id: number | null;\n}\n\nexport class Donation extends StateModel {\n  static readonly defaultDeserializer: DonationDeserializer = new DonationDeserializer();\n  static readonly defaultValidator: DonationValidator = new DonationValidator();\n\n  static validate(donation: Donation) {\n    return Donation.defaultValidator.validate(donation);\n  }\n\n  static deserialize(serializedDonation: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    return Donation.defaultDeserializer.deserialize(serializedDonation, nonSerializedDonationSlice);\n  }\n}\n\n","import { text } from '../../utils';\n\nexport enum PaymentUrlType {\n  Base64 = 0\n}\n\nconst encodedPaymentUrlTypeMap = new Map<PaymentUrlType, string>(\n  Object.keys(PaymentUrlType)\n    .filter(value => !isNaN(+value))\n    .map(value => [+value, text.padStart(value, 2, '0')])\n);\n\nexport const getEncodedPaymentUrlType = (paymentUrlType: PaymentUrlType) => encodedPaymentUrlTypeMap.get(paymentUrlType) || '';\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype ParameterizedRouteFactory = (...args: any[]) => string;\nexport type ParameterizedRoute<Factory extends ParameterizedRouteFactory> = Factory & {\n  readonly template: string;\n};\n\nexport const getParameterizedRoute = <Factory extends ParameterizedRouteFactory>(\n  factory: Factory, template: string\n): ParameterizedRoute<Factory> => {\n  (factory as Factory & { template: string }).template = template;\n\n  return factory as ParameterizedRoute<Factory>;\n};\n","export enum ServiceOperationType {\n  Payment = 1,\n  Donation = 2,\n\n  All = Payment | Donation\n}\n","import { optimization } from '../../utils';\nimport { Network, networks } from '../blockchain/network';\nimport { ServiceOperationType } from './serviceOperationType';\nimport { ServiceSigningKey } from './serviceSigningKey';\n\nexport interface Service {\n  readonly name: string;\n  readonly links: readonly string[];\n  readonly description?: string;\n  readonly iconUrl?: string;\n  readonly version: number;\n  readonly metadata: string;\n\n  readonly contractAddress: string;\n  readonly network: Network;\n  readonly allowedTokens: {\n    readonly tez: boolean;\n    readonly assets: readonly string[];\n  }\n  readonly allowedOperationType: ServiceOperationType;\n\n  readonly owner: string;\n  readonly paused: boolean;\n  readonly deleted: boolean;\n  readonly signingKeys: ReadonlyMap<ServiceSigningKey['publicKey'], ServiceSigningKey>;\n}\n\nexport const emptyService: Service = {\n  name: '',\n  description: '',\n  links: optimization.emptyArray,\n  version: 0,\n  metadata: '',\n  contractAddress: '',\n  allowedTokens: {\n    tez: true,\n    assets: optimization.emptyArray\n  },\n  allowedOperationType: ServiceOperationType.Payment,\n  owner: '',\n  paused: false,\n  deleted: false,\n  network: networks.mainnet,\n  signingKeys: optimization.emptyMap\n};\n","export enum OperationType {\n  Payment = 1,\n  Donation = 2\n}\n","export enum OperationDirection {\n  Incoming = 0,\n  Outgoing = 1\n}\n","export enum OperationStatus {\n  Pending = 0,\n  Success = 1,\n  Cancelled = 2\n}\n","\nimport { converters } from '../../utils';\nimport { StateModel } from '../core';\nimport { Operation } from './operation';\nimport { OperationDirection } from './operationDirection';\nimport { OperationType } from './operationType';\n\nexport interface DonationOperation extends Operation {\n  readonly type: OperationType.Donation;\n  readonly direction: OperationDirection.Incoming;\n  readonly payload?: DonationOperationPayload;\n}\n\nexport interface DonationOperationPayload {\n  readonly value: { readonly [fieldName: string]: unknown; } | null;\n  readonly valueString: string;\n  readonly encodedValue: string;\n}\n\nexport class DonationOperation extends StateModel {\n  static parsePayload(encodedValue: string): DonationOperationPayload {\n    const valueString = converters.bytesToString(encodedValue);\n\n    let value: DonationOperationPayload['value'] = null;\n    try { value = JSON.parse(valueString); } catch { /**/ }\n\n    return {\n      value,\n      valueString,\n      encodedValue,\n    };\n  }\n}\n","import type { Payment } from '../../models';\n\nexport interface ClientSignPayload {\n  readonly successUrl?: string;\n  readonly cancelUrl?: string;\n  readonly data?: Payment['data'];\n}\n\n// 'Tezos Signed Message: '\nexport const tezosSignedMessagePrefixBytes = '54657a6f73205369676e6564204d6573736167653a20';\n// 'Payment Client Data: '\nexport const tezosPaymentsClientSignedMessagePrefixBytes = '5061796d656e7420436c69656e7420446174613a20';\n","import type { MichelsonType } from '@taquito/michel-codec';\n\nexport const contractPaymentInTezSignPayloadMichelsonType: MichelsonType = {\n  prim: 'pair',\n  args: [\n    {\n      prim: 'pair',\n      args: [\n        { prim: 'string' },\n        { prim: 'address' }\n      ]\n    },\n    { prim: 'mutez' }\n  ]\n};\n\nexport const contractPaymentInAssetSignPayloadMichelsonType: MichelsonType = {\n  prim: 'pair',\n  args: [\n    {\n      prim: 'pair',\n      args: [\n        {\n          prim: 'pair',\n          args: [\n            { prim: 'string' },\n            { prim: 'address' }\n          ]\n        },\n        {\n          prim: 'pair',\n          args: [\n            { prim: 'nat' },\n            { prim: 'address' }\n          ]\n        }\n      ]\n    },\n    {\n      prim: 'option',\n      args: [{ prim: 'nat' }]\n    }\n  ]\n};\n","\nimport { MichelsonType, packDataBytes } from '@taquito/michel-codec';\n\nimport type { UnsignedPayment, EncodedPaymentSignPayload } from '../../models';\nimport { converters, text } from '../../utils';\nimport { tezToMutez, tokensAmountToNat } from '../../utils/converters';\nimport { ClientSignPayload, tezosPaymentsClientSignedMessagePrefixBytes, tezosSignedMessagePrefixBytes } from './clientSignPayload';\nimport { contractPaymentInTezSignPayloadMichelsonType, contractPaymentInAssetSignPayloadMichelsonType } from './michelsonTypes';\n\nexport class PaymentSignPayloadEncoder {\n  protected static readonly contractPaymentInTezSignPayloadMichelsonType: MichelsonType = contractPaymentInTezSignPayloadMichelsonType;\n  protected static readonly contractPaymentInAssetSignPayloadMichelsonType: MichelsonType = contractPaymentInAssetSignPayloadMichelsonType;\n\n  encode(payment: UnsignedPayment): EncodedPaymentSignPayload {\n    return {\n      contractSignPayload: this.getContractSignPayload(payment),\n      clientSignPayload: this.getClientSignPayload(payment)\n    };\n  }\n\n  protected getContractSignPayload(payment: UnsignedPayment): EncodedPaymentSignPayload['contractSignPayload'] {\n    const signPayload = payment.asset\n      ? packDataBytes(\n        {\n          prim: 'Pair',\n          args: [\n            {\n              prim: 'Pair',\n              args: [\n                {\n                  prim: 'Pair',\n                  args: [\n                    { string: payment.id },\n                    { string: payment.targetAddress }\n                  ]\n                },\n                {\n                  prim: 'Pair',\n                  args: [\n                    { int: tokensAmountToNat(payment.amount, payment.asset.decimals).toString(10) },\n                    { string: payment.asset.address }\n                  ]\n                }\n              ]\n            },\n            payment.asset.id !== undefined && payment.asset.id !== null\n              ? { prim: 'Some', args: [{ int: payment.asset.id.toString() }] }\n              : { prim: 'None' }\n          ]\n        },\n        contractPaymentInAssetSignPayloadMichelsonType\n      )\n      : packDataBytes(\n        {\n          prim: 'Pair',\n          args: [\n            {\n              prim: 'Pair',\n              args: [\n                { string: payment.id },\n                { string: payment.targetAddress }\n              ]\n            },\n            { int: tezToMutez(payment.amount).toString(10) }\n          ]\n        },\n        contractPaymentInTezSignPayloadMichelsonType\n      );\n\n    return '0x' + signPayload.bytes;\n  }\n\n  protected getClientSignPayload(payment: UnsignedPayment): EncodedPaymentSignPayload['clientSignPayload'] {\n    const clientSignPayload: ClientSignPayload = {\n      data: payment.data,\n      successUrl: payment.successUrl?.href,\n      cancelUrl: payment.cancelUrl?.href\n    };\n    const serializedClientSignPayload = JSON.stringify(\n      clientSignPayload,\n      (_key, value) => value !== undefined && value !== null && value !== '' ? value : undefined\n    );\n    if (serializedClientSignPayload === '{}')\n      return null;\n\n    const serializedClientSignPayloadBytes = converters.stringToBytes(serializedClientSignPayload);\n    const signedMessageBytes = tezosSignedMessagePrefixBytes + tezosPaymentsClientSignedMessagePrefixBytes + serializedClientSignPayloadBytes;\n    const messageLength = text.padStart((signedMessageBytes.length / 2).toString(16), 8, '0');\n    const result = '0x0501' + messageLength + signedMessageBytes;\n\n    return result;\n  }\n}\n","import { b58cencode, prefix } from '@taquito/utils';\nimport sodium from 'libsodium-wrappers';\n\nimport { EncodedKeyPair, KeyPair, KeyPairGeneratorResult, KeyType } from '../../models';\nimport type { KeyPairGenerator } from './keyPairGenerator';\n\nexport class Ed25519KeyGenerator implements KeyPairGenerator {\n  private _isInitialized = false;\n\n  get isInitialized() {\n    return this._isInitialized;\n  }\n\n  generate(): KeyPairGeneratorResult {\n    if (!this.isInitialized)\n      throw new Error('Ed25519 key generator is not initialized');\n\n    const keyPair = sodium.crypto_sign_keypair('uint8array');\n    const raw: KeyPair = {\n      keyType: KeyType.Ed25519,\n      privateKey: keyPair.privateKey,\n      publicKey: keyPair.publicKey,\n    };\n\n    const encoded: EncodedKeyPair = {\n      keyType: KeyType.Ed25519,\n      privateKey: b58cencode(raw.privateKey, prefix['edsk']),\n      publicKey: b58cencode(raw.publicKey, prefix['edpk']),\n    };\n\n    return {\n      raw,\n      encoded\n    };\n  }\n\n  async initialize(): Promise<void> {\n    await sodium.ready;\n    this._isInitialized = true;\n  }\n\n  static async create(): Promise<Ed25519KeyGenerator> {\n    const instance = new Ed25519KeyGenerator();\n    await instance.initialize();\n\n    return instance;\n  }\n}\n","import { b58cencode, prefix } from '@taquito/utils';\nimport { ec } from 'elliptic';\n\nimport { EncodedKeyPair, KeyPair, KeyPairGeneratorResult, KeyType } from '../../models';\nimport type { KeyPairGenerator } from './keyPairGenerator';\n\nexport class EllipticCurveKeyGenerator implements KeyPairGenerator {\n  protected static readonly curveInfo = {\n    secp256k1: {\n      name: 'secp256k1',\n      keyType: KeyType.Secp256k1,\n      privateKeyPrefix: prefix['spsk'],\n      publicKeyPrefix: prefix['sppk'],\n    },\n    p256: {\n      name: 'p256',\n      keyType: KeyType.P256,\n      privateKeyPrefix: prefix['p2sk'],\n      publicKeyPrefix: prefix['p2pk'],\n    },\n  } as const;\n\n  protected readonly ec: ec;\n  protected readonly curveInfo: typeof EllipticCurveKeyGenerator.curveInfo[keyof typeof EllipticCurveKeyGenerator.curveInfo];\n\n  constructor(curveName: keyof typeof EllipticCurveKeyGenerator.curveInfo) {\n    this.ec = new ec(curveName);\n    this.curveInfo = EllipticCurveKeyGenerator.curveInfo[curveName];\n  }\n\n  generate(): KeyPairGeneratorResult {\n    const keyPair = this.ec.genKeyPair();\n    console.log(keyPair);\n\n    const publicBasePoint = keyPair.getPublic();\n    const publicPointX = publicBasePoint.getX().toArray();\n    const publicPointY = publicBasePoint.getY().toArray();\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const firstByte = publicPointY[publicPointY.length - 1]! % 2 ? 3 : 2;\n\n    const privateKey = new Uint8Array(keyPair.getPrivate().toArray());\n    const pad = new Array(32).fill(0);\n    const publicKey = new Uint8Array([firstByte].concat(pad.concat(publicPointX).slice(-32)));\n\n    const raw: KeyPair = {\n      keyType: KeyType.P256,\n      privateKey,\n      publicKey,\n    };\n\n    const encoded: EncodedKeyPair = {\n      keyType: this.curveInfo.keyType,\n      privateKey: b58cencode(privateKey, this.curveInfo.privateKeyPrefix),\n      publicKey: b58cencode(publicKey, this.curveInfo.publicKeyPrefix),\n    };\n\n    return {\n      raw,\n      encoded\n    };\n  }\n}\n","export class ReadOnlySigner {\n  async publicKeyHash() {\n    return 'tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A';\n  }\n\n  async publicKey() {\n    return 'edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K';\n  }\n\n  async secretKey(): Promise<string> {\n    throw new Error('Secret key cannot be exposed');\n  }\n\n  async sign(): Promise<{\n    bytes: string;\n    sig: string;\n    prefixSig: string;\n    sbytes: string;\n  }> {\n    throw new Error('Cannot sign');\n  }\n}\n","export const defaultConfig = {\n    links: {\n        tezosPayments: {\n            webSite: 'https://tezospayments.com',\n            paymentsApp: 'https://payment.tezospayments.com',\n            gitHub: 'https://github.com/fastwaterbear/tezospayments',\n            telegram: 'https://t.me/fastwaterbear',\n            twitter: 'https://twitter.com/fastwaterbear',\n            reddit: 'https://www.reddit.com/user/fastwaterbear'\n        }\n    },\n    tezos: {\n        defaultNetwork: 'hangzhounet',\n        networks: {\n            mainnet: {\n                title: 'Mainnet',\n                color: '83b300',\n                minimumSupportedServiceVersion: 3,\n                default: {\n                    rpc: 'ecadLabs',\n                    indexer: 'tzKT',\n                    explorer: 'tzKT'\n                },\n                rpcUrls: {\n                    ecadLabs: 'https://mainnet.api.tez.ie',\n                    smartPy: 'https://mainnet.smartpy.io'\n                },\n                indexerUrls: {\n                    tzKT: 'https://api.tzkt.io',\n                    betterCallDev: 'https://api.better-call.dev'\n                },\n                explorers: {\n                    tzKT: { baseUrl: 'https://tzkt.io', title: 'TzKT' },\n                    betterCallDev: { baseUrl: 'https://better-call.dev', title: 'Better Call Dev' },\n                    tzStats: { baseUrl: 'https://tzstats.com', title: 'TzStats' }\n                },\n                servicesFactoryContractAddress: 'Not implemented'\n            },\n            hangzhounet: {\n                title: 'Hangzhou Testnet',\n                color: '#b83280',\n                minimumSupportedServiceVersion: 1,\n                default: {\n                    rpc: 'smartPy',\n                    indexer: 'tzKT',\n                    explorer: 'tzKT'\n                },\n                rpcUrls: {\n                    ecadLabs: 'https://hangzhounet.api.tez.ie',\n                    smartPy: 'https://hangzhounet.smartpy.io'\n                },\n                indexerUrls: {\n                    tzKT: 'https://api.hangzhou2net.tzkt.io',\n                    betterCallDev: 'https://api.better-call.dev'\n                },\n                explorers: {\n                    tzKT: { baseUrl: 'https://hangzhou2net.tzkt.io', title: 'TzKT' },\n                    betterCallDev: { baseUrl: 'https://better-call.dev', title: 'Better Call Dev' },\n                    tzStats: { baseUrl: 'https://hangzhou.tzstats.com', title: 'TzStats' }\n                },\n                servicesFactoryContractAddress: 'KT1BLQ4tfy5iizuCSaR5D8sSDiQSemhvnAif'\n            }\n        }\n    }\n};\n//# sourceMappingURL=defaultConfig.js.map","export class BlockchainUrlExplorer {\n    constructor(network, baseUrl) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n    }\n}\n//# sourceMappingURL=blockchainUrlExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzKTBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzKTBlockchainUrlExplorer.js.map","import { tezosInfo } from '@tezospayments/common';\nimport { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class BetterCallDevBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return tezosInfo.addressPrefixes.some(prefix => entity.startsWith(prefix))\n            ? this.getAccountUrl(entity)\n            : this.getOperationUrl(entity);\n    }\n    getOperationUrl(operationHash) {\n        return `${this.baseUrl}/${this.network.name}/opg/${operationHash}/contents`;\n    }\n    getAccountUrl(contractAddress) {\n        return `${this.baseUrl}/${this.network.name}/${contractAddress}`;\n    }\n}\n//# sourceMappingURL=betterCallDevUrlBlockchainExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzStatsBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzStatsBlockchainUrlExplorer.js.map","import BigNumber from 'bignumber.js';\nimport { converters, DonationOperation, guards, OperationDirection, OperationStatus, OperationType, optimization, tezosMeta, tokenWhitelistMap } from '@tezospayments/common';\nexport class TzKTDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress, minimumSupportedServiceVersion) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n        this.minimumSupportedServiceVersion = minimumSupportedServiceVersion;\n        this.tokenWhiteList = tokenWhitelistMap.get(this.network) || optimization.emptyMap;\n    }\n    async getService(serviceContractAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contracts/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        if ('version' in serviceDto && +serviceDto.version < this.minimumSupportedServiceVersion) {\n            // Only for Dev\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return null;\n        }\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const keysUrl = `${this.baseUrl}/v1/contracts/${this.servicesFactoryContractAddress}/bigmaps/services/keys`;\n        const allKeysResponse = await fetch(keysUrl);\n        const allKeys = await allKeysResponse.json();\n        if (allKeys.every(k => k.key !== ownerAddress)) {\n            return [];\n        }\n        const response = await fetch(`${keysUrl}/${ownerAddress}`);\n        const keyValue = await response.json();\n        const contractAddresses = keyValue.value;\n        return (await Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)))).filter(Boolean);\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/accounts/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('type', 'transaction');\n        url.searchParams.set('entrypoint.in', 'send_payment,send_donation');\n        const response = await fetch(url.href);\n        const operations = await response.json();\n        return operations\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            .map(operation => this.mapOperationDtoToServiceOperation(operation))\n            .filter(Boolean);\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        const metadataJson = converters.bytesToObject(serviceDto.metadata);\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto.version,\n                metadata: serviceDto.metadata,\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto.allowed_tokens.tez,\n                    assets: serviceDto.allowed_tokens.assets\n                },\n                allowedOperationType: +serviceDto.allowed_operation_type,\n                owner: serviceDto.owner,\n                paused: serviceDto.paused,\n                deleted: serviceDto.deleted,\n                signingKeys: this.mapSigningKeyDtosToSigningKeys(serviceDto.signing_keys)\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return Object.keys(signingKeyDtos)\n            .reduce((map, signingKey) => { var _a; return map.set(signingKey, { publicKey: signingKey, name: ((_a = signingKeyDtos[signingKey]) === null || _a === void 0 ? void 0 : _a.name) || undefined }); }, new Map());\n    }\n    mapOperationDtoToServiceOperation(operationDto) {\n        var _a, _b, _c;\n        const decimals = operationDto.parameter.value.asset_value\n            ? ((_b = (_a = this.tokenWhiteList.get(operationDto.parameter.value.asset_value.token_address)) === null || _a === void 0 ? void 0 : _a.metadata) === null || _b === void 0 ? void 0 : _b.decimals) || 0\n            : tezosMeta.decimals;\n        const amount = operationDto.parameter.value.asset_value ? operationDto.parameter.value.asset_value.value : operationDto.amount.toString();\n        const operationType = operationDto.parameter.entrypoint === 'send_payment' ? OperationType.Payment : OperationType.Donation;\n        const operationBase = {\n            hash: operationDto.hash,\n            type: operationType,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: (_c = operationDto.parameter.value.asset_value) === null || _c === void 0 ? void 0 : _c.token_address,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.sender.address,\n            target: operationDto.target.address,\n        };\n        switch (operationBase.type) {\n            case OperationType.Payment: {\n                const paymentOperation = operationBase;\n                paymentOperation.paymentId = operationDto.parameter.value.id;\n                return paymentOperation;\n            }\n            case OperationType.Donation: {\n                const donationOperation = operationBase;\n                donationOperation.payload = DonationOperation.parsePayload(operationDto.parameter.value.payload);\n                return donationOperation;\n            }\n            default:\n                return null;\n        }\n    }\n}\n//# sourceMappingURL=tzKTDataProvider.js.map","import BigNumber from 'bignumber.js';\nimport { converters, DonationOperation, guards, OperationDirection, OperationStatus, OperationType, optimization, tezosMeta, tokenWhitelistMap } from '@tezospayments/common';\nexport class BetterCallDevDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress, minimumSupportedServiceVersion) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n        this.minimumSupportedServiceVersion = minimumSupportedServiceVersion;\n        this.tokenWhiteList = tokenWhitelistMap.get(this.network) || optimization.emptyMap;\n    }\n    async getService(serviceContractAddress) {\n        var _a;\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((+((_a = serviceDto === null || serviceDto === void 0 ? void 0 : serviceDto[0].children) === null || _a === void 0 ? void 0 : _a[serviceDto[0].children.length - 1]).value < this.minimumSupportedServiceVersion)) {\n            // Only for Dev\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return null;\n        }\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const servicesFactoryDto = await this.getServicesFactoryDto();\n        const servicesBigMapId = servicesFactoryDto[0].children[4].value;\n        const response = await fetch(`${this.baseUrl}/v1/bigmap/${this.network.name}/${servicesBigMapId}/keys`);\n        const servicesBigMapDto = await response.json();\n        const servicesSet = servicesBigMapDto.find(pair => pair.data.key_string === ownerAddress);\n        if (!servicesSet)\n            return optimization.emptyArray;\n        const contractAddresses = servicesSet.data.value.children.map(serviceAddressDto => serviceAddressDto.value);\n        return (await Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)))).filter(Boolean);\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/contract/${this.network.name}/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('entrypoints', 'send_payment,send_donation');\n        const response = await fetch(url.href);\n        const operations = (await response.json()).operations;\n        return operations\n            .filter(operation => !operation.internal)\n            .filter(operation => operation.entrypoint === 'send_payment' || operation.entrypoint === 'send_donation')\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            .map(operation => operation.entrypoint === 'send_payment'\n            ? this.mapSendPaymentOperationToServiceOperation(operation)\n            : this.mapSendDonationOperationToServiceOperation(operation))\n            .filter(Boolean);\n    }\n    async getServicesFactoryDto() {\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${this.servicesFactoryContractAddress}/storage`);\n        return response.json();\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        let metadataJson;\n        try {\n            metadataJson = JSON.parse(serviceDto[0].children[4].value);\n        }\n        catch {\n            return null;\n        }\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto[0].children[8].value,\n                metadata: converters.stringToBytes(serviceDto[0].children[4].value),\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto[0].children[1].children[0].value,\n                    assets: optimization.emptyArray\n                },\n                allowedOperationType: +serviceDto[0].children[0].value,\n                owner: serviceDto[0].children[5].value,\n                paused: serviceDto[0].children[6].value,\n                deleted: serviceDto[0].children[3].value,\n                signingKeys: serviceDto[0].children[7].children\n                    ? this.mapSigningKeyDtosToSigningKeys(serviceDto[0].children[7].children)\n                    : new Map()\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return signingKeyDtos.reduce((map, signingKeyDto) => {\n            const publicKey = signingKeyDto.children[0].value;\n            const rawName = signingKeyDto.children[1].value;\n            return map.set(publicKey, { publicKey, name: rawName !== 'None' ? rawName : undefined });\n        }, new Map());\n    }\n    mapSendPaymentOperationToServiceOperation(operationDto) {\n        var _a, _b;\n        const assetInfo = operationDto.parameters[0].children[1].children;\n        const assetAddress = assetInfo === null || assetInfo === void 0 ? void 0 : assetInfo[0].value;\n        const assetValue = assetInfo === null || assetInfo === void 0 ? void 0 : assetInfo[2].value;\n        const decimals = assetAddress\n            ? ((_b = (_a = this.tokenWhiteList.get(assetAddress)) === null || _a === void 0 ? void 0 : _a.metadata) === null || _b === void 0 ? void 0 : _b.decimals) || 0\n            : tezosMeta.decimals;\n        const amount = assetValue || (operationDto.amount || 0).toString();\n        const paymentOperation = {\n            hash: operationDto.hash,\n            type: OperationType.Payment,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            paymentId: operationDto.parameters[0].children[0].value,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: assetAddress,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.source,\n            target: operationDto.destination,\n        };\n        return paymentOperation;\n    }\n    mapSendDonationOperationToServiceOperation(operationDto) {\n        var _a, _b;\n        const assetInfo = operationDto.parameters[0].children[0].children;\n        const assetAddress = assetInfo === null || assetInfo === void 0 ? void 0 : assetInfo[0].value;\n        const assetValue = assetInfo === null || assetInfo === void 0 ? void 0 : assetInfo[2].value;\n        const decimals = assetAddress\n            ? ((_b = (_a = this.tokenWhiteList.get(assetAddress)) === null || _a === void 0 ? void 0 : _a.metadata) === null || _b === void 0 ? void 0 : _b.decimals) || 0\n            : tezosMeta.decimals;\n        const amount = assetValue || (operationDto.amount || 0).toString();\n        const donationOperation = {\n            hash: operationDto.hash,\n            type: OperationType.Donation,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: assetAddress,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.source,\n            target: operationDto.destination,\n            payload: DonationOperation.parsePayload(converters.stringToBytes(operationDto.parameters[0].children[1].value))\n        };\n        return donationOperation;\n    }\n}\n//# sourceMappingURL=betterCallDevDataProvider.js.map","import { tezosMeta } from '@tezospayments/common';\nexport class TezosNodeDataProvider {\n    constructor(tezosToolkit) {\n        this.tezosToolkit = tezosToolkit;\n    }\n    async getTezosBalance(address) {\n        const balance = await this.tezosToolkit.tz.getBalance(address);\n        return balance.div(10 ** tezosMeta.decimals);\n    }\n    async getTokenBalance(address, token) {\n        let result = null;\n        switch (token.type) {\n            case 'fa1.2':\n                result = await this.getFA12TokenBalance(address, token);\n                break;\n            case 'fa2':\n                result = await this.getFA2TokenBalance(address, token);\n                break;\n            default:\n                throw new Error('Not Supported');\n        }\n        const divider = token.metadata ? 10 ** token.metadata.decimals : 1;\n        return result.div(divider);\n    }\n    async getFA12TokenBalance(address, token) {\n        var _a, _b;\n        const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n        const result = await ((_b = (_a = contract.views).getBalance) === null || _b === void 0 ? void 0 : _b.call(_a, address).read());\n        return result || 0;\n    }\n    async getFA2TokenBalance(address, token) {\n        var _a, _b;\n        const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n        const response = await ((_b = (_a = contract.views) === null || _a === void 0 ? void 0 : _a['balance_of']) === null || _b === void 0 ? void 0 : _b.call(_a, [{ owner: address, token_id: token.id }]).read());\n        const result = response[0].balance;\n        return result || 0;\n    }\n}\n//# sourceMappingURL=tezosNodeDataProvider.js.map","import { NetworkType } from '@airgap/beacon-sdk';\nimport { networks } from '@tezospayments/common';\nexport const beaconNetworkToNetwork = networkType => {\n    switch (networkType) {\n        case NetworkType.HANGZHOUNET:\n            return networks.hangzhounet;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\nexport const networkToBeaconNetwork = network => {\n    switch (network) {\n        case networks.hangzhounet:\n            return NetworkType.HANGZHOUNET;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\n//# sourceMappingURL=converters.js.map","import { getParameterizedRoute } from '@tezospayments/common';\nimport { defaultConfig } from '@tezospayments/react-web-core';\n\nimport type { AppConfig } from './appConfig';\n\nconst commitShortSha = process.env.REACT_APP_COMMIT_SHORT_SHA || '';\n\nexport const config: AppConfig = {\n  ...defaultConfig,\n  app: {\n    publicUrl: process.env.PUBLIC_URL || '/',\n    name: 'Tezos Payments Dashboard',\n    title: 'Tezos Payments',\n    version: {\n      name: 'Dev Version',\n      link: 'https://github.com/fastwaterbear/tezospayments/tree/master'\n    },\n    buildInfo: {\n      commitShortSha,\n      link: `https://github.com/fastwaterbear/tezospayments/tree/${commitShortSha}`\n    }\n  },\n  routers: {\n    overview: '/',\n    analytics: '/analytics',\n    operations: '/operations',\n    services: '/services',\n    service: getParameterizedRoute((address, isEdit) => isEdit ? `/services/${address}?edit=true` : `/services/${address}`, '/services/:address'),\n    createService: '/services/create',\n    acceptPayments: '/accept',\n    acceptServicePayments: getParameterizedRoute(address => `/accept/${address}`, '/accept/:address'),\n    connect: '/connect',\n    about: '/about'\n  },\n  links: {\n    ...defaultConfig.links,\n    tzKT: 'https://tzkt.io'\n  }\n};\n","import { DAppClient } from '@airgap/beacon-sdk';\nimport BigNumber from 'bignumber.js';\n\nimport { Token, Network } from '@tezospayments/common';\nimport { BalancesProvider, converters } from '@tezospayments/react-web-core';\n\nimport { Account } from '../models/blockchain';\n\nexport class AccountsService {\n  constructor(\n    private readonly dAppClient: DAppClient,\n    private readonly balancesProvider: BalancesProvider\n  ) {\n  }\n\n  async connect(network: Network): Promise<Account | null> {\n    return this.dAppClient.requestPermissions({ network: { type: converters.networkToBeaconNetwork(network) } })\n      .then(permissions => {\n        return {\n          address: permissions.address,\n          publicKey: permissions.publicKey,\n          network\n        };\n      })\n      .catch(e => {\n        console.error(e);\n        this.dAppClient.clearActiveAccount();\n        return null;\n      });\n  }\n\n  disconnect(): Promise<void> {\n    return this.dAppClient.clearActiveAccount();\n  }\n\n  async getActiveAccount(): Promise<Account | undefined> {\n    const activeAccount = await this.dAppClient.getActiveAccount();\n\n    return activeAccount\n      ? {\n        address: activeAccount.address,\n        publicKey: activeAccount.publicKey,\n        network: converters.beaconNetworkToNetwork(activeAccount.network.type)\n      }\n      : undefined;\n  }\n\n  async getTezosBalance(account: Account): Promise<BigNumber> {\n    return this.balancesProvider.getTezosBalance(account.address);\n  }\n\n  async getTokenBalance(account: Account, token: Token): Promise<BigNumber> {\n    return this.balancesProvider.getTokenBalance(account.address, token);\n  }\n}\n","import { createSelector } from 'reselect';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../config';\nimport { Account } from '../../models/blockchain';\nimport type { AppState } from '../index';\n\nexport const selectAccountsState = (state: AppState) => state.accountsState;\nexport const selectCurrentAccount = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.currentAccount\n    ? (accountsState.connectedAccounts.find(account =>\n      account.address === accountsState.currentAccount?.address && account.network.id === accountsState.currentAccount.network.id) || null)\n    : null\n);\nexport const selectAccountsByNetwork = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.connectedAccounts.reduce((p, c) => p.set(c.network, [...(p.get(c.network) || []), c]), new Map<Network, Account[]>())\n);\nexport const selectCurrentNetworkConfig = createSelector(\n  selectCurrentAccount,\n  account => account && config.tezos.networks[account.network.name]\n);\n","import { createSelector } from 'reselect';\n\nimport { optimization, Token, tokenWhitelistMap } from '@tezospayments/common';\n\nimport { selectAccountsState } from '../accounts/selectors';\nimport { AppState } from '../index';\nimport { PendingOperation } from './slice';\n\nexport const selectTokensState = createSelector(\n  selectAccountsState,\n  accountsState => {\n    const network = accountsState.currentAccount?.network;\n    return (network && tokenWhitelistMap.get(network)) || optimization.emptyMap as Map<string, Token>;\n  }\n);\n\nexport const selectServicesState = (state: AppState) => state.servicesState;\nexport const selectAllAcceptedTokens = createSelector(\n  selectServicesState,\n  selectTokensState,\n  (servicesState, tokensState) => {\n    const result = new Set<Token>();\n\n    servicesState.services.forEach(s => s.allowedTokens.assets\n      .forEach(assetAddress => {\n        const token = tokensState.get(assetAddress);\n        if (!token)\n          return;\n\n        result.add(token);\n      })\n    );\n\n    return [...result];\n  }\n);\n\nexport const selectAcceptTezos = createSelector(\n  selectServicesState,\n  servicesState => {\n    return servicesState.services.some(s => s.allowedTokens.tez);\n  }\n);\n\nexport const selectSortedServices = createSelector(\n  selectServicesState,\n  servicesState => {\n    return [...servicesState.services].sort((a, b) => a.name.localeCompare(b.name));\n  }\n);\n\nexport const selectPendingOperationsByService = createSelector(\n  selectServicesState,\n  servicesState => {\n    if (!servicesState.pendingOperations.length)\n      return optimization.emptyMap;\n\n    const operationsMap = new Map<string, PendingOperation[]>();\n    servicesState.pendingOperations.forEach(op => {\n      const operations = operationsMap.get(op.serviceAddress);\n\n      if (operations)\n        operations.push(op);\n      else\n        operationsMap.set(op.serviceAddress, [op]);\n    });\n\n    return operationsMap;\n  }\n);\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport BigNumber from 'bignumber.js';\n\nimport { optimization } from '@tezospayments/common';\n\nimport { Account } from '../../models/blockchain';\nimport { selectAllAcceptedTokens } from '../services/selectors';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface BalancesState {\n  readonly tezos: BigNumber;\n  readonly tokens: { [key: string]: BigNumber };\n  readonly initialized: boolean;\n}\n\nconst initialState: BalancesState = {\n  tezos: optimization.zeroBigNumber,\n  tokens: optimization.emptyObject,\n  initialized: false\n};\n\nconst namespace = 'balances';\n\nexport const loadBalances = createAsyncThunk<Pick<BalancesState, 'tezos' | 'tokens'>, Account, AppThunkAPI>(\n  `${namespace}/loadBalances`,\n  async (account, { extra: app, getState }) => {\n    const tezos = await app.services.accountsService.getTezosBalance(account);\n\n    const acceptedTokens = selectAllAcceptedTokens(getState());\n    const tokens: { [key: string]: BigNumber } = {};\n    const balancesPromises = acceptedTokens.map(t => app.services.accountsService.getTokenBalance(account, t));\n    const balances = await Promise.all(balancesPromises);\n\n    balances.forEach((b, i) => {\n      const address = acceptedTokens[i]?.contractAddress;\n      if (address)\n        tokens[address] = b;\n    });\n\n    return { tezos, tokens };\n  }\n);\n\nexport const balancesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearBalances: state => {\n      state.tezos = optimization.zeroBigNumber;\n      state.tokens = optimization.emptyObject;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadBalances.fulfilled, (state, action) => {\n      const { tezos, tokens } = action.payload;\n      state.tezos = tezos;\n      state.tokens = tokens;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearBalances } = balancesSlice.actions;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { ServiceOperation, Network, optimization } from '@tezospayments/common';\n\nimport { AppThunkAPI } from '../thunk';\n\nexport interface OperationsState {\n  readonly operations: readonly ServiceOperation[];\n  readonly initialized: boolean;\n}\n\nconst initialState: OperationsState = {\n  operations: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'operations';\n\nexport const loadOperations = createAsyncThunk<ServiceOperation[], { servicesAddresses: string[], network: Network }, AppThunkAPI>(\n  `${namespace}/loadOperations`,\n  async ({ servicesAddresses }, { extra: app }) => {\n    const operationsPromises = servicesAddresses.map(s => app.services.servicesService.getOperations(s));\n    const operations = (await Promise.all(operationsPromises)).flat();\n\n    return operations;\n  }\n);\n\nexport const operationsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearOperations: state => {\n      state.operations = optimization.emptyArray;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadOperations.fulfilled, (state, action) => {\n      state.operations = action.payload;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearOperations } = operationsSlice.actions;\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { WalletOperation } from '@taquito/taquito';\n\nimport { Service, optimization, ServiceSigningKey, wait } from '@tezospayments/common';\n\nimport { Account } from '../../models/blockchain';\nimport { selectCurrentAccount } from '../accounts/selectors';\nimport { AppDispatch, AppState } from '../index';\nimport { clearOperations, loadOperations } from '../operations/slice';\nimport { AppThunkAPI } from '../thunk';\n\nexport enum PendingOperationStatus { loading, success, error }\n\nexport interface PendingOperation {\n  readonly hash: string;\n  readonly serviceAddress: string;\n  readonly action: string;\n  readonly confirmationCount: number;\n  readonly targetConfirmationCount: number;\n  readonly status: PendingOperationStatus;\n}\n\nexport interface ServicesState {\n  readonly services: readonly Service[];\n  readonly initialized: boolean;\n  readonly pendingOperations: PendingOperation[];\n}\n\nconst initialState: ServicesState = {\n  services: optimization.emptyArray,\n  initialized: false,\n  pendingOperations: optimization.emptyArray\n};\n\nconst namespace = 'services';\n\nexport const loadServices = createAsyncThunk<readonly Service[], Account, AppThunkAPI>(\n  `${namespace}/loadServices`,\n  async (account, { extra: app, dispatch }) => {\n    const services = await app.services.servicesService.getServices(account);\n\n    if (services.length) {\n      dispatch(loadOperations({ servicesAddresses: services.map(s => s.contractAddress), network: account.network }));\n    }\n\n    return services;\n  }\n);\n\nexport const updateService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/updateService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.updateService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'updating');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const createService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/createService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.createService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'creating new service');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setPaused = createAsyncThunk<void, { service: Service, paused: boolean }, AppThunkAPI>(\n  `${namespace}/setPaused`,\n  async ({ service, paused }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setPaused(service, paused);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, paused ? 'pausing' : 'unpausing');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setDeleted = createAsyncThunk<void, { service: Service, deleted: boolean }, AppThunkAPI>(\n  `${namespace}/setDeleted`,\n  async ({ service, deleted }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setDeleted(service, deleted);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, deleted ? 'deleting' : 'undeleting');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const addApiKey = createAsyncThunk<void, { service: Service, signingKey: ServiceSigningKey }, AppThunkAPI>(\n  `${namespace}/addApiKey`,\n  async ({ service, signingKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.addApiKey(service, signingKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'adding API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const deleteApiKey = createAsyncThunk<void, { service: Service, publicKey: string }, AppThunkAPI>(\n  `${namespace}/deleteApiKey`,\n  async ({ service, publicKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.deleteApiKey(service, publicKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'deleting API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const clearServices = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/clearServices`,\n  async (_, { dispatch }) => {\n    dispatch(clearOperations());\n  }\n);\n\nconst createPendingOperation = (hash: string, serviceAddress: string, action: string, targetConfirmationCount: number): PendingOperation => ({\n  hash,\n  action,\n  serviceAddress,\n  targetConfirmationCount,\n  confirmationCount: 0,\n  status: PendingOperationStatus.loading,\n});\n\nconst reloadServices = (dispatch: AppDispatch, getState: () => AppState) => {\n  const account = selectCurrentAccount(getState());\n  if (account) {\n    dispatch(loadServices(account));\n  }\n};\n\nconst waitOperationConfirmation = (\n  dispatch: AppDispatch,\n  operation: WalletOperation,\n  serviceAddress: string,\n  operationName: string,\n  confirmationsNumber = 2\n): Promise<void> => {\n  const pendingOperation = createPendingOperation(operation.opHash, serviceAddress, operationName, confirmationsNumber);\n  dispatch(addPendingOperation(pendingOperation));\n\n  return new Promise<void>((resolve, reject) => {\n    operation.confirmationObservable(confirmationsNumber)\n      .subscribe(\n        confirmation => dispatch(setPendingOperationConfirmationCount(\n          { hash: pendingOperation.hash, confirmationCount: confirmation.currentConfirmation })\n        ),\n        async error => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.error }));\n          reject(error);\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        },\n        async () => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.success }));\n          resolve();\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        }\n      );\n  });\n};\n\nexport const servicesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    addPendingOperation: (state, action: PayloadAction<PendingOperation>) => {\n      const operation = action.payload;\n      state.pendingOperations.push(operation);\n    },\n    setPendingOperationStatus: (state, action: PayloadAction<{ hash: string, status: PendingOperationStatus }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.status = action.payload.status;\n    },\n    setPendingOperationConfirmationCount: (state, action: PayloadAction<{ hash: string, confirmationCount: number }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.confirmationCount = action.payload.confirmationCount;\n    },\n    deletePendingOperation: (state, action: PayloadAction<string>) => {\n      state.pendingOperations = state.pendingOperations.filter(o => o.hash !== action.payload);\n    },\n  },\n  extraReducers: builder => {\n    builder.addCase(loadServices.fulfilled, (state, action) => ({\n      ...state,\n      services: action.payload,\n      initialized: true\n    }));\n\n    builder.addCase(clearServices.fulfilled, state => ({\n      ...state,\n      services: optimization.emptyArray,\n      initialized: false\n    }));\n  }\n});\n\nexport const { addPendingOperation, setPendingOperationStatus, setPendingOperationConfirmationCount, deletePendingOperation } = servicesSlice.actions;\n","import type { BeaconWallet } from '@taquito/beacon-wallet';\nimport React from 'react';\n\nimport type { BlockchainUrlExplorer } from '@tezospayments/react-web-core';\n\nexport interface ReactAppContext {\n  readonly tezosWallet: BeaconWallet;\n  readonly tezosExplorer: BlockchainUrlExplorer;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redeclare\nexport const ReactAppContext = React.createContext<ReactAppContext>({} as ReactAppContext);\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { optimization, Network } from '@tezospayments/common';\n\nimport type { Account, CurrentAccountInfo } from '../../models/blockchain';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface AccountsState {\n  readonly currentAccount: CurrentAccountInfo | null;\n  readonly connectedAccounts: readonly Account[];\n  readonly initialized: boolean;\n}\n\nconst initialState: AccountsState = {\n  currentAccount: null,\n  connectedAccounts: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'accounts';\n\nexport const loadActiveAccount = createAsyncThunk<Account | null, void, AppThunkAPI>(\n  `${namespace}/loadActiveAccount`,\n  async (_, { extra: app }) => {\n    const account = await app.services.accountsService.getActiveAccount();\n\n    return account || null;\n  }\n);\n\nexport const connectAccount = createAsyncThunk<Account | null, Network, AppThunkAPI>(\n  `${namespace}/connect`,\n  (network: Network, { extra: app }) => app.services.accountsService.connect(network)\n);\n\nexport const disconnectAccount = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/disconnect`,\n  (_, { extra: app }) => app.services.accountsService.disconnect()\n);\n\nexport const accountsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n  },\n  extraReducers: builder => {\n    builder.addCase(loadActiveAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n      state.initialized = true;\n    });\n\n    builder.addCase(connectAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n    });\n\n    builder.addCase(disconnectAccount.fulfilled, state => {\n      state.connectedAccounts = state.connectedAccounts.filter(a =>\n        a.address !== state.currentAccount?.address || a.network.id !== state.currentAccount?.network.id\n      );\n\n      const nextAccount = state.connectedAccounts[0];\n      state.currentAccount = nextAccount ? { address: nextAccount.address, network: nextAccount.network } : null;\n    });\n  }\n});\n","import { common } from './common';\nimport {\n  overview, createService, connect, header, about, operations,\n  services, settings, acceptPayments, analytics\n} from './views';\n\nexport const enUS = {\n  id: 'en-US',\n  resources: {\n    common,\n    views: {\n      header,\n      overview,\n      analytics,\n      createService,\n      connect,\n      about,\n      operations,\n      services,\n      settings,\n      acceptPayments,\n    },\n  }\n} as const;\n","export const common = {\n  comingSoon: 'Coming soon',\n  copy: 'Copy',\n  copyLink: 'Copy Link',\n  open: 'Open',\n  new: 'New',\n  cancel: 'Cancel',\n  save: 'Save',\n  yes: 'Yes',\n  no: 'No',\n  period: {\n    allTime: 'All time',\n    lastWeek: 'Last week',\n    lastMonth: 'Last month',\n    lastYear: 'Last year'\n  }\n};\n","export const header = {\n  accountActions: {\n    copyAddress: {\n      title: 'Copy address'\n    },\n    viewOn: 'View on',\n    connectAnotherAccount: {\n      title: 'Connect another account'\n    },\n    disconnect: {\n      title: 'Disconnect'\n    }\n  }\n};\n","export const overview = {\n  title: 'Overview',\n  balances: {\n    title: 'Balances'\n  },\n  incoming: {\n    title: 'Incoming'\n  },\n  outgoing: {\n    title: 'Outgoing'\n  },\n  operationCount: {\n    title: 'Operation count'\n  },\n  volume: {\n    title: 'Volume'\n  }\n};\n","export const analytics = {\n  title: 'Analytics',\n  revenue: 'Revenue',\n  profit: 'Profit',\n  volume: 'Volume',\n  all: 'All',\n  incoming: 'Incoming',\n  outgoing: 'Outgoing',\n  maximumPayment: 'Maximum Payment',\n  maximumDonation: 'Maximum Donation',\n  newCustomers: 'New Customers',\n  newDonators: 'New Donators',\n  refund: 'Refund',\n  success: 'Success',\n  failed: 'Failed',\n  operationsCountByTokens: 'Operations Count by Tokens',\n  operationsCountByTypes: 'Operations Count by Types',\n  currency: {\n    usd: 'USD'\n  },\n  view: {\n    services: 'Services',\n    donations: 'Donations'\n  }\n};\n","export const createService = {\n  title: 'Create Service'\n};\n","import { config } from '../../../config';\n\nexport const connect = {\n  actions: {\n    connect: {\n      title: 'Connect',\n      connectTo: 'Connect to',\n      description: `In order to use the ${config.app.title} service you have to connect a Tezos account`\n    }\n  }\n};\n","export const about = {\n  title: 'About',\n  detailedTitle: 'Decentralized Payment Solution built on Tezos blockchain',\n  build: 'build',\n  poweredBy: 'Powered by',\n  tzKt: 'TzKT',\n  api: 'API'\n};\n","export const operations = {\n  title: 'Operations',\n  operationList: {\n    paymentId: 'Payment Id:',\n    donationData: 'Donation Data:',\n    income: 'Income',\n    expense: 'Expense',\n    cancelled: 'Cancelled',\n    pending: 'Pending',\n    noOperationsPerformedYet: 'No operations performed yet'\n  }\n};\n","export const services = {\n  title: 'Services',\n  status: {\n    active: 'Active',\n    paused: 'Paused',\n    deleted: 'Deleted',\n    updating: 'Updating'\n  },\n  createNewService: 'Create New Service',\n  acceptPayments: 'Accept Payments',\n  acceptPaymentsDescription: 'Generate a payment link using our constructor to accept payments on your service',\n  youDoNotHaveAnyServicesYet: 'You don\\'t have any services yet',\n  createYourFirstService: 'Create your first service to accept payments or connect another Tezos account',\n  operations: {\n    paymentsEnabled: 'Payments Enabled',\n    donationsEnabled: 'Donations Enabled',\n  },\n  allowedCurrencies: 'Allowed Currencies',\n  service: 'Service',\n  links: 'Links',\n  dangerZone: {\n    title: 'Danger Zone',\n    pauseService: 'Pause Service',\n    pauseServiceConfirmation: 'Are you sure you want to pause the service',\n    pauseServiceDescription: 'Pause accepting payments and donations',\n    unPauseService: 'Unpause Service',\n    unPauseServiceConfirmation: 'Are you sure you want to unpause the service',\n    unPauseServiceDescription: 'Accepting payments and donations are paused',\n    deleteService: 'Delete Service',\n    deleteServiceConfirmation: 'Are you sure you want to delete the service',\n    deleteServiceDescription: 'Delete this service. After deleting this service can’t accept payments and donations. You can restore the deleted service',\n    unDeleteService: 'Undelete Service',\n    unDeleteServiceConfirmation: 'Are you sure you want to undelete the service',\n    unDeleteServiceDescription: 'Service is marked as deleted',\n  },\n  devZone: {\n    title: 'API Keys',\n    addKey: 'Add Key',\n    saveKeys: 'Save Keys',\n    generateKeys: 'Generate Keys',\n    name: 'Name',\n    algorithm: 'Algorithm',\n    publicKey: 'Public Key',\n    secretKey: 'Secret Key',\n    saveSecretKeyWarning: 'Write down the secret key, we will never show it again',\n    saveSecretKeyConfirm: 'Have you written down the secret key?',\n    noApiKeysAddedYet: 'No API keys added yet',\n    deleteKeyConfirmation: 'Are you sure you want to delete the API key',\n  },\n  editing: {\n    editService: 'Edit Service',\n    updateService: 'Update Service',\n    createService: 'Create Service',\n    addCurrency: 'Add Currency',\n    addLink: 'Add Link',\n    serviceName: 'Service Name',\n    description: 'Description',\n    accept: 'Accept',\n    acceptPayments: 'Accept Payments',\n    acceptDonations: 'Accept Donations',\n  }\n};\n","export const settings = {\n  title: 'Settings',\n};\n","export const acceptPayments = {\n  title: 'Accept Payments',\n  type: 'Type',\n  amount: 'Amount',\n  paymentData: 'Payment Data',\n  paymentId: 'Payment ID',\n  paymentIdHelpText: 'Payment ID/invoice number/any unique identifier in your system',\n  donationData: 'Donation Data',\n  donationDescription: 'Short description on the page',\n  generateAndSignPaymentLink: 'Generate and Sign Payment Link',\n  donationDescriptionHelpText: 'This message will be shown to your donators when they will donate',\n  directLinkPaymentHelpText: 'Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc',\n  directLinkDonationHelpText: 'Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link',\n  errors: {\n    fillRequiredData: 'Fill required data to generate corresponding content'\n  }\n};\n","import { enUS } from '../../localization/en-US';\nimport { Language } from '../../models/system';\n\nexport const useCurrentLanguage = (): Language => {\n    // TODO: implement language change\n    return enUS;\n};\n\nexport const useCurrentLanguageResources = () => {\n    const currentLanguage = useCurrentLanguage();\n\n    return currentLanguage.resources;\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\n\nimport type { AppDispatch, AppState } from '../../store';\n\nexport const useAppDispatch: () => AppDispatch = useDispatch;\nexport const useAppSelector: TypedUseSelectorHook<AppState> = useSelector;\n\n","import { useContext } from 'react';\n\nimport { ReactAppContext } from '../../app';\n\nexport const useAppContext = () => useContext(ReactAppContext);\n","export default {\n  defaultNetworkName: 'mainnet',\n  paymentAppBaseUrl: 'https://payment.tezospayments.com'\n} as const;\n","import { guards } from '@tezospayments/common';\n\nconst getErrorMessageByValidationErrors = (validationErrors: readonly string[], brief = '') => validationErrors\n  .reduce((result, error, index) => `${result}\\n\\t${index + 1}. ${error};`, brief);\n\nexport abstract class TezosPaymentsError extends Error {\n  readonly name: string;\n\n  constructor(message?: string) {\n    super(message);\n\n    this.name = this.constructor.name;\n  }\n}\n\nexport class InvalidTezosPaymentsOptionsError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidTezosPaymentsOptionsError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'options are invalid, see details below:');\n  }\n}\n\nexport class InvalidPaymentCreateParametersError extends TezosPaymentsError {\n}\n\nexport class InvalidPaymentError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidPaymentError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'payment is invalid, see details below:');\n  }\n}\n\nexport class UnsupportedPaymentUrlTypeError extends TezosPaymentsError {\n}\n\nexport class PaymentUrlError extends TezosPaymentsError {\n}\n\nexport class DonationUrlError extends TezosPaymentsError {\n}\n","import { CustomNetwork, Donation, Network, Payment, PaymentUrlType } from '@tezospayments/common';\n\nexport abstract class PaymentUrlFactory {\n  constructor(readonly urlType: PaymentUrlType) {\n  }\n\n  abstract createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string | Promise<string>;\n}\n","import {\n  native, PaymentUrlType,\n  PaymentSerializer, CustomNetwork, Network, Payment, Donation, DonationSerializer, PaymentType, getEncodedPaymentUrlType\n} from '@tezospayments/common';\n\nimport constants from '../constants';\nimport { DonationUrlError, PaymentUrlError } from '../errors';\nimport { PaymentUrlFactory } from './paymentUrlFactory';\n\nexport class Base64PaymentUrlFactory extends PaymentUrlFactory {\n  static readonly baseUrl = constants.paymentAppBaseUrl;\n\n  protected readonly paymentSerializer: PaymentSerializer = new PaymentSerializer();\n  protected readonly donationSerializer: DonationSerializer = new DonationSerializer();\n\n  constructor(readonly baseUrl: string = Base64PaymentUrlFactory.baseUrl) {\n    super(PaymentUrlType.Base64);\n  }\n\n  createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string {\n    return paymentOrDonation.type === PaymentType.Payment\n      ? this.createPaymentUrlInternal(paymentOrDonation, network)\n      : this.createDonationUrlInternal(paymentOrDonation, network);\n  }\n\n  protected createPaymentUrlInternal(payment: Payment, network: Network | CustomNetwork): string {\n    const serializedPaymentBase64 = this.paymentSerializer.serialize(payment);\n    if (!serializedPaymentBase64)\n      throw new PaymentUrlError('It\\'s impossible to serialize the payment');\n\n    try {\n      const url = new native.URL(this.baseUrl);\n\n      return this.createUrl(url, serializedPaymentBase64, network);\n    } catch (error: unknown) {\n      throw new PaymentUrlError('It\\'s impossible to create an URL for the payment');\n    }\n  }\n\n  protected createDonationUrlInternal(donation: Donation, network: Network | CustomNetwork): string {\n    const serializedDonationBase64 = this.donationSerializer.serialize(donation);\n    if (!serializedDonationBase64 && serializedDonationBase64 !== '')\n      throw new DonationUrlError('It\\'s impossible to serialize the donation');\n\n    try {\n      const url = new native.URL(`${donation.targetAddress}/donation`, this.baseUrl);\n\n      return this.createUrl(url, serializedDonationBase64, network);\n    } catch (error: unknown) {\n      throw new DonationUrlError('It\\'s impossible to create an URL for the donation');\n    }\n  }\n\n  protected createUrl(baseUrl: native.URL, serializedPaymentOrDonationBase64: string, network: Network | CustomNetwork) {\n    if (serializedPaymentOrDonationBase64 !== '')\n      baseUrl.hash = getEncodedPaymentUrlType(this.urlType) + serializedPaymentOrDonationBase64;\n    if (network.name !== constants.defaultNetworkName)\n      baseUrl.searchParams.append('network', network.name);\n\n    return baseUrl.href;\n  }\n}\n","export type Payment = import('@tezospayments/common').Payment & {\n  readonly url: string;\n};\n\nexport enum SigningType {\n  ApiSecretKey = 0,\n  Wallet = 1,\n  Custom = 2,\n}\n","import { UnsignedPayment, PaymentSignature } from '@tezospayments/common';\n\nimport type { SigningType } from '../models';\n\nexport abstract class TezosPaymentsSigner {\n  constructor(readonly signingType: SigningType) {\n  }\n\n  abstract sign(payment: UnsignedPayment): PaymentSignature | Promise<PaymentSignature>;\n}\n","import { InMemorySigner } from '@taquito/signer';\n\nimport { PaymentSignPayloadEncoder, PaymentSignature, UnsignedPayment } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class ApiSecretKeySigner extends TezosPaymentsSigner {\n  protected readonly paymentSignPayloadEncoder: PaymentSignPayloadEncoder = new PaymentSignPayloadEncoder();\n  protected readonly inMemorySigner: InMemorySigner;\n\n  constructor(readonly apiSecretKey: string) {\n    super(SigningType.ApiSecretKey);\n\n    this.inMemorySigner = new InMemorySigner(this.apiSecretKey);\n  }\n\n  async sign(payment: UnsignedPayment): Promise<PaymentSignature> {\n    const signPayload = this.paymentSignPayloadEncoder.encode(payment);\n    const contractSigningPromise = this.inMemorySigner.sign(signPayload.contractSignPayload);\n    const signingPromises = signPayload.clientSignPayload\n      ? [contractSigningPromise, this.inMemorySigner.sign(signPayload.clientSignPayload)] as const\n      : [contractSigningPromise] as const;\n\n    const signatures = await Promise.all(signingPromises);\n\n    return {\n      signingPublicKey: await this.inMemorySigner.publicKey(),\n      contract: signatures[0].prefixSig,\n      client: signatures[1]?.prefixSig,\n    };\n  }\n}\n","import { UnsignedPayment, PaymentSignature, PaymentSignPayloadEncoder } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class WalletSigner extends TezosPaymentsSigner {\n  protected readonly paymentSignPayloadEncoder: PaymentSignPayloadEncoder = new PaymentSignPayloadEncoder();\n\n  constructor(readonly signingPublicKey: string, readonly walletSignCallback: (dataBytes: string) => Promise<string>) {\n    super(SigningType.Wallet);\n  }\n\n  async sign(payment: UnsignedPayment): Promise<PaymentSignature> {\n    const signPayload = this.paymentSignPayloadEncoder.encode(payment);\n    const walletContractSignPayload = signPayload.contractSignPayload.substring(2);\n\n    const contractSigningPromise = this.walletSignCallback(walletContractSignPayload);\n    const signingPromises = signPayload.clientSignPayload\n      ? [contractSigningPromise, this.walletSignCallback(signPayload.clientSignPayload)] as const\n      : [contractSigningPromise] as const;\n\n    const signatures = await Promise.all(signingPromises);\n\n    return {\n      signingPublicKey: this.signingPublicKey,\n      contract: signatures[0],\n      client: signatures[1],\n    };\n  }\n}\n","import type { UnsignedPayment, PaymentSignature } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class CustomSigner extends TezosPaymentsSigner {\n  constructor(readonly customSigning: (payment: UnsignedPayment) => PaymentSignature | Promise<PaymentSignature>) {\n    super(SigningType.Custom);\n  }\n\n  sign(payment: UnsignedPayment): PaymentSignature | Promise<PaymentSignature> {\n    return this.customSigning(payment);\n  }\n}\n","import { CustomNetwork, DeepReadonly, FailedValidationResults, Network, networkIdRegExp, networkNameRegExp, PaymentUrlType, tezosInfo } from '@tezospayments/common';\n\nimport type { TezosPaymentsApiSigningOptions, TezosPaymentsCustomSigningOptions, TezosPaymentsOptions, TezosPaymentsWalletSigningOptions } from '../options';\n\nexport class TezosPaymentsOptionsValidator {\n  static readonly errors = {\n    // serviceContractAddress\n    invalidServiceContractAddressType: 'Type of the serviceContractAddress option is invalid',\n    serviceContractAddressHasInvalidLength: 'The serviceContractAddress option has an invalid address',\n    serviceContractAddressIsNotContractAddress: 'The serviceContractAddress option isn\\'t a contract address',\n    // signing\n    invalidSigningOption: 'The signing option is invalid',\n    // signing.apiSecretKey\n    invalidApiSecretKeyType: 'The API secret key has an invalid type, it should be a string',\n    emptyApiSecretKey: 'The API secret key is empty',\n    // signing.wallet\n    invalidWalletSigningOption: 'The \"signing.wallet\" option is invalid',\n    invalidWalletSigningPublicKey: 'The wallet signing public key has an invalid type, it should be a string',\n    emptyWalletSigningPublicKey: 'The wallet signing public key is empty',\n    invalidWalletSignFunctionType: 'The wallet sign function has an invalid type, it should be a function',\n    // signing.custom\n    invalidCustomSigningOption: 'The \"signing.custom\" option has an invalid type, it should be a function',\n    // network\n    emptyNetworkName: 'The network name is empty',\n    invalidNetwork: 'The network is invalid',\n    invalidNetworkName: 'The network name is invalid',\n    invalidNetworkId: 'The network id is invalid',\n    // defaultPaymentParameters\n    invalidDefaultPaymentParameters: 'The default payment parameters are invalid',\n    // defaultPaymentParameters.urlType\n    invalidUrlType: 'The url type is invalid'\n  } as const;\n\n  validateOptions(options: DeepReadonly<TezosPaymentsOptions>): FailedValidationResults {\n    return [\n      this.validateServiceContractAddress(options.serviceContractAddress),\n      this.validateNetwork(options.network),\n      this.validateSigningOptions(options.signing),\n      this.validateDefaultPaymentParameters(options.defaultPaymentParameters)\n    ].reduce(\n      (result, currentErrors) => currentErrors ? (result || []).concat(currentErrors) : result,\n      undefined\n    );\n  }\n\n  validateServiceContractAddress(serviceContractAddress: string): FailedValidationResults {\n    if (!serviceContractAddress || typeof serviceContractAddress !== 'string')\n      return [TezosPaymentsOptionsValidator.errors.invalidServiceContractAddressType];\n\n    if (serviceContractAddress.length !== tezosInfo.addressLength)\n      return [TezosPaymentsOptionsValidator.errors.serviceContractAddressHasInvalidLength];\n\n    if (!tezosInfo.contractAddressPrefixes.some(prefix => serviceContractAddress.startsWith(prefix)))\n      return [TezosPaymentsOptionsValidator.errors.serviceContractAddressIsNotContractAddress];\n  }\n\n  validateNetwork(network: Network | CustomNetwork | undefined | null): FailedValidationResults {\n    if (network === undefined || network === null)\n      return;\n\n    if (typeof network !== 'object')\n      return [TezosPaymentsOptionsValidator.errors.invalidNetwork];\n\n    if (network.name === undefined || network.name === '')\n      return [TezosPaymentsOptionsValidator.errors.emptyNetworkName];\n\n    if (typeof network.name !== 'string' || !networkNameRegExp.test(network.name))\n      return [TezosPaymentsOptionsValidator.errors.invalidNetworkName];\n\n    if (network.id && (typeof network.id !== 'string' || !networkIdRegExp.test(network.id)))\n      return [TezosPaymentsOptionsValidator.errors.invalidNetworkId];\n  }\n\n  validateSigningOptions(signingOptions: TezosPaymentsOptions['signing']): FailedValidationResults {\n    if (typeof signingOptions !== 'object')\n      return [TezosPaymentsOptionsValidator.errors.invalidSigningOption];\n\n    if (!('apiSecretKey' in signingOptions) && !('wallet' in signingOptions) && !('custom' in signingOptions))\n      return [TezosPaymentsOptionsValidator.errors.invalidSigningOption];\n\n    if ('apiSecretKey' in signingOptions)\n      return this.validateApiSecretKeySigningOptions(signingOptions);\n\n    if ('wallet' in signingOptions)\n      return this.validateWalletSigningOptions(signingOptions);\n\n    if ('custom' in signingOptions)\n      return this.validateCustomSigningOptions(signingOptions);\n  }\n\n  validateApiSecretKeySigningOptions(signingOptions: TezosPaymentsApiSigningOptions): FailedValidationResults {\n    if (typeof signingOptions.apiSecretKey !== 'string')\n      return [TezosPaymentsOptionsValidator.errors.invalidApiSecretKeyType];\n    if (!signingOptions.apiSecretKey)\n      return [TezosPaymentsOptionsValidator.errors.emptyApiSecretKey];\n  }\n\n  validateWalletSigningOptions(signingOptions: TezosPaymentsWalletSigningOptions): FailedValidationResults {\n    if (typeof signingOptions.wallet !== 'object')\n      return [TezosPaymentsOptionsValidator.errors.invalidWalletSigningOption];\n\n    if (typeof signingOptions.wallet.signingPublicKey !== 'string')\n      return [TezosPaymentsOptionsValidator.errors.invalidWalletSigningPublicKey];\n    if (!signingOptions.wallet.signingPublicKey)\n      return [TezosPaymentsOptionsValidator.errors.emptyWalletSigningPublicKey];\n\n    if (typeof signingOptions.wallet.sign !== 'function')\n      return [TezosPaymentsOptionsValidator.errors.invalidWalletSignFunctionType];\n  }\n\n  validateCustomSigningOptions(signingOptions: TezosPaymentsCustomSigningOptions): FailedValidationResults {\n    if (typeof signingOptions.custom !== 'function')\n      return [TezosPaymentsOptionsValidator.errors.invalidCustomSigningOption];\n  }\n\n  validateDefaultPaymentParameters(defaultPaymentParameters: TezosPaymentsOptions['defaultPaymentParameters']): FailedValidationResults {\n    if (defaultPaymentParameters === undefined)\n      return;\n\n    if (typeof defaultPaymentParameters !== 'object')\n      return [TezosPaymentsOptionsValidator.errors.invalidDefaultPaymentParameters];\n\n    if ('urlType' in defaultPaymentParameters && defaultPaymentParameters.urlType !== PaymentUrlType.Base64)\n      return [TezosPaymentsOptionsValidator.errors.invalidUrlType];\n  }\n}\n","import BigNumber from 'bignumber.js';\nimport { nanoid } from 'nanoid';\n\nimport {\n  native, networks, PaymentUrlType, DeepReadonly, FailedValidationResults,\n  UnsignedPayment as CommonUnsignedPaymentModel, Payment as CommonPaymentModel,\n  PaymentType, PaymentValidator, Mutable, Network, CustomNetwork\n} from '@tezospayments/common';\n\nimport { InvalidPaymentCreateParametersError, InvalidPaymentError, InvalidTezosPaymentsOptionsError, UnsupportedPaymentUrlTypeError } from './errors';\nimport { Payment } from './models';\nimport type { DefaultPaymentParameters, PaymentCreateParameters, TezosPaymentsOptions } from './options';\nimport { Base64PaymentUrlFactory, PaymentUrlFactory } from './paymentUrlFactories';\nimport { ApiSecretKeySigner, CustomSigner, TezosPaymentsSigner, WalletSigner } from './signers';\nimport { TezosPaymentsOptionsValidator } from './validation';\n\nexport class TezosPayments {\n  static readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters> = {\n    urlType: PaymentUrlType.Base64\n  };\n\n  protected readonly optionsValidator = new TezosPaymentsOptionsValidator();\n  protected readonly paymentValidator = new PaymentValidator();\n  protected readonly serviceContractAddress: string;\n  protected readonly signer: TezosPaymentsSigner;\n  protected readonly network: Network | CustomNetwork;\n  protected readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters>;\n\n  private paymentUrlFactories: Map<PaymentUrlType, PaymentUrlFactory> = new Map();\n\n  constructor(options: DeepReadonly<TezosPaymentsOptions>) {\n    const errors = this.optionsValidator.validateOptions(options);\n    if (errors)\n      throw new InvalidTezosPaymentsOptionsError(errors);\n\n    this.serviceContractAddress = options.serviceContractAddress;\n    this.network = options.network || networks.mainnet;\n    this.defaultPaymentParameters = options.defaultPaymentParameters\n      ? {\n        urlType: options.defaultPaymentParameters.urlType || TezosPayments.defaultPaymentParameters.urlType\n      }\n      : TezosPayments.defaultPaymentParameters;\n\n    this.signer = this.createSigner(options.signing);\n    this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType);\n  }\n\n  async createPayment(createParameters: PaymentCreateParameters): Promise<Payment> {\n    if (!createParameters)\n      throw new InvalidPaymentCreateParametersError(createParameters);\n\n    let errors: FailedValidationResults;\n    if (createParameters.urlType) {\n      errors = this.optionsValidator.validateDefaultPaymentParameters(createParameters);\n      if (errors)\n        throw new InvalidPaymentError(errors);\n    }\n\n    const unsignedPayment = this.createPaymentByCreateParameters(createParameters);\n    errors = this.paymentValidator.validate(unsignedPayment, true);\n    if (errors)\n      throw new InvalidPaymentError(errors);\n\n    const signedPayment = await this.getSignedPayment(unsignedPayment);\n    errors = this.paymentValidator.validate(signedPayment, true);\n    if (errors)\n      throw new InvalidPaymentError(errors);\n\n    const paymentUrl = await this.getPaymentUrl(signedPayment, createParameters.urlType);\n    const payment = this.applyPaymentUrl(signedPayment, paymentUrl);\n\n    return payment;\n  }\n\n  protected getPaymentUrl(payment: CommonPaymentModel, urlType = this.defaultPaymentParameters.urlType): string | Promise<string> {\n    return this.getPaymentUrlFactory(urlType).createPaymentUrl(payment, this.network);\n  }\n\n  protected applyPaymentUrl(payment: CommonPaymentModel, url: string): Payment {\n    (payment as Mutable<Payment>).url = url;\n\n    return (payment as Payment);\n  }\n\n  protected getPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    let paymentUrlFactory = this.paymentUrlFactories.get(paymentUrlType);\n    if (!paymentUrlFactory) {\n      paymentUrlFactory = this.createPaymentUrlFactory(paymentUrlType);\n      this.paymentUrlFactories.set(paymentUrlType, paymentUrlFactory);\n    }\n\n    return paymentUrlFactory;\n  }\n\n  protected async getSignedPayment(unsignedPayment: CommonUnsignedPaymentModel): Promise<CommonPaymentModel> {\n    (unsignedPayment as Mutable<CommonPaymentModel>).signature = await this.signer.sign(unsignedPayment);\n\n    return unsignedPayment as CommonPaymentModel;\n  }\n\n  protected createSigner(signingOptions: TezosPaymentsOptions['signing']): TezosPaymentsSigner {\n    if ('apiSecretKey' in signingOptions)\n      return new ApiSecretKeySigner(signingOptions.apiSecretKey);\n    if ('wallet' in signingOptions)\n      return new WalletSigner(signingOptions.wallet.signingPublicKey, signingOptions.wallet.sign);\n\n    return new CustomSigner(signingOptions.custom);\n  }\n\n  protected createPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    switch (paymentUrlType) {\n      case PaymentUrlType.Base64:\n        return new Base64PaymentUrlFactory();\n      default:\n        throw new UnsupportedPaymentUrlTypeError(`This payment url type is not supported: ${paymentUrlType}`);\n    }\n  }\n\n  protected createPaymentByCreateParameters(createParameters: PaymentCreateParameters): CommonUnsignedPaymentModel {\n    // TODO: check decimals\n    // TODO: floor amount to decimals count: new BigNumber(amount).toFixed(asset.decimals)\n    const payment: Mutable<CommonUnsignedPaymentModel> = {\n      type: PaymentType.Payment,\n      id: createParameters.id || nanoid(),\n      targetAddress: this.serviceContractAddress,\n      amount: new BigNumber(createParameters.amount),\n      data: createParameters.data,\n      created: createParameters.created ? new Date(createParameters.created) : new Date(),\n    };\n\n    if (createParameters.asset)\n      payment.asset = createParameters.asset;\n    if (createParameters.expired)\n      payment.expired = new Date(createParameters.expired);\n    if (createParameters.successUrl)\n      payment.successUrl = new native.URL(createParameters.successUrl);\n    if (createParameters.cancelUrl)\n      payment.cancelUrl = new native.URL(createParameters.cancelUrl);\n\n    return payment;\n  }\n}\n","import constants from './constants';\nimport * as errors from './errors';\nimport * as paymentUrlFactories from './paymentUrlFactories';\nimport * as signers from './signers';\n\nexport { PaymentUrlType } from '@tezospayments/common';\nexport type { PaymentAsset } from '@tezospayments/common';\n\nexport type { Payment } from './models';\nexport { SigningType } from './models';\n\nexport type { TezosPaymentsOptions, PaymentCreateParameters } from './options';\nexport { TezosPayments } from './tezosPayments';\n\nexport const internal = {\n  constants,\n  errors,\n  paymentUrlFactories,\n  signers\n};\n","import { SigningType } from '@airgap/beacon-sdk';\nimport { BeaconWallet } from '@taquito/beacon-wallet';\nimport { TezosPayments } from 'tezospayments';\n\nimport { Network } from '@tezospayments/common';\n\nimport { selectCurrentAccount } from '../../store/accounts/selectors';\nimport { useAppSelector } from './reduxHooks';\nimport { useAppContext } from './useAppContext';\n\nconst createTezosPayments = (serviceContractAddress: string, signingPublicKey: string, network: Network, tezosWallet: BeaconWallet) => {\n  return new TezosPayments({\n    serviceContractAddress,\n    signing: {\n      wallet: {\n        signingPublicKey,\n        sign: payload => tezosWallet.client\n          .requestSignPayload({ signingType: SigningType.MICHELINE, payload })\n          .then(r => r.signature)\n      }\n    },\n    network\n  });\n};\n\nconst tezosPaymentsInstancesMap = new Map<string, TezosPayments>();\n\nexport const useTezosPayments = (serviceContractAddress: string | undefined | null) => {\n  const appContext = useAppContext();\n  const currentNetwork = useAppSelector(selectCurrentAccount)?.network;\n  const signingPublicKey = useAppSelector(selectCurrentAccount)?.publicKey;\n\n  if (!serviceContractAddress || !signingPublicKey || !currentNetwork)\n    return null;\n\n  let tezosPaymentsInstance = tezosPaymentsInstancesMap.get(serviceContractAddress);\n  if (!tezosPaymentsInstance) {\n    tezosPaymentsInstance = createTezosPayments(serviceContractAddress, signingPublicKey, currentNetwork, appContext.tezosWallet);\n    tezosPaymentsInstancesMap.set(serviceContractAddress, tezosPaymentsInstance);\n  }\n\n  return tezosPaymentsInstance;\n};\n","import { useState, useEffect } from 'react';\n\nimport { Ed25519KeyGenerator, EncodedKeyPair, KeyType, EllipticCurveKeyGenerator } from '@tezospayments/common';\n\ninterface KeyPairGenerators {\n  readonly ed25519: Ed25519KeyGenerator;\n  readonly secp256k1: EllipticCurveKeyGenerator;\n  readonly p256: EllipticCurveKeyGenerator;\n}\n\ninterface GenerateKeyPair {\n  (keyType: KeyType): EncodedKeyPair;\n}\n\ntype HookState = false | GenerateKeyPair;\n\nconst keyPairGenerators: KeyPairGenerators = {\n  ed25519: new Ed25519KeyGenerator(),\n  secp256k1: new EllipticCurveKeyGenerator('secp256k1'),\n  p256: new EllipticCurveKeyGenerator('p256')\n};\n\nconst loadKeyPairGenerators = () => keyPairGenerators.ed25519.initialize();\n\nconst areGeneratorsInitialized = () => keyPairGenerators.ed25519.isInitialized;\n\nconst generate: GenerateKeyPair = keyType => {\n  switch (keyType) {\n    case KeyType.Ed25519:\n      return keyPairGenerators.ed25519.generate().encoded;\n    case KeyType.Secp256k1:\n      return keyPairGenerators.secp256k1.generate().encoded;\n    case KeyType.P256:\n      return keyPairGenerators.p256.generate().encoded;\n\n    default:\n      throw new Error('Unknown algorithm type');\n  }\n};\n\nexport const useKeyPairGenerator = (): HookState => {\n  const [isLoaded, setIsLoaded] = useState(areGeneratorsInitialized());\n\n  useEffect(() => {\n    let isCanceled = false;\n    if (!isLoaded)\n      loadKeyPairGenerators().then(() => !isCanceled && setIsLoaded(true));\n\n    return () => {\n      isCanceled = true;\n    };\n  }, [isLoaded]);\n\n  return isLoaded ? generate : false;\n};\n","import { useLocation, Navigate } from 'react-router-dom';\n\nimport { config } from '../../config';\nimport { useAppSelector } from '../hooks';\n\nconst defaultConnectPath = config.routers.connect;\n\ninterface RequireConnectionProps {\n  children: JSX.Element;\n  connectPath?: string;\n  isConnected: boolean;\n}\n\nexport const RequireConnection = ({ children, isConnected, connectPath = defaultConnectPath }: RequireConnectionProps) => {\n  const location = useLocation();\n\n  return isConnected\n    ? children\n    : <Navigate to={connectPath} state={{ from: location }} />;\n};\n\ntype RequireConnectionContainerProps = Omit<RequireConnectionProps, 'isConnected'>;\n\nexport const RequireConnectionContainer = (props: RequireConnectionContainerProps) => {\n  const currentAccount = useAppSelector(state => state.accountsState.currentAccount);\n\n  return <RequireConnection {...props} isConnected={!!currentAccount} />;\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, Tooltip } from 'antd';\nimport BigNumber from 'bignumber.js';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport './TokenListItem.scss';\n\ninterface TokenListItemProps {\n  name: string;\n  ticker: string;\n  contractAddress: string;\n  iconSrc?: string;\n  value?: BigNumber;\n  decimals?: number;\n  highlightPlus?: boolean;\n  className?: string;\n  handleDelete?: (contractAddress: string) => void;\n}\n\nconst getStringAmounts = (value: BigNumber): [string, string] => {\n  const displayedDecimals = 6;\n  const shortAmount = value.toFormat(displayedDecimals, { groupSeparator: '', decimalSeparator: '.' });\n  const amount = value.toString();\n\n  return [amount.substring(0, shortAmount.length), amount];\n};\n\nexport const TokenListItem = (props: TokenListItemProps) => {\n  const isPositive = props.value && !props.value.isZero() && props.value.isPositive();\n  const isHighlightedPositive = props.highlightPlus && isPositive;\n  const isNegative = props.value && !props.value.isZero() && props.value.isNegative();\n\n  const valueClassNames = combineClassNames('token-list-item__value',\n    { 'token-list-item__value_positive': isHighlightedPositive },\n    { 'token-list-item__value_negative': isNegative }\n  );\n\n  const sign = isNegative\n    ? '-'\n    : isHighlightedPositive\n      ? '+'\n      : '';\n\n  const value = props.value && props.value.abs();\n  const [shortAmount, amount] = value !== undefined && value !== null ? getStringAmounts(value) : [null, null];\n  const allDecimalsShown = shortAmount !== null && amount !== null && (shortAmount === amount || amount.substr(shortAmount.length).split('').every(s => s === '0'));\n  const amountSpan = shortAmount && <span className={valueClassNames}>\n    {`${sign}${shortAmount}${allDecimalsShown ? '' : '...'}`}\n  </span>;\n\n  return <li className={combineClassNames('token-list-item', props.className)}>\n    <img className=\"token-list-item__icon\" src={props.iconSrc} alt={props.name} />\n    <div>\n      <div className=\"token-list-item__name-container\">\n        <span className=\"token-list-item__ticker\">{props.ticker}</span>\n        <span className=\"token-list-item__name\">{props.name}</span>\n        {props.handleDelete && <Button\n          className=\"service-link-editor__delete-button\"\n          type=\"text\" danger icon={<DeleteOutlined />}\n          onClick={() => props.handleDelete?.(props.contractAddress)} />}\n      </div>\n      {!allDecimalsShown && value !== undefined && value !== null\n        ? <Tooltip title={amount}>\n          {amountSpan}\n        </Tooltip>\n        : amountSpan}\n    </div>\n  </li>;\n};\n","import { TokenListItem } from './TokenListItem';\n\nimport './TokenList.scss';\n\ninterface TokenListProps {\n  children: React.ReactNode;\n}\n\nexport const TokenList = (props: TokenListProps) => {\n  return <ul className=\"token-list\">\n    {props.children}\n  </ul>;\n};\n\nTokenList.Item = TokenListItem;\n","import { CopyOutlined } from '@ant-design/icons';\nimport React, { useCallback } from 'react';\n\nimport { useAppContext, useCurrentLanguageResources } from '../../hooks';\n\nimport './ExplorerLink.scss';\n\ninterface ExplorerLinkProps {\n  hash: string;\n  className?: string;\n  showCopyButton?: boolean;\n  children: React.ReactNode;\n}\n\nexport const ExplorerLink = (props: ExplorerLinkProps) => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(props.hash);\n  }, [props.hash]);\n\n  return <div className=\"explorer-link__container\">\n    <a href={appContext.tezosExplorer.getEntityUrl(props.hash)} target=\"_blank\" rel=\"noreferrer\" className={props.className}>\n      {props.children}\n    </a>\n    {props.showCopyButton && <CopyOutlined className=\"explorer-link__copy-icon\" title={commonLangResources.copy} onClick={handleCopyAddressClick} />}\n  </div>;\n};\n\nexport const ExplorerLinkPure = React.memo(ExplorerLink);\n","type ExternalLinkProps = Omit<JSX.IntrinsicElements['a'], 'target' | 'rel'>;\n\nexport const ExternalLink = (props: ExternalLinkProps) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n  {props.children}\n</a>;\n","export enum Period {\n  All = 0,\n  LastYear = 1,\n  LastMonth = 2,\n  LastWeek = 3\n}\n","export enum AnalyticsView {\n  Services,\n  Donations\n}\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\n\nimport './NoServicesCreated.scss';\n\nexport const NoServicesCreated = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const navigate = useNavigate();\n\n  const handleCreateServiceClick = useCallback(() => {\n    navigate(config.routers.createService);\n  }, [navigate]);\n\n  return <div className=\"no-services-created\">\n    <div>\n      <p>{servicesLangResources.youDoNotHaveAnyServicesYet}</p>\n      <p>{servicesLangResources.createYourFirstService}</p>\n      <Button type=\"primary\" onClick={handleCreateServiceClick}>{servicesLangResources.editing.createService}</Button>\n    </div>\n  </div>;\n};\n\nexport const NoServicesCreatedPure = React.memo(NoServicesCreated);\n","import BigNumber from 'bignumber.js';\nimport { createCachedSelector } from 're-reselect';\n\nimport { OperationDirection, OperationStatus, ServiceOperation, tezosMeta, unknownAssetMeta } from '@tezospayments/common';\n\nimport { ChartOperationType, Period } from '../../models/system';\nimport { AppState } from '../index';\nimport { selectAllAcceptedTokens } from '../services/selectors';\n\nexport const selectOperationsState = (state: AppState) => state.operationsState;\n\nexport const selectSortedOperations = createCachedSelector(\n  selectOperationsState,\n  (_state: AppState, type: ChartOperationType) => type,\n  (operationsState, type) => {\n    const filteredOperations = type !== 'all'\n      ? operationsState.operations.filter(o => o.type === type)\n      : [...operationsState.operations];\n\n    filteredOperations.sort((a, b) => +b.date - +a.date);\n\n    return filteredOperations;\n  }\n)(\n  (_state, type) => type\n);\n\nexport const selectSortedOperationsForPeriod = createCachedSelector(\n  selectOperationsState,\n  (_state: AppState, type: ChartOperationType) => type,\n  (_state: AppState, _type: ChartOperationType, period: Period) => period,\n  (operationsState, type, period) => {\n    let filteredOperations = type !== 'all'\n      ? operationsState.operations.filter(o => o.type === type)\n      : [...operationsState.operations];\n\n    if (period !== Period.All) {\n      const startDate = getStartDateByDatePeriod(period);\n      filteredOperations = filteredOperations.filter(o => o.date.getTime() >= startDate.getTime());\n    }\n    filteredOperations.sort((a, b) => +b.date - +a.date);\n\n    return filteredOperations;\n  }\n)(\n  (_state, type, period) => `${type}:${period}`\n);\n\nconst getDate = (date: Date) => new Date(date.getFullYear(), date.getMonth(), date.getDate());\nconst getTodayDate = () => getDate(new Date());\n\nconst getStartDateByDatePeriod = (period: Exclude<Period, Period.All>) => {\n  const result = getTodayDate();\n\n  switch (period) {\n    case Period.LastWeek:\n      result.setDate(result.getDate() - 7);\n      break;\n    case Period.LastMonth:\n      result.setMonth(result.getMonth() - 1);\n      break;\n    case Period.LastYear:\n      result.setFullYear(result.getFullYear() - 1);\n      break;\n    default:\n      throw new Error(`Unsupported Period ${period}`);\n  }\n\n  return result;\n};\n\n//todo mode to storage, load from external source\nconst getUsdRate = (asset: string | undefined) => {\n  switch (asset) {\n    case undefined:\n      return 4.58;\n\n    case 'KT19sYK89XKYTeGHekWK9wL5iDHVF4YYf26t':\n      return 1;\n\n    case 'KT1EKo1Eihucz9N4cQyaDKeYRoMzTEoiZRAT':\n      return 0.1;\n\n    default:\n      throw new Error(`Unsupported token ${asset}`);\n  }\n};\n\nconst toFixedNumber = (value: number, fractionDigits: number) => {\n  return Math.floor(value * 10 ** fractionDigits) / 10 ** fractionDigits;\n};\n\nconst getDateKey = (date: Date) => getDate(date).toLocaleDateString('en-US');\n\nconst initializeChartData = <T>(startDate: Date, endDate: Date, initItem: () => T) => {\n  const result: { [key: string]: T } = {};\n  const startDateTime = startDate.getTime();\n  let endDateTime = endDate.getTime();\n\n  while (startDateTime <= endDateTime) {\n    result[getDateKey(endDate)] = initItem();\n\n    endDateTime = endDate.getTime() - 86400000;\n    endDate.setTime(endDateTime);\n  }\n\n  return result;\n};\n\nconst getStartDate = (period: Period, operations: readonly ServiceOperation[]) => {\n  return period === Period.All\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    ? (operations[operations.length - 1] ? getDate(operations[operations.length - 1]!.date) : getTodayDate())\n    : getStartDateByDatePeriod(period);\n};\n\nconst getEndDate = (_period: Period, _operations: readonly ServiceOperation[]) => getTodayDate();\n\nexport const selectProfitChartData = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (operations, _operationType, period) => {\n    const startDate = getStartDate(period, operations);\n    const endDate = getEndDate(period, operations);\n    const initialData = initializeChartData(startDate, endDate, () => ({ profit: 0, volume: 0, incoming: 0, outgoing: 0 }));\n\n    const profitByDay = operations.reduce((map, operation) => {\n      if (operation.status === OperationStatus.Success) {\n        const key = getDateKey(operation.date);\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const dayData = map[key]!;\n        const amount = operation.amount.toNumber();\n        const isOutgoing = operation.direction === OperationDirection.Outgoing;\n        const usdRate = getUsdRate(operation.asset);\n        dayData.profit += amount * (isOutgoing ? -1 : 1) * usdRate;\n        dayData.volume += amount * (isOutgoing ? 1 : 1) * usdRate;\n        dayData.incoming += amount * (isOutgoing ? 0 : 1) * usdRate;\n        dayData.outgoing += amount * (isOutgoing ? 1 : 0) * usdRate;\n      }\n      return map;\n    }, initialData);\n\n    Object.values(profitByDay).forEach(dayData => {\n      (Object.entries(dayData) as Array<[keyof typeof dayData, number]>).forEach(([metricName, metricDayData]) => {\n        dayData[metricName] = toFixedNumber(metricDayData, 2);\n      });\n    });\n\n    const result = Object.entries(profitByDay)\n      .map(([dayStr, value]) => ({ day: new Date(dayStr).toLocaleDateString('en-US'), ...value }))\n      .reverse();\n\n    return result;\n  }\n)(\n  (_state, operationType, period) => `${operationType}:${period}`\n);\n\nexport const selectOperationsCountByTokensChartData = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  selectAllAcceptedTokens,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (operations, tokens, _operationType, period) => {\n    const startDate = getStartDate(period, operations);\n    const endDate = getEndDate(period, operations);\n    const tokensMap = new Map(tokens.map(t => [t.contractAddress, t]));\n    const initialDayItem: { [key: string]: number } = {};\n    initialDayItem[tezosMeta.symbol] = 0;\n    tokens.forEach(t => initialDayItem[(t.metadata || unknownAssetMeta).symbol] = 0);\n    const initialData = initializeChartData(startDate, endDate, () => ({ ...initialDayItem }));\n\n    const operationsCountByDay = operations.reduce((map, operation) => {\n      if (operation.status === OperationStatus.Success) {\n        const key = getDateKey(operation.date);\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const dayData = map[key]!;\n        const assetKey = operation.asset ?\n          (tokensMap.get(operation.asset)?.metadata || unknownAssetMeta).symbol\n          : tezosMeta.symbol;\n        dayData[assetKey] = (dayData[assetKey] || 0) + 1;\n      }\n      return map;\n    }, initialData);\n\n    const result = Object.entries(operationsCountByDay)\n      .map(([dayStr, value]) => ({ day: new Date(dayStr).toLocaleDateString('en-US'), ...value }))\n      .reverse();\n\n    return result;\n  }\n)(\n  (_state, operationType, period) => `${operationType}:${period}`\n);\n\nexport const selectOperationsCountByTypesChartData = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (operations, _operationType, period) => {\n    const startDate = getStartDate(period, operations);\n    const endDate = getEndDate(period, operations);\n    const initialData = initializeChartData(startDate, endDate, () => ({ incoming: 0, outgoing: 0, failed: 0 }));\n\n    const operationsCountByDay = operations.reduce((map, operation) => {\n      const key = getDateKey(operation.date);\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      const dayData = map[key]!;\n      if (operation.status === OperationStatus.Cancelled) {\n        dayData.failed++;\n      } else if (operation.status === OperationStatus.Success) {\n        if (operation.direction === OperationDirection.Incoming) {\n          dayData.incoming++;\n        } else {\n          dayData.outgoing++;\n        }\n      }\n      return map;\n    }, initialData);\n\n    const result = Object.entries(operationsCountByDay)\n      .map(([dayStr, value]) => ({ day: new Date(dayStr).toLocaleDateString('en-US'), ...value }))\n      .reverse();\n\n    return result;\n  }\n)(\n  (_state, operationType, period) => `${operationType}:${period}`\n);\n\nexport const selectProfitByTokensChartData = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  selectAllAcceptedTokens,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (_state: AppState, _operationType: ChartOperationType, _period: Period, direction: OperationDirection) => direction,\n  (operations, tokens, _operationType, _period, direction) => {\n    const tokensMap = new Map(tokens.map(t => [t.contractAddress, t]));\n    const initialData = {} as { [key: string]: number };\n\n    const profitByDay = operations.reduce((map, operation) => {\n      if (operation.status === OperationStatus.Success && operation.direction === direction) {\n        const assetKey = operation.asset\n          ? tokensMap.get(operation.asset)?.metadata?.symbol\n          : tezosMeta.symbol;\n        if (assetKey)\n          map[assetKey] = (map[assetKey] || 0) + (operation.amount.toNumber() * getUsdRate(operation.asset));\n      }\n      return map;\n    }, initialData);\n\n    const result = Object.entries(profitByDay)\n      .map(([token, value]) => ({ value: toFixedNumber(value, 2), name: token }));\n\n    return result;\n  }\n)(\n  (_state, operationType, period, direction) => `${operationType}:${period}:${direction}`\n);\n\nexport const selectMaxTransactionChartData = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (operations, _operationType, period) => {\n    const startDate = getStartDate(period, operations);\n    const endDate = getEndDate(period, operations);\n    const initialData = initializeChartData(startDate, endDate, () => ({ max: 0 }));\n\n    const maxByDay = operations.reduce((map, operation) => {\n      if (operation.status === OperationStatus.Success && operation.direction === OperationDirection.Incoming) {\n        const key = getDateKey(operation.date);\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        const dayData = map[key]!;\n        const amount = operation.amount.toNumber();\n        const usdRate = getUsdRate(operation.asset);\n        dayData.max = Math.max(dayData.max, amount * usdRate);\n      }\n      return map;\n    }, initialData);\n\n    const result = Object.entries(maxByDay)\n      .map(([dayStr, value]) => ({ day: new Date(dayStr).toLocaleDateString('en-US'), ...value }))\n      .reverse();\n\n    return result;\n  }\n)(\n  (_state, operationType, period) => `${operationType}:${period}`\n);\n\nexport const selectNewSendersCountChartData = createCachedSelector(\n  selectSortedOperations,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (operations, _operationType, period) => {\n    const startDate = getStartDate(period, operations);\n    const endDate = getEndDate(period, operations);\n    const initialDayItem = { newSendersCount: 0 };\n    const initialData = initializeChartData(startDate, endDate, () => ({ ...initialDayItem }));\n\n    const sendersSet = new Set<string>();\n    const newSendersByDay = operations.reduceRight((map, operation) => {\n      if (operation.status === OperationStatus.Success && operation.direction === OperationDirection.Incoming && !sendersSet.has(operation.sender)) {\n        sendersSet.add(operation.sender);\n        const key = getDateKey(operation.date);\n        const datData = map[key];\n        if (datData)\n          datData.newSendersCount++;\n      }\n      return map;\n    }, initialData);\n\n    const result = Object.entries(newSendersByDay)\n      .map(([dayStr, value]) => ({ day: new Date(dayStr).toLocaleDateString('en-US'), ...value }))\n      .reverse();\n\n    return result;\n  }\n)(\n  (_state, operationType, period) => `${operationType}:${period}`\n);\n\nexport const selectTotalVolumeByTokens = createCachedSelector(\n  selectSortedOperationsForPeriod,\n  selectAllAcceptedTokens,\n  (_state: AppState, operationType: ChartOperationType) => operationType,\n  (_state: AppState, _operationType: ChartOperationType, period: Period) => period,\n  (_state: AppState, _operationType: ChartOperationType, _period: Period, direction: OperationDirection) => direction,\n  (operations, tokens, _operationType, _period: Period, direction) => {\n    const tokensMap = new Map(tokens.map(t => [t.contractAddress, t]));\n    const result = operations.reduce((map, operation) => {\n      if (operation.status === OperationStatus.Success && operation.direction === direction) {\n        const assetKey = operation.asset ?\n          (tokensMap.get(operation.asset)?.metadata || unknownAssetMeta).symbol\n          : tezosMeta.symbol;\n\n        map.set(assetKey, (map.get(assetKey) || new BigNumber(0)).plus(operation.amount));\n      }\n      return map;\n    }, new Map<string, BigNumber>());\n\n    return result;\n  }\n)(\n  (_state, operationType, direction) => `${operationType}:${direction}`\n);\n","import { init, getInstanceByDom, EChartsOption, ECharts, SetOptionOpts } from 'echarts';\nimport React, { useRef, useEffect, CSSProperties, useMemo } from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport './Chart.scss';\n\ninterface ChartProps {\n  option: EChartsOption;\n  className?: string;\n  style?: CSSProperties;\n  theme?: 'light' | 'dark';\n  settings?: SetOptionOpts;\n  loading?: boolean;\n  title?: string;\n  showZoom?: boolean;\n}\n\nexport const Chart = (props: ChartProps) => {\n  const chartElRef = useRef<HTMLDivElement>(null);\n  const theme = props.theme || 'light';\n\n  const option = useMemo(() => {\n    const showZoom = props.showZoom === undefined || props.showZoom;\n\n    return {\n      title: {\n        text: props.title,\n        padding: 0,\n      },\n      dataZoom: showZoom ? [{\n        type: 'inside',\n      }, {\n        type: 'slider'\n      }] : undefined,\n      ...props.option,\n      grid: {\n        top: 80,\n        left: 'left',\n        right: 0,\n        containLabel: true,\n        ...(!showZoom && { bottom: 0 }),\n        ...props.option.grid\n      },\n      legend: {\n        top: 35,\n        left: 'left',\n        padding: 0,\n        type: 'scroll',\n        ...props.option.legend\n      },\n    };\n  }, [props.option, props.showZoom, props.title]);\n\n  useEffect(() => {\n    let chart: ECharts | undefined;\n    if (chartElRef.current) {\n      chart = init(chartElRef.current, theme);\n    }\n\n    const handleResize = () => {\n      chart?.resize();\n    };\n    window.addEventListener('resize', handleResize);\n\n    return () => {\n      window.removeEventListener('resize', handleResize);\n      chart?.dispose();\n    };\n  }, [theme]);\n\n  useEffect(() => {\n    if (chartElRef.current) {\n      const chart = getInstanceByDom(chartElRef.current);\n      chart?.setOption(option, props.settings);\n    }\n  }, [option, props.settings, theme]);\n\n  useEffect(() => {\n    if (chartElRef.current) {\n      const chart = getInstanceByDom(chartElRef.current);\n      props.loading === true ? chart?.showLoading() : chart?.hideLoading();\n    }\n  }, [props.loading, theme]);\n\n  return <div className={combineClassNames('chart-container', props.className)} ref={chartElRef} style={{ width: '100%', height: '100%', ...props.style }} />;\n};\n\nexport const ChartPure = React.memo(Chart);\n","import React from 'react';\n\nimport { tezosMeta, unknownAssetMeta } from '@tezospayments/common';\n\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectOperationsCountByTokensChartData, selectOperationsState } from '../../../../../store/operations/selectors';\nimport { selectAllAcceptedTokens } from '../../../../../store/services/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ntype ChartOptions = React.ComponentProps<typeof ChartPure>['option'];\n\ninterface OperationsCountByTokensProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n  showZoom?: boolean;\n}\n\nexport const OperationsCountByTokens = (props: OperationsCountByTokensProps) => {\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n\n  const dataSource = useAppSelector((state: AppState) => selectOperationsCountByTokensChartData(state, props.operationType, props.period));\n  const tokens = useAppSelector(selectAllAcceptedTokens);\n  const tokensDimensions = tokens.map(t => ({ name: (t.metadata || unknownAssetMeta).symbol }));\n  const series: NonNullable<ChartOptions['series']> = new Array(tokensDimensions.length + 1).fill({\n    type: 'bar',\n    stack: 'main-stack',\n  });\n\n  const option: ChartOptions = {\n    dataset: {\n      dimensions: [\n        'day',\n        { name: tezosMeta.symbol },\n        ...tokensDimensions\n      ],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series\n  };\n\n  return <ChartPure className={props.className} title={analyticsLangResources.operationsCountByTokens}\n    option={option} loading={!isInitialized} showZoom={props.showZoom} />;\n};\n\nexport const OperationsCountByTokensPure = React.memo(OperationsCountByTokens);\n","export enum LineColor {\n  Green = '#91cc75',\n  Yellow = '#fac858',\n  Blue = '#5470c6',\n  Red = '#ee6666',\n}\n","import React from 'react';\n\nimport { LineColor } from '../../../../../models/charts';\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectOperationsState, selectProfitChartData } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface ProfitProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n  showZoom?: boolean;\n}\n\nexport const Volume = (props: ProfitProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const dataSource = useAppSelector((state: AppState) => selectProfitChartData(state, props.operationType, props.period));\n  const title = `${analyticsLangResources.volume} (${analyticsLangResources.currency.usd})`;\n\n  const option: React.ComponentProps<typeof ChartPure>['option'] = {\n    dataset: {\n      dimensions: [\n        'day',\n        { name: 'volume', displayName: analyticsLangResources.all },\n        { name: 'incoming', displayName: analyticsLangResources.incoming },\n        { name: 'outgoing', displayName: analyticsLangResources.outgoing }\n      ],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [{ type: 'line', color: LineColor.Blue, }, { type: 'line', color: LineColor.Green }, { type: 'line', color: LineColor.Red }]\n  };\n\n  return <ChartPure className={props.className} option={option} title={title} loading={!isInitialized} showZoom={props.showZoom} />;\n};\n\nexport const VolumePure = React.memo(Volume);\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\ninterface ViewTitleProps {\n    className?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewTitleProps = Required<Pick<ViewTitleProps, 'as'>>;\n\nexport const defaultProps: DefaultViewTitleProps = {\n    as: 'h1',\n};\n\nconst viewTitleClassName = 'view__title';\nexport const ViewTitle = (props: ViewTitleProps & DefaultViewTitleProps) => {\n    const className = combineClassNames(props.className, viewTitleClassName);\n\n    return React.createElement(props.as, { className }, props.children);\n};\nViewTitle.defaultProps = defaultProps;\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useViewTitle } from '../../hooks';\nimport { ViewTitle } from './ViewTitle';\nimport './View.scss';\n\ninterface ViewProps {\n    className?: string;\n    title?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewProps = Required<Pick<ViewProps, 'as'>>;\n\nconst defaultProps: DefaultViewProps = {\n    as: 'main'\n};\n\nexport const View = (props: ViewProps & DefaultViewProps) => {\n    useViewTitle(props.title ? `${props.title} | ${config.app.title}` : config.app.title);\n    const className = combineClassNames('view', props.className);\n\n    return React.createElement(props.as, { className }, props.children);\n};\n\nView.defaultProps = defaultProps;\nView.Title = ViewTitle;\n","import { useEffect } from 'react';\n\nexport const useViewTitle = (title: string) => {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n};\n","import { AppState } from '../index';\n\nexport const selectBalancesState = (state: AppState) => state.balancesState;\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { optimization, tezosMeta } from '@tezospayments/common';\n\nimport { selectBalancesState } from '../../../../store/balances/selectors';\nimport { selectAcceptTezos, selectAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Balances = () => {\n  const acceptTezos = useAppSelector(selectAcceptTezos);\n  const tokens = useAppSelector(selectAllAcceptedTokens);\n  const services = useAppSelector(selectServicesState);\n  const balances = useAppSelector(selectBalancesState);\n\n  if (!services.initialized || !balances.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={balances.tezos}\n      iconSrc={tezosMeta.thumbnailUri} />);\n  }\n\n  tokens.forEach(t => {\n    if (t.metadata) {\n      items.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={''}\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        value={balances.tokens[t.contractAddress] || optimization.zeroBigNumber}\n        iconSrc={t.metadata.thumbnailUri} />);\n    }\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const BalancesPure = React.memo(Balances);\n","import { Skeleton } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport React from 'react';\n\nimport { OperationDirection, tezosMeta } from '@tezospayments/common';\n\nimport { Period } from '../../../../models/system';\nimport { selectTotalVolumeByTokens } from '../../../../store/operations/selectors';\nimport { selectAcceptTezos, selectAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\ninterface TotalVolumeProps {\n  direction: OperationDirection;\n}\n\nexport const TotalVolume = (props: TotalVolumeProps) => {\n  const acceptTezos = useAppSelector(selectAcceptTezos);\n  const services = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(selectAllAcceptedTokens);\n  const volume = useAppSelector(state => selectTotalVolumeByTokens(state, 'all', Period.LastWeek, props.direction));\n\n  if (!services.initialized) {\n    return <Skeleton active />;\n  }\n\n  const multiplier = props.direction === OperationDirection.Incoming ? 1 : -1;\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={(volume.get(tezosMeta.symbol) || new BigNumber(0)).multipliedBy(multiplier)}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightPlus />);\n  }\n\n  tokens.forEach(t => {\n    if (t.metadata) {\n      items.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={t.contractAddress}\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        value={(volume.get(t.metadata.symbol) || new BigNumber(0)).multipliedBy(multiplier)}\n        iconSrc={t.metadata.thumbnailUri}\n        highlightPlus />);\n    }\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const TotalVolumePure = React.memo(TotalVolume);\n","import { Card } from 'antd';\nimport React from 'react';\n\nimport { OperationDirection } from '@tezospayments/common';\n\nimport { Period } from '../../../models/system';\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { OperationsCountByTokensPure } from '../Analytics/Charts/OperationsCountByTokens';\nimport { VolumePure } from '../Analytics/Charts/Volume';\nimport { View } from '../View';\nimport { BalancesPure, TotalVolumePure } from './SmallCards';\nimport './Overview.scss';\n\nexport const Overview = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const overviewLangResources = langResources.views.overview;\n\n  const servicesState = useAppSelector(selectServicesState);\n\n  return <View title={overviewLangResources.title} className=\"overview\">\n    <View.Title>{overviewLangResources.title}</View.Title>\n\n    {servicesState.initialized && !servicesState.services.length\n      ? <NoServicesCreatedPure />\n      : <div>\n        <div className=\"cards-container\">\n          <Card className=\"cards-container__small-card\" size=\"small\" title={overviewLangResources.balances.title}>\n            <BalancesPure />\n          </Card>\n\n          <Card className=\"cards-container__small-card\" size=\"small\" title={overviewLangResources.incoming.title} extra={commonLangResources.period.lastWeek}>\n            <TotalVolumePure direction={OperationDirection.Incoming} />\n          </Card>\n\n          <Card className=\"cards-container__small-card\" size=\"small\" title={overviewLangResources.outgoing.title} extra={commonLangResources.period.lastWeek}>\n            <TotalVolumePure direction={OperationDirection.Outgoing} />\n          </Card>\n        </div>\n        <div className=\"overview-analytics\">\n          <OperationsCountByTokensPure className=\"overview-analytics__chart\" period={Period.LastWeek} operationType=\"all\" showZoom={false} />\n          <VolumePure className=\"overview-analytics__chart\" period={Period.LastWeek} operationType=\"all\" showZoom={false} />\n        </div>\n      </div>\n    }\n  </View >;\n};\n\nexport const OverviewPure = React.memo(Overview);\n","import { ArrowRightOutlined, ArrowLeftOutlined, ClockCircleTwoTone, ExclamationCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { combineClassNames, OperationDirection, OperationStatus } from '@tezospayments/common';\n\nimport './OperationIcon.scss';\nimport { useCurrentLanguageResources } from '../../hooks';\n\ninterface OperationIconProps {\n  className?: string;\n  direction: OperationDirection;\n  status: OperationStatus;\n}\n\nexport const OperationIcon = (props: OperationIconProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === OperationDirection.Incoming;\n\n  const className = combineClassNames(\n    props.className,\n    'operation-icon',\n    { 'operation-icon_income': isIncoming },\n    { 'operation-icon_expense': !isIncoming },\n    { 'operation-icon_cancelled': props.status === OperationStatus.Cancelled }\n  );\n\n  return <div className={className}>\n    {isIncoming ? <ArrowRightOutlined title={operationsLangResources.income} /> : <ArrowLeftOutlined title={operationsLangResources.expense} />}\n    {props.status === OperationStatus.Pending && <ClockCircleTwoTone className=\"operation-icon__status operation-icon__status_pending\" title={operationsLangResources.pending} />}\n    {props.status === OperationStatus.Cancelled && <ExclamationCircleFilled className=\"operation-icon__status operation-icon__status_cancelled\" title={operationsLangResources.cancelled} />}\n  </div >;\n};\n\nexport const OperationIconPure = React.memo(OperationIcon);\n","import { BigNumber } from 'bignumber.js';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { combineClassNames, OperationDirection, OperationStatus, OperationType } from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ExplorerLink } from '../ExplorerLink/ExplorerLink';\nimport { OperationIconPure } from './OperationIcon';\n\nimport './OperationList.scss';\n\ninterface OperationListProps {\n  children: React.ReactNode;\n}\n\nexport const OperationList = (props: OperationListProps) => {\n  return <table className=\"operation-list\">\n    {props.children}\n  </table>;\n};\n\ninterface OperationListItemProps {\n  type: OperationType;\n  direction: OperationDirection;\n  status: OperationStatus;\n  date: Date;\n  hash: string;\n  serviceAddress: string;\n  serviceName: string;\n  accountAddress: string;\n  data: string;\n  value: BigNumber;\n  ticker: string;\n}\n\nconst OperationListItem = (props: OperationListItemProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === OperationDirection.Incoming;\n  const from = isIncoming ? props.accountAddress : props.serviceAddress;\n  const to = isIncoming ? props.serviceAddress : props.accountAddress;\n\n  const hash = getShortHash(props.hash);\n  const isDonation = props.type === OperationType.Donation;\n  const data = `${isDonation ? operationsLangResources.donationData : operationsLangResources.paymentId} ${props.data}`;\n\n  const sign = isIncoming ? '+' : '−';\n  const amountClassNames = combineClassNames('operation-list-item__amount',\n    { 'operation-list-item__amount_income': isIncoming },\n    { 'operation-list-item__amount_expense': !isIncoming },\n    { 'operation-list-item__amount_cancelled': props.status === OperationStatus.Cancelled }\n  );\n\n  const serviceLink = `${config.routers.services}/${props.serviceAddress}`;\n\n  return <tbody className=\"operation-list-group\">\n    <tr className=\"operation-list-row operation-list-row_general\">\n      <td className=\"operation-list-item__icon\">\n        <OperationIconPure direction={props.direction} status={props.status} />\n      </td>\n      <td className=\"operation-list-item__main-info\">\n        <span className=\"operation-list-item__date\">{props.date.toLocaleString()}</span>\n        <ExplorerLink hash={props.hash} className=\"operation-list-item__operation-hash\">{hash}</ExplorerLink>\n      </td>\n      <td className=\"operation-list-item__transfer-info\">\n        {from === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={from}>{getShortHash(from)}</ExplorerLink>}\n        &nbsp;→&nbsp;\n        {to === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={to}>{getShortHash(to)}</ExplorerLink>}\n      </td>\n      <td className={amountClassNames}>{sign}{props.value.toFormat()} {props.ticker}</td>\n    </tr>\n    <tr className=\"operation-list-row operation-list-row_order-data\">\n      <td></td>\n      <td className=\"operation-list-item__data\" colSpan={3}>\n        {data}\n      </td>\n    </tr>\n  </tbody>;\n};\n\nconst getShortHash = (hash: string) => `${hash.substr(0, 9)}...${hash.substr(hash.length - 6, 6)}`;\n\nOperationList.Item = OperationListItem;\n","import React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NoOperationsPerformed.scss';\n\nexport const NoOperationsPerformed = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  return <div className=\"no-operations-performed-container\">\n    {operationsLangResources.noOperationsPerformedYet}\n  </div>;\n};\n\nexport const NoOperationsPerformedPure = React.memo(NoOperationsPerformed);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { DonationOperation, Operation, OperationDirection, OperationType, PaymentOperation } from '@tezospayments/common';\n\nimport { selectSortedOperations, } from '../../../store/operations/selectors';\nimport { selectServicesState, selectTokensState } from '../../../store/services/selectors';\nimport { NoServicesCreated } from '../../common/NoServicesCreated';\nimport { OperationList } from '../../common/OperationList';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NoOperationsPerformedPure } from './NoOperationsPerformed';\n\nconst getFormattedOperationData = (operation: Operation): string | undefined => {\n  switch (operation.type) {\n    case OperationType.Payment:\n      return (operation as PaymentOperation).paymentId;\n    case OperationType.Donation:\n      return (operation as DonationOperation).payload?.valueString;\n    default:\n      return undefined;\n  }\n};\n\nexport const Operations = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations;\n  const operations = useAppSelector(state => selectSortedOperations(state, 'all'));\n  const servicesState = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(selectTokensState);\n\n  const operationProps: Array<React.ComponentProps<typeof OperationList.Item>> = operations.map(o => {\n    const tokenSymbol = o.asset && tokens.get(o.asset)?.metadata?.symbol;\n\n    return {\n      date: o.date,\n      hash: o.hash,\n      data: getFormattedOperationData(o) || '',\n      accountAddress: o.sender,\n      serviceAddress: o.target,\n      serviceName: servicesState.services.filter(s => s.contractAddress === o.target)[0]?.name || '',\n      ticker: tokenSymbol || 'XTZ',\n      value: o.amount,\n      status: o.status,\n      type: o.type,\n      direction: OperationDirection.Incoming\n    };\n  });\n\n  return <View title={operationsLangResources.title}>\n    <View.Title>{operationsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreated />\n        : !operations.length\n          ? <NoOperationsPerformedPure />\n          : <OperationList>\n            {operationProps.map(o => <OperationList.Item key={o.hash} {...o} />)}\n          </OperationList>}\n  </View>;\n};\n\nexport const OperationsPure = React.memo(Operations);\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NewServiceCard.scss';\n\nexport const NewServiceCard = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const navigate = useNavigate();\n\n  const handleCardClick = useCallback(() => {\n    navigate(config.routers.createService);\n  }, [navigate]);\n\n  return <Card bodyStyle={{ padding: 0 }} className=\"new-service-card-container\" onClick={handleCardClick}>\n    <div className=\"new-service-card\" title={servicesLangResources.createNewService}>\n      <div className=\"new-service-card__info\">\n        <PlusOutlined className=\"new-service-card__icon\" />\n        <span>{commonLangResources.new}</span>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const NewServiceCardPure = React.memo(NewServiceCard);\n","import { CheckCircleOutlined, CloseCircleOutlined, PauseCircleOutlined, SyncOutlined } from '@ant-design/icons';\nimport { Tag } from 'antd';\nimport React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActiveTag.scss';\n\ninterface ActiveTagProps {\n  paused: boolean;\n  deleted: boolean;\n  isUpdating: boolean;\n}\n\nexport const ActiveTag = (props: ActiveTagProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return props.isUpdating ?\n    <Tag icon={<SyncOutlined spin />} className=\"tag-active tag-active_updating\">{servicesLangResources.status.updating}</Tag>\n    : props.deleted\n      ? <Tag icon={<CloseCircleOutlined />} className=\"tag-active tag-active_deleted\">{servicesLangResources.status.deleted}</Tag>\n      : props.paused\n        ? <Tag icon={<PauseCircleOutlined />} className=\"tag-active tag-active_paused\">{servicesLangResources.status.paused}</Tag>\n        : <Tag icon={<CheckCircleOutlined />} className=\"tag-active tag-active_active\">{servicesLangResources.status.active}</Tag>;\n};\n\nexport const ActiveTagPure = React.memo(ActiveTag);\n","import { Tag } from 'antd';\nimport React from 'react';\n\nimport './CustomTag.scss';\n\ninterface CustomTagProps {\n  text: string;\n}\n\nexport const CustomTag = (props: CustomTagProps) => {\n  return <Tag className=\"tag-custom\">{props.text}</Tag>;\n};\n\nexport const CustomTagPure = React.memo(CustomTag);\n","import { Button, Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { Service, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ServiceCard.scss';\n\ninterface ServiceCardProps {\n  service: Service;\n  isUpdating: boolean;\n}\n\nexport const ServiceCard = (props: ServiceCardProps) => {\n  const navigate = useNavigate();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCardClick = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    const tagName = (e.target as HTMLElement).tagName.toLowerCase();\n    if (tagName !== 'svg' && tagName !== 'a' && tagName !== 'path') {\n      navigate(config.routers.service(props.service.contractAddress));\n    }\n  }, [navigate, props.service.contractAddress]);\n\n  const logoClassName = combineClassNames(\n    'service-card__logo',\n    props.service.iconUrl ? 'service-card__logo_image' : 'service-card__logo_text',\n  );\n\n  return <Card size=\"small\" bodyStyle={{ padding: 0 }} className=\"service-card-container\" onClick={handleCardClick}>\n    <div className=\"service-card\">\n      <div className=\"service-card__info-container\">\n        <div className=\"service-card__main-info\">\n          {props.service.iconUrl\n            ? <img className={logoClassName} alt=\"logo\" src={props.service.iconUrl} />\n            : <span className={logoClassName}>{text.getAvatarText(props.service.name)}</span>}\n          <div className=\"service-card__name-container\">\n            <span className=\"service-card__name\" title={props.service.name}>{props.service.name}</span>\n            <div className=\"service-card__tags-container\">\n              <ActiveTagPure paused={props.service.paused} deleted={props.service.deleted} isUpdating={props.isUpdating} />\n            </div>\n          </div>\n        </div>\n        <div className=\"service-card__link-container\">\n          <ExplorerLinkPure hash={props.service.contractAddress} className=\"service-card__link\" showCopyButton>\n            {props.service.contractAddress}\n          </ExplorerLinkPure>\n        </div>\n      </div>\n      <div className=\"service-card__button-container\">\n        <Button className=\"service-card__button\" type=\"primary\">{commonLangResources.open}</Button>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const ServiceCardPure = React.memo(ServiceCard);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { selectPendingOperationsByService, selectSortedServices, selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NewServiceCardPure, ServiceCardPure } from './ServiceCards';\nimport './Services.scss';\n\nexport const Services = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const servicesState = useAppSelector(selectServicesState);\n  const pendingOperationsByService = useAppSelector(selectPendingOperationsByService);\n\n  const services = useAppSelector(selectSortedServices);\n  const servicesCards = services.map(s => <ServiceCardPure\n    key={s.contractAddress}\n    service={s}\n    isUpdating={pendingOperationsByService.has(s.contractAddress)}\n  />);\n\n  return <View title={servicesLangResources.title}>\n    <View.Title>{servicesLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"services-container\">\n          {servicesCards}\n          <NewServiceCardPure />\n        </div>}\n  </View >;\n};\n\nexport const ServicesPure = React.memo(Services);\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { Service } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActionsZone.scss';\n\ninterface ActionsZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ActionsZone = ({ service, readOnly }: ActionsZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const navigate = useNavigate();\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    navigate(config.routers.acceptServicePayments(service.contractAddress));\n  }, [navigate, service.contractAddress]);\n\n  return <div className=\"service-actions-zone\">\n    <span className=\"service-actions-zone__header\">Actions</span>\n\n    <div className=\"service-actions-zone__button-container\">\n      <p>{servicesLangResources.acceptPaymentsDescription}</p>\n      <Button disabled={readOnly} onClick={handleAcceptPaymentsClick} className=\"service-button\" type=\"primary\">{servicesLangResources.acceptPayments}</Button>\n    </div>\n  </div>;\n};\n\nexport const ActionsZonePure = React.memo(ActionsZone);\n","import { Button, Modal } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { setDeleted, setPaused } from '../../../../store/services/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './DangerZone.scss';\n\ninterface DangerZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DangerZone = (props: DangerZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const dangerZoneLangResources = langResources.views.services.dangerZone;\n  const dispatch = useAppDispatch();\n\n  const handlePauseModalOkClick = useCallback(() => {\n    dispatch(setPaused({ service: props.service, paused: !props.service.paused }));\n  }, [dispatch, props.service]);\n\n  const handleDeleteModalOkClick = useCallback(() => {\n    dispatch(setDeleted({ service: props.service, deleted: !props.service.deleted }));\n  }, [dispatch, props.service]);\n\n  const confirm = useCallback((text: string, isDanger: boolean, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: isDanger ? 'danger' : 'primary',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handlePauseClick = useCallback(() => {\n    const text = props.service.paused ? dangerZoneLangResources.unPauseServiceConfirmation : dangerZoneLangResources.pauseServiceConfirmation;\n    confirm(text, false, handlePauseModalOkClick);\n  }, [confirm, dangerZoneLangResources.pauseServiceConfirmation, dangerZoneLangResources.unPauseServiceConfirmation, handlePauseModalOkClick, props.service.paused]);\n\n  const handleDeleteClick = useCallback(() => {\n    const text = props.service.deleted ? dangerZoneLangResources.unDeleteServiceConfirmation : dangerZoneLangResources.deleteServiceConfirmation;\n    confirm(text, !props.service.deleted, handleDeleteModalOkClick);\n  }, [confirm, dangerZoneLangResources.deleteServiceConfirmation, dangerZoneLangResources.unDeleteServiceConfirmation, handleDeleteModalOkClick, props.service.deleted]);\n\n  return <>\n    <div className=\"service-danger-zone\">\n      <span className=\"service-danger-zone__header\">{dangerZoneLangResources.title}</span>\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.paused ? dangerZoneLangResources.unPauseServiceDescription : dangerZoneLangResources.pauseServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handlePauseClick}>\n          {props.service.paused ? dangerZoneLangResources.unPauseService : dangerZoneLangResources.pauseService}\n        </Button>\n      </div>\n      <hr className=\"service-danger-zone__divider\" />\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.deleted ? dangerZoneLangResources.unDeleteServiceDescription : dangerZoneLangResources.deleteServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"primary\" danger onClick={handleDeleteClick}>\n          {props.service.deleted ? dangerZoneLangResources.unDeleteService : dangerZoneLangResources.deleteService}\n        </Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const DangerZonePure = React.memo(DangerZone);\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button, Divider, Input, Modal, Radio, RadioChangeEvent, Typography, Popconfirm, Spin } from 'antd';\nimport React, { useCallback, useRef, useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { EncodedKeyPair, KeyType, Service } from '@tezospayments/common';\n\nimport { addApiKey } from '../../../../../store/services/slice';\nimport { useCurrentLanguageResources, useKeyPairGenerator } from '../../../../hooks';\n\nimport './AddApiKeyModal.scss';\n\nconst Search = Input.Search;\n\ninterface AddApiKeyModalProps {\n  service: Service;\n  visible: boolean;\n  onCancel: () => void;\n}\n\nconst algorithmOptions = Object.values(KeyType).map(v => ({ label: v, value: v }));\n\nexport const AddApiKeyModal = (props: AddApiKeyModalProps) => {\n  const generateKeyPair = useKeyPairGenerator();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const [keyPair, setKeyPair] = useState<EncodedKeyPair>();\n  const publicKeyRef = useRef<Input>(null);\n  const secretKeyRef = useRef<Input>(null);\n  const dispatch = useDispatch();\n\n  const [algorithmType, setAlgorithmType] = useState(algorithmOptions[0]?.value || KeyType.Ed25519);\n  const handleAlgorithmTypeChanges = useCallback((e: RadioChangeEvent) => {\n    setAlgorithmType(e.target.value);\n  }, []);\n\n  const [name, setName] = useState('');\n  const handleNameChanged = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  }, []);\n\n  useEffect(() => {\n    generateKeyPair && setKeyPair(generateKeyPair(algorithmType));\n  }, [algorithmType, generateKeyPair]);\n\n  const handleCopyClick = useCallback((ref: React.RefObject<Input>) => {\n    const input = ref.current;\n\n    if (input) {\n      input.select();\n      navigator.clipboard.writeText(input.state.value);\n    }\n  }, []);\n\n  const handleGenerateKeysButton = useCallback(() => {\n    generateKeyPair && setKeyPair(generateKeyPair(algorithmType));\n  }, [algorithmType, generateKeyPair]);\n\n  const handleAddKeyConfirm = useCallback(() => {\n    if (keyPair?.publicKey)\n      dispatch(addApiKey({ service: props.service, signingKey: { name, publicKey: keyPair.publicKey } }));\n\n    props.onCancel();\n  }, [dispatch, name, props, keyPair]);\n\n  const editorsDisabled = !keyPair;\n  const modalBody = <>\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.name}:</span>\n    <Input disabled={editorsDisabled} autoFocus value={name} onChange={handleNameChanged} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.algorithm}:</span>\n    <div className=\"api-key-modal__algorithm-container\">\n      <Radio.Group disabled={editorsDisabled} options={algorithmOptions} value={algorithmType} onChange={handleAlgorithmTypeChanges} />\n      <Button disabled={editorsDisabled} onClick={handleGenerateKeysButton}>{servicesLangResources.devZone.generateKeys}</Button>\n    </div>\n    <Divider />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.publicKey}:</span>\n    <Search ref={publicKeyRef} disabled={editorsDisabled} readOnly value={keyPair?.publicKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(publicKeyRef)} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.secretKey}:</span>\n    <Search ref={secretKeyRef} disabled={editorsDisabled} readOnly value={keyPair?.privateKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(secretKeyRef)} />\n    <Typography.Text mark>{servicesLangResources.devZone.saveSecretKeyWarning}</Typography.Text>\n  </>;\n\n  return <Modal className=\"api-key-modal\" title={servicesLangResources.devZone.addKey}\n    centered destroyOnClose visible={props.visible} onCancel={props.onCancel}\n    footer={<div className=\"api-key-modal__footer\">\n      <Button key=\"back\" onClick={props.onCancel}>\n        {commonLangResources.cancel}\n      </Button>\n      <Popconfirm\n        disabled={!name}\n        title={servicesLangResources.devZone.saveSecretKeyConfirm}\n        placement=\"topRight\"\n        onConfirm={handleAddKeyConfirm}\n        okText={commonLangResources.yes}\n        cancelText={commonLangResources.no}\n      >\n        <Button key=\"submit\" className=\"api-key-modal__ok-button\" type=\"primary\" disabled={!name}>\n          {servicesLangResources.devZone.saveKeys}\n        </Button>\n      </Popconfirm>\n    </div>}\n  >\n    {keyPair\n      ? modalBody\n      : <Spin size=\"large\" >{modalBody}</Spin>\n    }\n  </Modal>;\n};\n\nexport const AddApiKeyModalPure = React.memo(AddApiKeyModal);\n\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, List, Modal } from 'antd';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { Service, ServiceSigningKey } from '@tezospayments/common';\n\nimport { selectCurrentAccount } from '../../../../../store/accounts/selectors';\nimport { deleteApiKey } from '../../../../../store/services/slice';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\nimport './ApiKeyList.scss';\n\ninterface ApiKeyListProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ApiKeyList = (props: ApiKeyListProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const currentAccount = useAppSelector(selectCurrentAccount);\n  const dispatch = useDispatch();\n  const apiKeys = useMemo(\n    () => {\n      let keys = [...props.service.signingKeys.values()];\n\n      if (currentAccount)\n        keys = keys.filter(k => k.publicKey !== currentAccount.publicKey);\n\n      return keys;\n    },\n    [currentAccount, props.service.signingKeys]\n  );\n\n  const confirm = useCallback((text: string, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: 'danger',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handleRemoveItem = useCallback((item: ServiceSigningKey) => {\n    const text = servicesLangResources.devZone.deleteKeyConfirmation + (item.name ? `: ${item.name}` : '');\n    confirm(text, () => {\n      dispatch(deleteApiKey({ service: props.service, publicKey: item.publicKey }));\n    });\n  }, [confirm, dispatch, props.service, servicesLangResources.devZone.deleteKeyConfirmation]);\n\n  return <List size=\"small\" bordered>\n    {apiKeys.length\n      ? apiKeys.map(apiKey => <List.Item key={apiKey.publicKey} className=\"api-keys__item\">\n        <span>{apiKey.name}</span>\n        <div>\n          <span className=\"api-keys__item-key\">{apiKey.publicKey}</span>\n          <Button disabled={props.readOnly} onClick={() => handleRemoveItem(apiKey)} icon={<DeleteOutlined />} danger type=\"link\"></Button>\n        </div>\n      </List.Item>\n      ) :\n      <List.Item className=\"api-keys__item api-keys__item_empty\">\n        {servicesLangResources.devZone.noApiKeysAddedYet}\n      </List.Item>}\n  </List>;\n};\n\nexport const ApiKeyListPure = React.memo(ApiKeyList);\n","\nimport { Button, } from 'antd';\nimport React, { useCallback, useState } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { AddApiKeyModalPure } from './AddApiKeyModal';\nimport { ApiKeyListPure } from './ApiKeyList';\n\nimport './DevZone.scss';\n\ninterface DevZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DevZone = (props: DevZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const [addKeyModalVisible, setAddKeyModalVisible] = useState(false);\n  const handleAddKeyButtonClick = useCallback(() => setAddKeyModalVisible(true), []);\n  const handleClosePopupClick = useCallback(() => setAddKeyModalVisible(false), []);\n\n  return <>\n    <div className=\"service-dev-zone__button-container\">\n      <span className=\"service-dev-zone__header\">{servicesLangResources.devZone.title}</span>\n      <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handleAddKeyButtonClick}>\n        {servicesLangResources.devZone.addKey}\n      </Button>\n    </div>\n    <ApiKeyListPure service={props.service} readOnly={props.readOnly} />\n    <AddApiKeyModalPure service={props.service} visible={addKeyModalVisible} onCancel={handleClosePopupClick} />\n  </>;\n};\n\nexport const DevZonePure = React.memo(DevZone);\n","import { EditFilled } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { Service, ServiceOperationType, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure, CustomTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './Header.scss';\n\ninterface HeaderProps {\n  service: Service;\n  isUpdating: boolean;\n  readOnly: boolean;\n}\n\nexport const Header = ({ service, isUpdating, readOnly }: HeaderProps) => {\n  const navigate = useNavigate();\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const logoClassName = combineClassNames(\n    'service__logo',\n    service?.iconUrl ? 'service__logo_image' : 'service__logo_text',\n  );\n\n  const arePaymentsAllowed = service?.allowedOperationType === ServiceOperationType.Payment || service?.allowedOperationType === ServiceOperationType.All;\n  const areDonationsAllowed = service?.allowedOperationType === ServiceOperationType.Donation || service?.allowedOperationType === ServiceOperationType.All;\n\n  const handleEditClick = useCallback(() => {\n    navigate(config.routers.service(service.contractAddress, true));\n  }, [navigate, service.contractAddress]);\n\n  return <div className=\"service-header\">\n    <div className=\"service-header__logo-container\">\n      {service.iconUrl\n        ? <img className={logoClassName} alt=\"logo\" src={service.iconUrl} />\n        : <span className={logoClassName}>{text.getAvatarText(service.name)}</span>}\n      <div className=\"service-header__main-info\">\n        <h1>{service.name}</h1>\n        <ExplorerLinkPure hash={service.contractAddress} className=\"service__link\" showCopyButton>\n          {service.contractAddress}\n        </ExplorerLinkPure>\n        <div className=\"service-header__tags-container\">\n          <ActiveTagPure paused={service.paused} deleted={service.deleted} isUpdating={isUpdating} />\n          {arePaymentsAllowed && <CustomTagPure text={servicesLangResources.operations.paymentsEnabled} />}\n          {areDonationsAllowed && <CustomTagPure text={servicesLangResources.operations.donationsEnabled} />}\n        </div>\n      </div>\n    </div>\n    <Button disabled={readOnly} className=\"service-button\" icon={<EditFilled />} type=\"primary\" onClick={handleEditClick}>{servicesLangResources.editing.editService}</Button>\n  </div>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","var _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgTelegram(_ref, svgRef) {\n  let {\n    title,\n    titleId,\n    ...props\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"1000px\",\n    height: \"1000px\",\n    viewBox: \"0 0 1000 1000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"currentColor\",\n    cx: 500,\n    cy: 500,\n    r: 500\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z\",\n    id: \"Path-3\",\n    fill: \"#FFFFFF\"\n  }))));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTelegram);\nexport default __webpack_public_path__ + \"static/media/telegram.fee81c94.svg\";\nexport { ForwardRef as ReactComponent };","import {\n  LinkOutlined, FacebookOutlined, TwitterOutlined, InstagramOutlined,\n  GithubOutlined, MailOutlined, RedditOutlined\n} from '@ant-design/icons';\n\nimport { IconId } from '@tezospayments/common';\n\nimport { TelegramIcon } from '../../../assets/icons';\n\nexport const iconIdMap = {\n  [IconId.Common]: LinkOutlined,\n  [IconId.Email]: MailOutlined,\n  [IconId.Telegram]: TelegramIcon,\n  [IconId.Facebook]: FacebookOutlined,\n  [IconId.Twitter]: TwitterOutlined,\n  [IconId.Instagram]: InstagramOutlined,\n  [IconId.GitHub]: GithubOutlined,\n  [IconId.Reddit]: RedditOutlined\n};\n","import React from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { ExternalLink } from '../../common';\nimport { iconIdMap } from './iconIdMap';\nimport './ServiceLink.scss';\n\ninterface ServiceLinkProps {\n  link: string;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLink = (props: ServiceLinkProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.link);\n  if (!linkInfo)\n    return null;\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <span className=\"service-link\">\n    <Icon className=\"service-link__icon\" />\n    <ExternalLink className=\"service-link__link\" href={linkInfo.formattedLink}>{linkInfo.displayLink}</ExternalLink>\n  </span>;\n};\n\nexport const ServiceLinkPure = React.memo(ServiceLink);\n","import { combineClassNames } from '@tezospayments/common';\n\nimport { ServiceLink } from './ServiceLink';\nimport './ServiceLinks.scss';\n\ninterface ServiceLinksProps {\n  className?: string;\n  links: readonly string[];\n}\n\nexport const ServiceLinks = (props: ServiceLinksProps) => {\n  return <div className={combineClassNames('service-links', props.className)}>\n    {props.links.map(link => <ServiceLink link={link} key={link} />).filter(Boolean)}\n  </div>;\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, Input } from 'antd';\nimport { useCallback } from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { iconIdMap } from './iconIdMap';\n\nimport './ServiceLinkEditor.scss';\n\ninterface ServiceLinkEditorProps {\n  value: string;\n  readOnly: boolean;\n  onChange: (e: { value: string }) => void\n  onDelete: () => void;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLinkEditor = (props: ServiceLinkEditorProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.value, true);\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    props.onChange({ value: e.target.value });\n  }, [props]);\n\n  if (!linkInfo) {\n    return null;\n  }\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <div className=\"service-link-editor\">\n    <Icon className=\"service-link-editor__icon\" />\n    <Input readOnly={props.readOnly} className=\"service-link-editor__input\" value={props.value} onChange={handleChange} />\n    <Button disabled={props.readOnly} className=\"service-link-editor__delete-button\" type=\"text\" danger icon={<DeleteOutlined />} onClick={props.onDelete} />\n  </div>;\n};\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport { useCallback } from 'react';\n\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ServiceLinkEditor } from './ServiceLinkEditor';\n\nimport './ServiceLinksEditor.scss';\n\ninterface ServiceLinksEditorProps {\n  value: string[];\n  readOnly: boolean;\n  onChange: (e: { value: string[] }) => void;\n}\n\nexport const ServiceLinksEditor = (props: ServiceLinksEditorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const handleChange = useCallback((i: number, e: { value: string }) => {\n    const value = [...props.value];\n    value[i] = e.value;\n    props.onChange({ value });\n  }, [props]);\n\n  const handleDelete = useCallback((i: number) => {\n    const value = [...props.value];\n    value.splice(i, 1);\n    props.onChange({ value });\n  }, [props]);\n\n  const handleAdd = useCallback(() => {\n    const value = [...props.value, ''];\n    props.onChange({ value });\n  }, [props]);\n\n  const editors = props.value.map((l, i) => <ServiceLinkEditor readOnly={props.readOnly} key={i} value={l} onDelete={() => handleDelete(i)} onChange={e => handleChange(i, e)} />);\n\n  return <div className=\"service-links-editor\">\n    {editors}\n    <Button disabled={props.readOnly} className=\"service-links-editor__button\" icon={<PlusOutlined />} onClick={handleAdd}>\n      {servicesLangResources.editing.addLink}\n    </Button>\n  </div >;\n};\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button, Dropdown, Menu } from 'antd';\nimport { useCallback, useMemo } from 'react';\n\nimport { tezosMeta, Service } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../../store/services/selectors';\nimport { TokenListItem } from '../../../../common/TokenList/TokenListItem';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\nimport './TokensEditor.scss';\n\ninterface TokensEditorProps {\n  allowedTokens: Service['allowedTokens'];\n  onChange: (allowedTokens: Service['allowedTokens']) => void;\n}\n\ninterface TokenListEditorItemProps {\n  name: string;\n  address: string;\n  ticker: string;\n  iconSrc?: string;\n}\n\nexport const TokensEditor = (props: TokensEditorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const tokens = useAppSelector(selectTokensState);\n  const selectedAddresses = useMemo<string[]>(() => {\n    const result: string[] = [];\n    if (props.allowedTokens.tez) {\n      result.push('');\n    }\n\n    props.allowedTokens.assets.forEach(a => {\n      const token = tokens.get(a);\n      if (token) {\n        result.push(token.contractAddress);\n      }\n    });\n\n    return result;\n  }, [props.allowedTokens.assets, props.allowedTokens.tez, tokens]);\n\n\n  const allItems: Map<string, TokenListEditorItemProps> = new Map();\n  allItems.set('', {\n    ticker: tezosMeta.symbol,\n    address: '',\n    name: tezosMeta.name,\n    iconSrc: tezosMeta.thumbnailUri\n  });\n\n  const allTokens = Array.from(tokens.values());\n  allTokens.forEach(t => {\n    if (t.metadata) {\n      allItems.set(t.contractAddress, {\n        ticker: t.metadata.symbol,\n        address: t.contractAddress,\n        name: t.metadata.name,\n        iconSrc: t.metadata.thumbnailUri\n      });\n    }\n  });\n\n  const handleTokensChanged = useCallback((addresses: string[]) => {\n    props.onChange({\n      tez: addresses.some(a => a === ''),\n      assets: addresses.filter(a => !!a)\n    });\n  }, [props]);\n\n  const handleAdd = useCallback((address: string) => handleTokensChanged([...selectedAddresses, address]), [handleTokensChanged, selectedAddresses]);\n  const handleDelete = useCallback((address: string) => handleTokensChanged(selectedAddresses.filter(a => a !== address)), [handleTokensChanged, selectedAddresses]);\n\n  const selectedItems = selectedAddresses.map(t => allItems.get(t) as TokenListEditorItemProps);\n  const unSelectedItems = Array.from(allItems.values()).filter(i => selectedAddresses.every(t => t !== i.address));\n\n  const menu = <Menu>\n    {unSelectedItems.map(i => <Menu.Item className=\"token-list-editor-menu-item\" key={i.ticker} onClick={() => handleAdd(i.address)}>\n      <img className=\"token-list-editor-menu-item__icon\" src={i.iconSrc} alt={i.name} />\n      <span className=\"token-list-editor-menu-item__ticker\">{i.ticker}</span>\n      <span className=\"token-list-editor-menu-item__name\">{i.name}</span>\n    </Menu.Item >)}\n  </Menu>;\n\n  return <>\n    <ul className=\"token-list-editor\">\n      {selectedItems.map(i => <TokenListItem className=\"token-list-editor__item\" key={i.address} name={i.name} contractAddress={i.address}\n        ticker={i.ticker} iconSrc={i.iconSrc} handleDelete={handleDelete} />)}\n    </ul>\n\n    {unSelectedItems.length > 0 && <Dropdown trigger={['click']} overlay={menu} placement=\"bottomCenter\">\n      <Button className=\"token-list-editor__add-button\" icon={<PlusOutlined />}>\n        {servicesLangResources.editing.addCurrency}\n      </Button>\n    </Dropdown>}\n  </>;\n};\n","import { Button, Checkbox, Input } from 'antd';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nimport { ServiceLinkHelper, Service, ServiceOperationType, ServiceSigningKey } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { selectCurrentAccount } from '../../../../store/accounts/selectors';\nimport { createService, updateService } from '../../../../store/services/slice';\nimport { ServiceLinksEditor } from '../../../common/ServiceLinks';\nimport { useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { View } from '../../View';\nimport { TokensEditor } from './TokensEditor';\n\nimport './ServiceEditForm.scss';\n\ninterface ServiceEditFormProps {\n  service: Service;\n  isCreateMode: boolean;\n  readOnly: boolean;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceEditForm = (props: ServiceEditFormProps) => {\n  const navigate = useNavigate();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const currentAccount = useAppSelector(selectCurrentAccount);\n\n  const dispatch = useAppDispatch();\n\n  const handleCancelClick = useCallback(() => {\n    navigate(config.routers.service(props.service.contractAddress));\n  }, [navigate, props.service.contractAddress]);\n\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [name, setName] = useState(props.service.name);\n  const [description, setDescription] = useState(props.service.description);\n  const [links, setLinks] = useState(props.service.links);\n  const [allowedTokens, setAllowedTokens] = useState(props.service.allowedTokens);\n\n  const validate = useCallback(() => {\n    const isValid = !!name\n      && links.every(l => !!serviceLinkHelper.getLinkInfo(l))\n      && (allowedTokens.tez || allowedTokens.assets.length > 0);\n\n    setIsFormValid(isValid);\n  }, [allowedTokens.assets.length, allowedTokens.tez, links, name]);\n\n  useEffect(() => validate(), [validate]);\n\n  const handleNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setDescription(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleLinksChange = useCallback((e: { value: string[] }) => {\n    setLinks(e.value);\n    validate();\n  }, [validate]);\n\n  const [acceptPayments, setAcceptPayments] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Payment);\n  const [acceptDonations, setAcceptDonations] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Donation);\n\n  const handleAllowedTokensChange = useCallback((allowedTokens: Service['allowedTokens']) => {\n    setAllowedTokens(allowedTokens);\n    validate();\n  }, [validate]);\n\n  const handleAcceptPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptPayments(e.target.checked);\n    if (!e.target.checked && !acceptDonations) {\n      setAcceptDonations(true);\n    }\n  }, [acceptDonations]);\n\n  const handleDonationsPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptDonations(e.target.checked);\n    if (!e.target.checked && !acceptPayments) {\n      setAcceptPayments(true);\n    }\n  }, [acceptPayments]);\n\n  const handleUpdateClick = useCallback(() => {\n    const allowedOperationType = acceptPayments && acceptDonations\n      ? ServiceOperationType.All\n      : acceptPayments\n        ? ServiceOperationType.Payment\n        : ServiceOperationType.Donation;\n\n    const isNewService = props.isCreateMode && !!currentAccount;\n    const updatedService: Service = {\n      ...props.service,\n      name,\n      description,\n      allowedOperationType,\n      allowedTokens,\n      links,\n      signingKeys: isNewService\n        ? new Map<ServiceSigningKey['publicKey'], ServiceSigningKey>().set(currentAccount.publicKey, { publicKey: currentAccount.publicKey })\n        : props.service.signingKeys,\n      network: isNewService ? currentAccount.network : props.service.network\n    };\n\n    if (props.isCreateMode) {\n      dispatch(createService(updatedService));\n    } else {\n      dispatch(updateService(updatedService));\n    }\n\n    handleCancelClick();\n  }, [acceptDonations, acceptPayments, allowedTokens, currentAccount, description, dispatch, handleCancelClick, links, name, props.isCreateMode, props.service]);\n\n  const operationName = props.isCreateMode ? servicesLangResources.editing.createService : servicesLangResources.editing.updateService;\n\n  return <>\n    <View.Title>{operationName}</View.Title>\n    <div className=\"service-edit\">\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.serviceName}</span>\n      <Input readOnly={props.readOnly} placeholder={servicesLangResources.editing.serviceName} value={name} onChange={handleNameChange} />\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.description}</span>\n      <Input.TextArea readOnly={props.readOnly} rows={5} placeholder={servicesLangResources.editing.description} value={description} onChange={handleDescriptionChange} />\n      <div className=\"service-edit__lists-container\">\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.allowedCurrencies}</span>\n          <TokensEditor allowedTokens={allowedTokens} onChange={handleAllowedTokensChange} />\n        </div>\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.links}</span>\n          <ServiceLinksEditor readOnly={props.readOnly} value={links as string[]} onChange={handleLinksChange} />\n        </div>\n      </div>\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.accept}</span>\n      <div className=\"service-edit__accept-list\">\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptPayments} onChange={handleAcceptPaymentsChange}>\n          {servicesLangResources.editing.acceptPayments}\n        </Checkbox>\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptDonations} onChange={handleDonationsPaymentsChange}>\n          {servicesLangResources.editing.acceptDonations}\n        </Checkbox>\n      </div>\n      <div className=\"service-edit__buttons-container\">\n        <Button className=\"service-edit__button\" onClick={handleCancelClick}>{commonLangResources.cancel}</Button>\n        <Button className=\"service-edit__button\" onClick={handleUpdateClick} disabled={!isFormValid || props.readOnly} type=\"primary\">{operationName}</Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const ServiceEditFormPure = React.memo(ServiceEditForm);\n","import React from 'react';\n\nimport { tezosMeta, Token, Service } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../../store/services/selectors';\nimport { TokenList } from '../../../../common';\nimport { useAppSelector } from '../../../../hooks';\n\nimport './Tokens.scss';\n\ninterface TokensProps {\n  service: Service\n}\n\nexport const Tokens = ({ service }: TokensProps) => {\n  const tokens = useAppSelector(selectTokensState);\n  const allowedTokens: Token[] = [];\n  service?.allowedTokens.assets.forEach(a => {\n    const token = tokens.get(a);\n    if (token) {\n      allowedTokens.push(token);\n    }\n  });\n\n  const tokenItems = [];\n  if (service?.allowedTokens.tez) {\n    tokenItems.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      className=\"service-token-list-item\"\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightPlus />);\n  }\n\n  allowedTokens.forEach(t => {\n    if (t.metadata) {\n      tokenItems.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={t.contractAddress}\n        className=\"service-token-list-item\"\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        iconSrc={t.metadata.thumbnailUri}\n        highlightPlus />);\n    }\n  });\n\n  return <TokenList>\n    {tokenItems}\n  </TokenList>;\n};\n\nexport const TokensPure = React.memo(Tokens);\n","import React from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { ServiceLinks } from '../../../common/ServiceLinks';\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { TokensPure } from './Tokens';\n\nimport './ViewZone.scss';\n\ninterface ViewZoneProps {\n  service: Service;\n}\n\nexport const ViewZone = ({ service }: ViewZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return <div className=\"service-view-zone\">\n    <p className=\"service-view-zone__description\">{service.description}</p>\n    <div className=\"service-view-zone__lists-container\">\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.allowedCurrencies}</span>\n        <TokensPure service={service} />\n      </div>\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.links}</span>\n        <ServiceLinks className=\"service-info__links\" links={service.links} />\n      </div>\n    </div>\n  </div>;\n};\n\nexport const ViewZonePure = React.memo(ViewZone);\n","import { Skeleton } from 'antd';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { emptyService, Service as ServiceInterface, combineClassNames } from '@tezospayments/common';\n\nimport { selectPendingOperationsByService, selectServicesState } from '../../../store/services/selectors';\nimport { useAppSelector, useQuery } from '../../hooks';\nimport { View } from '../View';\nimport { ActionsZonePure } from './ActionsZone';\nimport { DangerZonePure } from './DangerZone';\nimport { DevZonePure } from './DevZone';\nimport { HeaderPure } from './Header';\nimport { ServiceEditFormPure } from './ServiceEditForm';\nimport { ViewZonePure } from './ViewZone';\n\nimport './Service.scss';\n\nexport enum ServiceViewMode {\n  ViewAndEdit, Create\n}\n\ninterface ServiceProps {\n  mode: ServiceViewMode,\n}\n\nexport const Service = (props: ServiceProps) => {\n  const query = useQuery();\n  const isEdit = !!query.get('edit');\n  const { address } = useParams<{ address: string }>() as { address: string };\n  const { services, initialized: isInitialized } = useAppSelector(selectServicesState);\n  const pendingOperationsByService = useAppSelector(selectPendingOperationsByService);\n  const isUpdating = pendingOperationsByService.has(address);\n  const readOnly = !!pendingOperationsByService.size;\n  const isCreateMode = props.mode === ServiceViewMode.Create;\n\n  //TODO: Use Map\n  const service = isCreateMode ? { ...emptyService } as ServiceInterface : services.filter(s => s.contractAddress === address)[0];\n\n  const title = isInitialized && service ? service.name : address;\n  const className = combineClassNames('service-container', isEdit || isCreateMode ? 'service-container_edit' : 'service-container_view');\n\n  return <View title={title} className={className}>\n    {!isInitialized || !service\n      ? <Skeleton active />\n      : isEdit || isCreateMode\n        ? <ServiceEditFormPure service={service} isCreateMode={isCreateMode} readOnly={readOnly} />\n        : <>\n          <HeaderPure service={service} isUpdating={isUpdating} readOnly={readOnly} />\n          <ViewZonePure service={service} />\n          <ActionsZonePure service={service} readOnly={isUpdating || service.deleted} />\n          <DevZonePure service={service} readOnly={readOnly} />\n          <DangerZonePure service={service} readOnly={readOnly} />\n        </>}\n  </View>;\n};\n\nexport const ServicePure = React.memo(Service);\n","import { useLocation } from 'react-router-dom';\n\nexport const useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n","import { GlobalOutlined, GithubFilled, TwitterCircleFilled, RedditCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { TelegramIcon } from '../../../assets/icons';\nimport { config } from '../../../config';\nimport { ExternalLink } from '../../common';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport './About.scss';\n\nexport const About = () => {\n  const langResources = useCurrentLanguageResources();\n  const aboutLangResources = langResources.views.about;\n\n  return <View title={aboutLangResources.title} className=\"about-view\">\n    <View.Title className=\"about-view__title\">{aboutLangResources.detailedTitle}</View.Title>\n    <div className=\"about-view__version-info\">\n      <ExternalLink href={config.app.version.link}>\n        {config.app.version.name}\n      </ExternalLink>\n      &nbsp;{aboutLangResources.build}&nbsp;\n      <ExternalLink href={config.app.buildInfo.link}>\n        {config.app.buildInfo.commitShortSha}\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__links\">\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.webSite}>\n        <GlobalOutlined className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.gitHub}>\n        <GithubFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.telegram}>\n        <TelegramIcon className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.twitter}>\n        <TwitterCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.reddit}>\n        <RedditCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__powered-by\">\n      {aboutLangResources.poweredBy}\n      &nbsp;\n      <ExternalLink href={config.links.tzKT}>\n        {aboutLangResources.tzKt}\n      </ExternalLink>\n      &nbsp;\n      {aboutLangResources.api}\n    </div>\n  </View>;\n};\n\nexport const AboutPure = React.memo(About);\n","import { Button, Dropdown, Menu } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Network, networks, networksCollection } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { connectAccount } from '../../../../store/accounts/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './ConnectDropdown.scss';\n\nexport const ConnectDropdown = () => {\n  const dispatch = useAppDispatch();\n  const handleConnectButtonClick = useCallback(() => {\n    dispatch(connectAccount(networks.hangzhounet));\n  }, [dispatch]);\n\n  const handleMenuItemButtonClick = useCallback((e: { key: string }) => {\n    const selectedNetwork = networksCollection.find(n => n.id === e.key);\n    if (selectedNetwork) {\n      dispatch(connectAccount(selectedNetwork));\n    }\n  }, [dispatch]);\n\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const networkTypes: Network[] = [];\n  const connectMenuItems = networkTypes.map(t => {\n    const network = config.tezos.networks[t.name];\n\n    return <Menu.Item key={t.id}>\n      <div className=\"connect-dropdown__item-container\">\n        <div className=\"connect-dropdown__item-icon-container\">\n          <div className=\"connect-dropdown__item-icon\" style={{ backgroundColor: network.color }}></div>\n        </div>\n        <div className=\"connect-dropdown__item-text\">{`${connectLangResources.connectTo} ${network.title}`}</div>\n      </div>\n    </Menu.Item>;\n  });\n\n  const connectMenu = (\n    <Menu onClick={handleMenuItemButtonClick}>\n      {connectMenuItems}\n    </Menu>\n  );\n\n  const connectButtonTitle = `${connectLangResources.connectTo} ${config.tezos.networks.hangzhounet.title}`;\n\n  return connectMenuItems.length\n    ? <Dropdown.Button className=\"connect-dropdown\" type=\"primary\" onClick={handleConnectButtonClick} overlay={connectMenu}>\n      {connectButtonTitle}\n    </Dropdown.Button>\n    : <Button type=\"primary\" onClick={handleConnectButtonClick}>{connectButtonTitle}</Button>;\n};\n\nexport const ConnectDropdownPure = React.memo(ConnectDropdown);\n","import React from 'react';\nimport { Navigate } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { selectCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { ConnectDropdownPure } from './ConnectDropdown';\nimport './Connect.scss';\n\nexport const Connect = () => {\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const currentAccount = useAppSelector(selectCurrentAccount);\n  if (currentAccount) {\n    return <Navigate to={config.routers.overview} />;\n  }\n\n  return <View title=\"Connect\" className=\"connect\">\n    <div className=\"connect-info-container\">\n      <div className=\"connect-info-container__message\">{connectLangResources.description}</div>\n      <ConnectDropdownPure />\n    </div>\n  </View >;\n};\nexport const ConnectPure = React.memo(Connect);\n","import { InputNumber, Select } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta, Token } from '@tezospayments/common';\n\nimport './PaymentAmount.scss';\nimport { selectServicesState, selectTokensState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\ninterface DonationAmountProps {\n  serviceAddress: string | undefined;\n  amount: string;\n  onAmountChange: (rawValue: string) => void;\n  asset: string | undefined;\n  onAssetChange: (ticker: string) => void;\n}\n\nexport const PaymentAmount = (props: DonationAmountProps) => {\n  const services = useAppSelector(selectServicesState);\n  const service = services.services.find(s => s.contractAddress === props.serviceAddress);\n  const tokens = useAppSelector(selectTokensState);\n  const assets: Array<{ label: string; value: string; imageUrl: string }> = [];\n\n  if (service) {\n    const allowedTokens: Token[] = [];\n    service.allowedTokens.assets.forEach(a => {\n      const token = tokens.get(a);\n      if (token) {\n        allowedTokens.push(token);\n      }\n    });\n\n    if (service.allowedTokens.tez) {\n      assets.push({ label: tezosMeta.symbol, value: '', imageUrl: tezosMeta.thumbnailUri });\n    }\n    allowedTokens.forEach(t => t.metadata && assets.push({ label: t.metadata.symbol, value: t.contractAddress, imageUrl: t.metadata.thumbnailUri }));\n  }\n\n  const options = assets.map(a => <Select.Option key={a.label} value={a.value} label={a.label}>\n    <div className=\"payment-amount__select-option\">\n      <img className=\"payment-amount__select-option-image\" alt={a.label} src={a.imageUrl} />\n      <span className=\"payment-amount__select-option-label\">{a.label}</span>\n    </div>\n  </Select.Option>);\n\n  const disabled = assets.length === 0;\n\n  return <div className=\"payment-amount\">\n    <Select className=\"payment-amount__select\" value={props.asset || ''} onChange={props.onAssetChange} disabled={disabled}>\n      {options}\n    </Select>\n    <InputNumber\n      className=\"payment-amount__input\"\n      stringMode\n      min={'0'}\n      value={props.amount.toString()}\n      onChange={props.onAmountChange}\n      disabled={disabled} />\n  </div>;\n};\n\nexport const PaymentAmountPure = React.memo(PaymentAmount);\n","import { Input, Radio, RadioChangeEvent, Select } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { PaymentType } from '@tezospayments/common';\n\nimport { selectPendingOperationsByService, selectSortedServices } from '../../../../store/services/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { PaymentAmountPure } from '../PaymentAmount';\n\nimport './AcceptPaymentsSettings.scss';\n\ninterface AcceptPaymentsSettingsProps {\n  serviceAddress: string | undefined;\n  onServiceAddressChange: (value: SelectValue) => void;\n\n  paymentType: PaymentType;\n  onPaymentTypeChange: (e: RadioChangeEvent) => void;\n\n  amount: string;\n  onAmountChange: (rawValue: string) => void;\n\n  asset: string | undefined;\n  onAssetChange: (rawValue: string | undefined) => void;\n\n  paymentId: string;\n  onPaymentIdChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\n  donationDescription: string;\n  onDonationDescriptionChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\n}\n\nexport const AcceptPaymentsSettings = (props: AcceptPaymentsSettingsProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const serviceLangResources = langResources.views.services;\n  const pendingOperationsByService = useSelector(selectPendingOperationsByService);\n\n  const services = useAppSelector(selectSortedServices);\n  const serviceOptions = services.filter(s => !s.deleted).map(service => ({\n    label: service.name,\n    value: service.contractAddress,\n    disabled: pendingOperationsByService.has(service.contractAddress)\n  }));\n\n  const typeOptions = [\n    { label: 'Payment', value: PaymentType.Payment },\n    { label: 'Donation', value: PaymentType.Donation },\n  ];\n\n  return <div className=\"accept-payments-settings\">\n    <span className=\"accept-payments-settings__caption\">{serviceLangResources.service}</span>\n    <Select\n      className=\"accept-payments-settings__service-select\"\n      options={serviceOptions}\n      value={props.serviceAddress}\n      onChange={props.onServiceAddressChange}\n    />\n\n    <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.type}</span>\n    <Radio.Group\n      className=\"accept-payments-settings__type-select\"\n      optionType=\"button\"\n      buttonStyle=\"outline\"\n      options={typeOptions}\n      value={props.paymentType}\n      onChange={props.onPaymentTypeChange}\n    />\n\n    {props.paymentType === PaymentType.Payment\n      ? <>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.amount}</span>\n        <PaymentAmountPure serviceAddress={props.serviceAddress} amount={props.amount} onAmountChange={props.onAmountChange}\n          asset={props.asset} onAssetChange={props.onAssetChange} />\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.paymentData}</span>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.paymentId}</span>\n        <Input className=\"accept-payments-settings__payment-id-input\" value={props.paymentId} onChange={props.onPaymentIdChange} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.paymentIdHelpText}</span>\n      </>\n      : <>\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.donationData}</span>\n        <span className=\"accept-payments-settings__description-caption\">{acceptPaymentsLangResources.donationDescription}</span>\n        <Input.TextArea className=\"accept-payments-settings__description-input\" value={props.donationDescription} onChange={props.onDonationDescriptionChange}\n          showCount rows={5} maxLength={250} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.donationDescriptionHelpText}</span>\n      </>}\n  </div>;\n};\n\nexport const AcceptPaymentsSettingsPure = React.memo(AcceptPaymentsSettings);\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { internal as tezosPaymentsInternal } from 'tezospayments';\n\nimport { Donation, Payment, PaymentType, networks } from '@tezospayments/common';\n\nimport { config } from '../../../../../config';\nimport { selectCurrentAccount } from '../../../../../store/accounts/selectors';\nimport { ExternalLink } from '../../../../common';\nimport { useAppSelector, useCurrentLanguageResources, useTezosPayments } from '../../../../hooks';\n\nimport './DirectLinkGenerator.scss';\n\ninterface DirectLinkGeneratorProps {\n  paymentOrDonation: Payment | Donation;\n  serviceAddress: string | undefined;\n}\n\nconst base64PaymentUrlFactory = new tezosPaymentsInternal.paymentUrlFactories.Base64PaymentUrlFactory(\n  config.links.tezosPayments.paymentsApp\n);\n\nexport const DirectLinkGenerator = ({ paymentOrDonation, serviceAddress }: DirectLinkGeneratorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const currentAccount = useAppSelector(selectCurrentAccount);\n  const tezosPayments = useTezosPayments(serviceAddress);\n\n  const [url, setUrl] = useState('');\n\n  const getPaymentLink = useCallback(\n    async () => {\n      const network = currentAccount?.network || networks[config.tezos.defaultNetwork];\n\n      if (paymentOrDonation.type === PaymentType.Donation)\n        return base64PaymentUrlFactory.createPaymentUrl(paymentOrDonation, network);\n\n      if (!tezosPayments)\n        return '';\n\n      try {\n        const payment = await tezosPayments.createPayment({\n          id: paymentOrDonation.id,\n          amount: paymentOrDonation.amount.toString(),\n          asset: paymentOrDonation.asset,\n          created: Date.now(),\n          data: paymentOrDonation.data,\n        });\n\n        return payment.url;\n      }\n      catch (e) {\n        console.error(e);\n        return '';\n      }\n    }, [currentAccount?.network, paymentOrDonation, tezosPayments]\n  );\n\n  useEffect(() => {\n    (async () => {\n      setUrl(paymentOrDonation.type === PaymentType.Payment ? '' : await getPaymentLink());\n    })();\n  }, [getPaymentLink, paymentOrDonation]);\n\n  const helpText = paymentOrDonation.type === PaymentType.Payment\n    ? acceptPaymentsLangResources.directLinkPaymentHelpText\n    : acceptPaymentsLangResources.directLinkDonationHelpText;\n\n  const handleGenerateAndSignClick = useCallback(() => {\n    (async () => {\n      setUrl(await getPaymentLink());\n    })();\n  }, [getPaymentLink]);\n\n  const handleCopyClick = useCallback(() => {\n    navigator.clipboard.writeText(url);\n  }, [url]);\n\n  return <div className=\"generator__direct-link\">\n    {url && <span className=\"generator__direct-link-help-text\">{helpText}</span>}\n    <ExternalLink className=\"generator__direct-link-link\" href={url}>{url}</ExternalLink>\n    <div className=\"generator__direct-link-buttons\">\n      {!url && <Button type=\"primary\" onClick={handleGenerateAndSignClick}>{acceptPaymentsLangResources.generateAndSignPaymentLink}</Button>}\n      {url && <Button onClick={handleCopyClick} icon={<CopyOutlined />}>{commonLangResources.copyLink}</Button>}\n    </div>\n  </div >;\n};\n\nexport const DirectLinkGeneratorPure = React.memo(DirectLinkGenerator);\n","import React from 'react';\n\nimport { FailedValidationResults } from '@tezospayments/common';\n\nimport './FailedValidationResult.scss';\nimport { useCurrentLanguageResources } from '../../../../hooks';\n\ninterface FailedValidationResultProps {\n  results: FailedValidationResults\n}\n\nexport const FailedValidationResult = (_props: FailedValidationResultProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n\n  return <div className=\"failed-validation-result\">\n    {acceptPaymentsLangResources.errors.fillRequiredData}\n  </div>;\n};\n\nexport const FailedValidationResultPure = React.memo(FailedValidationResult);\n","import { Card } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport React from 'react';\n\nimport { Donation, Payment, PaymentType } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../store/services/selectors';\nimport { useAppSelector, useTezosPayments } from '../../../hooks';\nimport { DirectLinkGeneratorPure } from './DirectLinkGenerator';\nimport { FailedValidationResult } from './FailedValidationResult';\nimport './Generator.scss';\n\ninterface GeneratorProps {\n  serviceAddress: string | undefined;\n  paymentType: PaymentType;\n  assetAddress: string | undefined;\n  amount: string;\n  paymentId: string;\n  clientData: Record<string, unknown> | undefined;\n}\n\nexport const Generator = (props: GeneratorProps) => {\n  const tokens = useAppSelector(selectTokensState);\n  const tezosPayments = useTezosPayments(props.serviceAddress);\n  const currentAssetToken = props.assetAddress ? tokens.get(props.assetAddress) : undefined;\n\n  const tabList = [\n    { key: 'widget', tab: 'Widget', disabled: true },\n    { key: 'typescript', tab: 'TypeScript Library', disabled: true },\n    { key: 'dotnet', tab: '.NET Library', disabled: true },\n  ] as Array<{ key: string, tab: string, disabled?: boolean }>;\n\n  if (tezosPayments) {\n    tabList.splice(0, 0, { key: 'directLink', tab: 'Direct Link' });\n  }\n\n  const paymentOrDonation = props.paymentType === PaymentType.Payment\n    ? {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n      id: props.paymentId,\n      asset: currentAssetToken ? {\n        address: currentAssetToken.contractAddress,\n        decimals: currentAssetToken.metadata?.decimals || 0,\n        id: currentAssetToken.type === 'fa2' ? currentAssetToken.id : null\n      } : undefined,\n      amount: new BigNumber(props.amount),\n      created: new Date(),\n      signature: {\n        signingPublicKey: 'edpkuWJYhY5TVZ6xaoubNkidXArJmVhjA2yuZZuucEN6FF4fQeV9Dd',\n        contract: 'edsigtaNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNog2Ndso',\n      }\n    } as Payment\n    : {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n      data: props.clientData\n    } as Donation;\n\n  const failedValidationResults = paymentOrDonation.type === PaymentType.Payment\n    ? Payment.validate(paymentOrDonation)\n    : Donation.validate(paymentOrDonation);\n\n  return <Card\n    className=\"generator\"\n    style={{ width: '100%' }}\n    tabList={tabList}\n    activeTabKey={'directLink'}\n  >\n    {failedValidationResults\n      ? <FailedValidationResult results={failedValidationResults} />\n      : <DirectLinkGeneratorPure paymentOrDonation={paymentOrDonation} serviceAddress={props.serviceAddress} />}\n  </Card >;\n};\n\nexport const GeneratorPure = React.memo(Generator);\n","import { RadioChangeEvent, Skeleton } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport BigNumber from 'bignumber.js';\nimport React, { useCallback, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { PaymentType, tezosMeta } from '@tezospayments/common';\n\nimport { selectServicesState, selectTokensState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { AcceptPaymentsSettings } from './AcceptPaymentsSettings';\nimport { GeneratorPure } from './Generator';\n\nimport './AcceptPayments.scss';\n\nexport const AcceptPayments = () => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const servicesState = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(selectTokensState);\n\n  const { address: addressFromUrl } = useParams<{ address: string }>();\n  const [serviceAddress, setServiceAddress] = useState<string | undefined>(addressFromUrl);\n  const [paymentType, setPaymentType] = useState<PaymentType>(PaymentType.Payment);\n  const [amount, setAmount] = useState<string>('');\n\n  const getDefaultAsset = useCallback((serviceAddress: string | undefined) => {\n    const service = servicesState.services.filter(s => s.contractAddress === serviceAddress)[0];\n\n    return service\n      ? service.allowedTokens.tez ? undefined : service.allowedTokens.assets[0]\n      : undefined;\n  }, [servicesState.services]);\n\n  const [asset, setAsset] = useState<string | undefined>(getDefaultAsset(serviceAddress));\n  const [paymentId, setPaymentId] = useState<string>('');\n  const [clientData, setClientData] = useState<Record<string, string>>();\n\n  const decimals = asset ? tokens.get(asset)?.metadata?.decimals || 0 : tezosMeta.decimals;\n\n  const handleServiceAddressChange = useCallback((value: SelectValue) => {\n    const service = value as string;\n    setServiceAddress(service);\n    setAsset(getDefaultAsset(service));\n  }, [getDefaultAsset]);\n\n  const handlePaymentTypeChange = useCallback((e: RadioChangeEvent) => {\n    setPaymentType(e.target.value);\n  }, []);\n\n  const handleAmountChange = useCallback((rawValue: string) => {\n    const formattedValue = rawValue ? new BigNumber(rawValue).toFormat(decimals, { groupSeparator: '', decimalSeparator: '.' }) : '';\n    setAmount(formattedValue);\n  }, [decimals]);\n\n  const handleAssetChange = useCallback((rawValue: string | undefined) => {\n    setAsset(rawValue || undefined);\n    setAmount('');\n  }, []);\n\n  const handlePaymentIdChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPaymentId(e.target.value);\n  }, []);\n\n  const handleDonationDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setClientData({ description: e.target.value });\n  }, []);\n\n  return <View title={acceptPaymentsLangResources.title}>\n    <View.Title>{acceptPaymentsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"accept-payments\">\n          <div className=\"accept-payments__settings\">\n            <AcceptPaymentsSettings\n              serviceAddress={serviceAddress} onServiceAddressChange={handleServiceAddressChange}\n              paymentType={paymentType} onPaymentTypeChange={handlePaymentTypeChange}\n              amount={amount} onAmountChange={handleAmountChange}\n              asset={asset} onAssetChange={handleAssetChange}\n              paymentId={paymentId} onPaymentIdChange={handlePaymentIdChange}\n              donationDescription={clientData?.description || ''} onDonationDescriptionChange={handleDonationDescriptionChange}\n            />\n          </div>\n          <div className=\"accept-payments__generator\">\n            <GeneratorPure\n              serviceAddress={serviceAddress}\n              paymentType={paymentType}\n              assetAddress={asset}\n              amount={amount}\n              paymentId={paymentId}\n              clientData={clientData}\n            />\n          </div>\n        </div>}\n  </View >;\n};\n\nexport const AcceptPaymentsPure = React.memo(AcceptPayments);\n","import React from 'react';\n\nimport { OperationType } from '@tezospayments/common';\n\nimport { LineColor } from '../../../../../models/charts';\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectMaxTransactionChartData, selectOperationsState } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface MaxTransactionProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n}\n\nexport const MaxTransaction = (props: MaxTransactionProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const dataSource = useAppSelector((state: AppState) => selectMaxTransactionChartData(state, props.operationType, props.period));\n  const title = props.operationType === OperationType.Donation ? analyticsLangResources.maximumDonation : analyticsLangResources.maximumPayment;\n\n  const option: React.ComponentProps<typeof ChartPure>['option'] = {\n    dataset: {\n      dimensions: ['day', { name: 'max', displayName: analyticsLangResources.currency.usd }],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    legend: {\n      selectedMode: false\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [{ type: 'line', color: LineColor.Blue }]\n  };\n\n  return <ChartPure className={props.className} title={title} option={option} loading={!isInitialized} />;\n};\n\nexport const MaxTransactionPure = React.memo(MaxTransaction);\n","import React from 'react';\n\nimport { OperationType } from '@tezospayments/common';\n\nimport { LineColor } from '../../../../../models/charts';\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectNewSendersCountChartData, selectOperationsState } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface NewSendersProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n}\n\nexport const NewSenders = (props: NewSendersProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const dataSource = useAppSelector((state: AppState) => selectNewSendersCountChartData(state, props.operationType, props.period));\n  const title = props.operationType === OperationType.Donation ? analyticsLangResources.newDonators : analyticsLangResources.newCustomers;\n\n  const option: React.ComponentProps<typeof ChartPure>['option'] = {\n    dataset: {\n      dimensions: ['day', { name: 'newSendersCount', displayName: title }],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    legend: {\n      selectedMode: false\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [{ type: 'line', color: LineColor.Blue }]\n  };\n\n  return <ChartPure className={props.className} title={title} option={option} loading={!isInitialized} />;\n};\n\nexport const NewSendersPure = React.memo(NewSenders);\n","import React from 'react';\n\nimport { LineColor } from '../../../../../models/charts';\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectOperationsState, selectProfitChartData } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface ProfitProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n}\n\nexport const Profit = (props: ProfitProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const dataSource = useAppSelector((state: AppState) => selectProfitChartData(state, props.operationType, props.period));\n\n  const option: React.ComponentProps<typeof ChartPure>['option'] = {\n    dataset: {\n      dimensions: ['day', { name: 'profit', displayName: analyticsLangResources.currency.usd }],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    legend: {\n      selectedMode: false\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [{ type: 'line', color: LineColor.Blue }]\n  };\n\n  return <ChartPure className={props.className} title={analyticsLangResources.profit} option={option} loading={!isInitialized} />;\n};\n\nexport const ProfitPure = React.memo(Profit);\n","import React from 'react';\n\nimport { OperationType } from '@tezospayments/common';\n\nimport { Period } from '../../../../models/system';\nimport { MaxTransactionPure } from '../Charts/MaxTransaction';\nimport { NewSendersPure } from '../Charts/NewSenders';\nimport { OperationsCountByTokensPure } from '../Charts/OperationsCountByTokens';\nimport { ProfitPure } from '../Charts/Profit';\n\ninterface DonationsProps {\n  period: Period;\n}\n\nexport const Donations = (props: DonationsProps) => {\n  const operationType = OperationType.Donation;\n\n  return <div className=\"analytics\">\n    <ProfitPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <OperationsCountByTokensPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <NewSendersPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <MaxTransactionPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n  </div>;\n};\n\nexport const DonationsPure = React.memo(Donations);\n","import { Radio, RadioChangeEvent, Select } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { AnalyticsView, Language, Period } from '../../../../models/system';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './Header.scss';\n\ninterface HeaderProps {\n  view: AnalyticsView;\n  onViewChange: (value: AnalyticsView) => void;\n  period: Period;\n  onPeriodChange: (value: Period) => void;\n}\n\nconst getViewText = (view: AnalyticsView, langResources: Language['resources']) => {\n  switch (view) {\n    case AnalyticsView.Services:\n      return langResources.views.analytics.view.services;\n    case AnalyticsView.Donations:\n      return langResources.views.analytics.view.donations;\n    default:\n      throw new Error(`Unsupported view type: ${view}`);\n  }\n};\n\nconst getPeriodText = (period: Period, langResources: Language['resources']) => {\n  switch (period) {\n    case Period.All:\n      return langResources.common.period.allTime;\n    case Period.LastWeek:\n      return langResources.common.period.lastWeek;\n    case Period.LastMonth:\n      return langResources.common.period.lastMonth;\n    case Period.LastYear:\n      return langResources.common.period.lastYear;\n    default:\n      throw new Error(`Unsupported period type: ${period}`);\n  }\n};\n\nconst periodOptionsValues = Object.keys(Period).map(k => Number(k)).filter(k => !isNaN(k));\nconst viewOptionsValues = Object.keys(AnalyticsView).map(k => Number(k)).filter(k => !isNaN(k));\n\nexport const Header = (props: HeaderProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n\n  const handleViewChange = useCallback((e: RadioChangeEvent) => {\n    props.onViewChange(e.target.value);\n  }, [props]);\n\n  const handlePeriodChange = useCallback((value: Period) => {\n    props.onPeriodChange(value);\n  }, [props]);\n\n  const periodOptions = periodOptionsValues\n    .map(k => <Select.Option key={k} value={k}>{getPeriodText(k, langResources)}</Select.Option>);\n\n  const viewOptions = viewOptionsValues\n    .map(k => <Radio.Button key={k} value={k}>{getViewText(k, langResources)}</Radio.Button>);\n\n  return <div className=\"analytics-header\">\n    <h1 className=\"analytics-header__title\">{analyticsLangResources.title}</h1>\n    <div className=\"analytics-header__selector-container\">\n      <Select className=\"analytics-header__period\" value={props.period} onChange={handlePeriodChange}>\n        {periodOptions}\n      </Select>\n      <Radio.Group value={props.view} onChange={handleViewChange} >\n        {viewOptions}\n      </Radio.Group>\n    </div>\n  </div>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","import React from 'react';\n\nimport { LineColor } from '../../../../../models/charts';\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectOperationsCountByTypesChartData, selectOperationsState } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface OperationsCountByTypesProps {\n  period: Period;\n  operationType: ChartOperationType;\n  className?: string;\n}\n\ntype ChartOptions = React.ComponentProps<typeof ChartPure>['option'];\n\nexport const OperationsCountByTypes = (props: OperationsCountByTypesProps) => {\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n\n  const dataSource = useAppSelector((state: AppState) => selectOperationsCountByTypesChartData(state, props.operationType, props.period));\n\n  const option: ChartOptions = {\n    dataset: {\n      dimensions: [\n        'day',\n        { name: 'incoming', displayName: analyticsLangResources.success },\n        { name: 'outgoing', displayName: analyticsLangResources.refund },\n        { name: 'failed', displayName: analyticsLangResources.failed },\n      ],\n      source: dataSource\n    },\n    tooltip: {\n      trigger: 'axis'\n    },\n    xAxis: {\n      type: 'category',\n    },\n    yAxis: {\n      type: 'value'\n    },\n    series: [\n      {\n        type: 'bar',\n        color: LineColor.Green,\n        stack: 'main-stack',\n      },\n      {\n        type: 'bar',\n        color: LineColor.Yellow,\n        stack: 'main-stack',\n      },\n      {\n        type: 'bar',\n        color: LineColor.Red,\n        stack: 'main-stack',\n      }\n    ]\n  };\n\n  return <ChartPure className={props.className} title={analyticsLangResources.operationsCountByTypes} option={option} loading={!isInitialized} />;\n};\n\nexport const OperationsCountByTypesPure = React.memo(OperationsCountByTypes);\n","import React from 'react';\n\nimport { OperationDirection } from '@tezospayments/common';\n\nimport { ChartOperationType, Period } from '../../../../../models/system';\nimport { AppState } from '../../../../../store';\nimport { selectOperationsState, selectProfitByTokensChartData, } from '../../../../../store/operations/selectors';\nimport { ChartPure } from '../../../../common/Chart';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\ninterface VolumeByTokensProps {\n  period: Period;\n  operationType: ChartOperationType;\n  operationDirection: OperationDirection;\n  className?: string;\n}\n\nexport const VolumeByTokens = (props: VolumeByTokensProps) => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const isInitialized = useAppSelector(selectOperationsState).initialized;\n  const dataSource = useAppSelector((state: AppState) => selectProfitByTokensChartData(state, props.operationType, props.period, props.operationDirection));\n  const title = props.operationDirection === OperationDirection.Incoming ? analyticsLangResources.incoming : analyticsLangResources.outgoing;\n\n  const option: React.ComponentProps<typeof ChartPure>['option'] = {\n    tooltip: {\n      trigger: 'item'\n    },\n    legend: {\n      orient: 'vertical',\n    },\n    toolbox: undefined,\n    series: [\n      {\n        name: title,\n        type: 'pie',\n        radius: ['40%', '80%'],\n        avoidLabelOverlap: false,\n        label: {\n          show: false,\n          position: 'center'\n        },\n        emphasis: {\n          label: {\n            show: true,\n            fontSize: 30\n          }\n        },\n        data: dataSource\n      }\n    ]\n  };\n\n  return <ChartPure className={props.className} title={`${title} (${analyticsLangResources.currency.usd})`} option={option} loading={!isInitialized} />;\n};\n\nexport const VolumeByTokensPure = React.memo(VolumeByTokens);\n","import React from 'react';\n\nimport { OperationDirection, OperationType } from '@tezospayments/common';\n\nimport { Period } from '../../../../models/system';\nimport { NewSendersPure } from '../Charts/NewSenders';\nimport { OperationsCountByTokensPure } from '../Charts/OperationsCountByTokens';\nimport { OperationsCountByTypesPure } from '../Charts/OperationsCountByTypes';\nimport { ProfitPure } from '../Charts/Profit';\nimport { VolumePure } from '../Charts/Volume';\nimport { VolumeByTokensPure } from '../Charts/VolumeByTokens';\n\ninterface ServicesProps {\n  period: Period;\n}\n\nexport const Services = (props: ServicesProps) => {\n  const operationType = OperationType.Payment;\n\n  return <div className=\"analytics\">\n    <ProfitPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <VolumePure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <VolumeByTokensPure className=\"analytics__chart\" period={props.period} operationType={operationType} operationDirection={OperationDirection.Incoming} />\n    <VolumeByTokensPure className=\"analytics__chart\" period={props.period} operationType={operationType} operationDirection={OperationDirection.Outgoing} />\n    <OperationsCountByTokensPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <OperationsCountByTypesPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n    <NewSendersPure className=\"analytics__chart\" period={props.period} operationType={operationType} />\n  </div>;\n};\n\nexport const ServicesPure = React.memo(Services);\n","import React, { useState, useCallback } from 'react';\n\nimport { AnalyticsView, Period } from '../../../models/system';\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { DonationsPure } from './Donations';\nimport { HeaderPure } from './Header';\nimport { ServicesPure } from './Services';\n\nimport './Analytics.scss';\n\nexport const Analytics = () => {\n  const langResources = useCurrentLanguageResources();\n  const analyticsLangResources = langResources.views.analytics;\n  const servicesState = useAppSelector(selectServicesState);\n\n  const [view, setView] = useState(AnalyticsView.Services);\n  const handleViewChange = useCallback((value: AnalyticsView) => {\n    setView(value);\n  }, []);\n\n  const [period, setPeriod] = useState(Period.LastWeek);\n  const handlePeriodChange = useCallback((value: Period) => {\n    setPeriod(value);\n  }, []);\n\n  return <View title={analyticsLangResources.title} className=\"overview\">\n    <HeaderPure view={view} onViewChange={handleViewChange} period={period} onPeriodChange={handlePeriodChange} />\n    {servicesState.initialized && !servicesState.services.length\n      ? <NoServicesCreatedPure />\n      : view === AnalyticsView.Services\n        ? <ServicesPure period={period} />\n        : <DonationsPure period={period} />}\n  </View>;\n};\n\nexport const AnalyticsPure = React.memo(Analytics);\n","import { StateModel, Network } from '@tezospayments/common';\n\nexport interface Account {\n  readonly address: string;\n  readonly publicKey: string;\n  readonly network: Network;\n}\n\nexport class Account extends StateModel {\n  static getShortAddress(account: Account) {\n    return `${account.address.substr(0, 9)}...${account.address.substr(account.address.length - 6, 6)}`;\n  }\n}\n","import React from 'react';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\n\nimport './AccountNetworkGroup.scss';\n\ninterface AccountNetworkGroupProps {\n  network: Network;\n}\n\nexport const AccountNetworkGroup = (props: AccountNetworkGroupProps) => {\n  const network = config.tezos.networks[props.network.name];\n\n  return <div className=\"account-network-group\">\n    <div className=\"account-network-group__icon-container\">\n      <div className=\"account-network-group__icon\" style={{ backgroundColor: network.color }}></div>\n    </div>\n    <div>{network.title}</div>\n  </div>;\n};\n\nexport const AccountNetworkGroupPure = React.memo(AccountNetworkGroup);\n","import { blue } from '@ant-design/colors';\nimport { ArrowRightOutlined, CopyOutlined, LogoutOutlined, LoginOutlined, UserOutlined } from '@ant-design/icons';\nimport { Dropdown, Button, Menu } from 'antd';\nimport React, { useCallback } from 'react';\nimport './AccountDropdown.scss';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { Account } from '../../../models/blockchain';\nimport { selectAccountsByNetwork, selectCurrentAccount, selectCurrentNetworkConfig } from '../../../store/accounts/selectors';\nimport { disconnectAccount } from '../../../store/accounts/slice';\nimport { useAppContext, useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { AccountNetworkGroupPure } from './AccountNetworkGroup';\n\nexport const AccountDropDown = () => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const actionsLangResources = langResources.views.header.accountActions;\n\n  const accountsByNetwork = useAppSelector(selectAccountsByNetwork);\n  const currentAccount = useAppSelector(selectCurrentAccount);\n  const currentAccountAddress = currentAccount?.address || '';\n  const currentNetworkConfig = useAppSelector(selectCurrentNetworkConfig);\n  const currentExplorer = currentNetworkConfig && currentNetworkConfig.explorers[currentNetworkConfig.default.explorer];\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(currentAccountAddress);\n  }, [currentAccountAddress]);\n\n  const handleViewOnExplorerClick = useCallback(() => {\n    if (currentExplorer) {\n      window.open(appContext.tezosExplorer.getAccountUrl(currentAccountAddress), '_blank');\n    }\n  }, [appContext.tezosExplorer, currentAccountAddress, currentExplorer]);\n\n  const dispatch = useAppDispatch();\n  const handleDisconnectButtonClick = useCallback(() => {\n    dispatch(disconnectAccount());\n  }, [dispatch]);\n\n  if (!currentAccount) {\n    return null;\n  }\n\n  const connectedAccounts = [...accountsByNetwork.keys()].map(k =>\n    <Menu.ItemGroup key={k.id} title={<AccountNetworkGroupPure network={k} />}>\n      {accountsByNetwork.get(k)?.map(a =>\n        <Menu.Item\n          key={a.address}\n          icon={<UserOutlined />}\n          className={combineClassNames('account-menu-item', { 'account-menu-item_selected': a.address === currentAccount.address })}\n          style={a.address !== currentAccount.address ? undefined : {\n            backgroundColor: blue[0],\n            color: blue.primary\n          }}\n        >\n          {a.address}\n        </Menu.Item>\n      )}\n    </Menu.ItemGroup>\n  );\n\n  const menu = <Menu>\n    {connectedAccounts}\n    <Menu.Divider />\n    <Menu.Item key={1} icon={<CopyOutlined />} onClick={handleCopyAddressClick}>\n      {actionsLangResources.copyAddress.title}\n    </Menu.Item>\n    <Menu.Item key={2} icon={<ArrowRightOutlined />} onClick={handleViewOnExplorerClick}>\n      {`${actionsLangResources.viewOn} ${currentExplorer?.title}`}\n    </Menu.Item>\n    <Menu.Item key={3} icon={<LoginOutlined />}>\n      {`${actionsLangResources.connectAnotherAccount.title} (${langResources.common.comingSoon.toLowerCase()})`}\n    </Menu.Item>\n    <Menu.Divider />\n    <Menu.Item key={5} icon={<LogoutOutlined />} onClick={handleDisconnectButtonClick}>\n      {actionsLangResources.disconnect.title}\n    </Menu.Item>\n  </Menu >;\n\n  return <Dropdown overlay={menu} placement=\"bottomRight\">\n    <Button style={{ borderColor: blue.primary, color: blue.primary }} className=\"account-dropdown\">{Account.getShortAddress(currentAccount)}</Button>\n  </Dropdown >;\n};\n\nexport const AccountDropDownPure = React.memo(AccountDropDown);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { selectCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector } from '../../hooks';\nimport { AccountDropDownPure } from './../AccountDropdown';\n\nimport './Header.scss';\n\nexport const Header = () => {\n  const currentAccount = useAppSelector(selectCurrentAccount);\n\n  return <header className=\"header\">\n    <Link className=\"header__title\" to={config.routers.overview}>{config.app.title}</Link>\n    {currentAccount && <AccountDropDownPure />}\n  </header>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","import {\n  SettingOutlined, DashboardOutlined, UnorderedListOutlined, ProfileOutlined,\n  InfoCircleOutlined, BarChartOutlined\n} from '@ant-design/icons';\nimport { Menu, Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport './NavBar.scss';\n\nexport const NavBar = () => {\n  const location = useLocation();\n  const langResources = useCurrentLanguageResources();\n  const viewsLangResources = langResources.views;\n  const navigate = useNavigate();\n\n  const handleCreateServiceClick = useCallback(() => {\n    navigate(config.routers.createService);\n  }, [navigate]);\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    navigate(config.routers.acceptPayments);\n  }, [navigate]);\n\n  return <nav className=\"navbar\">\n    <Menu className=\"navbar__menu\" mode=\"inline\" selectedKeys={[location.pathname]}>\n      <Menu.Item key={config.routers.overview} icon={<DashboardOutlined />}>\n        <Link to={config.routers.overview}>{viewsLangResources.overview.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.analytics} icon={<BarChartOutlined />}>\n        <Link to={config.routers.analytics}>{viewsLangResources.analytics.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.operations} icon={<UnorderedListOutlined />}>\n        <Link to={config.routers.operations}>{viewsLangResources.operations.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.services} icon={<ProfileOutlined />}>\n        <Link to={config.routers.services}>{viewsLangResources.services.title}</Link>\n      </Menu.Item>\n      <Menu.Item key=\"settings\" icon={<SettingOutlined />} disabled>{viewsLangResources.settings.title}</Menu.Item >\n      <Menu.Item key={config.routers.about} icon={<InfoCircleOutlined />}>\n        <Link to={config.routers.about}>{viewsLangResources.about.title}</Link>\n      </Menu.Item>\n    </Menu>\n\n    <div className=\"navbar__bottom-buttons\">\n      <Button onClick={handleCreateServiceClick}>{viewsLangResources.createService.title}</Button>\n      <Button onClick={handleAcceptPaymentsClick} type=\"primary\">{viewsLangResources.acceptPayments.title}</Button>\n    </div>\n  </nav>;\n};\n\nexport const NavBarPure = React.memo(NavBar);\n","import { message } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { PendingOperationStatus } from '../../../store/services/slice';\n\nexport const Notifications = () => {\n  const { services, pendingOperations } = useSelector(selectServicesState);\n\n  useEffect(() => {\n    pendingOperations.forEach(operation => {\n      const service = services.find(s => s.contractAddress === operation.serviceAddress);\n\n      const content = <span><b>{operation.action}</b>{service && <> for service: <b>{`${service.name}`}</b></>}</span>;\n      const key = operation.hash;\n\n      switch (operation.status) {\n        case PendingOperationStatus.loading: {\n          const confirmations = `${operation.confirmationCount} / ${operation.targetConfirmationCount}`;\n          message.loading({ content: <span>Executing operation: {content} ({confirmations})</span>, key, duration: 0 });\n          break;\n        }\n\n        case PendingOperationStatus.success:\n          message.success({ content: <span>Finished operation: {content}</span>, key, duration: 4 });\n          break;\n\n        case PendingOperationStatus.error:\n          message.error({ content: <span>Failed operation: {content}</span>, key, duration: 4 });\n          break;\n      }\n    });\n  }, [pendingOperations, services]);\n\n  return null;\n};\n\nexport const NotificationsPure = React.memo(Notifications);\n","import { Skeleton } from 'antd';\nimport { useEffect } from 'react';\nimport { Routes, Route } from 'react-router-dom';\n\nimport { config } from '../../config';\nimport { selectAccountsState } from '../../store/accounts/selectors';\nimport { loadActiveAccount } from '../../store/accounts/slice';\nimport { RequireConnectionContainer } from '../common';\nimport { useAppDispatch, useAppSelector } from '../hooks';\nimport { OverviewPure, ConnectPure, OperationsPure, ServicePure, ServicesPure, AboutPure } from '../views';\nimport { AcceptPaymentsPure } from '../views/AcceptPayments';\nimport { AnalyticsPure } from '../views/Analytics';\nimport { ServiceViewMode } from '../views/Service/Service';\nimport { HeaderPure } from './Header';\nimport { NavBarPure } from './NavBar';\nimport { NotificationsPure } from './Notifications';\n\nimport 'antd/dist/antd.css';\nimport './App.scss';\n\nconst acceptServicePaymentsNestedPath = config.routers.acceptServicePayments.template.substring(\n  config.routers.acceptServicePayments.template.indexOf(config.routers.acceptPayments)\n);\n\nexport const App = () => {\n  const initialized = useAppSelector(selectAccountsState).initialized;\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(loadActiveAccount());\n  }, [dispatch]);\n\n  return <div className=\"main-container\">\n    <NotificationsPure />\n    <HeaderPure />\n    <NavBarPure />\n    {!initialized\n      ? <Skeleton />\n      : <Routes>\n        {/* Private Routes */}\n        <Route path={config.routers.overview}\n          element={<RequireConnectionContainer>\n            <OverviewPure />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.analytics}\n          element={<RequireConnectionContainer>\n            <AnalyticsPure />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.operations}\n          element={<RequireConnectionContainer>\n            <OperationsPure />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.createService}\n          element={<RequireConnectionContainer>\n            <ServicePure mode={ServiceViewMode.Create} />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.service.template}\n          element={<RequireConnectionContainer>\n            <ServicePure mode={ServiceViewMode.ViewAndEdit} />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.services}\n          element={<RequireConnectionContainer>\n            <ServicesPure />\n          </RequireConnectionContainer>}\n        />\n        <Route path={config.routers.acceptPayments}>\n          <Route path=\"\"\n            element={<RequireConnectionContainer>\n              <AcceptPaymentsPure />\n            </RequireConnectionContainer>}\n          />\n          <Route path={acceptServicePaymentsNestedPath}\n            element={<RequireConnectionContainer>\n              <AcceptPaymentsPure />\n            </RequireConnectionContainer>}\n          />\n        </Route>\n        {/* Public Routes */}\n        <Route path={config.routers.about} element={<AboutPure />} />\n        <Route path={config.routers.connect} element={<ConnectPure />} />\n      </Routes>\n    }\n    {/* <FooterPure /> */}\n  </div>;\n};\n","import { useState, useEffect, useCallback } from 'react';\n\nimport type { Network, PublicEventEmitter } from '@tezospayments/common';\n\nimport { ReactAppContext } from '../../app';\n\ninterface AppContextProviderProps {\n  getReactAppContext: () => ReactAppContext;\n  networkChangedEvent: PublicEventEmitter<readonly [newNetwork: Network, previousNetwork: Network]>;\n  children: React.ReactNode;\n}\n\nexport const AppContextProvider = ({ getReactAppContext, networkChangedEvent, children }: AppContextProviderProps) => {\n  const [currentValue, setCurrentValue] = useState<ReactAppContext>(getReactAppContext());\n\n  const handleNetworkChanged = useCallback(\n    () => setCurrentValue(getReactAppContext()),\n    [getReactAppContext]\n  );\n\n  useEffect(\n    () => {\n      networkChangedEvent.addListener(handleNetworkChanged);\n\n      return () => {\n        networkChangedEvent.removeListener(handleNetworkChanged);\n      };\n    },\n    [networkChangedEvent, handleNetworkChanged]\n  );\n\n  return <ReactAppContext.Provider value={currentValue}>\n    {children}\n  </ReactAppContext.Provider>;\n};\n\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers, EnhancedStore } from '@reduxjs/toolkit';\n\nimport { accountsSlice } from './accounts/slice';\nimport { balancesSlice } from './balances/slice';\nimport { operationsSlice } from './operations/slice';\nimport { servicesSlice } from './services/slice';\nimport { AppThunkDispatch } from './thunk';\n\nexport const appReducer = combineReducers({\n  accountsState: accountsSlice.reducer,\n  servicesState: servicesSlice.reducer,\n  balancesState: balancesSlice.reducer,\n  operationsState: operationsSlice.reducer,\n});\n\nexport type AppStore = EnhancedStore<AppState> & { dispatch: AppThunkDispatch };\nexport type AppState = ReturnType<typeof appReducer>;\nexport type AppDispatch = AppStore['dispatch'];\n","import { configureStore, isPlain } from '@reduxjs/toolkit';\nimport { BigNumber } from 'bignumber.js';\nimport { enableMapSet } from 'immer';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { BrowserRouter } from 'react-router-dom';\n\nimport { WebApp } from './app';\nimport { App } from './components/App';\nimport { AppContextProvider } from './components/AppContextProvider';\nimport { AppConfig, config } from './config';\nimport reportWebVitals from './reportWebVitals';\nimport { appReducer } from './store';\nimport './index.scss';\n\nenableMapSet();\n\nconst webApp = new WebApp(app => configureStore({\n  reducer: appReducer,\n  devTools: {\n    serialize: true\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: app,\n      },\n      serializableCheck: {\n        isSerializable: (value: unknown) => isPlain(value)\n          || value instanceof Map\n          || value instanceof Set\n          || BigNumber.isBigNumber(value)\n          || value instanceof Date,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        getEntries: (value: any) => value instanceof Map || value instanceof Set\n          ? [...value.entries()]\n          : Object.entries(value)\n      }\n    })\n}));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={webApp.store}>\n      <BrowserRouter>\n        <AppContextProvider getReactAppContext={() => webApp.reactAppContext} networkChangedEvent={webApp.networkChanged} >\n          <App />\n        </AppContextProvider>\n      </BrowserRouter>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n(window as unknown as { webApp: WebApp }).webApp = webApp;\n(window as unknown as { config: AppConfig }).config = config;\n\nreportWebVitals();\n","import { ColorMode } from '@airgap/beacon-sdk';\nimport { BeaconWallet } from '@taquito/beacon-wallet';\nimport { TezosToolkit } from '@taquito/taquito';\n\nimport { EventEmitter, Network, networks, PublicEventEmitter, ReadOnlySigner } from '@tezospayments/common';\nimport {\n  ServicesProvider, TzKTDataProvider, BetterCallDevDataProvider,\n  BlockchainUrlExplorer, TzStatsBlockchainUrlExplorer, BetterCallDevBlockchainUrlExplorer, TzKTBlockchainUrlExplorer, TezosNodeDataProvider\n} from '@tezospayments/react-web-core';\n\nimport { config } from '../config';\nimport type { Account } from '../models/blockchain';\nimport { AccountsService } from '../services/accountsService';\nimport { ServicesService } from '../services/servicesService';\nimport { AppStore } from '../store';\nimport { selectCurrentAccount } from '../store/accounts/selectors';\nimport { clearBalances, loadBalances } from '../store/balances/slice';\nimport { clearServices, loadServices } from '../store/services/slice';\nimport type { ReactAppContext } from './reactAppContext';\n\ninterface AppServices {\n  readonly accountsService: AccountsService;\n  readonly servicesService: ServicesService;\n}\n\nexport class WebApp {\n  readonly store: AppStore;\n  readonly tezosWallet = new BeaconWallet({ name: config.app.name, colorMode: ColorMode.LIGHT });\n  readonly networkChanged: PublicEventEmitter<readonly [newNetwork: Network, previousNetwork: Network]> = new EventEmitter();\n\n  private readonly onStoreChangedListener = this.onStoreChanged.bind(this);\n  private readonly unsubscribeStoreChanged: (() => void);\n\n  private _network: Network | undefined;\n  private _tezosToolkit: TezosToolkit | undefined;\n  private _services: AppServices | undefined;\n  private _reactAppContext: ReactAppContext | undefined;\n  private currentAccountAddress: string | null;\n\n  constructor(storeFactory: (app: WebApp) => AppStore) {\n    this.store = storeFactory(this);\n    this.applyNetwork(networks[config.tezos.defaultNetwork]);\n\n    this.currentAccountAddress = null;\n    this.unsubscribeStoreChanged = this.store.subscribe(this.onStoreChangedListener);\n  }\n\n  get network() {\n    if (!this._network)\n      throw this.getNetworkError();\n    return this._network;\n  }\n\n  get tezosToolkit() {\n    if (!this._tezosToolkit)\n      throw this.getNetworkError();\n    return this._tezosToolkit;\n  }\n\n  get services() {\n    if (!this._services)\n      throw this.getNetworkError();\n    return this._services;\n  }\n\n  get reactAppContext() {\n    if (!this._reactAppContext)\n      throw this.getNetworkError();\n    return this._reactAppContext;\n  }\n\n  protected onStoreChanged() {\n    const appState = this.store.getState();\n    const currentAccountFromState = selectCurrentAccount(appState);\n    const currentAccountAddressFromState = currentAccountFromState && currentAccountFromState.address;\n\n    if (currentAccountAddressFromState !== this.currentAccountAddress) {\n      this.currentAccountAddress = currentAccountAddressFromState;\n      this.clearAccountData();\n\n      if (currentAccountFromState) {\n        if (currentAccountFromState.network !== this.network)\n          this.applyNetwork(currentAccountFromState.network);\n\n        this.fetchAccountData(currentAccountFromState);\n      }\n    }\n  }\n\n  protected async fetchAccountData(account: Account) {\n    await this.store.dispatch(loadServices(account));\n    await this.store.dispatch(loadBalances(account));\n  }\n\n  protected async clearAccountData() {\n    await Promise.all([\n      this.store.dispatch(clearBalances()),\n      this.store.dispatch(clearServices()),\n    ]);\n  }\n\n  protected applyNetwork(network: Network) {\n    this._network = network;\n\n    const networkConfig = config.tezos.networks[this.network.name];\n    this._tezosToolkit = new TezosToolkit(networkConfig.rpcUrls[networkConfig.default.rpc]);\n    this.tezosToolkit.setSignerProvider(new ReadOnlySigner());\n    this.tezosToolkit.setWalletProvider(this.tezosWallet);\n\n    this._services = this.createServices();\n    this._reactAppContext = this.createReactAppContext();\n\n    (this.networkChanged as EventEmitter<readonly [newNetwork: Network, previousNetwork: Network]>).emit(this._network, network);\n  }\n\n  private createServices(): AppServices {\n    const networkConfig = config.tezos.networks[this.network.name];\n    const servicesProvider = this.createServicesProvider(this.network);\n    const balancesProvider = new TezosNodeDataProvider(this.tezosToolkit);\n\n    return {\n      accountsService: new AccountsService(this.tezosWallet.client, balancesProvider),\n      servicesService: new ServicesService(\n        this.tezosToolkit,\n        servicesProvider,\n        networkConfig.servicesFactoryContractAddress\n      )\n    };\n  }\n\n  private createReactAppContext(): ReactAppContext {\n    return {\n      tezosWallet: this.tezosWallet,\n      tezosExplorer: this.createTezosBlockchainUrlExplorer(this.network)\n    };\n  }\n\n  private createServicesProvider(network: Network): ServicesProvider {\n    const networkConfig = config.tezos.networks[network.name];\n    const indexerName = networkConfig.default.indexer;\n\n    switch (indexerName) {\n      case 'tzKT':\n        return new TzKTDataProvider(network, networkConfig.indexerUrls.tzKT, networkConfig.servicesFactoryContractAddress, networkConfig.minimumSupportedServiceVersion);\n      case 'betterCallDev':\n        return new BetterCallDevDataProvider(network, networkConfig.indexerUrls.betterCallDev, networkConfig.servicesFactoryContractAddress, networkConfig.minimumSupportedServiceVersion);\n      default:\n        throw new Error('Unknown service provider');\n    }\n  }\n\n  private createTezosBlockchainUrlExplorer(network: Network): BlockchainUrlExplorer {\n    const networkConfig = config.tezos.networks[network.name];\n    const explorerName = networkConfig.default.explorer;\n\n    switch (explorerName) {\n      case 'tzKT':\n        return new TzKTBlockchainUrlExplorer(network, networkConfig.explorers.tzKT.baseUrl);\n      case 'tzStats':\n        return new TzStatsBlockchainUrlExplorer(network, networkConfig.explorers.tzStats.baseUrl);\n      case 'betterCallDev':\n        return new BetterCallDevBlockchainUrlExplorer(network, networkConfig.explorers.betterCallDev.baseUrl);\n      default:\n        throw new Error('Unknown blockchain explorer');\n    }\n  }\n\n  private getNetworkError() {\n    return new Error('Network is not defined');\n  }\n}\n"],"sourceRoot":""}