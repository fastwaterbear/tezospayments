{"version":3,"sources":["services/servicesService.ts","../../src/utils/base64.ts","../../src/utils/converters.ts","../../src/utils/guards.ts","../../src/utils/memoize.ts","../../src/utils/optimization.ts","../../src/utils/text.ts","../../src/utils/index.ts","../../src/helpers/serviceLinkHelper.ts","../../src/models/payment/paymentBase.ts","../../src/helpers/paymentValidator/paymentValidatorBase.ts","../../src/models/blockchain/network.ts","../../src/models/blockchain/token.ts","../../src/models/blockchain/tezosInfo.ts","../../src/models/blockchain/keyType.ts","../../src/native/index.ts","../../src/helpers/paymentValidator/validationMethods.ts","../../src/helpers/paymentValidator/paymentValidator.ts","../../src/helpers/paymentValidator/donationValidator.ts","../../src/models/core/stateModel.ts","../../src/serialization/base64/objectSerializationValidator.ts","../../src/serialization/base64/base64Serializer.ts","../../src/serialization/base64/base64Deserializer.ts","../../src/serialization/payment/serializedPaymentFieldTypes.ts","../../src/serialization/payment/paymentSerializer.ts","../../src/serialization/payment/paymentDeserializer.ts","../../src/serialization/payment/legacyPaymentDeserializer.ts","../../src/serialization/donation/serializedDonationFieldTypes.ts","../../src/serialization/donation/donationSerializer.ts","../../src/serialization/donation/donationDeserializer.ts","../../src/serialization/donation/legacyDonationDeserializer.ts","../../src/models/payment/payment.ts","../../src/models/payment/donation.ts","../../src/models/payment/paymentUrlType.ts","../../src/models/routing/parameterizedRoute.ts","../../src/models/service/serviceOperationType.ts","../../src/models/service/service.ts","../../src/models/service/serviceOperation.ts","../../src/models/service/serviceOperationDirection.ts","../../src/models/service/serviceOperationStatus.ts","../../config/defaultConfig.ts","../../explorers/blockchainUrlExplorer.ts","../../explorers/tzKTBlockchainUrlExplorer.ts","../../explorers/betterCallDevUrlBlockchainExplorer.ts","../../explorers/tzStatsBlockchainUrlExplorer.ts","../../../../src/providers/tzKTDataProvider/tzKTDataProvider.ts","../../../../src/providers/betterCallDevDataProvider/betterCallDevDataProvider.ts","../../utils/converters.ts","config/config.ts","services/accountsService.ts","app/reactAppContext.ts","store/accounts/selectors.ts","store/services/selectors.ts","store/balances/slice.ts","store/operations/slice.ts","store/services/slice.ts","store/accounts/slice.ts","localization/en-US/index.ts","localization/en-US/common/index.ts","localization/en-US/views/header.ts","localization/en-US/views/overview.ts","localization/en-US/views/createService.ts","localization/en-US/views/connect.ts","localization/en-US/views/about.ts","localization/en-US/views/operations.ts","localization/en-US/views/services.ts","localization/en-US/views/settings.ts","localization/en-US/views/acceptPayments.ts","components/hooks/useCurrentLanguage.tsx","components/hooks/reduxHooks.ts","components/hooks/useAppContext.tsx","components/common/PrivateRoute.tsx","components/common/TokenList/TokenList.tsx","components/common/ExplorerLink/ExplorerLink.tsx","components/common/ExternalLink.tsx","components/common/NoServicesCreated/NoServicesCreated.tsx","components/views/View/ViewTitle.tsx","components/views/View/View.tsx","components/hooks/useViewTitle.tsx","components/views/Overview/LargeCards/OperationCountChart.tsx","components/views/Overview/LargeCards/VolumeChart.tsx","store/balances/selectors.ts","components/views/Overview/SmallCards/Balances.tsx","components/views/Overview/SmallCards/Incoming.tsx","components/views/Overview/SmallCards/Outgoing.tsx","components/views/Overview/Overview.tsx","store/operations/selectors.ts","components/common/OperationList/OperationIcon.tsx","components/common/OperationList/OperationList.tsx","components/views/Operations/NoOperationsPerformed/NoOperationsPerformed.tsx","components/views/Operations/Operations.tsx","components/views/Services/ServiceCards/NewServiceCard.tsx","components/common/Tags/ActiveTag/ActiveTag.tsx","components/common/Tags/CustomTag/CustomTag.tsx","components/views/Services/ServiceCards/ServiceCard.tsx","components/views/Services/Services.tsx","components/views/Service/ActionsZone/ActionsZone.tsx","components/views/Service/DangerZone/DangerZone.tsx","components/views/Service/DevZone/AddApiKeyModal/AddApiKeyModal.tsx","components/views/Service/DevZone/ApiKeyList/ApiKeyList.tsx","components/views/Service/DevZone/DevZone.tsx","components/views/Service/Header/Header.tsx","assets/icons/telegram.svg","components/common/ServiceLinks/iconIdMap.ts","components/common/ServiceLinks/ServiceLink.tsx","components/common/ServiceLinks/ServiceLinks.tsx","components/common/ServiceLinks/ServiceLinkEditor.tsx","components/common/ServiceLinks/ServiceLinksEditor.tsx","components/views/Service/Tokens/Tokens.tsx","components/views/Service/ServiceEditForm/ServiceEditForm.tsx","components/views/Service/ViewZone/ViewZone.tsx","components/views/Service/Service.tsx","components/hooks/useQuery.tsx","components/views/About/About.tsx","components/views/Connect/ConnectDropdown/ConnectDropdown.tsx","components/views/Connect/Connect.tsx","components/views/AcceptPayments/PaymentAmount/PaymentAmount.tsx","components/views/AcceptPayments/AcceptPaymentsSettings/AcceptPaymentsSettings.tsx","../../src/constants.ts","../../src/errors.ts","../../src/paymentUrlFactories/paymentUrlFactory.ts","../../src/paymentUrlFactories/base64PaymentUrlFactory.ts","../../src/models.ts","../../src/signers/tezosPaymentsSigner.ts","../../src/signers/apiSecretKeySigner.ts","../../src/signers/walletSigner.ts","../../src/signers/customSigner.ts","../../src/tezosPayments.ts","../../src/validationErrors.ts","../../src/index.ts","components/views/AcceptPayments/Generator/DirectLinkGenerator/DirectLinkGenerator.tsx","components/views/AcceptPayments/Generator/FailedValidationResult/FailedValidationResult.tsx","components/views/AcceptPayments/Generator/Generator.tsx","components/views/AcceptPayments/AcceptPayments.tsx","models/blockchain/account.ts","components/App/AccountDropdown/AccountNetworkGroup/AccountNetworkGroup.tsx","components/App/AccountDropdown/AccountDropdown.tsx","components/App/Header/Header.tsx","components/App/NavBar/NavBar.tsx","components/App/Notifications/Notifications.tsx","components/App/App.tsx","reportWebVitals.ts","store/index.ts","index.tsx","app/webApp.ts"],"names":["ServicesService","constructor","tezosToolkit","servicesProvider","servicesFactoryContractAddress","account","this","getServices","address","serviceContractAddress","getService","getOperations","service","serviceContract","getServiceContract","contractAddress","encodedServiceMetadata","encodeMetadata","methods","update_service_parameters","allowedTokens","tez","assets","allowedOperationType","send","paused","set_pause","deleted","set_deleted","factoryContract","contract","at","factoryStorage","storage","factoryImplementationContract","getFactoryImplementationContract","factory_implementation","create_service","MichelsonMap","addApiKey","signingKey","signingKeyUpdatesMap","set","publicKey","public_key","name","updateSigningKeys","deleteApiKey","undefined","update_signing_keys","serviceMetadata","links","length","description","iconUrl","Buffer","from","JSON","stringify","toString","wallet","isBase64UrlFormatSupported","decode","base64String","format","base64UrlPreprocessor","encode","value","encodedValue","prepareEncodedValue","base64value","prepareValueForDecoding","Error","stringToUint8Array","hex","integers","val","parseInt","Uint8Array","stringToBytes","bytesToString","BigInt","isPlainObject","isPlainObjectLodashFunction","arg","Array","defaultEqualityCheck","a","areArgumentsShallowlyEqual","prev","next","i","equalityCheck","memoize","lastArgs","lastResult","func","emptyObject","stringPad","string","fillString","String","stringLength","maxLength","fillLength","filler","Math","isStart","padStart","result","j","isWord","wait","ms","Promise","resolve","setTimeout","IconId","prepareFormattedLink","link","prepareDisplayLink","socialMediaLinkInfoProvider","formattedLink","rawLink","displayLink","icon","emailCheckingRegEx","urlSchemeRegEx","ServiceLinkHelper","getLinkInfo","isEditMode","linkInfo","provider","linkInfoIsValid","Common","editLinkInfoProvider","PaymentType","getInvalidLinkInfo","preparedFormattedLink","Email","PaymentValidatorBase","validate","payment","bail","guards","currentFailedValidationResults","validationMethod","failedValidationResults","networksInternal","granadanet","id","networks","networksCollection","Object","networkIdRegExp","networkNameRegExp","tezosMeta","tokenWhitelistMap","Map","tokenWhitelist","token","contractAddressPrefixes","implicitAddressPrefixes","tezosInfo","addressLength","addressPrefixes","KeyType","URL","NodeURL","globalThis","validateTargetAddress","targetAddress","errors","prefix","validateAmount","BigNumber","amount","validateAsset","asset","validateUrl","url","isFlatObject","obj","property","PaymentValidator","validateId","key","publicData","data","privateData","validateData","date","isNaN","validateCreatedDate","expiredDate","createdDate","validateExpiredDate","invalidPaymentObject","invalidType","invalidTargetAddress","targetAddressIsNotNetworkAddress","targetAddressHasInvalidLength","invalidId","emptyId","invalidAmount","amountIsNonPositive","invalidData","invalidPublicData","invalidPrivateData","publicDataShouldBeFlat","privateDataShouldBeFlat","invalidAsset","assetIsNotContractAddress","assetHasInvalidLength","invalidSuccessUrl","successUrlHasInvalidProtocol","invalidCancelUrl","cancelUrlHasInvalidProtocol","invalidCreatedDate","invalidExpiredDate","paymentLifetimeIsShort","invalidUrl","invalidProtocol","DonationValidator","donation","validateDesiredAmount","desiredAmount","invalidDonationObject","StateModel","ObjectSerializationValidator","objectFieldTypes","count","info","type","fieldNames","fieldName","fieldValue","actualFieldType","expectedFieldType","expectedType","Base64Serializer","fieldTypes","serialize","objectSerializationValidator","jsonString","base64","Base64Deserializer","deserialize","serializedValue","serializedValueString","serializedPaymentFieldTypes","legacySerializedPaymentFieldTypes","PaymentSerializer","serializedPayment","mapPaymentToSerializedPayment","d","as","su","cu","c","e","PaymentDeserializer","serializedPaymentBase64","mapSerializedPaymentToPayment","successUrl","cancelUrl","created","Date","expired","nonSerializedPaymentSlice","LegacyPaymentDeserializer","serializedDonationFieldTypes","legacySerializedDonationFieldTypes","DonationSerializer","serializedDonation","mapDonationToSerializedDonation","serializedDonationBase64","da","das","DonationDeserializer","mapSerializedDonationToDonation","desiredAsset","nonSerializedDonationSlice","LegacyDonationDeserializer","Payment","defaultValidator","isLegacy","publicDataExistsInternal","paymentOrPaymentDataOrPaymentData","Donation","PaymentUrlType","encodedPaymentUrlTypeMap","text","getParameterizedRoute","factory","ServiceOperationType","emptyService","optimization","version","metadata","emptyArray","owner","network","signingKeys","emptyMap","ServiceOperation","operation","valueString","converters","ServiceOperationDirection","ServiceOperationStatus","commitShortSha","process","config","defaultConfig","app","publicUrl","title","buildInfo","routers","overview","operations","services","createService","acceptPayments","acceptServicePayments","connect","about","tzKT","AccountsService","dAppClient","requestPermissions","networkToBeaconNetwork","then","permissions","catch","console","error","clearActiveAccount","disconnect","activeAccount","getActiveAccount","beaconNetworkToNetwork","tz","getBalance","getTokenFA12Balance","getTokenFA2Balance","toNumber","views","read","token_id","fa2TokenId","balance","ReactAppContext","React","createContext","selectAccountsState","state","accountsState","getCurrentAccount","createSelector","currentAccount","connectedAccounts","find","getAccountsByNetwork","reduce","p","get","getCurrentNetworkConfig","tezos","selectTokensState","_state","selectServicesState","servicesState","getAllAcceptedTokens","tokensState","Set","forEach","s","assetAddress","add","getAcceptTezos","some","getSortedServices","sort","b","localeCompare","getOperationsByService","operationsMap","pendingOperations","op","serviceAddress","push","initialState","tokens","initialized","namespace","loadBalances","createAsyncThunk","async","extra","getState","accountsService","getTezosBalance","acceptedTokens","balancesPromises","map","t","getTokenBalance","all","balancesSlice","createSlice","reducers","clearBalances","extraReducers","builder","addCase","fulfilled","action","payload","actions","loadOperations","servicesAddresses","operationsPromises","servicesService","flat","operationsSlice","clearOperations","PendingOperationStatus","loadServices","dispatch","updateService","waitOperationConfirmation","reloadServices","setPaused","setDeleted","clearServices","_","operationName","confirmationsNumber","pendingOperation","hash","targetConfirmationCount","confirmationCount","status","loading","createPendingOperation","opHash","addPendingOperation","reject","confirmationObservable","subscribe","confirmation","setPendingOperationConfirmationCount","currentConfirmation","setPendingOperationStatus","deletePendingOperation","success","servicesSlice","o","filter","loadActiveAccount","connectAccount","disconnectAccount","accountsSlice","nextAccount","enUS","resources","common","comingSoon","copy","copyLink","open","new","cancel","save","yes","no","header","accountActions","copyAddress","viewOn","connectAnotherAccount","balances","incoming","outgoing","operationCount","volume","connectTo","detailedTitle","build","poweredBy","tzKt","api","operationList","paymentData","donationData","income","expense","cancelled","pending","noOperationsPerformedYet","active","updating","createNewService","acceptPaymentsDescription","youDoNotHaveAnyServicesYet","createYourFirstService","paymentsEnabled","donationsEnabled","allowedCurrencies","dangerZone","pauseService","pauseServiceConfirmation","pauseServiceDescription","unPauseService","unPauseServiceConfirmation","unPauseServiceDescription","deleteService","deleteServiceConfirmation","deleteServiceDescription","unDeleteService","unDeleteServiceConfirmation","unDeleteServiceDescription","devZone","addKey","saveKeys","algorithm","secretKey","saveSecretKeyWarning","saveSecretKeyConfirm","noApiKeysAddedYet","deleteKeyConfirmation","editing","editService","addCurrency","addLink","serviceName","accept","acceptDonations","settings","paymentPublicData","orderId","orderIdHelpText","shortDescription","shortDescriptionHelpText","directLinkPaymentHelpText","directLinkDonationHelpText","fillRequiredData","useCurrentLanguageResources","useAppDispatch","useDispatch","useAppSelector","useSelector","useAppContext","useContext","defaultConnectPath","PrivateRoute","children","isConnected","connectPath","routeProps","props","to","pathname","location","PrivateRouteContainer","TokenList","className","Item","valueClassNames","combineClassNames","highlightSign","sign","abs","allDecimalsShown","decimals","valueSpan","toLocaleString","minimumFractionDigits","src","iconSrc","alt","ticker","ExplorerLink","appContext","commonLangResources","handleCopyAddressClick","useCallback","navigator","clipboard","writeText","href","tezosExplorer","getEntityUrl","target","rel","showCopyButton","CopyOutlined","onClick","ExplorerLinkPure","memo","ExternalLink","NoServicesCreated","servicesLangResources","history","useHistory","handleCreateServiceClick","NoServicesCreatedPure","ViewTitle","createElement","defaultProps","View","useEffect","document","Title","OperationCountChart","month","xField","yField","height","meta","alias","paragraph","rows","OperationCountChartPure","VolumeChart","quarter","sum","smooth","VolumeChartPure","selectBalancesState","balancesState","Balances","acceptTezos","items","symbol","thumbnailUri","BalancesPure","Incoming","IncomingPure","Outgoing","OutgoingPure","Overview","langResources","overviewLangResources","size","OverviewPure","getSortedOperations","operationsState","OperationIcon","operationsLangResources","isIncoming","direction","Cancelled","ArrowRightOutlined","ArrowLeftOutlined","Pending","ClockCircleTwoTone","ExclamationCircleFilled","OperationIconPure","OperationList","getShortHash","substr","accountAddress","amountClassNames","serviceLink","toFormat","colSpan","NoOperationsPerformed","NoOperationsPerformedPure","Operations","operationProps","publicPayloadExists","public","sender","OperationsPure","NewServiceCard","handleCardClick","bodyStyle","padding","PlusOutlined","NewServiceCardPure","ActiveTag","isUpdating","SyncOutlined","spin","CloseCircleOutlined","PauseCircleOutlined","CheckCircleOutlined","ActiveTagPure","CustomTag","CustomTagPure","ServiceCard","tagName","toLowerCase","logoClassName","getAvatarText","ServiceCardPure","Services","servicesCards","has","ServicesPure","ActionsZone","readOnly","handleAcceptPaymentsClick","disabled","ActionsZonePure","DangerZone","dangerZoneLangResources","handlePauseModalOkClick","handleDeleteModalOkClick","confirm","isDanger","onOk","Modal","content","okText","okType","cancelText","centered","transitionName","maskTransitionName","handlePauseClick","handleDeleteClick","danger","DangerZonePure","Search","Input","algorithmOptions","values","v","label","AddApiKeyModal","algorithmType","setAlgorithmType","useState","Ed25519","handleAlgorithmTypeChanges","setName","handleNameChanged","getKeys","publicKeyRef","useRef","secretKeyRef","handleCopyClick","ref","input","current","select","handleAddKeyConfirm","onCancel","destroyOnClose","visible","footer","placement","onConfirm","autoFocus","onChange","Group","options","enterButton","onSearch","Text","mark","AddApiKeyModalPure","Secp256k1","P256","ApiKeyList","apiKeys","useMemo","handleRemoveItem","item","bordered","apiKey","DeleteOutlined","ApiKeyListPure","DevZone","addKeyModalVisible","setAddKeyModalVisible","handleAddKeyButtonClick","handleClosePopupClick","DevZonePure","Header","arePaymentsAllowed","All","areDonationsAllowed","handleEditClick","EditFilled","HeaderPure","_g","_extends","assign","arguments","source","prototype","hasOwnProperty","call","apply","SvgTelegram","titleId","svgRef","width","viewBox","xmlns","xmlnsXlink","stroke","strokeWidth","fill","fillRule","cx","cy","r","ForwardRef","iconIdMap","LinkOutlined","MailOutlined","Telegram","TelegramIcon","Facebook","FacebookOutlined","Twitter","TwitterOutlined","Instagram","InstagramOutlined","GitHub","GithubOutlined","Reddit","RedditOutlined","serviceLinkHelper","ServiceLink","Icon","ServiceLinks","Boolean","ServiceLinkEditor","handleChange","onDelete","ServiceLinksEditor","handleDelete","splice","handleAdd","editors","l","Tokens","tokenItems","TokensPure","ServiceEditForm","handleCancelClick","isFormValid","setIsFormValid","setDescription","setLinks","isValid","every","handleNameChange","handleDescriptionChange","handleLinksChange","setAcceptPayments","setAcceptDonations","handleAcceptPaymentsChange","checked","handleDonationsPaymentsChange","handleUpdateClick","updatedService","isCreateMode","placeholder","TextArea","ServiceEditFormPure","ViewZone","ViewZonePure","ServiceViewMode","Service","isEdit","URLSearchParams","useLocation","search","useParams","isInitialized","mode","Create","ServicePure","About","aboutLangResources","tezosPayments","webSite","GlobalOutlined","gitHub","GithubFilled","telegram","twitter","TwitterCircleFilled","reddit","RedditCircleFilled","AboutPure","ConnectDropdown","handleConnectButtonClick","handleMenuItemButtonClick","selectedNetwork","n","connectLangResources","connectMenuItems","style","backgroundColor","color","connectMenu","connectButtonTitle","Button","overlay","ConnectDropdownPure","Connect","ConnectPure","PaymentAmount","imageUrl","Option","min","PaymentAmountPure","AcceptPaymentsSettings","acceptPaymentsLangResources","serviceLangResources","operationsByService","serviceOptions","typeOptions","onServiceAddressChange","optionType","buttonStyle","paymentType","onPaymentTypeChange","onAmountChange","onPublicDataChange","onDonationDataChange","showCount","defaultNetworkName","paymentAppBaseUrl","getErrorMessageByValidationErrors","validationErrors","brief","index","TezosPaymentsError","message","super","InvalidTezosPaymentsOptionsError","messageOrValidationErrors","InvalidPaymentCreateParametersError","InvalidPaymentError","UnsupportedPaymentUrlTypeError","PaymentUrlError","DonationUrlError","PaymentUrlFactory","urlType","Base64PaymentUrlFactory","baseUrl","createPaymentUrl","paymentOrDonation","createPaymentUrlInternal","createDonationUrlInternal","paymentSerializer","createUrl","donationSerializer","native","isPayment","paymentUrlType","serializedPaymentOrDonationBase64","getEncodedPaymentUrlType","constants","SigningType","TezosPaymentsSigner","signingType","ApiSecretKeySigner","apiSecretKey","_payment","WalletSigner","walletSigning","CustomSigner","customSigning","TezosPayments","validateOptions","createSigner","defaultPaymentParameters","createParameters","validateDefaultPaymentParameters","paymentWithoutUrl","createPaymentByCreateParameters","paymentValidator","paymentUrl","getPaymentUrl","applyPaymentUrl","getPaymentUrlFactory","paymentUrlFactory","paymentUrlFactories","createPaymentUrlFactory","signingOptions","nanoid","validateServiceContractAddress","validateSigningOptions","currentErrors","Base64","invalidServiceContractAddressType","serviceContractAddressHasInvalidLength","serviceContractAddressIsNotContractAddress","invalidSigningOption","invalidApiSecretKeyType","emptyApiSecretKey","invalidWalletSigningOptionType","invalidDefaultPaymentParameters","emptyNetworkName","invalidNetwork","invalidNetworkName","invalidNetworkId","invalidUrlType","internal","signers","base64PaymentUrlFactory","tezosPaymentsInternal","paymentsApp","DirectLinkGenerator","getPaymentLink","defaultNetwork","helpText","DirectLinkGeneratorPure","FailedValidationResult","_props","Generator","tabList","tab","activeTabKey","results","GeneratorPure","AcceptPayments","addressFromUrl","setServiceAddress","setPaymentType","setAmount","setPublicData","setDonationData","handleServiceAddressChange","handlePaymentTypeChange","handleAmountChange","rawValue","handlePublicDataChange","handleDonationDataChange","AcceptPaymentsPure","Account","AccountNetworkGroup","AccountNetworkGroupPure","AccountDropDown","actionsLangResources","accountsByNetwork","currentAccountAddress","currentNetworkConfig","currentExplorer","explorers","default","explorer","handleViewOnExplorerClick","window","getAccountUrl","handleDisconnectButtonClick","keys","k","ItemGroup","UserOutlined","blue","primary","menu","Divider","LoginOutlined","LogoutOutlined","borderColor","getShortAddress","AccountDropDownPure","NavBar","viewsLangResources","selectedKeys","DashboardOutlined","UnorderedListOutlined","ProfileOutlined","SettingOutlined","InfoCircleOutlined","NavBarPure","Notifications","confirmations","duration","NotificationsPure","App","exact","path","template","ViewAndEdit","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","appReducer","combineReducers","reducer","enableMapSet","webApp","storeFactory","store","reactAppContext","tezosWallet","BeaconWallet","colorMode","ColorMode","LIGHT","_network","_tezosToolkit","_services","onStoreChangedListener","onStoreChanged","bind","unsubscribeStoreChanged","createHistory","applyNetwork","createReactAppContext","getNetworkError","appState","createBrowserHistory","createTezosBlockchainUrlExplorer","networkConfig","TezosToolkit","rpcUrls","rpc","setWalletProvider","createServicesProvider","client","indexer","TzKTDataProvider","indexerUrls","BetterCallDevDataProvider","betterCallDev","TzKTBlockchainUrlExplorer","TzStatsBlockchainUrlExplorer","tzStats","BetterCallDevBlockchainUrlExplorer","configureStore","devTools","middleware","getDefaultMiddleware","thunk","extraArgument","serializableCheck","isSerializable","isPlain","isBigNumber","getEntries","entries","ReactDOM","render","StrictMode","Provider","getElementById"],"mappings":"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","file":"static/js/main.11a7e948.chunk.js","sourcesContent":["import { MichelsonMap, TezosToolkit, TransactionWalletOperation, Wallet } from '@taquito/taquito';\n\nimport type { Service, ServiceOperation, ServiceSigningKey } from '@tezospayments/common';\nimport type { ServicesProvider, TezosPaymentsFactoryImplementationContract, TezosPaymentsServiceContract } from '@tezospayments/react-web-core';\n\nimport type { Account } from '../models/blockchain';\nimport type { ServiceFactoryStorage } from '../models/contracts';\n\nexport class ServicesService {\n  constructor(\n    private readonly tezosToolkit: TezosToolkit,\n    private readonly servicesProvider: ServicesProvider,\n    private readonly servicesFactoryContractAddress: string\n  ) {\n  }\n\n  async getServices(account: Account): Promise<readonly Service[]> {\n    return this.servicesProvider.getServices(account.address);\n  }\n\n  async getService(serviceContractAddress: string): Promise<Service> {\n    return this.servicesProvider.getService(serviceContractAddress);\n  }\n\n  async getOperations(serviceContractAddress: string): Promise<readonly ServiceOperation[]> {\n    return this.servicesProvider.getOperations(serviceContractAddress);\n  }\n\n  async updateService(service: Service): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    const encodedServiceMetadata = this.encodeMetadata(service);\n    return await serviceContract.methods.update_service_parameters(\n      encodedServiceMetadata,\n      service.allowedTokens.tez,\n      service.allowedTokens.assets,\n      service.allowedOperationType\n    ).send();\n  }\n\n  async setPaused(service: Service, paused: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methods.set_pause(paused).send();\n  }\n\n  async setDeleted(service: Service, deleted: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methods.set_deleted(deleted).send();\n  }\n\n  async createService(service: Service): Promise<TransactionWalletOperation> {\n    const factoryContract = await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress);\n    const factoryStorage = await factoryContract.storage<ServiceFactoryStorage>();\n    const factoryImplementationContract = await this.getFactoryImplementationContract(factoryStorage.factory_implementation);\n\n    const encodedServiceMetadata = this.encodeMetadata(service);\n\n    return await factoryImplementationContract.methods.create_service(\n      encodedServiceMetadata,\n      service.allowedTokens.tez,\n      service.allowedTokens.assets,\n      service.allowedOperationType,\n      new MichelsonMap()\n    ).send();\n  }\n\n  addApiKey(service: Service, signingKey: ServiceSigningKey): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, { public_key: string, name?: string }>();\n    signingKeyUpdatesMap.set(signingKey.publicKey, { public_key: signingKey.publicKey, name: signingKey.name });\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  deleteApiKey(service: Service, publicKey: ServiceSigningKey['publicKey']): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, undefined>();\n    signingKeyUpdatesMap.set(publicKey, undefined);\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  private async updateSigningKeys(\n    service: Service,\n    signingKeyUpdatesMap: MichelsonMap<string, { public_key: string, name?: string } | undefined>\n  ): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methods.update_signing_keys(signingKeyUpdatesMap).send();\n  }\n\n  private encodeMetadata(service: Service): string {\n    const serviceMetadata = {\n      name: service.name || undefined,\n      links: service.links.length ? service.links : undefined,\n      description: service.description || undefined,\n      iconUrl: service.iconUrl || undefined\n    };\n\n    return Buffer.from(JSON.stringify(serviceMetadata), 'utf8').toString('hex');\n  }\n\n  private async getServiceContract(contractAddress: string): Promise<TezosPaymentsServiceContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsServiceContract<Wallet>>(contractAddress);\n  }\n\n  private async getFactoryImplementationContract(contractAddress: string): Promise<TezosPaymentsFactoryImplementationContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsFactoryImplementationContract<Wallet>>(contractAddress);\n  }\n}\n","import { Buffer } from 'buffer';\n\ntype ValidBase64Format = 'base64' | 'base64url';\n\n// Node.js < 15\nconst isBase64UrlFormatSupported = Buffer.isEncoding('base64url');\n\nexport const decode = (base64String: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (!isBase64UrlFormatSupported) {\n    format = 'base64';\n    base64String = base64UrlPreprocessor.prepareValueForDecoding(base64String);\n  }\n\n  return Buffer.from(base64String, format).toString('utf8');\n};\n\nexport const encode = (value: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (isBase64UrlFormatSupported)\n    return Buffer.from(value, 'utf8').toString(format);\n\n  const encodedValue = Buffer.from(value, 'utf8').toString('base64');\n  return base64UrlPreprocessor.prepareEncodedValue(encodedValue);\n};\n\nconst base64UrlPreprocessor = {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  prepareEncodedValue: (base64value: string) => base64value\n    .split('=')[0]!\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_'),\n\n  prepareValueForDecoding: (base64value: string) => {\n    base64value = base64value\n      .replace(/-/g, '+')\n      .replace(/_/g, '/');\n\n    switch (base64value.length % 4) {\n      case 0: return base64value;\n      case 2: return base64value + '==';\n      case 3: return base64value + '=';\n      default:\n        throw new Error('Invalid base64url value');\n    }\n  }\n};\n","import { Buffer } from 'buffer';\n\nexport const stringToUint8Array = (hex: string): Uint8Array => {\n  const integers = hex.match(/[\\da-f]{2}/gi)?.map(val => parseInt(val, 16));\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return new Uint8Array(integers!);\n};\n\nexport const stringToBytes = (value: string): string => Buffer.from(value, 'utf8').toString('hex');\nexport const bytesToString = (value: string): string => Buffer.from(stringToUint8Array(value)).toString('utf8');\n\nexport const objectToBytes = (value: Record<string, unknown>): string => stringToBytes(JSON.stringify(value));\nexport const bytesToObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: string): T | null => {\n  try {\n    return JSON.parse(bytesToString(value));\n  }\n  catch {\n    return null;\n  }\n};\n\nexport function tezToMutez(tez: number): number;\nexport function tezToMutez(tez: bigint): bigint;\nexport function tezToMutez(tez: bigint | number): bigint | number {\n  return typeof tez === 'number'\n    ? tez * 1000000\n    : tez * BigInt(1000000);\n}\n","import isPlainObjectLodashFunction from 'lodash.isplainobject';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isArray = (arg: any): arg is any[] => {\n  return Array.isArray(arg);\n};\n\nexport const isReadonlyArray = (arg: unknown): arg is readonly unknown[] => {\n  return Array.isArray(arg);\n};\n\nexport const isPlainObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: unknown): value is T => {\n  return isPlainObjectLodashFunction(value);\n};\n","const defaultEqualityCheck = <T>(a: T, b: T) => a === b;\n\nconst areArgumentsShallowlyEqual = <T extends IArguments | null>(equalityCheck: (a: T, b: T) => boolean, prev: T, next: T) => {\n    if (prev === null || next === null || prev.length !== next.length) {\n        return false;\n    }\n\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n    const length = prev.length;\n    for (let i = 0; i < length; i++) {\n        if (!equalityCheck(prev[i], next[i])) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n/* eslint-disable prefer-rest-params  */\n/* eslint-disable prefer-spread */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const memoize = <TF extends (...args: any) => any>(func: TF, equalityCheck = defaultEqualityCheck): TF => {\n    let lastArgs: IArguments | null = null;\n    let lastResult: unknown = null;\n\n    return (function () {\n        if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n            // apply arguments instead of spreading for performance.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            lastResult = func.apply(null, arguments as any);\n        }\n\n        lastArgs = arguments;\n        return lastResult;\n    } as TF);\n};\n/* eslint-enable prefer-spread */\n/* eslint-enable prefer-rest-params */\n/* eslint-enable @typescript-eslint/no-explicit-any */\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nconst emptyArray: any[] = [];\nconst emptyObject = {};\nconst emptyMap = new Map();\nconst emptySet: Set<any> = new Set();\n\nexport default {\n    emptyArray,\n    emptyMap,\n    emptySet,\n    emptyObject\n};\n","export const capitalize = (value: string): string => value && (value[0]?.toLocaleUpperCase() + value.slice(1));\n\nexport const getAvatarText = (value: string, maxLength = 2) => {\n  if (!value || !maxLength)\n    return '';\n\n  let result = '';\n\n  for (let i = 0, j = 0, isWord = false; i < value.length; i++) {\n    if (!isWord && value[i] !== ' ') {\n      isWord = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      result += value[i]!;\n\n      if (++j === maxLength)\n        return result;\n    }\n    else if (isWord && value[i] === ' ') {\n      isWord = false;\n    }\n  }\n\n  return result;\n};\n\nconst stringPad = (string: string, isStart: boolean, maxLength: number, fillString = ' ') => {\n  if (String.prototype.padStart !== undefined)\n    return string.padStart(maxLength, fillString);\n\n  const stringLength = string.length;\n  // eslint-disable-next-line eqeqeq\n  if (maxLength <= stringLength || fillString == '')\n    return string;\n\n  const fillLength = maxLength - stringLength;\n  let filler = fillString.repeat(Math.ceil(fillLength / fillString.length));\n\n  if (filler.length > fillLength)\n    filler = filler.slice(0, fillLength);\n\n  return isStart ? filler + string : string + filler;\n};\n\nexport const padStart = (string: string, maxLength: number, fillString = ' ') => String.prototype.padStart !== undefined\n  ? string.padStart(maxLength, fillString)\n  : stringPad(string, true, maxLength, fillString);\n\nexport const padEnd = (string: string, maxLength: number, fillString = ' ') => String.prototype.padEnd !== undefined\n  ? string.padEnd(maxLength, fillString)\n  : stringPad(string, false, maxLength, fillString);\n","import combineClassNames from 'clsx';\n\nimport * as base64 from './base64';\nimport * as converters from './converters';\nimport * as guards from './guards';\nimport { memoize } from './memoize';\nimport optimization from './optimization';\nimport shallowEqual from './shallowEqual';\nimport * as text from './text';\n\nconst wait = (ms: number) => new Promise<void>(resolve => setTimeout(resolve, ms));\n\nexport {\n  wait,\n  combineClassNames,\n  memoize,\n  shallowEqual,\n  base64,\n  optimization,\n  guards,\n  text,\n  converters\n};\n","import { memoize } from '../utils';\n\nexport enum IconId {\n  Common = 0,\n  Email = 1,\n  Telegram = 2,\n  Facebook = 3,\n  Twitter = 4,\n  Instagram = 5,\n  GitHub = 6,\n  Reddit = 7\n}\n\ninterface LinkInfo {\n  readonly rawLink: string;\n  readonly formattedLink: string;\n  readonly displayLink: string;\n  readonly icon: IconId;\n}\n\nconst getInvalidLinkInfo = (link: string): LinkInfo => ({\n  rawLink: link,\n  formattedLink: '#',\n  displayLink: 'Invalid Link',\n  icon: IconId.Common\n});\n\ntype LinkInfoProvider = (link: string) => LinkInfo | false;\n\nconst prepareFormattedLink = memoize((link: string) => link.trim());\nconst prepareDisplayLink = memoize((link: string) => link.trim().replace(/\\/$/, ''));\n\nconst socialMediaLinkInfoProvider = (link: string, baseUrl: string, icon: IconId): LinkInfo | false => {\n  if (!link.startsWith(baseUrl))\n    return false;\n\n  const formattedLink = prepareFormattedLink(link);\n  if (formattedLink === baseUrl)\n    return false;\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link).replace(baseUrl, ''),\n    icon\n  };\n};\n\nconst telegramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://t.me/', IconId.Telegram);\nconst facebookLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://facebook.com/', IconId.Facebook);\nconst twitterLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://twitter.com/', IconId.Twitter);\nconst instagramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://instagram.com/', IconId.Instagram);\nconst gitHubLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://github.com/', IconId.GitHub);\nconst redditLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://www.reddit.com/', IconId.Reddit);\n\n// This regex should not use for email validation\nconst emailCheckingRegEx = /^[^\\s/@]+@[^\\s@/]+$/;\nconst emailLinkInfoProvider: LinkInfoProvider = link => {\n  const preparedFormattedLink = prepareFormattedLink(link);\n\n  return emailCheckingRegEx.test(preparedFormattedLink) && {\n    rawLink: link,\n    formattedLink: `mailto:${preparedFormattedLink}`,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Email\n  };\n};\n\nconst javascriptLinkInfoProvider: LinkInfoProvider = link => link.startsWith('javascript') ? getInvalidLinkInfo(link) : false;\n\n// https://datatracker.ietf.org/doc/html/rfc3986#section-3.1\nconst urlSchemeRegEx = /^([a-z][a-z0-9+\\-.]*):/;\nconst commonLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return urlSchemeRegEx.test(formattedLink) && {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nconst editLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nexport class ServiceLinkHelper {\n  // Order is important\n  static readonly linkInfoProviders: readonly LinkInfoProvider[] = [\n    // Disallowed\n    javascriptLinkInfoProvider,\n    // Allowed\n    telegramLinkInfoProvider,\n    facebookLinkInfoProvider,\n    twitterLinkInfoProvider,\n    instagramLinkInfoProvider,\n    gitHubLinkInfoProvider,\n    emailLinkInfoProvider,\n    redditLinkInfoProvider,\n    commonLinkInfoProvider\n  ];\n\n  getLinkInfo(link: string, isEditMode = false): LinkInfo | null {\n    for (const provider of ServiceLinkHelper.linkInfoProviders) {\n      const linkInfo = provider(link);\n\n      if (linkInfo)\n        return this.linkInfoIsValid(linkInfo) ? linkInfo : null;\n    }\n\n    if (isEditMode)\n      return editLinkInfoProvider(link) as LinkInfo;\n\n    return null;\n  }\n\n  linkInfoIsValid(linkInfo: LinkInfo) {\n    return linkInfo.formattedLink !== '#';\n  }\n}\n","export enum PaymentType {\n  Payment = 1,\n  Donation = 2\n}\n\nexport interface PaymentBase {\n  readonly type: PaymentType;\n  readonly targetAddress: string;\n}\n","import { PaymentBase } from '../../models/payment/paymentBase';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { guards } from '../../utils';\nimport { PaymentValidationMethod } from './paymentValidationMethod';\n\nexport abstract class PaymentValidatorBase<TPayment extends PaymentBase> {\n  protected readonly abstract validationMethods: ReadonlyArray<PaymentValidationMethod<TPayment>>;\n  protected readonly abstract invalidPaymentObjectError: string;\n\n  validate(payment: TPayment, bail = false): FailedValidationResults {\n    if (!guards.isPlainObject(payment))\n      return [this.invalidPaymentObjectError];\n\n    let failedValidationResults: FailedValidationResults;\n    for (const validationMethod of this.validationMethods) {\n      const currentFailedValidationResults = validationMethod(payment);\n      if (currentFailedValidationResults) {\n        if (!bail)\n          return currentFailedValidationResults;\n\n        failedValidationResults = (failedValidationResults || []).concat(currentFailedValidationResults);\n      }\n    }\n\n    return failedValidationResults;\n  }\n}\n","const networksInternal = {\n  // mainnet: {\n  //   id: 'NetXdQprcVkpaWU',\n  //   name: 'mainnet',\n  // },\n  granadanet: {\n    id: 'NetXz969SFaFn8k',\n    name: 'granadanet',\n  },\n} as const;\n\ninterface NetworkInternal {\n  readonly id: string;\n  readonly name: string;\n}\n\ntype Networks = {\n  readonly [P in keyof typeof networksInternal]: (typeof networksInternal)[P] extends NetworkInternal & {\n    readonly name: P;\n  }\n  ? (typeof networksInternal)[P]\n  : never\n};\n\nexport type Network = Networks[keyof Networks];\nexport interface CustomNetwork {\n  readonly id?: string;\n  readonly name: string;\n}\n\nexport const networks: Networks = networksInternal;\nexport const networksCollection = Object.values(networksInternal);\n\nexport const networkIdRegExp = /^[a-zA-Z]\\w*$/;\nexport const networkNameRegExp = networkIdRegExp;\n","import { Network } from './network';\n\ninterface TokenBase {\n  readonly network: Network;\n  readonly contractAddress: string;\n  readonly metadata?: TokenMetadata;\n}\n\nexport interface TokenFA12 extends TokenBase {\n  readonly type: 'fa1.2';\n}\n\nexport interface TokenFA2 extends TokenBase {\n  readonly type: 'fa2';\n  readonly fa2TokenId: number;\n}\n\nexport type Token = TokenFA12 | TokenFA2;\n\nexport type TokenMetadata = {\n  readonly decimals: number;\n  readonly symbol: string;\n  readonly name: string;\n  readonly thumbnailUri: string;\n};\n\nexport const tezosMeta: TokenMetadata = {\n  symbol: 'XTZ',\n  name: 'Tezos',\n  decimals: 6,\n  thumbnailUri: 'https://dashboard.tezospayments.com/tokens/tezos.png'\n};\n\nexport const tokenWhitelist: readonly Token[] = [\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa1.2',\n  //   contractAddress: 'KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV',\n  //   metadata: {\n  //     decimals: 18,\n  //     symbol: 'KUSD',\n  //     name: 'Kolibri',\n  //     thumbnailUri: 'https://kolibri-data.s3.amazonaws.com/logo.png',\n  //   },\n  // },\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa2',\n  //   contractAddress: 'KT1REEb5VxWRjcHm5GzDMwErMmNFftsE5Gpf',\n  //   fa2TokenId: 0,\n  //   metadata: {\n  //     decimals: 6,\n  //     symbol: 'USDS',\n  //     name: 'Stably USD',\n  //     thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n  //   },\n  // },\n];\n\nexport const tokenWhitelistMap: ReadonlyMap<Token['contractAddress'], Token> = new Map<Token['contractAddress'], Token>(\n  tokenWhitelist.map(token => [token.contractAddress, token])\n);\n","const contractAddressPrefixes = ['KT'] as const;\nconst implicitAddressPrefixes = ['tz1', 'tz2', 'tz3'] as const;\nconst addressPrefixes = [...contractAddressPrefixes, ...implicitAddressPrefixes] as const;\n\nexport const tezosInfo = {\n  addressLength: 36,\n  contractAddressPrefixes,\n  implicitAddressPrefixes,\n  addressPrefixes,\n} as const;\n","export enum KeyType {\n  Ed25519 = 'Ed25519',\n  Secp256k1 = 'Secp256k1',\n  P256 = 'P256'\n}\n","/* eslint-disable @typescript-eslint/no-redeclare */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { URL as NodeURL } from 'url';\n\nexport type URL = NodeURL;\nexport const URL = NodeURL || (globalThis as any).URL;\n","import BigNumber from 'bignumber.js';\n\nimport { tezosInfo } from '../../models/blockchain';\nimport { Payment } from '../../models/payment';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { URL } from '../../native';\nimport { guards } from '../../utils';\n\ntype Errors<FieldNames extends string> = {\n  readonly [P in FieldNames]: string;\n};\n\nexport const validateTargetAddress = (\n  targetAddress: string,\n  errors: Errors<'invalidTargetAddress' | 'targetAddressHasInvalidLength' | 'targetAddressIsNotNetworkAddress'>\n): FailedValidationResults => {\n  if (typeof targetAddress !== 'string')\n    return [errors.invalidTargetAddress];\n\n  if (targetAddress.length !== tezosInfo.addressLength)\n    return [errors.targetAddressHasInvalidLength];\n\n  if (!tezosInfo.addressPrefixes.some(prefix => targetAddress.startsWith(prefix)))\n    return [errors.targetAddressIsNotNetworkAddress];\n};\n\nexport const validateId = (\n  id: string,\n  errors: Errors<'invalidId' | 'emptyId'>\n): FailedValidationResults => {\n  if (typeof id !== 'string')\n    return [errors.invalidId];\n\n  if (id === '')\n    return [errors.emptyId];\n};\n\nexport const validateAmount = (\n  amount: BigNumber,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  if (!BigNumber.isBigNumber(amount) || amount.isNaN() || !amount.isFinite())\n    return [errors.invalidAmount];\n\n  if (amount.isZero() || amount.isNegative())\n    return [errors.amountIsNonPositive];\n};\n\nexport const validateDesiredAmount = (\n  desiredAmount: BigNumber | undefined,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  return desiredAmount === undefined ? undefined : validateAmount(desiredAmount, errors);\n};\n\nexport const validateAsset = (\n  asset: string | undefined,\n  errors: Errors<'invalidAsset' | 'assetHasInvalidLength' | 'assetIsNotContractAddress'>\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (typeof asset !== 'string')\n    return [errors.invalidAsset];\n\n  if (asset.length !== tezosInfo.addressLength)\n    return [errors.assetHasInvalidLength];\n\n  if (!tezosInfo.contractAddressPrefixes.some(prefix => asset.startsWith(prefix)))\n    return [errors.assetIsNotContractAddress];\n};\n\nexport const validateCreatedDate = (\n  date: Date,\n  errors: Errors<'invalidCreatedDate'>\n): FailedValidationResults => {\n  if (!(date instanceof Date) || isNaN(date.getTime()))\n    return [errors.invalidCreatedDate];\n};\n\nexport const validateUrl = (\n  url: URL | undefined,\n  errors: Errors<'invalidUrl' | 'invalidProtocol'>\n): FailedValidationResults => {\n  if (url === undefined)\n    return;\n\n  if (!(url instanceof URL))\n    return [errors.invalidUrl];\n\n  if (url.protocol.indexOf('javascript') > -1)\n    return [errors.invalidProtocol];\n};\n\nexport const validateExpiredDate = (\n  expiredDate: Date | undefined,\n  createdDate: Date,\n  minimumPaymentLifetime: number,\n  errors: Errors<'invalidExpiredDate' | 'paymentLifetimeIsShort'>\n): FailedValidationResults => {\n  if (expiredDate === undefined)\n    return;\n\n  if (!(expiredDate instanceof Date) || isNaN(expiredDate.getTime()))\n    return [errors.invalidExpiredDate];\n\n  if (expiredDate.getTime() - createdDate.getTime() < minimumPaymentLifetime) {\n    return [errors.paymentLifetimeIsShort];\n  }\n};\n\nexport const validateData = (\n  data: Payment['data'],\n  errors: Errors<'invalidData' | 'invalidPublicData' | 'publicDataShouldBeFlat' | 'invalidPrivateData' | 'privateDataShouldBeFlat'>\n): FailedValidationResults => {\n  if (!guards.isPlainObject(data) || Object.keys(data).some(key => key !== 'public' && key !== 'private'))\n    return [errors.invalidData];\n\n  const publicData = (data as Exclude<Payment['data'], { private: unknown }>).public;\n  const privateData = (data as Exclude<Payment['data'], { public: unknown }>).private;\n  if (!(publicData || privateData))\n    return [errors.invalidData];\n\n  if (publicData !== undefined) {\n    if (!guards.isPlainObject(publicData))\n      return [errors.invalidPublicData];\n    if (!isFlatObject(publicData))\n      return [errors.publicDataShouldBeFlat];\n  }\n\n  if (privateData !== undefined) {\n    if (!guards.isPlainObject(privateData))\n      return [errors.invalidPrivateData];\n    if (!isFlatObject(privateData))\n      return [errors.privateDataShouldBeFlat];\n  }\n};\n\nconst isFlatObject = (obj: Record<string, unknown>) => {\n  for (const propertyName of Object.getOwnPropertyNames(obj)) {\n    const property = obj[propertyName];\n    if (typeof property === 'object' || typeof property === 'function')\n      return false;\n  }\n\n  return true;\n};\n","import type { Payment } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport {\n  validateTargetAddress, validateId, validateAmount, validateData, validateAsset,\n  validateCreatedDate, validateExpiredDate, validateUrl\n} from './validationMethods';\n\nexport class PaymentValidator extends PaymentValidatorBase<Payment> {\n  static readonly errors = {\n    invalidPaymentObject: 'Payment is undefined or not object',\n    invalidType: 'Payment type is invalid',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidId: 'Id is invalid',\n    emptyId: 'Id is empty',\n    invalidAmount: 'Amount is invalid',\n    amountIsNonPositive: 'Amount is less than or equal to zero',\n    invalidData: 'Payment data is invalid',\n    invalidPublicData: 'Payment public data is invalid',\n    invalidPrivateData: 'Payment private data is invalid',\n    publicDataShouldBeFlat: 'Public data should be flat',\n    privateDataShouldBeFlat: 'Private data should be flat',\n    invalidAsset: 'Asset address is invalid',\n    assetIsNotContractAddress: 'Asset address isn\\'t a contract address',\n    assetHasInvalidLength: 'Asset address has an invalid address',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol',\n    invalidCreatedDate: 'Created date is invalid',\n    invalidExpiredDate: 'Expired date is invalid',\n    paymentLifetimeIsShort: 'Payment lifetime is short'\n  } as const;\n  static readonly minimumPaymentLifetime = 600000; // 10 * 60 * 1000;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Payment>> = [\n    payment => payment.type !== PaymentType.Payment ? [PaymentValidator.errors.invalidType] : undefined,\n    payment => validateTargetAddress(payment.targetAddress, PaymentValidator.errors),\n    payment => validateId(payment.id, PaymentValidator.errors),\n    payment => validateAmount(payment.amount, PaymentValidator.errors),\n    payment => validateData(payment.data, PaymentValidator.errors),\n    payment => validateAsset(payment.asset, PaymentValidator.errors),\n    payment => validateUrl(payment.successUrl, PaymentValidator.successUrlErrors),\n    payment => validateUrl(payment.cancelUrl, PaymentValidator.cancelUrlErrors),\n    payment => validateCreatedDate(payment.created, PaymentValidator.errors),\n    payment => validateExpiredDate(payment.expired, payment.created, PaymentValidator.minimumPaymentLifetime, PaymentValidator.errors),\n  ];\n\n  protected readonly invalidPaymentObjectError = PaymentValidator.errors.invalidPaymentObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidSuccessUrl,\n    invalidProtocol: PaymentValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidCancelUrl,\n    invalidProtocol: PaymentValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","import type { Donation } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport { validateTargetAddress, validateDesiredAmount, validateAsset, validateUrl } from './validationMethods';\n\nexport class DonationValidator extends PaymentValidatorBase<Donation> {\n  static readonly errors = {\n    invalidDonationObject: 'Donation is undefined or not object',\n    invalidType: 'Donation type is invalid',\n    invalidAmount: 'Desired amount is invalid',\n    amountIsNonPositive: 'Desired amount is less than or equal to zero',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidAsset: 'Desired asset address is invalid',\n    assetIsNotContractAddress: 'Desired asset address isn\\'t a contract address',\n    assetHasInvalidLength: 'Desired asset address has an invalid address',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol'\n  } as const;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Donation>> = [\n    donation => donation.type !== PaymentType.Donation ? [DonationValidator.errors.invalidType] : undefined,\n    donation => validateTargetAddress(donation.targetAddress, DonationValidator.errors),\n    donation => validateDesiredAmount(donation.desiredAmount, DonationValidator.errors),\n    donation => validateAsset(donation.desiredAsset, DonationValidator.errors),\n    donation => validateUrl(donation.successUrl, DonationValidator.successUrlErrors),\n    donation => validateUrl(donation.cancelUrl, DonationValidator.cancelUrlErrors)\n  ];\n\n  protected readonly invalidPaymentObjectError = DonationValidator.errors.invalidDonationObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidSuccessUrl,\n    invalidProtocol: DonationValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidCancelUrl,\n    invalidProtocol: DonationValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","export abstract class StateModel {\n    protected constructor() {\n    // All derived classes should be static\n    }\n}\n","import { SerializedFieldType } from './serializedFieldType';\n\nexport class ObjectSerializationValidator<T extends Record<string | number, unknown>> {\n  private _minObjectFieldsCount: number | undefined;\n\n  constructor(\n    protected readonly objectFieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>\n  ) {\n  }\n\n  private get minObjectFieldsCount() {\n    if (!this._minObjectFieldsCount) {\n      let count = 0;\n      for (const info of this.objectFieldTypes) {\n        if (typeof info[1] === 'string' ? info[1] !== 'undefined' : info[1].every(type => type !== 'undefined'))\n          count++;\n      }\n\n      this._minObjectFieldsCount = count;\n    }\n\n    return this._minObjectFieldsCount;\n  }\n\n  private get maxObjectFieldsCount() {\n    return this.objectFieldTypes.size;\n  }\n\n  validate(value: T): value is T {\n    if (!value)\n      return false;\n\n    const fieldNames = Object.getOwnPropertyNames(value) as ReadonlyArray<keyof T>;\n\n    // Prevent the field checking if the deserializedValue has an invalid number of fields\n    if (fieldNames.length < this.minObjectFieldsCount || fieldNames.length > this.maxObjectFieldsCount)\n      return false;\n\n    for (const [fieldName, expectedFieldType] of this.objectFieldTypes) {\n      const fieldValue = value[fieldName];\n      const actualFieldType = fieldValue === null ? 'null' : typeof fieldValue;\n\n      if (Array.isArray(expectedFieldType)\n        ? !expectedFieldType.some(expectedType => actualFieldType === expectedType)\n        : actualFieldType !== expectedFieldType\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Serializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  serialize(value: T): string | null {\n    try {\n      if (!this.objectSerializationValidator.validate(value))\n        return null;\n\n      const jsonString = JSON.stringify(value);\n      return base64.encode(jsonString, 'base64url');\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Deserializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  deserialize(serializedValue: string): T | null {\n    try {\n      let value: T;\n\n      if (serializedValue) {\n        const serializedValueString = base64.decode(serializedValue, 'base64url');\n        value = JSON.parse(serializedValueString);\n      }\n      else\n        value = {} as T;\n\n      return this.objectSerializationValidator.validate(value)\n        ? value\n        : null;\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { LegacySerializedPayment, SerializedPayment } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nexport const serializedPaymentFieldTypes: ReadonlyMap<\n  keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]>()\n  // id\n  .set('i', 'string')\n  // amount\n  .set('a', 'string')\n  // data\n  .set('d', 'object')\n  // asset\n  .set('as', ['string', 'undefined', 'null'])\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null'])\n  // created\n  .set('c', 'number')\n  // expired\n  .set('e', ['number', 'undefined', 'null']);\n\nexport const legacySerializedPaymentFieldTypes: ReadonlyMap<\n  keyof LegacySerializedPayment, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof LegacySerializedPayment, SerializedFieldType | readonly SerializedFieldType[]>()\n  .set('amount', 'string')\n  .set('data', 'object')\n  .set('asset', ['string', 'undefined', 'null'])\n  .set('successUrl', ['string', 'undefined', 'null'])\n  .set('cancelUrl', ['string', 'undefined', 'null'])\n  .set('created', 'number')\n  .set('expired', ['number', 'undefined', 'null']);\n","import type { Payment, SerializedPayment } from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentSerializer {\n  protected static readonly serializedPaymentBase64Serializer = new Base64Serializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  serialize(payment: Payment): string | null {\n    try {\n      const serializedPayment = this.mapPaymentToSerializedPayment(payment);\n      return PaymentSerializer.serializedPaymentBase64Serializer.serialize(serializedPayment);\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapPaymentToSerializedPayment(payment: Payment): SerializedPayment {\n    return {\n      i: payment.id,\n      a: payment.amount.toString(),\n      d: payment.data,\n      as: payment.asset,\n      su: payment.successUrl?.toString(),\n      cu: payment.cancelUrl?.toString(),\n      c: payment.created.getTime(),\n      e: payment.expired?.getTime(),\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type { NonSerializedPaymentSlice, Payment, SerializedPayment } from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentDeserializer {\n  protected static readonly serializedPaymentBase64Deserializer = new Base64Deserializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  deserialize(serializedPaymentBase64: string, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment | null {\n    try {\n      const serializedPayment = PaymentDeserializer.serializedPaymentBase64Deserializer.deserialize(serializedPaymentBase64);\n\n      return serializedPayment ? this.mapSerializedPaymentToPayment(serializedPayment, nonSerializedPaymentSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedPaymentToPayment(serializedPayment: SerializedPayment, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment {\n    return {\n      type: PaymentType.Payment,\n      id: serializedPayment.i,\n      amount: new BigNumber(serializedPayment.a),\n      data: serializedPayment.d,\n      asset: serializedPayment.as,\n      successUrl: serializedPayment.su ? new URL(serializedPayment.su) : undefined,\n      cancelUrl: serializedPayment.cu ? new URL(serializedPayment.cu) : undefined,\n      created: new Date(serializedPayment.c),\n      expired: serializedPayment.e ? new Date(serializedPayment.e) : undefined,\n      targetAddress: nonSerializedPaymentSlice.targetAddress\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type { NonSerializedPaymentSlice, Payment, LegacySerializedPayment } from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { legacySerializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class LegacyPaymentDeserializer {\n  protected static readonly serializedPaymentBase64Deserializer = new Base64Deserializer<LegacySerializedPayment>(\n    legacySerializedPaymentFieldTypes\n  );\n\n  deserialize(serializedPaymentBase64: string, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment | null {\n    try {\n      const serializedPayment = LegacyPaymentDeserializer.serializedPaymentBase64Deserializer.deserialize(serializedPaymentBase64);\n\n      return serializedPayment ? this.mapSerializedPaymentToPayment(serializedPayment, nonSerializedPaymentSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedPaymentToPayment(serializedPayment: LegacySerializedPayment, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment {\n    return {\n      type: PaymentType.Payment,\n      id: 'legacy-payment',\n      amount: new BigNumber(serializedPayment.amount),\n      data: serializedPayment.data,\n      asset: serializedPayment.asset,\n      successUrl: serializedPayment.successUrl ? new URL(serializedPayment.successUrl) : undefined,\n      cancelUrl: serializedPayment.cancelUrl ? new URL(serializedPayment.cancelUrl) : undefined,\n      created: new Date(serializedPayment.created),\n      expired: serializedPayment.expired ? new Date(serializedPayment.expired) : undefined,\n      targetAddress: nonSerializedPaymentSlice.targetAddress\n    };\n  }\n}\n","import { LegacySerializedDonation, SerializedDonation } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nexport const serializedDonationFieldTypes: ReadonlyMap<\n  keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]>()\n  // desiredAmount\n  .set('da', ['string', 'undefined', 'null'])\n  // desiredAsset\n  .set('das', ['string', 'undefined', 'null'])\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null']);\n\nexport const legacySerializedDonationFieldTypes: ReadonlyMap<\n  keyof LegacySerializedDonation, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof LegacySerializedDonation, SerializedFieldType | readonly SerializedFieldType[]>()\n  .set('desiredAmount', ['string', 'undefined', 'null'])\n  .set('desiredAsset', ['string', 'undefined', 'null'])\n  .set('successUrl', ['string', 'undefined', 'null'])\n  .set('cancelUrl', ['string', 'undefined', 'null']);\n","import type { Donation, SerializedDonation } from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nconst serializedEmptyObjectBase64 = 'e30';\nexport class DonationSerializer {\n  protected static readonly serializedDonationBase64Serializer = new Base64Serializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  serialize(donation: Donation): string | null {\n    try {\n      const serializedDonation = this.mapDonationToSerializedDonation(donation);\n      const serializedDonationBase64 = DonationSerializer.serializedDonationBase64Serializer.serialize(serializedDonation);\n\n      return serializedDonationBase64 === serializedEmptyObjectBase64 ? '' : serializedDonationBase64;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapDonationToSerializedDonation(donation: Donation): SerializedDonation {\n    return {\n      da: donation.desiredAmount?.toString(),\n      das: donation.desiredAsset,\n      su: donation.successUrl?.toString(),\n      cu: donation.cancelUrl?.toString(),\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type { NonSerializedDonationSlice, Donation, SerializedDonation } from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nexport class DonationDeserializer {\n  protected static readonly serializedDonationBase64Deserializer = new Base64Deserializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  deserialize(serializedDonationBase64: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    try {\n      const serializedDonation = DonationDeserializer.serializedDonationBase64Deserializer.deserialize(serializedDonationBase64);\n\n      return serializedDonation ? this.mapSerializedDonationToDonation(serializedDonation, nonSerializedDonationSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedDonationToDonation(serializedDonation: SerializedDonation, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation {\n    return {\n      type: PaymentType.Donation,\n      desiredAmount: serializedDonation.da ? new BigNumber(serializedDonation.da) : undefined,\n      desiredAsset: serializedDonation.das,\n      successUrl: serializedDonation.su ? new URL(serializedDonation.su) : undefined,\n      cancelUrl: serializedDonation.cu ? new URL(serializedDonation.cu) : undefined,\n      targetAddress: nonSerializedDonationSlice.targetAddress\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type { NonSerializedDonationSlice, Donation, LegacySerializedDonation } from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { legacySerializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nexport class LegacyDonationDeserializer {\n  protected static readonly serializedDonationBase64Deserializer = new Base64Deserializer<LegacySerializedDonation>(\n    legacySerializedDonationFieldTypes\n  );\n\n  deserialize(serializedDonationBase64: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    try {\n      const serializedDonation = LegacyDonationDeserializer.serializedDonationBase64Deserializer.deserialize(serializedDonationBase64);\n\n      return serializedDonation ? this.mapSerializedDonationToDonation(serializedDonation, nonSerializedDonationSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedDonationToDonation(serializedDonation: LegacySerializedDonation, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation {\n    return {\n      type: PaymentType.Donation,\n      desiredAmount: serializedDonation.desiredAmount ? new BigNumber(serializedDonation.desiredAmount) : undefined,\n      desiredAsset: serializedDonation.desiredAsset,\n      successUrl: serializedDonation.successUrl ? new URL(serializedDonation.successUrl) : undefined,\n      cancelUrl: serializedDonation.cancelUrl ? new URL(serializedDonation.cancelUrl) : undefined,\n      targetAddress: nonSerializedDonationSlice.targetAddress\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { PaymentValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { LegacyPaymentDeserializer, PaymentDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport { PaymentBase, PaymentType } from './paymentBase';\nimport { NonSerializedPaymentSlice } from './serializedPayment';\n\ninterface PublicPaymentData {\n  readonly public: { readonly [fieldName: string]: unknown; };\n}\n\ninterface PrivatePaymentData {\n  readonly private: { readonly [fieldName: string]: unknown; };\n}\n\ntype PaymentData =\n  | PublicPaymentData\n  | PrivatePaymentData\n  | PublicPaymentData & PrivatePaymentData;\n\nexport interface Payment extends PaymentBase {\n  readonly type: PaymentType.Payment;\n  readonly id: string;\n  readonly amount: BigNumber;\n  readonly asset?: string;\n  readonly data: PaymentData;\n  readonly created: Date;\n  readonly expired?: Date;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n}\n\nexport class Payment extends StateModel {\n  static readonly defaultDeserializer: PaymentDeserializer = new PaymentDeserializer();\n  static readonly defaultLegacyDeserializer: LegacyPaymentDeserializer = new LegacyPaymentDeserializer();\n  static readonly defaultValidator: PaymentValidator = new PaymentValidator();\n\n  static validate(payment: Payment) {\n    return this.defaultValidator.validate(payment);\n  }\n\n  static deserialize(serializedPayment: string, nonSerializedPaymentSlice: NonSerializedPaymentSlice, isLegacy = false): Payment | null {\n    return !isLegacy\n      ? Payment.defaultDeserializer.deserialize(serializedPayment, nonSerializedPaymentSlice)\n      : Payment.defaultLegacyDeserializer.deserialize(serializedPayment, nonSerializedPaymentSlice);\n  }\n\n  static publicDataExists(payment: Payment): payment is Payment & { readonly data: PublicPaymentData };\n  static publicDataExists(paymentData: Payment['data']): paymentData is Payment['data'] & PublicPaymentData;\n  static publicDataExists(\n    paymentOrPaymentDataOrPaymentData: Payment | Payment['data']\n  ): paymentOrPaymentDataOrPaymentData is (Payment & { readonly data: PublicPaymentData }) | (Payment['data'] & PublicPaymentData) {\n    return this.publicDataExistsInternal(paymentOrPaymentDataOrPaymentData);\n  }\n\n  static privateDataExists(payment: Payment): payment is Payment & { readonly data: PrivatePaymentData } {\n    return !!(payment.data as PrivatePaymentData).private;\n  }\n\n  protected static publicDataExistsInternal(\n    paymentOrPaymentDataOrPaymentData: Payment | Payment['data']\n  ): paymentOrPaymentDataOrPaymentData is (Payment & { readonly data: PublicPaymentData }) | (Payment['data'] & PublicPaymentData) {\n    return !!(Payment.isPayment(paymentOrPaymentDataOrPaymentData)\n      ? (paymentOrPaymentDataOrPaymentData.data as PublicPaymentData).public\n      : (paymentOrPaymentDataOrPaymentData as PublicPaymentData).public\n    );\n  }\n\n  private static isPayment(paymentOrPaymentDataOrPaymentData: Payment | Payment['data']): paymentOrPaymentDataOrPaymentData is Payment {\n    return !!(paymentOrPaymentDataOrPaymentData as Payment).amount;\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { DonationValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { DonationDeserializer, LegacyDonationDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport { PaymentBase, PaymentType } from './paymentBase';\nimport { NonSerializedDonationSlice } from './serializedDonation';\n\nexport interface Donation extends PaymentBase {\n  readonly type: PaymentType.Donation;\n  readonly desiredAmount?: BigNumber;\n  readonly desiredAsset?: string;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n}\n\nexport class Donation extends StateModel {\n  static readonly defaultDeserializer: DonationDeserializer = new DonationDeserializer();\n  static readonly defaultLegacyDeserializer: LegacyDonationDeserializer = new LegacyDonationDeserializer();\n  static readonly defaultValidator: DonationValidator = new DonationValidator();\n\n  static validate(donation: Donation) {\n    return this.defaultValidator.validate(donation);\n  }\n\n  static deserialize(serializedDonation: string, nonSerializedDonationSlice: NonSerializedDonationSlice, isLegacy = false): Donation | null {\n    return !isLegacy\n      ? Donation.defaultDeserializer.deserialize(serializedDonation, nonSerializedDonationSlice)\n      : Donation.defaultLegacyDeserializer.deserialize(serializedDonation, nonSerializedDonationSlice);\n  }\n}\n\n","import { text } from '../../utils';\n\nexport enum PaymentUrlType {\n  Base64 = 0\n}\n\nconst encodedPaymentUrlTypeMap = new Map<PaymentUrlType, string>(\n  Object.keys(PaymentUrlType)\n    .filter(value => !isNaN(+value))\n    .map(value => [+value, text.padStart(value, 2, '0')])\n);\n\nexport const getEncodedPaymentUrlType = (paymentUrlType: PaymentUrlType) => encodedPaymentUrlTypeMap.get(paymentUrlType) || '';\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype ParameterizedRouteFactory = (...args: any[]) => string;\nexport type ParameterizedRoute<Factory extends ParameterizedRouteFactory> = Factory & {\n  readonly template: string;\n};\n\nexport const getParameterizedRoute = <Factory extends ParameterizedRouteFactory>(\n  factory: Factory, template: string\n): ParameterizedRoute<Factory> => {\n  (factory as Factory & { template: string }).template = template;\n\n  return factory as ParameterizedRoute<Factory>;\n};\n","export enum ServiceOperationType {\n  Payment = 1,\n  Donation = 2,\n\n  All = Payment | Donation\n}\n","import { optimization } from '../../utils';\nimport { Network, networks } from '../blockchain/network';\nimport { ServiceOperationType } from './serviceOperationType';\nimport { ServiceSigningKey } from './serviceSigningKey';\n\nexport interface Service {\n  readonly name: string;\n  readonly links: readonly string[];\n  readonly description?: string;\n  readonly iconUrl?: string;\n  readonly version: number;\n  readonly metadata: string;\n\n  readonly contractAddress: string;\n  readonly network: Network;\n  readonly allowedTokens: {\n    readonly tez: boolean;\n    readonly assets: readonly string[];\n  }\n  readonly allowedOperationType: ServiceOperationType;\n\n  readonly owner: string;\n  readonly paused: boolean;\n  readonly deleted: boolean;\n  readonly signingKeys: ReadonlyMap<ServiceSigningKey['publicKey'], ServiceSigningKey>;\n}\n\nexport const emptyService: Service = {\n  name: '',\n  description: '',\n  links: optimization.emptyArray,\n  version: 0,\n  metadata: '',\n  contractAddress: '',\n  allowedTokens: {\n    tez: true,\n    assets: optimization.emptyArray\n  },\n  allowedOperationType: ServiceOperationType.Payment,\n  owner: '',\n  paused: false,\n  deleted: false,\n  network: networks.granadanet,\n  signingKeys: optimization.emptyMap\n};\n","import BigNumber from 'bignumber.js';\n\nimport { converters } from '../../utils';\nimport { StateModel } from '../core';\nimport { ServiceOperationDirection } from './serviceOperationDirection';\nimport { ServiceOperationStatus } from './serviceOperationStatus';\nimport { ServiceOperationType } from './serviceOperationType';\n\ninterface ServiceOperationPayloadData {\n  readonly value: { readonly [fieldName: string]: unknown; } | null;\n  readonly valueString: string;\n  readonly encodedValue: string;\n}\n\ninterface PublicServiceOperationPayload {\n  readonly public: ServiceOperationPayloadData;\n}\n\ninterface PrivateServiceOperationPayload {\n  readonly private: ServiceOperationPayloadData;\n}\n\ntype ServiceOperationPayload =\n  | PublicServiceOperationPayload\n  | PrivateServiceOperationPayload\n  | PublicServiceOperationPayload & PrivateServiceOperationPayload;\n\nexport interface ServiceOperation {\n  readonly hash: string;\n  readonly type: ServiceOperationType;\n  readonly direction: ServiceOperationDirection;\n  readonly status: ServiceOperationStatus;\n  readonly amount: BigNumber;\n  readonly payload: ServiceOperationPayload;\n  readonly asset?: string;\n  readonly timestamp: string;\n  readonly date: Date;\n  readonly sender: string;\n  readonly target: string;\n}\n\nexport class ServiceOperation extends StateModel {\n  static publicPayloadExists(operation: ServiceOperation): operation is ServiceOperation & { readonly payload: PublicServiceOperationPayload } {\n    return !!(operation.payload as PublicServiceOperationPayload).public;\n  }\n\n  static privatePayloadExists(operation: ServiceOperation): operation is ServiceOperation & { readonly payload: PrivateServiceOperationPayload } {\n    return !!(operation.payload as PrivateServiceOperationPayload).private;\n  }\n\n  static isPayloadDecoded(\n    data: ServiceOperationPayloadData\n  ): data is ServiceOperationPayloadData & { readonly value: NonNullable<ServiceOperationPayloadData['value']> } {\n    return !!data.value;\n  }\n\n  static parseServiceOperationPayload(encodedValue: string): ServiceOperationPayloadData {\n    const valueString = converters.bytesToString(encodedValue);\n\n    let value: ServiceOperationPayloadData['value'] = null;\n    try { value = JSON.parse(valueString); } catch { /**/ }\n\n    return {\n      value,\n      valueString,\n      encodedValue,\n    };\n  }\n}\n","export enum ServiceOperationDirection {\n  Incoming = 0,\n  Outgoing = 1\n}\n","export enum ServiceOperationStatus {\n  Pending = 0,\n  Success = 1,\n  Cancelled = 2\n}\n","export const defaultConfig = {\n    links: {\n        tezosPayments: {\n            webSite: 'https://tezospayments.com',\n            paymentsApp: 'https://payment.tezospayments.com',\n            gitHub: 'https://github.com/fastwaterbear/tezospayments',\n            telegram: 'https://t.me/fastwaterbear',\n            twitter: 'https://twitter.com/fastwaterbear',\n            reddit: 'https://www.reddit.com/user/fastwaterbear'\n        }\n    },\n    tezos: {\n        defaultNetwork: 'granadanet',\n        networks: {\n            granadanet: {\n                title: 'Granada Testnet',\n                color: '#667eea',\n                default: {\n                    rpc: 'smartPy',\n                    indexer: 'tzKT',\n                    explorer: 'tzKT'\n                },\n                rpcUrls: {\n                    smartPy: 'https://granadanet.smartpy.io'\n                },\n                indexerUrls: {\n                    tzKT: 'https://api.granadanet.tzkt.io',\n                    betterCallDev: 'https://api.better-call.dev'\n                },\n                explorers: {\n                    tzKT: { baseUrl: 'https://granadanet.tzkt.io', title: 'TzKT' },\n                    betterCallDev: { baseUrl: 'https://better-call.dev', title: 'Better Call Dev' },\n                    tzStats: { baseUrl: 'https://granada.tzstats.com', title: 'TzStats' }\n                },\n                servicesFactoryContractAddress: 'KT1NxBzCJtvHFLKfiSAX3PGxdiJMAC8CtSZV'\n            }\n        }\n    }\n};\n//# sourceMappingURL=defaultConfig.js.map","export class BlockchainUrlExplorer {\n    constructor(network, baseUrl) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n    }\n}\n//# sourceMappingURL=blockchainUrlExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzKTBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzKTBlockchainUrlExplorer.js.map","import { tezosInfo } from '@tezospayments/common';\nimport { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class BetterCallDevBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return tezosInfo.addressPrefixes.some(prefix => entity.startsWith(prefix))\n            ? this.getAccountUrl(entity)\n            : this.getOperationUrl(entity);\n    }\n    getOperationUrl(operationHash) {\n        return `${this.baseUrl}/${this.network.name}/opg/${operationHash}/contents`;\n    }\n    getAccountUrl(contractAddress) {\n        return `${this.baseUrl}/${this.network.name}/${contractAddress}`;\n    }\n}\n//# sourceMappingURL=betterCallDevUrlBlockchainExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzStatsBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzStatsBlockchainUrlExplorer.js.map","import BigNumber from 'bignumber.js';\nimport { converters, guards, optimization, ServiceOperation, ServiceOperationDirection, ServiceOperationStatus, tezosMeta } from '@tezospayments/common';\nexport class TzKTDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n    }\n    async getService(serviceContractAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contracts/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contracts/${this.servicesFactoryContractAddress}/bigmaps/services/keys/${ownerAddress}`);\n        const keyValue = await response.json();\n        const contractAddresses = keyValue.value;\n        return Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)));\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/accounts/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('type', 'transaction');\n        url.searchParams.set('entrypoint', 'send_payment');\n        const response = await fetch(url.href);\n        const operations = await response.json();\n        return operations.map(operation => this.mapOperationToServiceOperation(operation));\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        const metadataJson = converters.bytesToObject(serviceDto.metadata);\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto.version,\n                metadata: serviceDto.metadata,\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto.allowed_tokens.tez,\n                    assets: serviceDto.allowed_tokens.assets\n                },\n                allowedOperationType: +serviceDto.allowed_operation_type,\n                owner: serviceDto.owner,\n                paused: serviceDto.paused,\n                deleted: serviceDto.deleted,\n                signingKeys: this.mapSigningKeyDtosToSigningKeys(serviceDto.signing_keys)\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return Object.keys(signingKeyDtos)\n            .reduce((map, signingKey) => map.set(signingKey, { publicKey: signingKey, name: signingKeyDtos[signingKey]?.name || undefined }), new Map());\n    }\n    mapOperationToServiceOperation(operationDto) {\n        return {\n            hash: operationDto.hash,\n            type: +operationDto.parameter.value.operation_type || 0,\n            direction: ServiceOperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? ServiceOperationStatus.Success : ServiceOperationStatus.Cancelled,\n            amount: new BigNumber(operationDto.amount.toString()).div(10 ** tezosMeta.decimals),\n            payload: {\n                public: ServiceOperation.parseServiceOperationPayload(operationDto.parameter.value.payload.public),\n            },\n            asset: undefined,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.sender.address,\n            target: operationDto.target.address,\n        };\n    }\n}\n//# sourceMappingURL=tzKTDataProvider.js.map","import BigNumber from 'bignumber.js';\nimport { converters, guards, optimization, ServiceOperation, ServiceOperationDirection, ServiceOperationStatus, tezosMeta } from '@tezospayments/common';\nexport class BetterCallDevDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n    }\n    async getService(serviceContractAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const servicesFactoryDto = await this.getServicesFactoryDto();\n        const servicesBigMapId = servicesFactoryDto[0].children[4].value;\n        const response = await fetch(`${this.baseUrl}/v1/bigmap/${this.network.name}/${servicesBigMapId}/keys`);\n        const servicesBigMapDto = await response.json();\n        const servicesSet = servicesBigMapDto.find(pair => pair.data.key_string === ownerAddress);\n        if (!servicesSet)\n            return optimization.emptyArray;\n        const contractAddresses = servicesSet.data.value.children.map(serviceAddressDto => serviceAddressDto.value);\n        return Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)));\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/contract/${this.network.name}/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('entrypoints', 'send_payment');\n        const response = await fetch(url.href);\n        const operations = (await response.json()).operations;\n        return operations.filter(operation => !operation.internal)\n            .map(operation => this.mapSendPaymentOperationToServiceOperation(operation));\n    }\n    async getServicesFactoryDto() {\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${this.servicesFactoryContractAddress}/storage`);\n        return response.json();\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        let metadataJson;\n        try {\n            metadataJson = JSON.parse(serviceDto[0].children[3].value);\n        }\n        catch {\n            return null;\n        }\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto[0].children[7].value,\n                metadata: converters.stringToBytes(serviceDto[0].children[3].value),\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto[0].children[1].children[0].value,\n                    assets: optimization.emptyArray\n                },\n                allowedOperationType: +serviceDto[0].children[0].value,\n                owner: serviceDto[0].children[4].value,\n                paused: serviceDto[0].children[5].value,\n                deleted: serviceDto[0].children[2].value,\n                signingKeys: serviceDto[0].children[6].children\n                    ? this.mapSigningKeyDtosToSigningKeys(serviceDto[0].children[6].children)\n                    : new Map()\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return signingKeyDtos.reduce((map, signingKeyDto) => {\n            const publicKey = signingKeyDto.children[0].value;\n            const rawName = signingKeyDto.children[1].value;\n            return map.set(publicKey, { publicKey, name: rawName !== 'None' ? rawName : undefined });\n        }, new Map());\n    }\n    mapSendPaymentOperationToServiceOperation(operationDto) {\n        const rawAssetValue = operationDto.parameters[0].children[0].value;\n        return {\n            hash: operationDto.hash,\n            type: +operationDto.parameters[0].children[1].value || 0,\n            direction: ServiceOperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? ServiceOperationStatus.Success : ServiceOperationStatus.Cancelled,\n            amount: new BigNumber(operationDto.amount.toString()).div(10 ** tezosMeta.decimals),\n            payload: {\n                public: ServiceOperation.parseServiceOperationPayload(converters.stringToBytes(operationDto.parameters[0].children[2].children[0].value)),\n            },\n            asset: rawAssetValue !== 'None' ? rawAssetValue : undefined,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.source,\n            target: operationDto.destination,\n        };\n    }\n}\n//# sourceMappingURL=betterCallDevDataProvider.js.map","import { NetworkType } from '@airgap/beacon-sdk';\nimport { networks } from '@tezospayments/common';\nexport const beaconNetworkToNetwork = networkType => {\n    switch (networkType) {\n        case NetworkType.GRANADANET:\n            return networks.granadanet;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\nexport const networkToBeaconNetwork = network => {\n    switch (network) {\n        case networks.granadanet:\n            return NetworkType.GRANADANET;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\n//# sourceMappingURL=converters.js.map","import { getParameterizedRoute } from '@tezospayments/common';\nimport { defaultConfig } from '@tezospayments/react-web-core';\n\nimport type { AppConfig } from './appConfig';\n\nconst commitShortSha = process.env.REACT_APP_COMMIT_SHORT_SHA || '';\n\nexport const config: AppConfig = {\n  ...defaultConfig,\n  app: {\n    publicUrl: process.env.PUBLIC_URL || '/',\n    name: 'Tezos Payments',\n    title: 'Tezos Payments',\n    version: {\n      name: 'Dev Version',\n      link: 'https://github.com/fastwaterbear/tezospayments/tree/master'\n    },\n    buildInfo: {\n      commitShortSha,\n      link: `https://github.com/fastwaterbear/tezospayments/tree/${commitShortSha}`\n    }\n  },\n  routers: {\n    overview: '/',\n    operations: '/operations',\n    services: '/services',\n    service: getParameterizedRoute(address => `/services/${address}`, '/services/:address'),\n    createService: '/services/create',\n    acceptPayments: '/accept',\n    acceptServicePayments: getParameterizedRoute(address => `/accept/${address}`, '/accept/:address'),\n    connect: '/connect',\n    about: '/about'\n  },\n  links: {\n    ...defaultConfig.links,\n    tzKT: 'https://tzkt.io'\n  }\n};\n","import { DAppClient } from '@airgap/beacon-sdk';\nimport { TezosToolkit } from '@taquito/taquito';\nimport BigNumber from 'bignumber.js';\n\nimport { Token, TokenFA2, TokenFA12, Network } from '@tezospayments/common';\nimport { converters } from '@tezospayments/react-web-core';\n\nimport { Account } from '../models/blockchain';\n\nexport class AccountsService {\n  constructor(\n    private readonly tezosToolkit: TezosToolkit,\n    private readonly dAppClient: DAppClient\n  ) {\n  }\n\n  async connect(network: Network): Promise<string | null> {\n    return this.dAppClient.requestPermissions({ network: { type: converters.networkToBeaconNetwork(network) } })\n      .then(permissions => permissions.address)\n      .catch(e => {\n        console.error(e);\n        this.dAppClient.clearActiveAccount();\n        return null;\n      });\n  }\n\n  disconnect(): Promise<void> {\n    return this.dAppClient.clearActiveAccount();\n  }\n\n  async getActiveAccount(): Promise<Pick<Account, 'address' | 'network'> | undefined> {\n    const activeAccount = await this.dAppClient.getActiveAccount();\n\n    return activeAccount\n      ? { address: activeAccount.address, network: converters.beaconNetworkToNetwork(activeAccount.network.type) }\n      : undefined;\n  }\n\n  async getTezosBalance(account: Account): Promise<number> {\n    const balance = await this.tezosToolkit.tz.getBalance(account.address);\n\n    return +balance / 1000000;\n  }\n\n  async getTokenBalance(account: Account, token: Token): Promise<number> {\n    let result = null;\n\n    switch (token.type) {\n      case 'fa1.2':\n        result = await this.getTokenFA12Balance(account, token);\n        break;\n      case 'fa2':\n        result = await this.getTokenFA2Balance(account, token);\n        break;\n      default:\n        throw new Error('Not Supported');\n    }\n\n    return result.toNumber();\n  }\n\n  private async getTokenFA12Balance(account: Account, token: TokenFA12): Promise<BigNumber> {\n    const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n    const result = await contract.views.getBalance?.(account.address).read();\n\n    return result || 0;\n  }\n\n  private async getTokenFA2Balance(account: Account, token: TokenFA2): Promise<BigNumber> {\n    const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n    const response = await contract.views?.['balance_of']?.([{ owner: account.address, token_id: token.fa2TokenId }])\n      .read();\n\n    const result = response[0].balance;\n\n    return result || 0;\n  }\n}\n","import React from 'react';\n\nimport type { BlockchainUrlExplorer } from '@tezospayments/react-web-core';\n\nexport interface ReactAppContext {\n  readonly tezosExplorer: BlockchainUrlExplorer;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redeclare\nexport const ReactAppContext = React.createContext<ReactAppContext>({} as ReactAppContext);\n","import { createSelector } from 'reselect';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../config';\nimport { Account } from '../../models/blockchain';\nimport type { AppState } from '../index';\n\nexport const selectAccountsState = (state: AppState) => state.accountsState;\nexport const getCurrentAccount = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.currentAccount\n    ? (accountsState.connectedAccounts.find(account =>\n      account.address === accountsState.currentAccount?.address && account.network.id === accountsState.currentAccount.network.id) || null)\n    : null\n);\nexport const getAccountsByNetwork = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.connectedAccounts.reduce((p, c) => p.set(c.network, [...(p.get(c.network) || []), c]), new Map<Network, Account[]>())\n);\nexport const getCurrentNetworkConfig = createSelector(\n  getCurrentAccount,\n  account => account && config.tezos.networks[account.network.name]\n);\n","import { createSelector } from 'reselect';\n\nimport { Token, tokenWhitelistMap } from '@tezospayments/common';\n\nimport { AppState } from '../index';\nimport { PendingOperation } from './slice';\n\n// TODO\nexport const selectTokensState = (_state: AppState) => tokenWhitelistMap;\n\nexport const selectServicesState = (state: AppState) => state.servicesState;\nexport const getAllAcceptedTokens = createSelector(\n  selectServicesState,\n  selectTokensState,\n  (servicesState, tokensState) => {\n    const result = new Set<Token>();\n\n    servicesState.services.forEach(s => s.allowedTokens.assets\n      .forEach(assetAddress => {\n        const token = tokensState.get(assetAddress);\n        if (!token)\n          return;\n\n        result.add(token);\n      })\n    );\n\n    return [...result];\n  }\n);\n\nexport const getAcceptTezos = createSelector(\n  selectServicesState,\n  servicesState => {\n    return servicesState.services.some(s => s.allowedTokens.tez);\n  }\n);\n\nexport const getSortedServices = createSelector(\n  selectServicesState,\n  servicesState => {\n    return [...servicesState.services].sort((a, b) => a.name.localeCompare(b.name));\n  }\n);\n\nexport const getOperationsByService = createSelector(\n  selectServicesState,\n  servicesState => {\n    const operationsMap = new Map<string, PendingOperation[]>();\n\n    servicesState.pendingOperations.forEach(op => {\n      const operations = operationsMap.get(op.serviceAddress);\n\n      if (operations)\n        operations.push(op);\n      else\n        operationsMap.set(op.serviceAddress, [op]);\n    });\n\n    return operationsMap;\n  }\n);\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { optimization } from '@tezospayments/common';\n\nimport { Account } from '../../models/blockchain';\nimport { getAllAcceptedTokens } from '../services/selectors';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface BalancesState {\n  readonly tezos: number;\n  readonly tokens: { [key: string]: number };\n  readonly initialized: boolean;\n}\n\nconst initialState: BalancesState = {\n  tezos: 0,\n  tokens: optimization.emptyObject,\n  initialized: false\n};\n\nconst namespace = 'balances';\n\nexport const loadBalances = createAsyncThunk<Pick<BalancesState, 'tezos' | 'tokens'>, Account, AppThunkAPI>(\n  `${namespace}/loadBalances`,\n  async (account, { extra: app, getState }) => {\n    const tezos = await app.services.accountsService.getTezosBalance(account);\n\n    const acceptedTokens = getAllAcceptedTokens(getState());\n    const tokens: { [key: string]: number } = {};\n    const balancesPromises = acceptedTokens.map(t => app.services.accountsService.getTokenBalance(account, t));\n    const balances = await Promise.all(balancesPromises);\n\n    balances.forEach((b, i) => {\n      const address = acceptedTokens[i]?.contractAddress;\n      if (address) {\n        tokens[address] = b;\n      }\n    });\n\n    return { tezos, tokens };\n  }\n);\n\nexport const balancesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearBalances: state => {\n      state.tezos = 0;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadBalances.fulfilled, (state, action) => {\n      const { tezos, tokens } = action.payload;\n      state.tezos = tezos;\n      state.tokens = tokens;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearBalances } = balancesSlice.actions;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { ServiceOperation, Network, optimization } from '@tezospayments/common';\n\nimport { AppThunkAPI } from '../thunk';\n\nexport interface OperationsState {\n  readonly operations: readonly ServiceOperation[];\n  readonly initialized: boolean;\n}\n\nconst initialState: OperationsState = {\n  operations: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'operations';\n\nexport const loadOperations = createAsyncThunk<ServiceOperation[], { servicesAddresses: string[], network: Network }, AppThunkAPI>(\n  `${namespace}/loadOperations`,\n  async ({ servicesAddresses }, { extra: app }) => {\n    const operationsPromises = servicesAddresses.map(s => app.services.servicesService.getOperations(s));\n    const operations = (await Promise.all(operationsPromises)).flat();\n\n    return operations;\n  }\n);\n\nexport const operationsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearOperations: state => {\n      state.operations = optimization.emptyArray;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadOperations.fulfilled, (state, action) => {\n      state.operations = action.payload;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearOperations } = operationsSlice.actions;\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { WalletOperation } from '@taquito/taquito';\n\nimport { Service, optimization, ServiceSigningKey, wait } from '@tezospayments/common';\n\nimport { AppDispatch, AppState } from '..';\nimport { Account } from '../../models/blockchain';\nimport { getCurrentAccount } from '../accounts/selectors';\nimport { clearBalances, loadBalances } from '../balances/slice';\nimport { loadOperations } from '../operations/slice';\nimport { AppThunkAPI } from '../thunk';\n\nexport enum PendingOperationStatus { loading, success, error }\n\nexport interface PendingOperation {\n  readonly hash: string;\n  readonly serviceAddress: string;\n  readonly action: string;\n  readonly confirmationCount: number;\n  readonly targetConfirmationCount: number;\n  readonly status: PendingOperationStatus;\n}\n\nexport interface ServicesState {\n  readonly services: readonly Service[];\n  readonly initialized: boolean;\n  readonly pendingOperations: PendingOperation[];\n}\n\nconst initialState: ServicesState = {\n  services: optimization.emptyArray,\n  initialized: false,\n  pendingOperations: optimization.emptyArray\n};\n\nconst namespace = 'services';\n\nexport const loadServices = createAsyncThunk<readonly Service[], Account, AppThunkAPI>(\n  `${namespace}/loadServices`,\n  async (account, { extra: app, dispatch }) => {\n    const services = await app.services.servicesService.getServices(account);\n\n    if (services.length) {\n      dispatch(loadBalances(account));\n      dispatch(loadOperations({ servicesAddresses: services.map(s => s.contractAddress), network: account.network }));\n    }\n\n    return services;\n  }\n);\n\nexport const updateService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/updateService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.updateService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'updating');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const createService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/createService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.createService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'creating new service');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setPaused = createAsyncThunk<void, { service: Service, paused: boolean }, AppThunkAPI>(\n  `${namespace}/setPaused`,\n  async ({ service, paused }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setPaused(service, paused);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, paused ? 'pausing' : 'unpausing');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setDeleted = createAsyncThunk<void, { service: Service, deleted: boolean }, AppThunkAPI>(\n  `${namespace}/setDeleted`,\n  async ({ service, deleted }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setDeleted(service, deleted);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, deleted ? 'deleting' : 'undeleting');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const addApiKey = createAsyncThunk<void, { service: Service, signingKey: ServiceSigningKey }, AppThunkAPI>(\n  `${namespace}/addApiKey`,\n  async ({ service, signingKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.addApiKey(service, signingKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'adding API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const deleteApiKey = createAsyncThunk<void, { service: Service, publicKey: string }, AppThunkAPI>(\n  `${namespace}/deleteApiKey`,\n  async ({ service, publicKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.deleteApiKey(service, publicKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'deleting API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const clearServices = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/clearServices`,\n  async (_, { dispatch }) => {\n    dispatch(clearBalances());\n  }\n);\n\nconst createPendingOperation = (hash: string, serviceAddress: string, action: string, targetConfirmationCount: number): PendingOperation => ({\n  hash,\n  action,\n  serviceAddress,\n  targetConfirmationCount,\n  confirmationCount: 0,\n  status: PendingOperationStatus.loading,\n});\n\nconst reloadServices = (dispatch: AppDispatch, getState: () => AppState) => {\n  const account = getCurrentAccount(getState());\n  if (account) {\n    dispatch(loadServices(account));\n  }\n};\n\nconst waitOperationConfirmation = (\n  dispatch: AppDispatch,\n  operation: WalletOperation,\n  serviceAddress: string,\n  operationName: string,\n  confirmationsNumber = 2\n): Promise<void> => {\n  const pendingOperation = createPendingOperation(operation.opHash, serviceAddress, operationName, confirmationsNumber);\n  dispatch(addPendingOperation(pendingOperation));\n\n  return new Promise<void>((resolve, reject) => {\n    operation.confirmationObservable(confirmationsNumber)\n      .subscribe(\n        confirmation => dispatch(setPendingOperationConfirmationCount(\n          { hash: pendingOperation.hash, confirmationCount: confirmation.currentConfirmation })\n        ),\n        async error => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.error }));\n          reject(error);\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        },\n        async () => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.success }));\n          resolve();\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        }\n      );\n  });\n};\n\nexport const servicesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    addPendingOperation: (state, action: PayloadAction<PendingOperation>) => {\n      const operation = action.payload;\n      state.pendingOperations.push(operation);\n    },\n    setPendingOperationStatus: (state, action: PayloadAction<{ hash: string, status: PendingOperationStatus }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.status = action.payload.status;\n    },\n    setPendingOperationConfirmationCount: (state, action: PayloadAction<{ hash: string, confirmationCount: number }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.confirmationCount = action.payload.confirmationCount;\n    },\n    deletePendingOperation: (state, action: PayloadAction<string>) => {\n      state.pendingOperations = state.pendingOperations.filter(o => o.hash !== action.payload);\n    },\n  },\n  extraReducers: builder => {\n    builder.addCase(loadServices.fulfilled, (state, action) => ({\n      ...state,\n      services: action.payload,\n      initialized: true\n    }));\n\n    builder.addCase(clearServices.fulfilled, state => ({\n      ...state,\n      services: optimization.emptyArray,\n      initialized: false\n    }));\n  }\n});\n\nexport const { addPendingOperation, setPendingOperationStatus, setPendingOperationConfirmationCount, deletePendingOperation } = servicesSlice.actions;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { optimization, Network } from '@tezospayments/common';\n\nimport type { Account, CurrentAccountInfo } from '../../models/blockchain';\nimport { clearServices, loadServices } from '../services/slice';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface AccountsState {\n  readonly currentAccount: CurrentAccountInfo | null;\n  readonly connectedAccounts: readonly Account[];\n  readonly initialized: boolean;\n}\n\nconst initialState: AccountsState = {\n  currentAccount: null,\n  connectedAccounts: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'accounts';\n\nexport const loadActiveAccount = createAsyncThunk<Account | null, void, AppThunkAPI>(\n  `${namespace}/loadActiveAccount`,\n  async (_, { extra: app, dispatch }) => {\n    const account = await app.services.accountsService.getActiveAccount();\n\n    if (account) {\n      dispatch(loadServices(account));\n    }\n\n    return account || null;\n  }\n);\n\nexport const connectAccount = createAsyncThunk<Account | null, Network, AppThunkAPI>(\n  `${namespace}/connect`,\n  async (network: Network, { extra: app, dispatch }) => {\n    const address = await app.services.accountsService.connect(network);\n    const account = address ? { address, network } : null;\n\n    if (account) {\n      dispatch(loadServices(account));\n    }\n\n    return account;\n  }\n);\n\nexport const disconnectAccount = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/disconnect`,\n  async (_, { extra: app, dispatch }) => {\n    const result = await app.services.accountsService.disconnect();\n    dispatch(clearServices());\n\n    return result;\n  }\n);\n\nexport const accountsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n  },\n  extraReducers: builder => {\n    builder.addCase(loadActiveAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n      state.initialized = true;\n    });\n\n    builder.addCase(connectAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n    });\n\n    builder.addCase(disconnectAccount.fulfilled, state => {\n      state.connectedAccounts = state.connectedAccounts.filter(a =>\n        a.address !== state.currentAccount?.address || a.network.id !== state.currentAccount?.network.id\n      );\n\n      const nextAccount = state.connectedAccounts[0];\n      state.currentAccount = nextAccount ? { address: nextAccount.address, network: nextAccount.network } : null;\n    });\n  }\n});\n","import { common } from './common';\nimport { overview, createService, connect, header, about, operations, services, settings, acceptPayments } from './views';\n\nexport const enUS = {\n  id: 'en-US',\n  resources: {\n    common,\n    views: {\n      header,\n      overview,\n      createService,\n      connect,\n      about,\n      operations,\n      services,\n      settings,\n      acceptPayments\n    },\n  }\n} as const;\n","export const common = {\n  comingSoon: 'Coming soon',\n  copy: 'Copy',\n  copyLink: 'Copy Link',\n  open: 'Open',\n  new: 'New',\n  cancel: 'Cancel',\n  save: 'Save',\n  yes: 'Yes',\n  no: 'No'\n};\n","export const header = {\n  accountActions: {\n    copyAddress: {\n      title: 'Copy address'\n    },\n    viewOn: 'View on',\n    connectAnotherAccount: {\n      title: 'Connect another account'\n    },\n    disconnect: {\n      title: 'Disconnect'\n    }\n  }\n};\n","export const overview = {\n  title: 'Overview',\n  balances: {\n    title: 'Balances'\n  },\n  incoming: {\n    title: 'Incoming'\n  },\n  outgoing: {\n    title: 'Outgoing'\n  },\n  operationCount: {\n    title: 'Operation count'\n  },\n  volume: {\n    title: 'Volume'\n  }\n};\n","export const createService = {\n  title: 'Create Service'\n};\n","import { config } from '../../../config';\n\nexport const connect = {\n  actions: {\n    connect: {\n      title: 'Connect',\n      connectTo: 'Connect to',\n      description: `In order to use the ${config.app.title} service you have to connect a Tezos account`\n    }\n  }\n};\n","export const about = {\n  title: 'About',\n  detailedTitle: 'Decentralized Payment Solution built on Tezos blockchain',\n  build: 'build',\n  poweredBy: 'Powered by',\n  tzKt: 'TzKT',\n  api: 'API'\n};\n","export const operations = {\n  title: 'Operations',\n  operationList: {\n    paymentData: 'Payment Data:',\n    donationData: 'Donation Data:',\n    income: 'Income',\n    expense: 'Expense',\n    cancelled: 'Cancelled',\n    pending: 'Pending',\n    noOperationsPerformedYet: 'No operations performed yet'\n  }\n};\n","export const services = {\n  title: 'Services',\n  status: {\n    active: 'Active',\n    paused: 'Paused',\n    deleted: 'Deleted',\n    updating: 'Updating'\n  },\n  createNewService: 'Create New Service',\n  acceptPayments: 'Accept Payments',\n  acceptPaymentsDescription: 'Generate a payment link using our constructor to accept payments on your service',\n  youDoNotHaveAnyServicesYet: 'You don\\'t have any services yet',\n  createYourFirstService: 'Create your first service to accept payments or connect another Tezos account',\n  operations: {\n    paymentsEnabled: 'Payments Enabled',\n    donationsEnabled: 'Donations Enabled',\n  },\n  allowedCurrencies: 'Allowed Currencies',\n  service: 'Service',\n  links: 'Links',\n  dangerZone: {\n    title: 'Danger Zone',\n    pauseService: 'Pause Service',\n    pauseServiceConfirmation: 'Are you sure you want to pause the service',\n    pauseServiceDescription: 'Pause accepting payments and donations',\n    unPauseService: 'Unpause Service',\n    unPauseServiceConfirmation: 'Are you sure you want to unpause the service',\n    unPauseServiceDescription: 'Accepting payments and donations are paused',\n    deleteService: 'Delete Service',\n    deleteServiceConfirmation: 'Are you sure you want to delete the service',\n    deleteServiceDescription: 'Delete this service. After deleting this service can’t accept payments and donations. You can restore the deleted service',\n    unDeleteService: 'Undelete Service',\n    unDeleteServiceConfirmation: 'Are you sure you want to undelete the service',\n    unDeleteServiceDescription: 'Service is marked as deleted',\n  },\n  devZone: {\n    title: 'API Keys',\n    addKey: 'Add Key',\n    saveKeys: 'Save Keys',\n    name: 'Name',\n    algorithm: 'Algorithm',\n    publicKey: 'Public Key',\n    secretKey: 'Secret Key',\n    saveSecretKeyWarning: 'Write down the secret key, we will never show it again',\n    saveSecretKeyConfirm: 'Have you written down the secret key?',\n    noApiKeysAddedYet: 'No API keys added yet',\n    deleteKeyConfirmation: 'Are you sure you want to delete the API key',\n  },\n  editing: {\n    editService: 'Edit Service',\n    updateService: 'Update Service',\n    createService: 'Create Service',\n    addCurrency: 'Add Currency',\n    addLink: 'Add Link',\n    serviceName: 'Service Name',\n    description: 'Description',\n    accept: 'Accept',\n    acceptPayments: 'Accept Payments',\n    acceptDonations: 'Accept Donations',\n  }\n};\n","export const settings = {\n  title: 'Settings',\n};\n","export const acceptPayments = {\n  title: 'Accept Payments',\n  type: 'Type',\n  amount: 'Amount',\n  paymentPublicData: 'Payment Public Data',\n  orderId: 'Order ID',\n  orderIdHelpText: 'Order ID/invoice number/any unique identifier in your system',\n  donationData: 'Donation Data',\n  shortDescription: 'Short description on the page',\n  shortDescriptionHelpText: 'This message will be shown to your donators when they will donate',\n  directLinkPaymentHelpText: 'Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc',\n  directLinkDonationHelpText: 'Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link',\n  errors: {\n    fillRequiredData: 'Fill required data to generate corresponding content'\n  }\n};\n","import { enUS } from '../../localization/en-US';\nimport { Language } from '../../models/system';\n\nexport const useCurrentLanguage = (): Language => {\n    // TODO: implement language change\n    return enUS;\n};\n\nexport const useCurrentLanguageResources = () => {\n    const currentLanguage = useCurrentLanguage();\n\n    return currentLanguage.resources;\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\n\nimport type { AppDispatch, AppState } from '../../store';\n\nexport const useAppDispatch: () => AppDispatch = useDispatch;\nexport const useAppSelector: TypedUseSelectorHook<AppState> = useSelector;\n\n","import { useContext } from 'react';\n\nimport { ReactAppContext } from '../../app';\n\nexport const useAppContext = () => useContext(ReactAppContext);\n","import { Route, RouteProps, Redirect } from 'react-router';\n\nimport { config } from '../../config';\nimport { useAppSelector } from '../hooks';\n\nconst defaultConnectPath = config.routers.connect;\ninterface PrivateRouteProps extends RouteProps {\n    children: NonNullable<RouteProps['children']>;\n    connectPath?: string;\n    isConnected: boolean;\n}\n\nexport const PrivateRoute = ({ children, isConnected, connectPath = defaultConnectPath, ...routeProps }: PrivateRouteProps) => (\n    <Route {...routeProps} children={props => isConnected\n        ? children\n        : <Redirect to={{\n            pathname: connectPath,\n            state: { from: props.location }\n        }} />\n    } />\n);\n\ntype PrivateRouteContainerProps = Omit<PrivateRouteProps, 'isConnected'>;\n\nexport const PrivateRouteContainer = (props: PrivateRouteContainerProps) => {\n    const currentAccount = useAppSelector(state => state.accountsState.currentAccount);\n\n    return <PrivateRoute {...props} isConnected={!!currentAccount} />;\n};\n","import { Tooltip } from 'antd';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport './TokenList.scss';\n\ninterface TokenListProps {\n  children: React.ReactNode;\n}\n\nexport const TokenList = (props: TokenListProps) => {\n  return <ul className=\"token-list\">\n    {props.children}\n  </ul>;\n};\n\ninterface TokenListItemProps {\n  name: string;\n  ticker: string;\n  iconSrc?: string;\n  value?: number;\n  decimals: number;\n  highlightSign?: boolean;\n  className?: string;\n}\n\nconst TokenListItem = (props: TokenListItemProps) => {\n  const valueClassNames = combineClassNames('token-list-item__value',\n    { 'token-list-item__value_positive': props.highlightSign && props.value && props.value > 0 },\n    { 'token-list-item__value_negative': props.highlightSign && props.value && props.value < 0 }\n  );\n\n  const sign = !props.value ? ''\n    : props.value > 0 && props.highlightSign\n      ? '+'\n      : props.value < 0\n        ? '−'\n        : '';\n\n  const displayedDecimals = 6;\n  const value = props.value && Math.abs(props.value);\n  const allDecimalsShown = displayedDecimals < props.decimals;\n  const valueSpan = value !== undefined && value !== null ? <span className={valueClassNames}>\n    {`${sign}${value.toLocaleString(undefined, { minimumFractionDigits: displayedDecimals })}${allDecimalsShown ? '...' : ''}`}\n  </span> : null;\n\n  return <li className={combineClassNames('token-list-item', props.className)}>\n    <img className=\"token-list-item__icon\" src={props.iconSrc} alt={props.name} />\n    <div>\n      <div className=\"token-list-item__name-container\">\n        <span className=\"token-list-item__ticker\">{props.ticker}</span>\n        <span className=\"token-list-item__name\">{props.name}</span>\n      </div>\n      {allDecimalsShown && value !== undefined && value !== null\n        ? <Tooltip title={value.toLocaleString(undefined, { minimumFractionDigits: props.decimals })}>\n          {valueSpan}\n        </Tooltip>\n        : valueSpan\n      }\n    </div>\n  </li>;\n};\n\nTokenList.Item = TokenListItem;\n","import { CopyOutlined } from '@ant-design/icons';\nimport React, { useCallback } from 'react';\n\nimport { useAppContext, useCurrentLanguageResources } from '../../hooks';\n\nimport './ExplorerLink.scss';\n\ninterface ExplorerLinkProps {\n  hash: string;\n  className?: string;\n  showCopyButton?: boolean;\n  children: React.ReactNode;\n}\n\nexport const ExplorerLink = (props: ExplorerLinkProps) => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(props.hash);\n  }, [props.hash]);\n\n  return <div className=\"explorer-link__container\">\n    <a href={appContext.tezosExplorer.getEntityUrl(props.hash)} target=\"_blank\" rel=\"noreferrer\" className={props.className}>\n      {props.children}\n    </a>\n    {props.showCopyButton && <CopyOutlined className=\"explorer-link__copy-icon\" title={commonLangResources.copy} onClick={handleCopyAddressClick} />}\n  </div>;\n};\n\nexport const ExplorerLinkPure = React.memo(ExplorerLink);\n","type ExternalLinkProps = Omit<JSX.IntrinsicElements['a'], 'target' | 'rel'>;\n\nexport const ExternalLink = (props: ExternalLinkProps) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n  {props.children}\n</a>;\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\n\nimport './NoServicesCreated.scss';\n\nexport const NoServicesCreated = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleCreateServiceClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  return <div className=\"no-services-created\">\n    <div>\n      <p>{servicesLangResources.youDoNotHaveAnyServicesYet}</p>\n      <p>{servicesLangResources.createYourFirstService}</p>\n      <Button type=\"primary\" onClick={handleCreateServiceClick}>{servicesLangResources.editing.createService}</Button>\n    </div>\n  </div>;\n};\n\nexport const NoServicesCreatedPure = React.memo(NoServicesCreated);\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\ninterface ViewTitleProps {\n    className?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewTitleProps = Required<Pick<ViewTitleProps, 'as'>>;\n\nexport const defaultProps: DefaultViewTitleProps = {\n    as: 'h1',\n};\n\nconst viewTitleClassName = 'view__title';\nexport const ViewTitle = (props: ViewTitleProps & DefaultViewTitleProps) => {\n    const className = combineClassNames(props.className, viewTitleClassName);\n\n    return React.createElement(props.as, { className }, props.children);\n};\nViewTitle.defaultProps = defaultProps;\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useViewTitle } from '../../hooks';\nimport { ViewTitle } from './ViewTitle';\nimport './View.scss';\n\ninterface ViewProps {\n    className?: string;\n    title?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewProps = Required<Pick<ViewProps, 'as'>>;\n\nconst defaultProps: DefaultViewProps = {\n    as: 'main'\n};\n\nexport const View = (props: ViewProps & DefaultViewProps) => {\n    useViewTitle(props.title ? `${props.title} | ${config.app.title}` : config.app.title);\n    const className = combineClassNames('view', props.className);\n\n    return React.createElement(props.as, { className }, props.children);\n};\n\nView.defaultProps = defaultProps;\nView.Title = ViewTitle;\n","import { useEffect } from 'react';\n\nexport const useViewTitle = (title: string) => {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n};\n","import { Column } from '@ant-design/charts';\nimport { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\nexport const OperationCountChart = () => {\n  const data = [\n    {\n      month: 'May',\n      operationCount: 900,\n    },\n    {\n      month: 'June',\n      operationCount: 1600,\n    },\n    {\n      month: 'July',\n      operationCount: 600,\n    },\n    {\n      month: 'August',\n      operationCount: 2200,\n    },\n    {\n      month: 'September',\n      operationCount: 950,\n    },\n    {\n      month: 'October',\n      operationCount: 1100,\n    },\n  ];\n\n  const config: React.ComponentProps<typeof Column> = {\n    data,\n    xField: 'month',\n    yField: 'operationCount',\n    height: 400,\n    meta: {\n      operationCount: { alias: 'Operation count' },\n    },\n  };\n\n  const services = useAppSelector(selectServicesState);\n\n  if (!services.initialized) {\n    return <Skeleton active paragraph={{ rows: 12 }} />;\n  }\n\n  return <Column {...config} />;\n};\n\nexport const OperationCountChartPure = React.memo(OperationCountChart);\n","import { Line } from '@ant-design/charts';\nimport { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\nexport const VolumeChart = () => {\n  const data = [\n    {\n      quarter: 'Q1 2020',\n      sum: 24756,\n    },\n    {\n      quarter: 'Q2 2020',\n      sum: 22178,\n    },\n    {\n      quarter: 'Q3 2020',\n      sum: 13613,\n    },\n    {\n      quarter: 'Q4 2020',\n      sum: 29436,\n    },\n    {\n      quarter: 'Q1 2021',\n      sum: 25679,\n    },\n    {\n      quarter: 'Q2 2021',\n      sum: 26483,\n    },\n    {\n      quarter: 'Q3 2021',\n      sum: 41835,\n    },\n    {\n      quarter: 'Q4 2021',\n      sum: 32412,\n    },\n  ];\n\n  const config: React.ComponentProps<typeof Line> = {\n    data,\n    xField: 'quarter',\n    yField: 'sum',\n    height: 400,\n    smooth: true,\n    meta: {\n      sum: { alias: 'Sum' },\n    },\n  };\n\n  const services = useAppSelector(selectServicesState);\n\n  if (!services.initialized) {\n    return <Skeleton active paragraph={{ rows: 12 }} />;\n  }\n\n  return <Line {...config} />;\n};\n\nexport const VolumeChartPure = React.memo(VolumeChart);\n","import { AppState } from '..';\n\nexport const selectBalancesState = (state: AppState) => state.balancesState;\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport { selectBalancesState } from '../../../../store/balances/selectors';\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Balances = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n  const services = useAppSelector(selectServicesState);\n  const balances = useAppSelector(selectBalancesState);\n\n  if (!services.initialized || !balances.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={balances.tezos}\n      iconSrc={tezosMeta.thumbnailUri} />);\n  }\n\n  tokens.forEach(t => {\n    items.push(<TokenList.Item\n      key={t.metadata?.symbol}\n      ticker={t.metadata?.symbol || 'unknown'}\n      name={t.metadata?.name || 'unknown'}\n      decimals={t.metadata ? t.metadata.decimals : 2}\n      value={balances.tokens[t.contractAddress] || 0}\n      iconSrc={t.metadata?.thumbnailUri} />);\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const BalancesPure = React.memo(Balances);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Incoming = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const services = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n\n  if (!services.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={52.4}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  tokens.forEach(t => {\n    items.push(<TokenList.Item\n      key={t.metadata?.symbol}\n      ticker={t.metadata?.symbol || 'unknown'}\n      name={t.metadata?.name || 'unknown'}\n      decimals={t.metadata ? t.metadata.decimals : 2}\n      value={462518}\n      iconSrc={t.metadata?.thumbnailUri}\n      highlightSign />);\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const IncomingPure = React.memo(Incoming);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Outgoing = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const services = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n\n  if (!services.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={-52.4}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  tokens.forEach(t => {\n    items.push(<TokenList.Item\n      key={t.metadata?.symbol}\n      ticker={t.metadata?.symbol || 'unknown'}\n      name={t.metadata?.name || 'unknown'}\n      decimals={t.metadata ? t.metadata.decimals : 2}\n      value={-462518.0000006}\n      iconSrc={t.metadata?.thumbnailUri}\n      highlightSign />);\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const OutgoingPure = React.memo(Outgoing);\n","import { Card } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { OperationCountChartPure, VolumeChartPure } from './LargeCards';\nimport { BalancesPure, IncomingPure, OutgoingPure } from './SmallCards';\nimport './Overview.scss';\n\nexport const Overview = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const overviewLangResources = langResources.views.overview;\n\n  const servicesState = useAppSelector(selectServicesState);\n\n  return <View title={overviewLangResources.title} className=\"overview\">\n    <View.Title>{overviewLangResources.title}</View.Title>\n\n    {servicesState.initialized && !servicesState.services.length\n      ? <NoServicesCreatedPure />\n      : <div className=\"cards-container\">\n        <Card className=\"cards-container__small-card\" size=\"small\" title={overviewLangResources.balances.title}>\n          <BalancesPure />\n        </Card>\n\n        {/*eslint-disable-next-line max-len*/}\n        <Card className=\"cards-container__small-card\" size=\"small\" title={`${overviewLangResources.incoming.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">All Month</a>}>\n          <IncomingPure />\n        </Card>\n\n        {/*eslint-disable-next-line max-len*/}\n        <Card className=\"cards-container__small-card\" size=\"small\" title={`${overviewLangResources.outgoing.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">All Month</a>}>\n          <OutgoingPure />\n        </Card>\n\n        <Card className=\"cards-container__large-card\" title={`${overviewLangResources.operationCount.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">6 Months</a>}>\n          <OperationCountChartPure />\n        </Card>\n\n        <Card className=\"cards-container__large-card\" title={`${overviewLangResources.volume.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">Last 2 Years</a>}>\n          <VolumeChartPure />\n        </Card>\n      </div>}\n  </View >;\n};\n\nexport const OverviewPure = React.memo(Overview);\n","import { createSelector } from 'reselect';\n\nimport { AppState } from '../index';\n\nexport const selectOperationsState = (state: AppState) => state.operationsState;\n\nexport const getSortedOperations = createSelector(\n  selectOperationsState,\n  operationsState => [...operationsState.operations].sort((a, b) => +b.date - +a.date)\n);\n","import { ArrowRightOutlined, ArrowLeftOutlined, ClockCircleTwoTone, ExclamationCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { combineClassNames, ServiceOperationDirection, ServiceOperationStatus } from '@tezospayments/common';\n\nimport './OperationIcon.scss';\nimport { useCurrentLanguageResources } from '../../hooks';\n\ninterface OperationIconProps {\n  className?: string;\n  direction: ServiceOperationDirection;\n  status: ServiceOperationStatus;\n}\n\nexport const OperationIcon = (props: OperationIconProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === ServiceOperationDirection.Incoming;\n\n  const className = combineClassNames(\n    props.className,\n    'operation-icon',\n    { 'operation-icon_income': isIncoming },\n    { 'operation-icon_expense': !isIncoming },\n    { 'operation-icon_cancelled': props.status === ServiceOperationStatus.Cancelled }\n  );\n\n  return <div className={className}>\n    {isIncoming ? <ArrowRightOutlined title={operationsLangResources.income} /> : <ArrowLeftOutlined title={operationsLangResources.expense} />}\n    {props.status === ServiceOperationStatus.Pending && <ClockCircleTwoTone className=\"operation-icon__status operation-icon__status_pending\" title={operationsLangResources.pending} />}\n    {props.status === ServiceOperationStatus.Cancelled && <ExclamationCircleFilled className=\"operation-icon__status operation-icon__status_cancelled\" title={operationsLangResources.cancelled} />}\n  </div >;\n};\n\nexport const OperationIconPure = React.memo(OperationIcon);\n","import { BigNumber } from 'bignumber.js';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport {\n  ServiceOperationDirection, ServiceOperationType,\n  ServiceOperationStatus, combineClassNames\n} from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ExplorerLink } from '../ExplorerLink/ExplorerLink';\nimport { OperationIconPure } from './OperationIcon';\n\nimport './OperationList.scss';\n\ninterface OperationListProps {\n  children: React.ReactNode;\n}\n\nexport const OperationList = (props: OperationListProps) => {\n  return <table className=\"operation-list\">\n    {props.children}\n  </table>;\n};\n\ninterface OperationListItemProps {\n  type: ServiceOperationType;\n  direction: ServiceOperationDirection;\n  status: ServiceOperationStatus;\n  date: Date;\n  hash: string;\n  serviceAddress: string;\n  serviceName: string;\n  accountAddress: string;\n  data: string;\n  value: BigNumber;\n  ticker: string;\n}\n\nconst OperationListItem = (props: OperationListItemProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === ServiceOperationDirection.Incoming;\n  const from = isIncoming ? props.accountAddress : props.serviceAddress;\n  const to = isIncoming ? props.serviceAddress : props.accountAddress;\n\n  const hash = getShortHash(props.hash);\n  const isDonation = props.type === ServiceOperationType.Donation;\n  const data = `${isDonation ? operationsLangResources.donationData : operationsLangResources.paymentData} ${props.data}`;\n\n  const sign = isIncoming ? '+' : '−';\n  const amountClassNames = combineClassNames('operation-list-item__amount',\n    { 'operation-list-item__amount_income': isIncoming },\n    { 'operation-list-item__amount_expense': !isIncoming },\n    { 'operation-list-item__amount_cancelled': props.status === ServiceOperationStatus.Cancelled }\n  );\n\n  const serviceLink = `${config.routers.services}/${props.serviceAddress}`;\n\n  return <tbody className=\"operation-list-group\">\n    <tr className=\"operation-list-row operation-list-row_general\">\n      <td className=\"operation-list-item__icon\">\n        <OperationIconPure direction={props.direction} status={props.status} />\n      </td>\n      <td className=\"operation-list-item__main-info\">\n        <span className=\"operation-list-item__date\">{props.date.toLocaleString()}</span>\n        <ExplorerLink hash={props.hash} className=\"operation-list-item__operation-hash\">{hash}</ExplorerLink>\n      </td>\n      <td className=\"operation-list-item__transfer-info\">\n        {from === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={from}>{getShortHash(from)}</ExplorerLink>}\n        &nbsp;→&nbsp;\n        {to === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={to}>{getShortHash(to)}</ExplorerLink>}\n      </td>\n      <td className={amountClassNames}>{sign}{props.value.toFormat()} {props.ticker}</td>\n    </tr>\n    <tr className=\"operation-list-row operation-list-row_order-data\">\n      <td></td>\n      <td className=\"operation-list-item__data\" colSpan={3}>\n        {data}\n      </td>\n    </tr>\n  </tbody>;\n};\n\nconst getShortHash = (hash: string) => `${hash.substr(0, 9)}...${hash.substr(hash.length - 6, 6)}`;\n\nOperationList.Item = OperationListItem;\n","import React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NoOperationsPerformed.scss';\n\nexport const NoOperationsPerformed = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  return <div className=\"no-operations-performed-container\">\n    {operationsLangResources.noOperationsPerformedYet}\n  </div>;\n};\n\nexport const NoOperationsPerformedPure = React.memo(NoOperationsPerformed);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { ServiceOperation, ServiceOperationDirection } from '@tezospayments/common';\n\nimport { getSortedOperations } from '../../../store/operations/selectors';\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreated } from '../../common/NoServicesCreated';\nimport { OperationList } from '../../common/OperationList';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NoOperationsPerformedPure } from './NoOperationsPerformed';\n\nexport const Operations = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations;\n\n  const operations = useAppSelector(getSortedOperations);\n\n  const servicesState = useAppSelector(selectServicesState);\n\n  const operationProps: Array<React.ComponentProps<typeof OperationList.Item>> = operations.map(o => ({\n    date: o.date,\n    hash: o.hash,\n    data: ServiceOperation.publicPayloadExists(o) ? o.payload.public.valueString : '',\n    accountAddress: o.sender,\n    serviceAddress: o.target,\n    serviceName: servicesState.services.filter(s => s.contractAddress === o.target)[0]?.name || '',\n    ticker: 'XTZ',\n    value: o.amount,\n    status: o.status,\n    type: o.type,\n    direction: ServiceOperationDirection.Incoming\n  }));\n\n  return <View title={operationsLangResources.title}>\n    <View.Title>{operationsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreated />\n        : !operations.length\n          ? <NoOperationsPerformedPure />\n          : <OperationList>\n            {operationProps.map(o => <OperationList.Item key={o.hash} {...o} />)}\n          </OperationList>}\n  </View>;\n};\n\nexport const OperationsPure = React.memo(Operations);\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NewServiceCard.scss';\n\nexport const NewServiceCard = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleCardClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  return <Card bodyStyle={{ padding: 0 }} className=\"new-service-card-container\" onClick={handleCardClick}>\n    <div className=\"new-service-card\" title={servicesLangResources.createNewService}>\n      <div className=\"new-service-card__info\">\n        <PlusOutlined className=\"new-service-card__icon\" />\n        <span>{commonLangResources.new}</span>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const NewServiceCardPure = React.memo(NewServiceCard);\n","import { CheckCircleOutlined, CloseCircleOutlined, PauseCircleOutlined, SyncOutlined } from '@ant-design/icons';\nimport { Tag } from 'antd';\nimport React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActiveTag.scss';\n\ninterface ActiveTagProps {\n  paused: boolean;\n  deleted: boolean;\n  isUpdating: boolean;\n}\n\nexport const ActiveTag = (props: ActiveTagProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return props.isUpdating ?\n    <Tag icon={<SyncOutlined spin />} className=\"tag-active tag-active_updating\">{servicesLangResources.status.updating}</Tag>\n    : props.deleted\n      ? <Tag icon={<CloseCircleOutlined />} className=\"tag-active tag-active_deleted\">{servicesLangResources.status.deleted}</Tag>\n      : props.paused\n        ? <Tag icon={<PauseCircleOutlined />} className=\"tag-active tag-active_paused\">{servicesLangResources.status.paused}</Tag>\n        : <Tag icon={<CheckCircleOutlined />} className=\"tag-active tag-active_active\">{servicesLangResources.status.active}</Tag>;\n};\n\nexport const ActiveTagPure = React.memo(ActiveTag);\n","import { Tag } from 'antd';\nimport React from 'react';\n\nimport './CustomTag.scss';\n\ninterface CustomTagProps {\n  text: string;\n}\n\nexport const CustomTag = (props: CustomTagProps) => {\n  return <Tag className=\"tag-custom\">{props.text}</Tag>;\n};\n\nexport const CustomTagPure = React.memo(CustomTag);\n","import { Button, Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ServiceCard.scss';\n\ninterface ServiceCardProps {\n  service: Service;\n  isUpdating: boolean;\n}\n\nexport const ServiceCard = (props: ServiceCardProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCardClick = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    const tagName = (e.target as HTMLElement).tagName.toLowerCase();\n    if (tagName !== 'svg' && tagName !== 'a' && tagName !== 'path') {\n      history.push(`${config.routers.services}/${props.service.contractAddress}`);\n    }\n  }, [history, props.service.contractAddress]);\n\n  const logoClassName = combineClassNames(\n    'service-card__logo',\n    props.service.iconUrl ? 'service-card__logo_image' : 'service-card__logo_text',\n  );\n\n  return <Card size=\"small\" bodyStyle={{ padding: 0 }} className=\"service-card-container\" onClick={handleCardClick}>\n    <div className=\"service-card\">\n      <div className=\"service-card__info-container\">\n        <div className=\"service-card__main-info\">\n          {props.service.iconUrl\n            ? <img className={logoClassName} alt=\"logo\" src={props.service.iconUrl} />\n            : <span className={logoClassName}>{text.getAvatarText(props.service.name)}</span>}\n          <div className=\"service-card__name-container\">\n            <span className=\"service-card__name\" title={props.service.name}>{props.service.name}</span>\n            <div className=\"service-card__tags-container\">\n              <ActiveTagPure paused={props.service.paused} deleted={props.service.deleted} isUpdating={props.isUpdating} />\n            </div>\n          </div>\n        </div>\n        <div className=\"service-card__link-container\">\n          <ExplorerLinkPure hash={props.service.contractAddress} className=\"service-card__link\" showCopyButton>\n            {props.service.contractAddress}\n          </ExplorerLinkPure>\n        </div>\n      </div>\n      <div className=\"service-card__button-container\">\n        <Button className=\"service-card__button\" type=\"primary\">{commonLangResources.open}</Button>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const ServiceCardPure = React.memo(ServiceCard);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { getOperationsByService, getSortedServices, selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NewServiceCardPure, ServiceCardPure } from './ServiceCards';\nimport './Services.scss';\n\nexport const Services = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const servicesState = useAppSelector(selectServicesState);\n  const pendingOperations = useAppSelector(getOperationsByService);\n\n  const services = useAppSelector(getSortedServices);\n  const servicesCards = services.map(s => <ServiceCardPure\n    key={s.contractAddress}\n    service={s}\n    isUpdating={pendingOperations.has(s.contractAddress)}\n  />);\n\n  return <View title={servicesLangResources.title}>\n    <View.Title>{servicesLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"services-container\">\n          {servicesCards}\n          <NewServiceCardPure />\n        </div>}\n  </View >;\n};\n\nexport const ServicesPure = React.memo(Services);\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActionsZone.scss';\n\ninterface ActionsZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ActionsZone = ({ service, readOnly }: ActionsZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    history.push(config.routers.acceptServicePayments(service.contractAddress));\n  }, [history, service.contractAddress]);\n\n  return <div className=\"service-actions-zone\">\n    <span className=\"service-actions-zone__header\">Actions</span>\n\n    <div className=\"service-actions-zone__button-container\">\n      <p>{servicesLangResources.acceptPaymentsDescription}</p>\n      <Button disabled={readOnly} onClick={handleAcceptPaymentsClick} className=\"service-button\" type=\"primary\">{servicesLangResources.acceptPayments}</Button>\n    </div>\n  </div>;\n};\n\nexport const ActionsZonePure = React.memo(ActionsZone);\n","import { Button, Modal } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { setDeleted, setPaused } from '../../../../store/services/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './DangerZone.scss';\n\ninterface DangerZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DangerZone = (props: DangerZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const dangerZoneLangResources = langResources.views.services.dangerZone;\n  const dispatch = useAppDispatch();\n\n  const handlePauseModalOkClick = useCallback(() => {\n    dispatch(setPaused({ service: props.service, paused: !props.service.paused }));\n  }, [dispatch, props.service]);\n\n  const handleDeleteModalOkClick = useCallback(() => {\n    dispatch(setDeleted({ service: props.service, deleted: !props.service.deleted }));\n  }, [dispatch, props.service]);\n\n  const confirm = useCallback((text: string, isDanger: boolean, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: isDanger ? 'danger' : 'primary',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handlePauseClick = useCallback(() => {\n    const text = props.service.paused ? dangerZoneLangResources.unPauseServiceConfirmation : dangerZoneLangResources.pauseServiceConfirmation;\n    confirm(text, false, handlePauseModalOkClick);\n  }, [confirm, dangerZoneLangResources.pauseServiceConfirmation, dangerZoneLangResources.unPauseServiceConfirmation, handlePauseModalOkClick, props.service.paused]);\n\n  const handleDeleteClick = useCallback(() => {\n    const text = props.service.deleted ? dangerZoneLangResources.unDeleteServiceConfirmation : dangerZoneLangResources.deleteServiceConfirmation;\n    confirm(text, !props.service.deleted, handleDeleteModalOkClick);\n  }, [confirm, dangerZoneLangResources.deleteServiceConfirmation, dangerZoneLangResources.unDeleteServiceConfirmation, handleDeleteModalOkClick, props.service.deleted]);\n\n  return <>\n    <div className=\"service-danger-zone\">\n      <span className=\"service-danger-zone__header\">{dangerZoneLangResources.title}</span>\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.paused ? dangerZoneLangResources.unPauseServiceDescription : dangerZoneLangResources.pauseServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handlePauseClick}>\n          {props.service.paused ? dangerZoneLangResources.unPauseService : dangerZoneLangResources.pauseService}\n        </Button>\n      </div>\n      <hr className=\"service-danger-zone__divider\" />\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.deleted ? dangerZoneLangResources.unDeleteServiceDescription : dangerZoneLangResources.deleteServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"primary\" danger onClick={handleDeleteClick}>\n          {props.service.deleted ? dangerZoneLangResources.unDeleteService : dangerZoneLangResources.deleteService}\n        </Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const DangerZonePure = React.memo(DangerZone);\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button, Divider, Input, Modal, Radio, RadioChangeEvent, Typography, Popconfirm } from 'antd';\nimport React, { useCallback, useRef, useState } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { KeyType, Service } from '@tezospayments/common';\n\nimport { addApiKey } from '../../../../../store/services/slice';\nimport { useCurrentLanguageResources } from '../../../../hooks';\n\nimport './AddApiKeyModal.scss';\n\nconst Search = Input.Search;\n\ninterface AddApiKeyModalProps {\n  service: Service;\n  visible: boolean;\n  onCancel: () => void;\n}\n\nconst algorithmOptions = Object.values(KeyType).map(v => ({ label: v, value: v }));\n\nexport const AddApiKeyModal = (props: AddApiKeyModalProps) => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const dispatch = useDispatch();\n\n  const [algorithmType, setAlgorithmType] = useState(algorithmOptions[0]?.value || KeyType.Ed25519);\n  const handleAlgorithmTypeChanges = useCallback((e: RadioChangeEvent) => {\n    setAlgorithmType(e.target.value);\n  }, []);\n\n  const [name, setName] = useState('');\n  const handleNameChanged = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  }, []);\n\n  const [publicKey, secretKey] = getKeys(algorithmType);\n\n  const publicKeyRef = useRef<Input>(null);\n  const secretKeyRef = useRef<Input>(null);\n\n  const handleCopyClick = useCallback((ref: React.RefObject<Input>) => {\n    const input = ref.current;\n\n    if (input) {\n      input.select();\n      navigator.clipboard.writeText(input.state.value);\n    }\n  }, []);\n\n  const handleAddKeyConfirm = useCallback(() => {\n    dispatch(addApiKey({ service: props.service, signingKey: { name, publicKey } }));\n    props.onCancel();\n  }, [dispatch, name, props, publicKey]);\n\n  return <Modal className=\"api-key-modal\" title={`${servicesLangResources.devZone.addKey} (${langResources.common.comingSoon.toLowerCase()})`}\n    centered destroyOnClose visible={props.visible} onCancel={props.onCancel}\n    footer={<div className=\"api-key-modal__footer\">\n      <Button key=\"back\" onClick={props.onCancel}>\n        {commonLangResources.cancel}\n      </Button>\n      <Popconfirm\n        disabled={!name}\n        title={servicesLangResources.devZone.saveSecretKeyConfirm}\n        placement=\"topRight\"\n        onConfirm={handleAddKeyConfirm}\n        okText={commonLangResources.yes}\n        cancelText={commonLangResources.no}\n      >\n        <Button key=\"submit\" className=\"api-key-modal__ok-button\" type=\"primary\" disabled={!name}>\n          {servicesLangResources.devZone.saveKeys}\n        </Button>\n      </Popconfirm>\n    </div>}\n  >\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.name}:</span>\n    <Input autoFocus value={name} onChange={handleNameChanged} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.algorithm}:</span>\n    <Radio.Group options={algorithmOptions} value={algorithmType} onChange={handleAlgorithmTypeChanges} />\n    <Divider />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.publicKey}:</span>\n    <Search ref={publicKeyRef} readOnly value={publicKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(publicKeyRef)} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.secretKey}:</span>\n    <Search ref={secretKeyRef} readOnly value={secretKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(secretKeyRef)} />\n    <Typography.Text mark>{servicesLangResources.devZone.saveSecretKeyWarning}</Typography.Text>\n  </Modal>;\n};\n\nexport const AddApiKeyModalPure = React.memo(AddApiKeyModal);\n\nconst getKeys = (type: KeyType): [string, string] => {\n  switch (type) {\n    case KeyType.Ed25519:\n      return ['edpkvQXtVcy8YrBLmMhn8EDt4Zb46TWZX1QUxxepFzJgsWU6YKadJP', 'edskRwse4Z8ZZNCC7xzCEUrTBtCeEPhv8gfBiWrE8cysRQpz45HCQjChdDckNEBZZMCxjPMkHhmGkUnwBs22cKr2nrwiGfQHsP'];\n    case KeyType.Secp256k1:\n      return ['sppk7cjayJkatAA6Kzd9w6DSRrRDq6JoRAfugi1fqahpyjCBRCLGfob', 'spsk1VyxSVYfX3CfNpSNDxBdR97LnAdQA59jWpc4HYXtYg1cX53V6Y'];\n    case KeyType.P256:\n      return ['p2pk65H621C6fgfcuhiUcQmx3GRz8iNxjzMB1BG2WQKAYKEcbVzyJMD', 'p2sk2yHAwhsLaRCm8zAfN4K1Py7fBhxgR1kAB5SCYn9yGWofkjqNTN'];\n\n    default:\n      throw new Error('Unknown algorithm type');\n  }\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, List, Modal } from 'antd';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { Service, ServiceSigningKey } from '@tezospayments/common';\n\nimport { deleteApiKey } from '../../../../../store/services/slice';\nimport { useCurrentLanguageResources } from '../../../../hooks';\n\nimport './ApiKeyList.scss';\n\ninterface ApiKeyListProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ApiKeyList = (props: ApiKeyListProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const dispatch = useDispatch();\n  const apiKeys = useMemo(() => [...props.service.signingKeys.values()], [props.service.signingKeys]);\n\n  const confirm = useCallback((text: string, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: 'danger',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handleRemoveItem = useCallback((item: ServiceSigningKey) => {\n    const text = servicesLangResources.devZone.deleteKeyConfirmation + (item.name ? `: ${item.name}` : '');\n    confirm(text, () => {\n      dispatch(deleteApiKey({ service: props.service, publicKey: item.publicKey }));\n    });\n  }, [confirm, dispatch, props.service, servicesLangResources.devZone.deleteKeyConfirmation]);\n\n  return <List size=\"small\" bordered>\n    {apiKeys.length\n      ? apiKeys.map(apiKey => <List.Item key={apiKey.publicKey} className=\"api-keys__item\">\n        <span>{apiKey.name}</span>\n        <div>\n          <span className=\"api-keys__item-key\">{apiKey.publicKey}</span>\n          <Button disabled={props.readOnly} onClick={() => handleRemoveItem(apiKey)} icon={<DeleteOutlined />} danger type=\"link\"></Button>\n        </div>\n      </List.Item>\n      ) :\n      <List.Item className=\"api-keys__item api-keys__item_empty\">\n        {servicesLangResources.devZone.noApiKeysAddedYet}\n      </List.Item>}\n  </List>;\n};\n\nexport const ApiKeyListPure = React.memo(ApiKeyList);\n","\nimport { Button, } from 'antd';\nimport React, { useCallback, useState } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { AddApiKeyModalPure } from './AddApiKeyModal';\nimport { ApiKeyListPure } from './ApiKeyList';\n\nimport './DevZone.scss';\n\ninterface DevZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DevZone = (props: DevZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const [addKeyModalVisible, setAddKeyModalVisible] = useState(false);\n  const handleAddKeyButtonClick = useCallback(() => setAddKeyModalVisible(true), []);\n  const handleClosePopupClick = useCallback(() => setAddKeyModalVisible(false), []);\n\n  return <>\n    <div className=\"service-dev-zone__button-container\">\n      <span className=\"service-dev-zone__header\">{`${servicesLangResources.devZone.title} (${langResources.common.comingSoon.toLowerCase()}`})</span>\n      <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handleAddKeyButtonClick}>\n        {servicesLangResources.devZone.addKey}\n      </Button>\n    </div>\n    <ApiKeyListPure service={props.service} readOnly={props.readOnly} />\n    <AddApiKeyModalPure service={props.service} visible={addKeyModalVisible} onCancel={handleClosePopupClick} />\n  </>;\n};\n\nexport const DevZonePure = React.memo(DevZone);\n","import { EditFilled } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service, ServiceOperationType, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure, CustomTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './Header.scss';\n\ninterface HeaderProps {\n  service: Service;\n  isUpdating: boolean;\n  readOnly: boolean;\n}\n\nexport const Header = ({ service, isUpdating, readOnly }: HeaderProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const logoClassName = combineClassNames(\n    'service__logo',\n    service?.iconUrl ? 'service__logo_image' : 'service__logo_text',\n  );\n\n  const arePaymentsAllowed = service?.allowedOperationType === ServiceOperationType.Payment || service?.allowedOperationType === ServiceOperationType.All;\n  const areDonationsAllowed = service?.allowedOperationType === ServiceOperationType.Donation || service?.allowedOperationType === ServiceOperationType.All;\n\n  const handleEditClick = useCallback(() => {\n    history.push(`${config.routers.services}/${service.contractAddress}?edit=true`);\n  }, [history, service.contractAddress]);\n\n  return <div className=\"service-header\">\n    <div className=\"service-header__logo-container\">\n      {service.iconUrl\n        ? <img className={logoClassName} alt=\"logo\" src={service.iconUrl} />\n        : <span className={logoClassName}>{text.getAvatarText(service.name)}</span>}\n      <div className=\"service-header__main-info\">\n        <h1>{service.name}</h1>\n        <ExplorerLinkPure hash={service.contractAddress} className=\"service__link\" showCopyButton>\n          {service.contractAddress}\n        </ExplorerLinkPure>\n        <div className=\"service-header__tags-container\">\n          <ActiveTagPure paused={service.paused} deleted={service.deleted} isUpdating={isUpdating} />\n          {arePaymentsAllowed && <CustomTagPure text={servicesLangResources.operations.paymentsEnabled} />}\n          {areDonationsAllowed && <CustomTagPure text={servicesLangResources.operations.donationsEnabled} />}\n        </div>\n      </div>\n    </div>\n    <Button disabled={readOnly} className=\"service-button\" icon={<EditFilled />} type=\"primary\" onClick={handleEditClick}>{servicesLangResources.editing.editService}</Button>\n  </div>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","var _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgTelegram({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"1000px\",\n    height: \"1000px\",\n    viewBox: \"0 0 1000 1000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"currentColor\",\n    cx: 500,\n    cy: 500,\n    r: 500\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z\",\n    id: \"Path-3\",\n    fill: \"#FFFFFF\"\n  }))));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTelegram);\nexport default __webpack_public_path__ + \"static/media/telegram.fee81c94.svg\";\nexport { ForwardRef as ReactComponent };","import {\n  LinkOutlined, FacebookOutlined, TwitterOutlined, InstagramOutlined,\n  GithubOutlined, MailOutlined, RedditOutlined\n} from '@ant-design/icons';\n\nimport { IconId } from '@tezospayments/common';\n\nimport { TelegramIcon } from '../../../assets/icons';\n\nexport const iconIdMap = {\n  [IconId.Common]: LinkOutlined,\n  [IconId.Email]: MailOutlined,\n  [IconId.Telegram]: TelegramIcon,\n  [IconId.Facebook]: FacebookOutlined,\n  [IconId.Twitter]: TwitterOutlined,\n  [IconId.Instagram]: InstagramOutlined,\n  [IconId.GitHub]: GithubOutlined,\n  [IconId.Reddit]: RedditOutlined\n};\n","import React from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { ExternalLink } from '../../common';\nimport { iconIdMap } from './iconIdMap';\nimport './ServiceLink.scss';\n\ninterface ServiceLinkProps {\n  link: string;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLink = (props: ServiceLinkProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.link);\n  if (!linkInfo)\n    return null;\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <span className=\"service-link\">\n    <Icon className=\"service-link__icon\" />\n    <ExternalLink className=\"service-link__link\" href={linkInfo.formattedLink}>{linkInfo.displayLink}</ExternalLink>\n  </span>;\n};\n\nexport const ServiceLinkPure = React.memo(ServiceLink);\n","import { combineClassNames } from '@tezospayments/common';\n\nimport { ServiceLink } from './ServiceLink';\nimport './ServiceLinks.scss';\n\ninterface ServiceLinksProps {\n  className?: string;\n  links: readonly string[];\n}\n\nexport const ServiceLinks = (props: ServiceLinksProps) => {\n  return <div className={combineClassNames('service-links', props.className)}>\n    {props.links.map(link => <ServiceLink link={link} key={link} />).filter(Boolean)}\n  </div>;\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, Input } from 'antd';\nimport { useCallback } from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { iconIdMap } from './iconIdMap';\n\nimport './ServiceLinkEditor.scss';\n\ninterface ServiceLinkEditorProps {\n  value: string;\n  readOnly: boolean;\n  onChange: (e: { value: string }) => void\n  onDelete: () => void;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLinkEditor = (props: ServiceLinkEditorProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.value, true);\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    props.onChange({ value: e.target.value });\n  }, [props]);\n\n  if (!linkInfo) {\n    return null;\n  }\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <div className=\"service-link-editor\">\n    <Icon className=\"service-link-editor__icon\" />\n    <Input readOnly={props.readOnly} className=\"service-link-editor__input\" value={props.value} onChange={handleChange} />\n    <Button disabled={props.readOnly} className=\"service-link-editor__delete-button\" type=\"text\" danger icon={<DeleteOutlined />} onClick={props.onDelete} />\n  </div>;\n};\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport { useCallback } from 'react';\n\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ServiceLinkEditor } from './ServiceLinkEditor';\n\nimport './ServiceLinksEditor.scss';\n\ninterface ServiceLinksEditorProps {\n  value: string[];\n  readOnly: boolean;\n  onChange: (e: { value: string[] }) => void;\n}\n\nexport const ServiceLinksEditor = (props: ServiceLinksEditorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const handleChange = useCallback((i: number, e: { value: string }) => {\n    const value = [...props.value];\n    value[i] = e.value;\n    props.onChange({ value });\n  }, [props]);\n\n  const handleDelete = useCallback((i: number) => {\n    const value = [...props.value];\n    value.splice(i, 1);\n    props.onChange({ value });\n  }, [props]);\n\n  const handleAdd = useCallback(() => {\n    const value = [...props.value, ''];\n    props.onChange({ value });\n  }, [props]);\n\n  const editors = props.value.map((l, i) => <ServiceLinkEditor readOnly={props.readOnly} key={i} value={l} onDelete={() => handleDelete(i)} onChange={e => handleChange(i, e)} />);\n\n  return <div className=\"service-links-editor\">\n    {editors}\n    <Button disabled={props.readOnly} className=\"service-links-editor__button\" icon={<PlusOutlined />} onClick={handleAdd}>\n      {servicesLangResources.editing.addLink}\n    </Button>\n  </div >;\n};\n","import React from 'react';\n\nimport { tezosMeta, Token, Service } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nimport './Tokens.scss';\n\ninterface TokensProps {\n  service: Service\n}\n\nexport const Tokens = ({ service }: TokensProps) => {\n  const tokens = useAppSelector(selectTokensState);\n  const allowedTokens: Token[] = [];\n  service?.allowedTokens.assets.forEach(a => {\n    const token = tokens.get(a);\n    if (token) {\n      allowedTokens.push(token);\n    }\n  });\n\n  const tokenItems = [];\n  if (service?.allowedTokens.tez) {\n    tokenItems.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      className=\"service-token-list-item\"\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  allowedTokens.forEach(t => {\n    tokenItems.push(<TokenList.Item\n      key={t.metadata?.symbol}\n      className=\"service-token-list-item\"\n      ticker={t.metadata?.symbol || 'unknown'}\n      name={t.metadata?.name || 'unknown'}\n      decimals={t.metadata ? t.metadata.decimals : 2}\n      iconSrc={t.metadata?.thumbnailUri}\n      highlightSign />);\n  });\n\n  return <TokenList>\n    {tokenItems}\n  </TokenList>;\n};\n\nexport const TokensPure = React.memo(Tokens);\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button, Checkbox, Input } from 'antd';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { ServiceLinkHelper, Service, ServiceOperationType } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { getCurrentAccount } from '../../../../store/accounts/selectors';\nimport { createService, updateService } from '../../../../store/services/slice';\nimport { ServiceLinksEditor } from '../../../common/ServiceLinks';\nimport { useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { View } from '../../View';\nimport { TokensPure } from '../Tokens';\n\nimport './ServiceEditForm.scss';\n\ninterface ServiceEditFormProps {\n  service: Service;\n  isCreateMode: boolean;\n  readOnly: boolean;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceEditForm = (props: ServiceEditFormProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const currentAccount = useAppSelector(getCurrentAccount);\n\n  const dispatch = useAppDispatch();\n\n  const handleCancelClick = useCallback(() => {\n    history.push(`${config.routers.services}/${props.service.contractAddress}`);\n  }, [history, props.service.contractAddress]);\n\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [name, setName] = useState(props.service.name);\n  const [description, setDescription] = useState(props.service.description);\n  const [links, setLinks] = useState(props.service.links);\n\n  const validate = useCallback(() => {\n    const isValid = !!name\n      && links.every(l => !!serviceLinkHelper.getLinkInfo(l));\n\n    setIsFormValid(isValid);\n  }, [links, name]);\n\n  useEffect(() => validate(), [validate]);\n\n  const handleNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setDescription(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleLinksChange = useCallback((e: { value: string[] }) => {\n    setLinks(e.value);\n    validate();\n  }, [validate]);\n\n  const [acceptPayments, setAcceptPayments] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Payment);\n  const [acceptDonations, setAcceptDonations] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Donation);\n\n  const handleAcceptPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptPayments(e.target.checked);\n    if (!e.target.checked && !acceptDonations) {\n      setAcceptDonations(true);\n    }\n  }, [acceptDonations]);\n\n  const handleDonationsPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptDonations(e.target.checked);\n    if (!e.target.checked && !acceptPayments) {\n      setAcceptPayments(true);\n    }\n  }, [acceptPayments]);\n\n  const handleUpdateClick = useCallback(() => {\n    const allowedOperationType = acceptPayments && acceptDonations\n      ? ServiceOperationType.All\n      : acceptPayments\n        ? ServiceOperationType.Payment\n        : ServiceOperationType.Donation;\n\n    const updatedService: Service = {\n      ...props.service,\n      name,\n      description,\n      allowedOperationType,\n      links,\n      network: props.isCreateMode && currentAccount ? currentAccount.network : props.service.network\n    };\n\n\n    if (props.isCreateMode) {\n      dispatch(createService(updatedService));\n    } else {\n      dispatch(updateService(updatedService));\n    }\n\n    handleCancelClick();\n  }, [acceptDonations, acceptPayments, currentAccount, description, dispatch, handleCancelClick, links, name, props.isCreateMode, props.service]);\n\n  const operationName = props.isCreateMode ? servicesLangResources.editing.createService : servicesLangResources.editing.updateService;\n\n  return <>\n    <View.Title>{operationName}</View.Title>\n    <div className=\"service-edit\">\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.serviceName}</span>\n      <Input readOnly={props.readOnly} placeholder={servicesLangResources.editing.serviceName} value={name} onChange={handleNameChange} />\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.description}</span>\n      <Input.TextArea readOnly={props.readOnly} rows={5} placeholder={servicesLangResources.editing.description} value={description} onChange={handleDescriptionChange} />\n      <div className=\"service-edit__lists-container\">\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.allowedCurrencies}</span>\n          <TokensPure service={props.service} />\n          <Button className=\"service-edit__button\" disabled icon={<PlusOutlined />}>\n            {`${servicesLangResources.editing.addCurrency} (${commonLangResources.comingSoon})`}\n          </Button>\n        </div>\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.links}</span>\n          <ServiceLinksEditor readOnly={props.readOnly} value={links as string[]} onChange={handleLinksChange} />\n        </div>\n      </div>\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.accept}</span>\n      <div className=\"service-edit__accept-list\">\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptPayments} onChange={handleAcceptPaymentsChange}>\n          {servicesLangResources.editing.acceptPayments}\n        </Checkbox>\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptDonations} onChange={handleDonationsPaymentsChange}>\n          {servicesLangResources.editing.acceptDonations}\n        </Checkbox>\n      </div>\n      <div className=\"service-edit__buttons-container\">\n        <Button className=\"service-edit__button\" onClick={handleCancelClick}>{commonLangResources.cancel}</Button>\n        <Button className=\"service-edit__button\" onClick={handleUpdateClick} disabled={!isFormValid || props.readOnly} type=\"primary\">{operationName}</Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const ServiceEditFormPure = React.memo(ServiceEditForm);\n","import React from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { ServiceLinks } from '../../../common/ServiceLinks';\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { TokensPure } from '../Tokens';\n\nimport './ViewZone.scss';\n\ninterface ViewZoneProps {\n  service: Service;\n}\n\nexport const ViewZone = ({ service }: ViewZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return <div className=\"service-view-zone\">\n    <p className=\"service-view-zone__description\">{service.description}</p>\n    <div className=\"service-view-zone__lists-container\">\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.allowedCurrencies}</span>\n        <TokensPure service={service} />\n      </div>\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.links}</span>\n        <ServiceLinks className=\"service-info__links\" links={service.links} />\n      </div>\n    </div>\n  </div>;\n};\n\nexport const ViewZonePure = React.memo(ViewZone);\n","import { Skeleton } from 'antd';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { emptyService, Service as ServiceInterface, combineClassNames } from '@tezospayments/common';\n\nimport { getOperationsByService, selectServicesState } from '../../../store/services/selectors';\nimport { useAppSelector, useQuery } from '../../hooks';\nimport { View } from '../View';\nimport { ActionsZonePure } from './ActionsZone';\nimport { DangerZonePure } from './DangerZone';\nimport { DevZonePure } from './DevZone';\nimport { HeaderPure } from './Header';\nimport { ServiceEditFormPure } from './ServiceEditForm';\nimport { ViewZonePure } from './ViewZone';\n\nimport './Service.scss';\n\nexport enum ServiceViewMode {\n  ViewAndEdit, Create\n}\n\ninterface ServiceProps {\n  mode: ServiceViewMode,\n}\n\nexport const Service = (props: ServiceProps) => {\n  const query = useQuery();\n  const isEdit = !!query.get('edit');\n  const { address } = useParams<{ address: string }>();\n  const { services, initialized: isInitialized } = useAppSelector(selectServicesState);\n  const pendingOperations = useAppSelector(getOperationsByService);\n  const isUpdating = pendingOperations.has(address);\n  const readOnly = !!pendingOperations.size;\n  const isCreateMode = props.mode === ServiceViewMode.Create;\n\n  //TODO: Use Map\n  const service = isCreateMode ? { ...emptyService } as ServiceInterface : services.filter(s => s.contractAddress === address)[0];\n\n  const title = isInitialized && service ? service.name : address;\n  const className = combineClassNames('service-container', isEdit || isCreateMode ? 'service-container_edit' : 'service-container_view');\n\n  return <View title={title} className={className}>\n    {!isInitialized || !service\n      ? <Skeleton active />\n      : isEdit || isCreateMode\n        ? <ServiceEditFormPure service={service} isCreateMode={isCreateMode} readOnly={readOnly} />\n        : <>\n          <HeaderPure service={service} isUpdating={isUpdating} readOnly={readOnly} />\n          <ViewZonePure service={service} />\n          <ActionsZonePure service={service} readOnly={isUpdating || service.deleted} />\n          <DevZonePure service={service} readOnly={readOnly} />\n          <DangerZonePure service={service} readOnly={readOnly} />\n        </>}\n  </View>;\n};\n\nexport const ServicePure = React.memo(Service);\n","import { useLocation } from 'react-router-dom';\n\nexport const useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n","import { GlobalOutlined, GithubFilled, TwitterCircleFilled, RedditCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { TelegramIcon } from '../../../assets/icons';\nimport { config } from '../../../config';\nimport { ExternalLink } from '../../common';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport './About.scss';\n\nexport const About = () => {\n  const langResources = useCurrentLanguageResources();\n  const aboutLangResources = langResources.views.about;\n\n  return <View title={aboutLangResources.title} className=\"about-view\">\n    <View.Title className=\"about-view__title\">{aboutLangResources.detailedTitle}</View.Title>\n    <div className=\"about-view__version-info\">\n      <ExternalLink href={config.app.version.link}>\n        {config.app.version.name}\n      </ExternalLink>\n      &nbsp;{aboutLangResources.build}&nbsp;\n      <ExternalLink href={config.app.buildInfo.link}>\n        {config.app.buildInfo.commitShortSha}\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__links\">\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.webSite}>\n        <GlobalOutlined className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.gitHub}>\n        <GithubFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.telegram}>\n        <TelegramIcon className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.twitter}>\n        <TwitterCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.reddit}>\n        <RedditCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__powered-by\">\n      {aboutLangResources.poweredBy}\n      &nbsp;\n      <ExternalLink href={config.links.tzKT}>\n        {aboutLangResources.tzKt}\n      </ExternalLink>\n      &nbsp;\n      {aboutLangResources.api}\n    </div>\n  </View>;\n};\n\nexport const AboutPure = React.memo(About);\n","import { Button, Dropdown, Menu } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Network, networks, networksCollection } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { connectAccount } from '../../../../store/accounts/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './ConnectDropdown.scss';\n\nexport const ConnectDropdown = () => {\n  const dispatch = useAppDispatch();\n  const handleConnectButtonClick = useCallback(() => {\n    dispatch(connectAccount(networks.granadanet));\n  }, [dispatch]);\n\n  const handleMenuItemButtonClick = useCallback((e: { key: string }) => {\n    const selectedNetwork = networksCollection.find(n => n.id === e.key);\n    if (selectedNetwork) {\n      dispatch(connectAccount(selectedNetwork));\n    }\n  }, [dispatch]);\n\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const networkTypes: Network[] = [];\n  const connectMenuItems = networkTypes.map(t => {\n    const network = config.tezos.networks[t.name];\n\n    return <Menu.Item key={t.id}>\n      <div className=\"connect-dropdown__item-container\">\n        <div className=\"connect-dropdown__item-icon-container\">\n          <div className=\"connect-dropdown__item-icon\" style={{ backgroundColor: network.color }}></div>\n        </div>\n        <div className=\"connect-dropdown__item-text\">{`${connectLangResources.connectTo} ${network.title}`}</div>\n      </div>\n    </Menu.Item>;\n  });\n\n  const connectMenu = (\n    <Menu onClick={handleMenuItemButtonClick}>\n      {connectMenuItems}\n    </Menu>\n  );\n\n  const connectButtonTitle = `${connectLangResources.connectTo} ${config.tezos.networks.granadanet.title}`;\n\n  return connectMenuItems.length\n    ? <Dropdown.Button className=\"connect-dropdown\" type=\"primary\" onClick={handleConnectButtonClick} overlay={connectMenu}>\n      {connectButtonTitle}\n    </Dropdown.Button>\n    : <Button type=\"primary\" onClick={handleConnectButtonClick}>{connectButtonTitle}</Button>;\n};\n\nexport const ConnectDropdownPure = React.memo(ConnectDropdown);\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { getCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport './Connect.scss';\nimport { ConnectDropdownPure } from './ConnectDropdown';\n\nexport const Connect = () => {\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const currentAccount = useAppSelector(getCurrentAccount);\n  if (currentAccount) {\n    return <Redirect push to={config.routers.overview} />;\n  }\n\n  return <View title=\"Connect\" className=\"connect\">\n    <div className=\"connect-info-container\">\n      <div className=\"connect-info-container__message\">{connectLangResources.description}</div>\n      <ConnectDropdownPure />\n    </div>\n  </View >;\n};\nexport const ConnectPure = React.memo(Connect);\n","import { InputNumber, Select } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport './PaymentAmount.scss';\n\ninterface DonationAmountProps {\n  onChange: (rawValue: string) => void;\n  value: string;\n}\n\nexport const PaymentAmount = (props: DonationAmountProps) => {\n  const assets = [\n    { label: tezosMeta.symbol, value: tezosMeta.symbol, imageUrl: tezosMeta.thumbnailUri },\n  ];\n\n  const options = assets.map(a => <Select.Option key={a.label} value={a.value} label={a.label}>\n    <div className=\"payment-amount__select-option\">\n      <img className=\"payment-amount__select-option-image\" alt={a.label} src={a.imageUrl} />\n      <span className=\"payment-amount__select-option-label\">{a.label}</span>\n    </div>\n  </Select.Option>);\n\n  return <div className=\"payment-amount\">\n    <Select className=\"payment-amount__select\" value={tezosMeta.symbol}>\n      {options}\n    </Select>\n    <InputNumber className=\"payment-amount__input\" min={'0'} value={props.value.toString()} onChange={props.onChange} />\n  </div>;\n};\n\nexport const PaymentAmountPure = React.memo(PaymentAmount);\n","import { Input, Radio, RadioChangeEvent, Select } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { PaymentType } from '@tezospayments/common';\n\nimport { getOperationsByService, getSortedServices } from '../../../../store/services/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { PaymentAmountPure } from '../PaymentAmount';\n\nimport './AcceptPaymentsSettings.scss';\n\ninterface AcceptPaymentsSettingsProps {\n  serviceAddress: string | undefined;\n  onServiceAddressChange: (value: SelectValue) => void;\n\n  paymentType: PaymentType;\n  onPaymentTypeChange: (e: RadioChangeEvent) => void;\n\n  amount: string;\n  onAmountChange: (rawValue: string) => void;\n\n  publicData: string;\n  onPublicDataChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\n  donationData: string;\n  onDonationDataChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\n}\n\nexport const AcceptPaymentsSettings = (props: AcceptPaymentsSettingsProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const serviceLangResources = langResources.views.services;\n  const operationsByService = useSelector(getOperationsByService);\n\n  const services = useAppSelector(getSortedServices);\n  const serviceOptions = services.filter(s => !s.deleted).map(service => ({\n    label: service.name,\n    value: service.contractAddress,\n    disabled: operationsByService.has(service.contractAddress)\n  }));\n\n  const typeOptions = [\n    { label: 'Payment', value: PaymentType.Payment },\n    { label: 'Donation', value: PaymentType.Donation },\n  ];\n\n  return <div className=\"accept-payments-settings\">\n    <span className=\"accept-payments-settings__caption\">{serviceLangResources.service}</span>\n    <Select\n      className=\"accept-payments-settings__service-select\"\n      options={serviceOptions}\n      value={props.serviceAddress}\n      onChange={props.onServiceAddressChange}\n    />\n\n    <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.type}</span>\n    <Radio.Group\n      className=\"accept-payments-settings__type-select\"\n      optionType=\"button\"\n      buttonStyle=\"outline\"\n      options={typeOptions}\n      value={props.paymentType}\n      onChange={props.onPaymentTypeChange}\n    />\n\n    {props.paymentType === PaymentType.Payment\n      ? <>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.amount}</span>\n        <PaymentAmountPure onChange={props.onAmountChange} value={props.amount} />\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.paymentPublicData}</span>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.orderId}</span>\n        <Input className=\"accept-payments-settings__order-id-input\" value={props.publicData} onChange={props.onPublicDataChange} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.orderIdHelpText}</span>\n      </>\n      : <>\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.donationData}</span>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.shortDescription}</span>\n        <Input.TextArea className=\"accept-payments-settings__order-id-input\" value={props.donationData} onChange={props.onDonationDataChange}\n          showCount rows={5} maxLength={250} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.shortDescriptionHelpText}</span>\n      </>}\n  </div>;\n};\n\nexport const AcceptPaymentsSettingsPure = React.memo(AcceptPaymentsSettings);\n","export default {\n  defaultNetworkName: 'mainnet',\n  paymentAppBaseUrl: 'https://payment.tezospayments.com'\n} as const;\n","import { guards } from '@tezospayments/common';\n\nconst getErrorMessageByValidationErrors = (validationErrors: readonly string[], brief = '') => validationErrors\n  .reduce((result, error, index) => `${result}\\n\\t${index + 1}. ${error};`, brief);\n\nexport abstract class TezosPaymentsError extends Error {\n  readonly name: string;\n\n  constructor(message?: string) {\n    super(message);\n\n    this.name = this.constructor.name;\n  }\n}\n\nexport class InvalidTezosPaymentsOptionsError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidTezosPaymentsOptionsError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'options are invalid, see details below:');\n  }\n}\n\nexport class InvalidPaymentCreateParametersError extends TezosPaymentsError {\n}\n\nexport class InvalidPaymentError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidPaymentError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'payment is invalid, see details below:');\n  }\n}\n\nexport class UnsupportedPaymentUrlTypeError extends TezosPaymentsError {\n}\n\nexport class PaymentUrlError extends TezosPaymentsError {\n}\n\nexport class DonationUrlError extends TezosPaymentsError {\n}\n","import { CustomNetwork, Donation, Network, Payment, PaymentUrlType } from '@tezospayments/common';\n\nexport abstract class PaymentUrlFactory {\n  constructor(readonly urlType: PaymentUrlType) {\n  }\n\n  abstract createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string | Promise<string>;\n}\n","import {\n  native, PaymentUrlType,\n  PaymentSerializer, CustomNetwork, Network, Payment, Donation, DonationSerializer, PaymentType, getEncodedPaymentUrlType\n} from '@tezospayments/common';\n\nimport constants from '../constants';\nimport { DonationUrlError, PaymentUrlError } from '../errors';\nimport { PaymentUrlFactory } from './paymentUrlFactory';\n\nexport class Base64PaymentUrlFactory extends PaymentUrlFactory {\n  static readonly baseUrl = constants.paymentAppBaseUrl;\n\n  protected readonly paymentSerializer: PaymentSerializer = new PaymentSerializer();\n  protected readonly donationSerializer: DonationSerializer = new DonationSerializer();\n\n  constructor(readonly baseUrl: string = Base64PaymentUrlFactory.baseUrl) {\n    super(PaymentUrlType.Base64);\n  }\n\n  createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string {\n    return paymentOrDonation.type === PaymentType.Payment\n      ? this.createPaymentUrlInternal(paymentOrDonation, network)\n      : this.createDonationUrlInternal(paymentOrDonation, network);\n  }\n\n  protected createPaymentUrlInternal(payment: Payment, network: Network | CustomNetwork): string {\n    const serializedPaymentBase64 = this.paymentSerializer.serialize(payment);\n    if (!serializedPaymentBase64)\n      throw new PaymentUrlError('It\\'s impossible to serialize the payment');\n\n    try {\n      return this.createUrl(true, payment.targetAddress, serializedPaymentBase64, network);\n    } catch (error: unknown) {\n      throw new PaymentUrlError('It\\'s impossible to create an URL for the payment');\n    }\n  }\n\n  protected createDonationUrlInternal(donation: Donation, network: Network | CustomNetwork): string {\n    const serializedDonationBase64 = this.donationSerializer.serialize(donation);\n    if (!serializedDonationBase64 && serializedDonationBase64 !== '')\n      throw new DonationUrlError('It\\'s impossible to serialize the donation');\n\n    try {\n      return this.createUrl(false, donation.targetAddress, serializedDonationBase64, network);\n    } catch (error: unknown) {\n      throw new DonationUrlError('It\\'s impossible to create an URL for the donation');\n    }\n  }\n\n  protected createUrl(\n    isPayment: boolean,\n    targetAddress: string,\n    serializedPaymentOrDonationBase64: string,\n    network: Network | CustomNetwork\n  ) {\n    const url = new native.URL(`${targetAddress}/${isPayment ? 'payment' : 'donation'}`, this.baseUrl);\n\n    if (serializedPaymentOrDonationBase64 !== '')\n      url.hash = getEncodedPaymentUrlType(this.urlType) + serializedPaymentOrDonationBase64;\n    if (network.name !== constants.defaultNetworkName)\n      url.searchParams.append('network', network.name);\n\n    return url.href;\n  }\n}\n","export type Payment = import('@tezospayments/common').Payment & {\n  readonly url: string;\n};\n\nexport enum SigningType {\n  ApiSecretKey = 0,\n  Wallet = 1,\n  Custom = 2,\n}\n","import { Payment } from '@tezospayments/common';\n\nimport type { SigningType } from '../models';\n\nexport abstract class TezosPaymentsSigner {\n  constructor(readonly signingType: SigningType) {\n  }\n\n  abstract sign(payment: Payment): string | Promise<string>;\n}\n","import { Payment } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class ApiSecretKeySigner extends TezosPaymentsSigner {\n  constructor(readonly apiSecretKey: string) {\n    super(SigningType.ApiSecretKey);\n  }\n\n  sign(_payment: Payment): string | Promise<string> {\n    throw new Error('Method not implemented.');\n  }\n}\n","import { Payment } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class WalletSigner extends TezosPaymentsSigner {\n  constructor(readonly walletSigning: (dataBytes: string) => Promise<string>) {\n    super(SigningType.Wallet);\n  }\n\n  sign(_payment: Payment): string | Promise<string> {\n    throw new Error('Method not implemented.');\n  }\n}\n","import { Payment } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class CustomSigner extends TezosPaymentsSigner {\n  constructor(readonly customSigning: (payment: Payment) => Promise<string>) {\n    super(SigningType.Custom);\n  }\n\n  sign(_payment: Payment): string | Promise<string> {\n    throw new Error('Method not implemented.');\n  }\n}\n","import BigNumber from 'bignumber.js';\nimport { nanoid } from 'nanoid';\n\nimport {\n  native, networks, tezosInfo, networkNameRegExp, networkIdRegExp, PaymentUrlType,\n  DeepReadonly, FailedValidationResults, Payment as CommonPaymentModel,\n  PaymentType, PaymentValidator, Mutable\n} from '@tezospayments/common';\n\nimport { InvalidPaymentCreateParametersError, InvalidPaymentError, InvalidTezosPaymentsOptionsError, UnsupportedPaymentUrlTypeError } from './errors';\nimport { Payment } from './models';\nimport type { DefaultPaymentParameters, PaymentCreateParameters, TezosPaymentsOptions } from './options';\nimport { Base64PaymentUrlFactory, PaymentUrlFactory } from './paymentUrlFactories';\nimport { ApiSecretKeySigner, CustomSigner, TezosPaymentsSigner, WalletSigner } from './signers';\nimport { tezosPaymentsOptionsValidationErrors } from './validationErrors';\n\nexport class TezosPayments {\n  static readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters> = {\n    network: networks.granadanet,\n    urlType: PaymentUrlType.Base64\n  };\n  protected static readonly optionsValidationErrors = tezosPaymentsOptionsValidationErrors;\n\n  protected readonly paymentValidator: PaymentValidator = new PaymentValidator();\n  protected readonly serviceContractAddress: string;\n  protected readonly signer: TezosPaymentsSigner;\n  protected readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters>;\n\n  private paymentUrlFactories: Map<PaymentUrlType, PaymentUrlFactory> = new Map();\n\n  constructor(options: DeepReadonly<TezosPaymentsOptions>) {\n    const errors = this.validateOptions(options);\n    if (errors)\n      throw new InvalidTezosPaymentsOptionsError(errors);\n\n    this.serviceContractAddress = options.serviceContractAddress;\n    this.defaultPaymentParameters = options.defaultPaymentParameters\n      ? {\n        network: options.defaultPaymentParameters.network || TezosPayments.defaultPaymentParameters.network,\n        urlType: options.defaultPaymentParameters.urlType || TezosPayments.defaultPaymentParameters.urlType\n      }\n      : TezosPayments.defaultPaymentParameters;\n\n    this.signer = this.createSigner(options.signing);\n    this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType);\n  }\n\n  async createPayment(createParameters: PaymentCreateParameters): Promise<Payment> {\n    if (!createParameters)\n      throw new InvalidPaymentCreateParametersError(createParameters);\n\n    let errors: FailedValidationResults;\n    if (createParameters.urlType || createParameters.network) {\n      errors = this.validateDefaultPaymentParameters(createParameters);\n      if (errors)\n        throw new InvalidPaymentError(errors);\n    }\n\n    const paymentWithoutUrl = this.createPaymentByCreateParameters(createParameters);\n    errors = this.paymentValidator.validate(paymentWithoutUrl, true);\n    if (errors)\n      throw new InvalidPaymentError(errors);\n\n    const paymentUrl = await this.getPaymentUrl(paymentWithoutUrl, createParameters.urlType, createParameters.network);\n    const payment = this.applyPaymentUrl(paymentWithoutUrl, paymentUrl);\n\n    return payment;\n  }\n\n  protected getPaymentUrl(\n    payment: CommonPaymentModel,\n    urlType = this.defaultPaymentParameters.urlType,\n    network = this.defaultPaymentParameters.network\n  ): string | Promise<string> {\n    return this.getPaymentUrlFactory(urlType).createPaymentUrl(payment, network);\n  }\n\n  protected applyPaymentUrl(payment: CommonPaymentModel, url: string): Payment {\n    (payment as Mutable<Payment>).url = url;\n\n    return (payment as Payment);\n  }\n\n  protected getPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    let paymentUrlFactory = this.paymentUrlFactories.get(paymentUrlType);\n    if (!paymentUrlFactory) {\n      paymentUrlFactory = this.createPaymentUrlFactory(paymentUrlType);\n      this.paymentUrlFactories.set(paymentUrlType, paymentUrlFactory);\n    }\n\n    return paymentUrlFactory;\n  }\n\n  protected createSigner(signingOptions: TezosPaymentsOptions['signing']): TezosPaymentsSigner {\n    if ('apiSecretKey' in signingOptions)\n      return new ApiSecretKeySigner(signingOptions.apiSecretKey);\n    if ('walletSigning' in signingOptions)\n      return new WalletSigner(signingOptions.walletSigning);\n\n    return new CustomSigner(signingOptions);\n  }\n\n  protected createPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    switch (paymentUrlType) {\n      case PaymentUrlType.Base64:\n        return new Base64PaymentUrlFactory();\n      default:\n        throw new UnsupportedPaymentUrlTypeError(`This payment url type is not supported: ${paymentUrlType}`);\n    }\n  }\n\n  protected createPaymentByCreateParameters(createParameters: PaymentCreateParameters): CommonPaymentModel {\n    const payment: Mutable<CommonPaymentModel> = {\n      type: PaymentType.Payment,\n      id: createParameters.id || nanoid(),\n      targetAddress: this.serviceContractAddress,\n      amount: new BigNumber(createParameters.amount),\n      data: createParameters.data,\n      created: createParameters.created ? new Date(createParameters.created) : new Date(),\n    };\n\n    if (createParameters.asset)\n      payment.asset = createParameters.asset;\n    if (createParameters.expired)\n      payment.expired = new Date(createParameters.expired);\n    if (createParameters.successUrl)\n      payment.successUrl = new native.URL(createParameters.successUrl);\n    if (createParameters.cancelUrl)\n      payment.cancelUrl = new native.URL(createParameters.cancelUrl);\n\n    return payment;\n  }\n\n  protected validateOptions(options: DeepReadonly<TezosPaymentsOptions>): FailedValidationResults {\n    return [\n      this.validateServiceContractAddress(options.serviceContractAddress),\n      this.validateSigningOptions(options.signing),\n      this.validateDefaultPaymentParameters(options.defaultPaymentParameters)\n    ].reduce(\n      (result, currentErrors) => currentErrors ? (result || []).concat(currentErrors) : result,\n      undefined\n    );\n  }\n\n  private validateServiceContractAddress(serviceContractAddress: string): FailedValidationResults {\n    if (!serviceContractAddress || typeof serviceContractAddress !== 'string')\n      return [TezosPayments.optionsValidationErrors.invalidServiceContractAddressType];\n\n    if (serviceContractAddress.length !== tezosInfo.addressLength)\n      return [TezosPayments.optionsValidationErrors.serviceContractAddressHasInvalidLength];\n\n    if (!tezosInfo.contractAddressPrefixes.some(prefix => serviceContractAddress.startsWith(prefix)))\n      return [TezosPayments.optionsValidationErrors.serviceContractAddressIsNotContractAddress];\n  }\n\n  private validateSigningOptions(signingOptions: TezosPaymentsOptions['signing']): FailedValidationResults {\n    if (typeof signingOptions !== 'object')\n      return [TezosPayments.optionsValidationErrors.invalidSigningOption];\n\n    if (typeof signingOptions === 'function')\n      return;\n    else if (!('apiSecretKey' in signingOptions) && !('walletSigning' in signingOptions))\n      return [TezosPayments.optionsValidationErrors.invalidSigningOption];\n\n    if ('apiSecretKey' in signingOptions) {\n      if (typeof signingOptions.apiSecretKey !== 'string')\n        return [TezosPayments.optionsValidationErrors.invalidApiSecretKeyType];\n      if (!signingOptions.apiSecretKey)\n        return [TezosPayments.optionsValidationErrors.emptyApiSecretKey];\n    }\n\n    if ('walletSigning' in signingOptions && typeof signingOptions.walletSigning !== 'function')\n      return [TezosPayments.optionsValidationErrors.invalidWalletSigningOptionType];\n  }\n\n  private validateDefaultPaymentParameters(defaultPaymentParameters: TezosPaymentsOptions['defaultPaymentParameters']): FailedValidationResults {\n    if (defaultPaymentParameters === undefined)\n      return;\n\n    if (typeof defaultPaymentParameters !== 'object')\n      return [TezosPayments.optionsValidationErrors.invalidDefaultPaymentParameters];\n\n    if ('network' in defaultPaymentParameters) {\n      if (typeof defaultPaymentParameters.network !== 'object')\n        return [TezosPayments.optionsValidationErrors.invalidNetwork];\n\n      if (defaultPaymentParameters.network.name === undefined || defaultPaymentParameters.network.name === '')\n        return [TezosPayments.optionsValidationErrors.emptyNetworkName];\n\n      if (typeof defaultPaymentParameters.network.name !== 'string' || !networkNameRegExp.test(defaultPaymentParameters.network.name))\n        return [TezosPayments.optionsValidationErrors.invalidNetworkName];\n\n      if (defaultPaymentParameters.network.id && (typeof defaultPaymentParameters.network.id !== 'string' || !networkIdRegExp.test(defaultPaymentParameters.network.id)))\n        return [TezosPayments.optionsValidationErrors.invalidNetworkId];\n    }\n\n    if ('urlType' in defaultPaymentParameters && defaultPaymentParameters.urlType !== PaymentUrlType.Base64)\n      return [TezosPayments.optionsValidationErrors.invalidUrlType];\n  }\n}\n","export const tezosPaymentsOptionsValidationErrors = {\n  // serviceContractAddress\n  invalidServiceContractAddressType: 'Type of the serviceContractAddress option is invalid',\n  serviceContractAddressHasInvalidLength: 'The serviceContractAddress option has an invalid address',\n  serviceContractAddressIsNotContractAddress: 'The serviceContractAddress option isn\\'t a contract address',\n  // signing\n  invalidSigningOption: 'The signing option is invalid',\n  invalidApiSecretKeyType: 'The API secret key has an invalid type, it should be a string',\n  emptyApiSecretKey: 'The API secret key is empty',\n  invalidWalletSigningOptionType: 'The WalletSigning option has an invalid type, it should be a function',\n  // defaultPaymentParameters\n  invalidDefaultPaymentParameters: 'The default payment parameters are invalid',\n  // defaultPaymentParameters.network\n  emptyNetworkName: 'The network name is empty',\n  invalidNetwork: 'The network is invalid',\n  invalidNetworkName: 'The network name is invalid',\n  invalidNetworkId: 'The network id is invalid',\n  // defaultPaymentParameters.urlType\n  invalidUrlType: 'The url type is invalid'\n} as const;\n","import constants from './constants';\nimport * as errors from './errors';\nimport * as paymentUrlFactories from './paymentUrlFactories';\nimport * as signers from './signers';\n\nexport { PaymentUrlType } from '@tezospayments/common';\n\nexport type { Payment } from './models';\nexport { SigningType } from './models';\n\nexport type { TezosPaymentsOptions, PaymentCreateParameters } from './options';\nexport { TezosPayments } from './tezosPayments';\n\nexport const internal = {\n  constants,\n  errors,\n  paymentUrlFactories,\n  signers\n};\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { internal as tezosPaymentsInternal } from 'tezospayments';\n\nimport { Donation, Payment, PaymentType, networks, Network } from '@tezospayments/common';\n\nimport { config } from '../../../../../config';\nimport { getCurrentAccount } from '../../../../../store/accounts/selectors';\nimport { ExternalLink } from '../../../../common';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\nimport './DirectLinkGenerator.scss';\n\ninterface DirectLinkGeneratorProps {\n  paymentOrDonation: Payment | Donation;\n}\n\nconst base64PaymentUrlFactory = new tezosPaymentsInternal.paymentUrlFactories.Base64PaymentUrlFactory(\n  config.links.tezosPayments.paymentsApp\n);\n\nconst getPaymentLink = (paymentOrDonation: Payment | Donation, network: Network) => {\n  try {\n    return base64PaymentUrlFactory.createPaymentUrl(paymentOrDonation, network);\n  }\n  catch {\n    return '';\n  }\n};\n\nexport const DirectLinkGenerator = ({ paymentOrDonation }: DirectLinkGeneratorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const currentAccount = useAppSelector(getCurrentAccount);\n\n  // TODO: handle errors\n  const url = getPaymentLink(paymentOrDonation, currentAccount?.network || networks[config.tezos.defaultNetwork]);\n\n  const helpText = paymentOrDonation.type === PaymentType.Payment\n    ? acceptPaymentsLangResources.directLinkPaymentHelpText\n    : acceptPaymentsLangResources.directLinkDonationHelpText;\n\n  const handleCopyClick = useCallback(() => {\n    navigator.clipboard.writeText(url);\n  }, [url]);\n\n  return <div className=\"generator__direct-link\">\n    <span className=\"generator__direct-link-help-text\">{helpText}</span>\n    <ExternalLink className=\"generator__direct-link-link\" href={url}>{url}</ExternalLink>\n    <div className=\"generator__direct-link-buttons\">\n      <Button onClick={handleCopyClick} icon={<CopyOutlined />}>{commonLangResources.copyLink}</Button>\n    </div>\n  </div>;\n};\n\nexport const DirectLinkGeneratorPure = React.memo(DirectLinkGenerator);\n","import React from 'react';\n\nimport { FailedValidationResults } from '@tezospayments/common';\n\nimport './FailedValidationResult.scss';\nimport { useCurrentLanguageResources } from '../../../../hooks';\n\ninterface FailedValidationResultProps {\n  results: FailedValidationResults\n}\n\nexport const FailedValidationResult = (_props: FailedValidationResultProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n\n  return <div className=\"failed-validation-result\">\n    {acceptPaymentsLangResources.errors.fillRequiredData}\n  </div>;\n};\n\nexport const FailedValidationResultPure = React.memo(FailedValidationResult);\n","import { Card } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport { nanoid } from 'nanoid';\nimport React from 'react';\n\nimport { Donation, Payment, PaymentType } from '@tezospayments/common';\n\nimport { DirectLinkGeneratorPure } from './DirectLinkGenerator';\nimport { FailedValidationResult } from './FailedValidationResult';\n\nimport './Generator.scss';\n\ninterface GeneratorProps {\n  serviceAddress: string | undefined;\n  paymentType: PaymentType;\n  amount: string;\n  publicData: string;\n  donationData: string;\n}\n\nexport const Generator = (props: GeneratorProps) => {\n  const tabList = [\n    { key: 'directLink', tab: 'Direct Link' },\n    { key: 'widget', tab: 'Widget', disabled: true },\n    { key: 'typescript', tab: 'TypeScript Library', disabled: true },\n    { key: 'dotnet', tab: '.NET Library', disabled: true },\n  ];\n\n  const paymentOrDonation = props.paymentType === PaymentType.Payment\n    ? {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n      id: nanoid(),\n      amount: new BigNumber(props.amount),\n      data: props.publicData ? { public: { orderId: props.publicData } } : undefined,\n      created: new Date(),\n    } as Payment\n    : {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n    } as Donation;\n\n  const failedValidationResults = paymentOrDonation.type === PaymentType.Payment\n    ? Payment.validate(paymentOrDonation)\n    : Donation.validate(paymentOrDonation);\n\n  return <Card\n    className=\"generator\"\n    style={{ width: '100%' }}\n    tabList={tabList}\n    activeTabKey={tabList[0]?.key}\n  >\n    {failedValidationResults\n      ? <FailedValidationResult results={failedValidationResults} />\n      : <DirectLinkGeneratorPure paymentOrDonation={paymentOrDonation} />}\n  </Card >;\n};\n\nexport const GeneratorPure = React.memo(Generator);\n","import { RadioChangeEvent, Skeleton } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport React, { useCallback, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { PaymentType } from '@tezospayments/common';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { AcceptPaymentsSettings } from './AcceptPaymentsSettings';\nimport { GeneratorPure } from './Generator';\n\nimport './AcceptPayments.scss';\n\nexport const AcceptPayments = () => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const servicesState = useAppSelector(selectServicesState);\n\n  const { address: addressFromUrl } = useParams<{ address: string }>();\n  const [serviceAddress, setServiceAddress] = useState<string | undefined>(addressFromUrl);\n  const [paymentType, setPaymentType] = useState<PaymentType>(PaymentType.Payment);\n  const [amount, setAmount] = useState<string>('1');\n  const [publicData, setPublicData] = useState<string>('');\n  const [donationData, setDonationData] = useState<string>('');\n\n  const handleServiceAddressChange = useCallback((value: SelectValue) => {\n    setServiceAddress(value as string);\n  }, []);\n\n  const handlePaymentTypeChange = useCallback((e: RadioChangeEvent) => {\n    setPaymentType(e.target.value);\n  }, []);\n\n  const handleAmountChange = useCallback((rawValue: string) => {\n    setAmount(rawValue);\n  }, []);\n\n  const handlePublicDataChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPublicData(e.target.value);\n  }, []);\n\n  const handleDonationDataChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setDonationData(e.target.value);\n  }, []);\n\n  return <View title={acceptPaymentsLangResources.title}>\n    <View.Title>{acceptPaymentsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"accept-payments\">\n          <div className=\"accept-payments__settings\">\n            <AcceptPaymentsSettings\n              serviceAddress={serviceAddress} onServiceAddressChange={handleServiceAddressChange}\n              paymentType={paymentType} onPaymentTypeChange={handlePaymentTypeChange}\n              amount={amount} onAmountChange={handleAmountChange}\n              publicData={publicData} onPublicDataChange={handlePublicDataChange}\n              donationData={donationData} onDonationDataChange={handleDonationDataChange}\n            />\n          </div>\n          <div className=\"accept-payments__generator\">\n            <GeneratorPure\n              serviceAddress={serviceAddress}\n              paymentType={paymentType}\n              amount={amount}\n              publicData={publicData}\n              donationData={donationData}\n            />\n          </div>\n        </div>}\n  </View >;\n};\n\nexport const AcceptPaymentsPure = React.memo(AcceptPayments);\n","import { StateModel, Network } from '@tezospayments/common';\n\nexport interface Account {\n  readonly address: string;\n  readonly network: Network;\n}\n\nexport class Account extends StateModel {\n  static getShortAddress(account: Account) {\n    return `${account.address.substr(0, 9)}...${account.address.substr(account.address.length - 6, 6)}`;\n  }\n}\n","import React from 'react';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\n\nimport './AccountNetworkGroup.scss';\n\ninterface AccountNetworkGroupProps {\n  network: Network;\n}\n\nexport const AccountNetworkGroup = (props: AccountNetworkGroupProps) => {\n  const network = config.tezos.networks[props.network.name];\n\n  return <div className=\"account-network-group\">\n    <div className=\"account-network-group__icon-container\">\n      <div className=\"account-network-group__icon\" style={{ backgroundColor: network.color }}></div>\n    </div>\n    <div>{network.title}</div>\n  </div>;\n};\n\nexport const AccountNetworkGroupPure = React.memo(AccountNetworkGroup);\n","import { blue } from '@ant-design/colors';\nimport { ArrowRightOutlined, CopyOutlined, LogoutOutlined, LoginOutlined, UserOutlined } from '@ant-design/icons';\nimport { Dropdown, Button, Menu } from 'antd';\nimport React, { useCallback } from 'react';\nimport './AccountDropdown.scss';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { Account } from '../../../models/blockchain';\nimport { getAccountsByNetwork, getCurrentAccount, getCurrentNetworkConfig } from '../../../store/accounts/selectors';\nimport { disconnectAccount } from '../../../store/accounts/slice';\nimport { useAppContext, useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { AccountNetworkGroupPure } from './AccountNetworkGroup';\n\nexport const AccountDropDown = () => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const actionsLangResources = langResources.views.header.accountActions;\n\n  const accountsByNetwork = useAppSelector(getAccountsByNetwork);\n  const currentAccount = useAppSelector(getCurrentAccount);\n  const currentAccountAddress = currentAccount?.address || '';\n  const currentNetworkConfig = useAppSelector(getCurrentNetworkConfig);\n  const currentExplorer = currentNetworkConfig && currentNetworkConfig.explorers[currentNetworkConfig.default.explorer];\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(currentAccountAddress);\n  }, [currentAccountAddress]);\n\n  const handleViewOnExplorerClick = useCallback(() => {\n    if (currentExplorer) {\n      window.open(appContext.tezosExplorer.getAccountUrl(currentAccountAddress), '_blank');\n    }\n  }, [appContext.tezosExplorer, currentAccountAddress, currentExplorer]);\n\n  const dispatch = useAppDispatch();\n  const handleDisconnectButtonClick = useCallback(() => {\n    dispatch(disconnectAccount());\n  }, [dispatch]);\n\n  if (!currentAccount) {\n    return null;\n  }\n\n  const connectedAccounts = [...accountsByNetwork.keys()].map(k =>\n    <Menu.ItemGroup key={k.id} title={<AccountNetworkGroupPure network={k} />}>\n      {accountsByNetwork.get(k)?.map(a =>\n        <Menu.Item\n          key={a.address}\n          icon={<UserOutlined />}\n          className={combineClassNames('account-menu-item', { 'account-menu-item_selected': a.address === currentAccount.address })}\n          style={a.address !== currentAccount.address ? undefined : {\n            backgroundColor: blue[0],\n            color: blue.primary\n          }}\n        >\n          {a.address}\n        </Menu.Item>\n      )}\n    </Menu.ItemGroup>\n  );\n\n  const menu = <Menu>\n    {connectedAccounts}\n    <Menu.Divider />\n    <Menu.Item key={1} icon={<CopyOutlined />} onClick={handleCopyAddressClick}>\n      {actionsLangResources.copyAddress.title}\n    </Menu.Item>\n    <Menu.Item key={2} icon={<ArrowRightOutlined />} onClick={handleViewOnExplorerClick}>\n      {`${actionsLangResources.viewOn} ${currentExplorer?.title}`}\n    </Menu.Item>\n    <Menu.Item key={3} icon={<LoginOutlined />}>\n      {`${actionsLangResources.connectAnotherAccount.title} (${langResources.common.comingSoon.toLowerCase()})`}\n    </Menu.Item>\n    <Menu.Divider />\n    <Menu.Item key={5} icon={<LogoutOutlined />} onClick={handleDisconnectButtonClick}>\n      {actionsLangResources.disconnect.title}\n    </Menu.Item>\n  </Menu >;\n\n  return <Dropdown overlay={menu} placement=\"bottomRight\">\n    <Button style={{ borderColor: blue.primary, color: blue.primary }} className=\"account-dropdown\">{Account.getShortAddress(currentAccount)}</Button>\n  </Dropdown >;\n};\n\nexport const AccountDropDownPure = React.memo(AccountDropDown);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { getCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector } from '../../hooks';\nimport { AccountDropDownPure } from './../AccountDropdown';\n\nimport './Header.scss';\n\nexport const Header = () => {\n  const currentAccount = useAppSelector(getCurrentAccount);\n\n  return <header className=\"header\">\n    <Link className=\"header__title\" to={config.routers.overview}>{config.app.name}</Link>\n    {currentAccount && <AccountDropDownPure />}\n  </header>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","import { SettingOutlined, DashboardOutlined, UnorderedListOutlined, ProfileOutlined, InfoCircleOutlined } from '@ant-design/icons';\nimport { Menu, Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport './NavBar.scss';\n\nexport const NavBar = () => {\n  const location = useLocation();\n  const langResources = useCurrentLanguageResources();\n  const viewsLangResources = langResources.views;\n  const history = useHistory();\n\n  const handleCreateServiceClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    history.push(config.routers.acceptPayments);\n  }, [history]);\n\n  return <nav className=\"navbar\">\n    <Menu className=\"navbar__menu\" mode=\"inline\" selectedKeys={[location.pathname]}>\n      <Menu.Item key={config.routers.overview} icon={<DashboardOutlined />}>\n        <Link to={config.routers.overview}>{viewsLangResources.overview.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.operations} icon={<UnorderedListOutlined />}>\n        <Link to={config.routers.operations}>{viewsLangResources.operations.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.services} icon={<ProfileOutlined />}>\n        <Link to={config.routers.services}>{viewsLangResources.services.title}</Link>\n      </Menu.Item>\n      <Menu.Item key=\"settings\" icon={<SettingOutlined />} disabled>{viewsLangResources.settings.title}</Menu.Item >\n      <Menu.Item key={config.routers.about} icon={<InfoCircleOutlined />}>\n        <Link to={config.routers.about}>{viewsLangResources.about.title}</Link>\n      </Menu.Item>\n    </Menu>\n\n    <div className=\"navbar__bottom-buttons\">\n      <Button onClick={handleCreateServiceClick}>{viewsLangResources.createService.title}</Button>\n      <Button onClick={handleAcceptPaymentsClick} type=\"primary\">{viewsLangResources.acceptPayments.title}</Button>\n    </div>\n  </nav>;\n};\n\nexport const NavBarPure = React.memo(NavBar);\n","import { message } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { PendingOperationStatus } from '../../../store/services/slice';\n\nexport const Notifications = () => {\n  const { services, pendingOperations } = useSelector(selectServicesState);\n\n  useEffect(() => {\n    pendingOperations.forEach(operation => {\n      const service = services.find(s => s.contractAddress === operation.serviceAddress);\n\n      const content = <span><b>{operation.action}</b>{service && <> for service: <b>{`${service.name}`}</b></>}</span>;\n      const key = operation.hash;\n\n      switch (operation.status) {\n        case PendingOperationStatus.loading: {\n          const confirmations = `${operation.confirmationCount} / ${operation.targetConfirmationCount}`;\n          message.loading({ content: <span>Executing operation: {content} ({confirmations})</span>, key, duration: 0 });\n          break;\n        }\n\n        case PendingOperationStatus.success:\n          message.success({ content: <span>Finished operation: {content}</span>, key, duration: 4 });\n          break;\n\n        case PendingOperationStatus.error:\n          message.error({ content: <span>Failed operation: {content}</span>, key, duration: 4 });\n          break;\n      }\n    });\n  }, [pendingOperations, services]);\n\n  return null;\n};\n\nexport const NotificationsPure = React.memo(Notifications);\n","import { Skeleton } from 'antd';\nimport { useEffect } from 'react';\nimport { Switch } from 'react-router';\nimport { Route } from 'react-router-dom';\n\nimport { config } from '../../config';\nimport { selectAccountsState } from '../../store/accounts/selectors';\nimport { loadActiveAccount } from '../../store/accounts/slice';\nimport { PrivateRouteContainer } from '../common';\nimport { useAppDispatch, useAppSelector } from '../hooks';\nimport { OverviewPure, ConnectPure, OperationsPure, ServicePure, ServicesPure, AboutPure } from '../views';\nimport { AcceptPaymentsPure } from '../views/AcceptPayments';\nimport { ServiceViewMode } from '../views/Service/Service';\nimport { HeaderPure } from './Header';\nimport { NavBarPure } from './NavBar';\nimport { NotificationsPure } from './Notifications';\n\nimport 'antd/dist/antd.css';\nimport './App.scss';\n\nexport const App = () => {\n  const initialized = useAppSelector(selectAccountsState).initialized;\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(loadActiveAccount());\n  }, [dispatch]);\n\n  return <div className=\"main-container\">\n    <NotificationsPure />\n    <HeaderPure />\n    <NavBarPure />\n    {!initialized\n      ? <Skeleton />\n      : <Switch>\n        <PrivateRouteContainer exact path={config.routers.overview} >\n          <OverviewPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.operations}>\n          <OperationsPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.createService}>\n          <ServicePure mode={ServiceViewMode.Create} />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.service.template}>\n          <ServicePure mode={ServiceViewMode.ViewAndEdit} />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.services}>\n          <ServicesPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={[config.routers.acceptPayments, config.routers.acceptServicePayments.template]}>\n          <AcceptPaymentsPure />\n        </PrivateRouteContainer>\n        <Route path={config.routers.about}>\n          <AboutPure />\n        </Route>\n        <Route path={config.routers.connect}>\n          <ConnectPure />\n        </Route>\n      </Switch>\n    }\n    {/* <FooterPure /> */}\n  </div>;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers, EnhancedStore } from '@reduxjs/toolkit';\n\nimport { accountsSlice } from './accounts/slice';\nimport { balancesSlice } from './balances/slice';\nimport { operationsSlice } from './operations/slice';\nimport { servicesSlice } from './services/slice';\nimport { AppThunkDispatch } from './thunk';\n\nexport const appReducer = combineReducers({\n  accountsState: accountsSlice.reducer,\n  servicesState: servicesSlice.reducer,\n  balancesState: balancesSlice.reducer,\n  operationsState: operationsSlice.reducer,\n});\n\nexport type AppStore = EnhancedStore<AppState>;\nexport type AppState = ReturnType<typeof appReducer>;\nexport type AppDispatch = AppThunkDispatch & AppStore['dispatch'];\n","import { configureStore, isPlain } from '@reduxjs/toolkit';\nimport { BigNumber } from 'bignumber.js';\nimport { enableMapSet } from 'immer';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\n\nimport { ReactAppContext, WebApp } from './app';\nimport { App } from './components/App';\nimport { AppConfig, config } from './config';\nimport reportWebVitals from './reportWebVitals';\nimport { appReducer } from './store';\nimport './index.scss';\n\nenableMapSet();\n\nconst webApp = new WebApp(app => configureStore({\n  reducer: appReducer,\n  devTools: {\n    serialize: true\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: app,\n      },\n      serializableCheck: {\n        isSerializable: (value: unknown) => isPlain(value)\n          || value instanceof Map\n          || value instanceof Set\n          || BigNumber.isBigNumber(value)\n          || value instanceof Date,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        getEntries: (value: any) => value instanceof Map || value instanceof Set\n          ? [...value.entries()]\n          : Object.entries(value)\n      }\n    })\n}));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={webApp.store}>\n      <Router history={webApp.history}>\n        <ReactAppContext.Provider value={webApp.reactAppContext}>\n          <App />\n        </ReactAppContext.Provider>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n(window as unknown as { webApp: WebApp }).webApp = webApp;\n(window as unknown as { config: AppConfig }).config = config;\n\nreportWebVitals();\n","import { ColorMode } from '@airgap/beacon-sdk';\nimport { BeaconWallet } from '@taquito/beacon-wallet';\nimport { TezosToolkit } from '@taquito/taquito';\nimport { History, createBrowserHistory } from 'history';\n\nimport { Network, networks } from '@tezospayments/common';\nimport {\n  ServicesProvider, TzKTDataProvider, BetterCallDevDataProvider,\n  BlockchainUrlExplorer, TzStatsBlockchainUrlExplorer, BetterCallDevBlockchainUrlExplorer, TzKTBlockchainUrlExplorer\n} from '@tezospayments/react-web-core';\n\nimport { config } from '../config';\nimport { AccountsService } from '../services/accountsService';\nimport { ServicesService } from '../services/servicesService';\nimport { AppStore } from '../store';\nimport type { ReactAppContext } from './reactAppContext';\n\ninterface AppServices {\n  readonly accountsService: AccountsService;\n  readonly servicesService: ServicesService;\n}\n\nexport class WebApp {\n  readonly store: AppStore;\n  readonly reactAppContext: ReactAppContext;\n  readonly tezosWallet = new BeaconWallet({ name: config.app.name, colorMode: ColorMode.LIGHT });\n  readonly history: History;\n\n  private _network: Network | undefined;\n  private _tezosToolkit: TezosToolkit | undefined;\n  private _services: AppServices | undefined;\n  private onStoreChangedListener = this.onStoreChanged.bind(this);\n  private unsubscribeStoreChanged: (() => void);\n\n  constructor(storeFactory: (app: WebApp) => AppStore) {\n    this.store = storeFactory(this);\n    this.history = this.createHistory();\n    this.applyNetwork(networks[config.tezos.defaultNetwork]);\n\n    this.unsubscribeStoreChanged = this.store.subscribe(this.onStoreChangedListener);\n    this.reactAppContext = this.createReactAppContext();\n  }\n\n  get network() {\n    if (!this._network)\n      throw this.getNetworkError();\n    return this._network;\n  }\n\n  get tezosToolkit() {\n    if (!this._tezosToolkit)\n      throw this.getNetworkError();\n    return this._tezosToolkit;\n  }\n\n  get services() {\n    if (!this._services)\n      throw this.getNetworkError();\n    return this._services;\n  }\n\n  protected onStoreChanged() {\n    const appState = this.store.getState();\n\n    if (appState.accountsState.currentAccount && appState.accountsState.currentAccount.network !== this.network) {\n      this.applyNetwork(appState.accountsState.currentAccount.network);\n    }\n  }\n\n  protected createHistory() {\n    return createBrowserHistory();\n  }\n\n  protected createReactAppContext(): ReactAppContext {\n    return {\n      tezosExplorer: this.createTezosBlockchainUrlExplorer(this.network)\n    };\n  }\n\n  protected applyNetwork(network: Network) {\n    this._network = network;\n\n    const networkConfig = config.tezos.networks[this.network.name];\n    this._tezosToolkit = new TezosToolkit(networkConfig.rpcUrls[networkConfig.default.rpc]);\n    this.tezosToolkit.setWalletProvider(this.tezosWallet);\n\n    const servicesProvider = this.createServicesProvider(this.network);\n    this._services = {\n      accountsService: new AccountsService(this.tezosToolkit, this.tezosWallet.client),\n      servicesService: new ServicesService(this.tezosToolkit, servicesProvider, networkConfig.servicesFactoryContractAddress)\n    };\n  }\n\n  private createServicesProvider(network: Network): ServicesProvider {\n    const networkConfig = config.tezos.networks[network.name];\n    const indexerName = networkConfig.default.indexer;\n\n    switch (indexerName) {\n      case 'tzKT':\n        return new TzKTDataProvider(network, networkConfig.indexerUrls.tzKT, networkConfig.servicesFactoryContractAddress);\n      case 'betterCallDev':\n        return new BetterCallDevDataProvider(network, networkConfig.indexerUrls.betterCallDev, networkConfig.servicesFactoryContractAddress);\n      default:\n        throw new Error('Unknown service provider');\n    }\n  }\n\n  private createTezosBlockchainUrlExplorer(network: Network): BlockchainUrlExplorer {\n    const networkConfig = config.tezos.networks[network.name];\n    const explorerName = networkConfig.default.explorer;\n\n    switch (explorerName) {\n      case 'tzKT':\n        return new TzKTBlockchainUrlExplorer(network, networkConfig.explorers.tzKT.baseUrl);\n      case 'tzStats':\n        return new TzStatsBlockchainUrlExplorer(network, networkConfig.explorers.tzStats.baseUrl);\n      case 'betterCallDev':\n        return new BetterCallDevBlockchainUrlExplorer(network, networkConfig.explorers.betterCallDev.baseUrl);\n      default:\n        throw new Error('Unknown blockchain explorer');\n    }\n  }\n\n  private getNetworkError() {\n    return new Error('Network is not defined');\n  }\n}\n"],"sourceRoot":""}