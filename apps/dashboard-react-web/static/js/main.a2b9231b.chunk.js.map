{"version":3,"sources":["services/servicesService.ts","../../src/utils/base64.ts","../../src/utils/converters.ts","../../src/utils/guards.ts","../../src/utils/memoize.ts","../../src/utils/optimization.ts","../../src/utils/text.ts","../../src/utils/index.ts","../../src/helpers/serviceLinkHelper.ts","../../src/models/payment/paymentBase.ts","../../src/helpers/paymentValidator/paymentValidatorBase.ts","../../src/models/blockchain/network.ts","../../src/models/blockchain/token.ts","../../src/models/blockchain/tezosInfo.ts","../../src/models/blockchain/keyType.ts","../../src/native/index.ts","../../src/helpers/paymentValidator/validationMethods.ts","../../src/helpers/paymentValidator/paymentValidator.ts","../../src/helpers/paymentValidator/donationValidator.ts","../../src/models/core/stateModel.ts","../../src/serialization/base64/objectSerializationValidator.ts","../../src/serialization/base64/base64Serializer.ts","../../src/serialization/base64/base64Deserializer.ts","../../src/serialization/payment/serializedPaymentFieldTypes.ts","../../src/serialization/payment/paymentSerializer.ts","../../src/serialization/payment/paymentDeserializer.ts","../../src/serialization/donation/serializedDonationFieldTypes.ts","../../src/serialization/donation/donationSerializer.ts","../../src/serialization/donation/donationDeserializer.ts","../../src/models/payment/payment.ts","../../src/models/payment/donation.ts","../../src/models/payment/paymentUrlType.ts","../../src/models/routing/parameterizedRoute.ts","../../src/models/service/serviceOperationType.ts","../../src/models/service/service.ts","../../src/models/operation/operationType.ts","../../src/models/operation/operationDirection.ts","../../src/models/operation/operationStatus.ts","../../src/models/operation/donationOperation.ts","../../src/signing/signPayloadEncoders/michelsonTypes.ts","../../src/signing/signPayloadEncoders/paymentSignPayloadEncoder.ts","../../src/signing/keyPairGenerators/ed25519KeyGenerator.ts","../../src/signing/keyPairGenerators/ellipticCurveKeyGenerator.ts","../../config/defaultConfig.ts","../../explorers/blockchainUrlExplorer.ts","../../explorers/tzKTBlockchainUrlExplorer.ts","../../explorers/betterCallDevUrlBlockchainExplorer.ts","../../explorers/tzStatsBlockchainUrlExplorer.ts","../../../../src/providers/tzKTDataProvider/tzKTDataProvider.ts","../../../../src/providers/betterCallDevDataProvider/betterCallDevDataProvider.ts","../../utils/converters.ts","config/config.ts","services/accountsService.ts","app/readOnlySigner.ts","app/reactAppContext.ts","store/accounts/selectors.ts","store/services/selectors.ts","store/balances/slice.ts","store/operations/slice.ts","store/services/slice.ts","store/accounts/slice.ts","localization/en-US/index.ts","localization/en-US/common/index.ts","localization/en-US/views/header.ts","localization/en-US/views/overview.ts","localization/en-US/views/createService.ts","localization/en-US/views/connect.ts","localization/en-US/views/about.ts","localization/en-US/views/operations.ts","localization/en-US/views/services.ts","localization/en-US/views/settings.ts","localization/en-US/views/acceptPayments.ts","components/hooks/useCurrentLanguage.tsx","components/hooks/reduxHooks.ts","components/hooks/useAppContext.tsx","../../src/constants.ts","../../src/errors.ts","../../src/paymentUrlFactories/paymentUrlFactory.ts","../../src/paymentUrlFactories/base64PaymentUrlFactory.ts","../../src/models.ts","../../src/signers/tezosPaymentsSigner.ts","../../src/signers/apiSecretKeySigner.ts","../../src/signers/walletSigner.ts","../../src/signers/customSigner.ts","../../src/tezosPayments.ts","../../src/validationErrors.ts","../../src/index.ts","components/hooks/useTezosPayments.tsx","components/hooks/useKeyPairGenerator.ts","components/common/PrivateRoute.tsx","components/common/TokenList/TokenListItem.tsx","components/common/TokenList/TokenList.tsx","components/common/ExplorerLink/ExplorerLink.tsx","components/common/ExternalLink.tsx","components/common/NoServicesCreated/NoServicesCreated.tsx","components/views/View/ViewTitle.tsx","components/views/View/View.tsx","components/hooks/useViewTitle.tsx","components/views/Overview/LargeCards/OperationCountChart.tsx","components/views/Overview/LargeCards/VolumeChart.tsx","store/balances/selectors.ts","components/views/Overview/SmallCards/Balances.tsx","components/views/Overview/SmallCards/Incoming.tsx","components/views/Overview/SmallCards/Outgoing.tsx","components/views/Overview/Overview.tsx","store/operations/selectors.ts","components/common/OperationList/OperationIcon.tsx","components/common/OperationList/OperationList.tsx","components/views/Operations/NoOperationsPerformed/NoOperationsPerformed.tsx","components/views/Operations/Operations.tsx","components/views/Services/ServiceCards/NewServiceCard.tsx","components/common/Tags/ActiveTag/ActiveTag.tsx","components/common/Tags/CustomTag/CustomTag.tsx","components/views/Services/ServiceCards/ServiceCard.tsx","components/views/Services/Services.tsx","components/views/Service/ActionsZone/ActionsZone.tsx","components/views/Service/DangerZone/DangerZone.tsx","components/views/Service/DevZone/AddApiKeyModal/AddApiKeyModal.tsx","components/views/Service/DevZone/ApiKeyList/ApiKeyList.tsx","components/views/Service/DevZone/DevZone.tsx","components/views/Service/Header/Header.tsx","assets/icons/telegram.svg","components/common/ServiceLinks/iconIdMap.ts","components/common/ServiceLinks/ServiceLink.tsx","components/common/ServiceLinks/ServiceLinks.tsx","components/common/ServiceLinks/ServiceLinkEditor.tsx","components/common/ServiceLinks/ServiceLinksEditor.tsx","components/views/Service/ServiceEditForm/TokensEditor/TokensEditor.tsx","components/views/Service/ServiceEditForm/ServiceEditForm.tsx","components/views/Service/ViewZone/Tokens/Tokens.tsx","components/views/Service/ViewZone/ViewZone.tsx","components/views/Service/Service.tsx","components/hooks/useQuery.tsx","components/views/About/About.tsx","components/views/Connect/ConnectDropdown/ConnectDropdown.tsx","components/views/Connect/Connect.tsx","components/views/AcceptPayments/PaymentAmount/PaymentAmount.tsx","components/views/AcceptPayments/AcceptPaymentsSettings/AcceptPaymentsSettings.tsx","components/views/AcceptPayments/Generator/DirectLinkGenerator/DirectLinkGenerator.tsx","components/views/AcceptPayments/Generator/FailedValidationResult/FailedValidationResult.tsx","components/views/AcceptPayments/Generator/Generator.tsx","components/views/AcceptPayments/AcceptPayments.tsx","models/blockchain/account.ts","components/App/AccountDropdown/AccountNetworkGroup/AccountNetworkGroup.tsx","components/App/AccountDropdown/AccountDropdown.tsx","components/App/Header/Header.tsx","components/App/NavBar/NavBar.tsx","components/App/Notifications/Notifications.tsx","components/App/App.tsx","reportWebVitals.ts","store/index.ts","index.tsx","app/webApp.ts"],"names":["ServicesService","constructor","tezosToolkit","servicesProvider","servicesFactoryContractAddress","account","this","getServices","address","serviceContractAddress","getService","getOperations","service","serviceContract","getServiceContract","contractAddress","encodedServiceMetadata","encodeMetadata","methodsObject","update_service_parameters","metadata","allowed_tokens","tez","allowedTokens","assets","allowed_operation_type","allowedOperationType","send","paused","set_pause","deleted","set_deleted","factoryContract","contract","at","factoryStorage","storage","factoryImplementationContract","getFactoryImplementationContract","factory_implementation","signingKeysMichelsonMap","MichelsonMap","signingKey","signingKeys","values","set","publicKey","public_key","name","create_service","signing_keys","addApiKey","signingKeyUpdatesMap","updateSigningKeys","deleteApiKey","undefined","update_signing_keys","serviceMetadata","links","length","description","iconUrl","Buffer","from","JSON","stringify","toString","wallet","isBase64UrlFormatSupported","decode","base64String","format","base64UrlPreprocessor","encode","value","encodedValue","prepareEncodedValue","base64value","prepareValueForDecoding","Error","stringToUint8Array","hex","integers","val","parseInt","Uint8Array","stringToBytes","bytesToString","tokensAmountToNat","tokensAmount","numberToTokensAmount","tezToMutez","mutez","isPlainObject","isPlainObjectLodashFunction","arg","Array","defaultEqualityCheck","a","areArgumentsShallowlyEqual","prev","next","i","equalityCheck","memoize","lastArgs","lastResult","func","zeroBigNumber","stringPad","string","fillString","String","stringLength","maxLength","fillLength","filler","Math","isStart","padStart","result","j","isWord","wait","ms","Promise","resolve","setTimeout","IconId","prepareFormattedLink","link","prepareDisplayLink","socialMediaLinkInfoProvider","formattedLink","rawLink","displayLink","icon","emailCheckingRegEx","urlSchemeRegEx","ServiceLinkHelper","getLinkInfo","isEditMode","linkInfo","provider","linkInfoIsValid","Common","editLinkInfoProvider","PaymentType","getInvalidLinkInfo","preparedFormattedLink","Email","PaymentValidatorBase","validate","payment","bail","guards","currentFailedValidationResults","validationMethod","failedValidationResults","networksInternal","granadanet","id","networks","networksCollection","Object","networkIdRegExp","networkNameRegExp","tezosMeta","tokenWhitelist","network","type","decimals","symbol","thumbnailUri","tokenWhitelistMap","Map","nc","t","contractAddressPrefixes","implicitAddressPrefixes","tezosInfo","addressLength","addressPrefixes","KeyType","URL","NodeURL","globalThis","validateTargetAddress","targetAddress","errors","prefix","validateAmount","BigNumber","amount","validateUrl","url","validateData","data","validateAsset","validateAssetAddress","asset","validateAssetId","assetAddress","assetId","Number","validateAssetDecimals","assetDecimals","PaymentValidator","validateId","validatePaymentAsset","date","isNaN","validateCreatedDate","expiredDate","createdDate","validateExpiredDate","invalidPaymentObject","invalidType","invalidTargetAddress","targetAddressIsNotNetworkAddress","targetAddressHasInvalidLength","invalidId","emptyId","invalidAmount","amountIsNonPositive","invalidData","invalidAsset","invalidAssetAddress","assetAddressIsNotContractAddress","assetAddressHasInvalidLength","invalidAssetId","assetIdIsNegative","assetIdIsNotInteger","invalidAssetDecimals","assetDecimalsNumberIsNegative","assetDecimalsNumberIsNotInteger","invalidSuccessUrl","successUrlHasInvalidProtocol","invalidCancelUrl","cancelUrlHasInvalidProtocol","invalidCreatedDate","invalidExpiredDate","paymentLifetimeIsShort","invalidUrl","invalidProtocol","DonationValidator","donation","validateDesiredAmount","desiredAmount","validateDonationAsset","invalidDonationObject","StateModel","ObjectSerializationValidator","objectFieldTypes","count","info","fieldNames","fieldName","fieldValue","actualFieldType","expectedFieldType","expectedType","Base64Serializer","fieldTypes","serialize","objectSerializationValidator","jsonString","base64","Base64Deserializer","deserialize","serializedValue","serializedValueString","serializedPaymentFieldTypes","PaymentSerializer","serializedPayment","mapPaymentToSerializedPayment","as","mapPaymentAssetToSerializedPaymentAsset","d","su","cu","c","e","s","mapPaymentSignatureToSerializedPaymentSignature","paymentAsset","paymentSignature","k","cl","client","PaymentDeserializer","serializedPaymentBase64","mapSerializedPaymentToPayment","mapSerializedPaymentAssetToPaymentAsset","successUrl","cancelUrl","created","Date","expired","nonSerializedPaymentSlice","signature","mapSerializedPaymentSignatureToPaymentSignature","serializedPaymentAsset","serializedPaymentSignature","signingPublicKey","serializedDonationFieldTypes","DonationSerializer","serializedDonation","mapDonationToSerializedDonation","serializedDonationBase64","da","das","mapDonationAssetToSerializedDonationAsset","mapDonationSignatureToSerializedDonationSignature","donationAsset","donationSignature","DonationDeserializer","mapSerializedDonationToDonation","desiredAsset","mapSerializedDonationAssetToDonationAsset","nonSerializedDonationSlice","mapSerializedDonationSignatureToDonationSignature","serializedDonationAsset","serializedDonationSignature","Payment","Donation","PaymentUrlType","encodedPaymentUrlTypeMap","text","getParameterizedRoute","factory","ServiceOperationType","emptyService","optimization","version","emptyArray","owner","emptyMap","OperationType","OperationDirection","OperationStatus","DonationOperation","valueString","converters","contractPaymentInTezSignPayloadMichelsonType","prim","args","contractPaymentInAssetSignPayloadMichelsonType","PaymentSignPayloadEncoder","contractSignPayload","getContractSignPayload","clientSignPayload","getClientSignPayload","packDataBytes","int","Ed25519KeyGenerator","generate","keyPair","sodium","raw","keyType","privateKey","encoded","b58cencode","instance","EllipticCurveKeyGenerator","curveName","ec","console","publicBasePoint","publicPointX","publicPointY","firstByte","pad","fill","concat","curveInfo","secp256k1","privateKeyPrefix","publicKeyPrefix","p256","commitShortSha","process","config","defaultConfig","app","publicUrl","title","buildInfo","routers","overview","operations","services","createService","acceptPayments","acceptServicePayments","connect","about","tzKT","AccountsService","dAppClient","requestPermissions","networkToBeaconNetwork","then","permissions","catch","error","clearActiveAccount","disconnect","activeAccount","getActiveAccount","beaconNetworkToNetwork","tz","getBalance","div","token","getTokenFA12Balance","getTokenFA2Balance","divider","views","read","token_id","balance","ReadOnlySigner","ReactAppContext","React","createContext","selectAccountsState","state","accountsState","getCurrentAccount","createSelector","currentAccount","connectedAccounts","find","getAccountsByNetwork","reduce","p","get","getCurrentNetworkConfig","tezos","selectTokensState","selectServicesState","servicesState","getAllAcceptedTokens","tokensState","Set","forEach","add","getAcceptTezos","some","getSortedServices","sort","b","localeCompare","getOperationsByService","operationsMap","pendingOperations","op","serviceAddress","push","initialState","tokens","emptyObject","initialized","namespace","loadBalances","createAsyncThunk","async","extra","getState","accountsService","getTezosBalance","acceptedTokens","balancesPromises","map","getTokenBalance","all","balancesSlice","createSlice","reducers","clearBalances","extraReducers","builder","addCase","fulfilled","action","payload","actions","loadOperations","servicesAddresses","operationsPromises","servicesService","flat","operationsSlice","clearOperations","PendingOperationStatus","loadServices","dispatch","updateService","operation","waitOperationConfirmation","reloadServices","setPaused","setDeleted","clearServices","_","operationName","confirmationsNumber","pendingOperation","hash","targetConfirmationCount","confirmationCount","status","loading","createPendingOperation","opHash","addPendingOperation","reject","confirmationObservable","subscribe","confirmation","setPendingOperationConfirmationCount","currentConfirmation","setPendingOperationStatus","deletePendingOperation","success","servicesSlice","o","filter","loadActiveAccount","connectAccount","disconnectAccount","accountsSlice","nextAccount","enUS","resources","common","comingSoon","copy","copyLink","open","new","cancel","save","yes","no","header","accountActions","copyAddress","viewOn","connectAnotherAccount","balances","incoming","outgoing","operationCount","volume","connectTo","detailedTitle","build","poweredBy","tzKt","api","operationList","paymentId","donationData","income","expense","cancelled","pending","noOperationsPerformedYet","active","updating","createNewService","acceptPaymentsDescription","youDoNotHaveAnyServicesYet","createYourFirstService","paymentsEnabled","donationsEnabled","allowedCurrencies","dangerZone","pauseService","pauseServiceConfirmation","pauseServiceDescription","unPauseService","unPauseServiceConfirmation","unPauseServiceDescription","deleteService","deleteServiceConfirmation","deleteServiceDescription","unDeleteService","unDeleteServiceConfirmation","unDeleteServiceDescription","devZone","addKey","saveKeys","generateKeys","algorithm","secretKey","saveSecretKeyWarning","saveSecretKeyConfirm","noApiKeysAddedYet","deleteKeyConfirmation","editing","editService","addCurrency","addLink","serviceName","accept","acceptDonations","settings","paymentData","paymentIdHelpText","donationDescription","generateAndSignPaymentLink","donationDescriptionHelpText","directLinkPaymentHelpText","directLinkDonationHelpText","fillRequiredData","useCurrentLanguageResources","useAppDispatch","useDispatch","useAppSelector","useSelector","useAppContext","useContext","defaultNetworkName","paymentAppBaseUrl","getErrorMessageByValidationErrors","validationErrors","brief","index","TezosPaymentsError","message","super","InvalidTezosPaymentsOptionsError","messageOrValidationErrors","InvalidPaymentCreateParametersError","InvalidPaymentError","UnsupportedPaymentUrlTypeError","PaymentUrlError","DonationUrlError","PaymentUrlFactory","urlType","Base64PaymentUrlFactory","baseUrl","createPaymentUrl","paymentOrDonation","createPaymentUrlInternal","createDonationUrlInternal","paymentSerializer","createUrl","donationSerializer","native","isPayment","paymentUrlType","serializedPaymentOrDonationBase64","getEncodedPaymentUrlType","constants","SigningType","TezosPaymentsSigner","signingType","ApiSecretKeySigner","apiSecretKey","signPayload","paymentSignPayloadEncoder","contractSigningPromise","inMemorySigner","sign","signingPromises","signatures","prefixSig","WalletSigner","walletSigning","walletContractSignPayload","CustomSigner","customSigning","_payment","TezosPayments","options","validateOptions","createSigner","defaultPaymentParameters","createParameters","validateDefaultPaymentParameters","unsignedPayment","createPaymentByCreateParameters","paymentValidator","signedPayment","getSignedPayment","paymentUrl","getPaymentUrl","applyPaymentUrl","getPaymentUrlFactory","paymentUrlFactory","paymentUrlFactories","createPaymentUrlFactory","signer","signingOptions","nanoid","validateServiceContractAddress","validateSigningOptions","currentErrors","Base64","invalidServiceContractAddressType","serviceContractAddressHasInvalidLength","serviceContractAddressIsNotContractAddress","invalidSigningOption","invalidApiSecretKeyType","emptyApiSecretKey","invalidWalletSigningOptionType","invalidDefaultPaymentParameters","emptyNetworkName","invalidNetwork","invalidNetworkName","invalidNetworkId","invalidUrlType","internal","signers","tezosPaymentsInstancesMap","useTezosPayments","appContext","currentNetwork","tezosPaymentsInstance","tezosWallet","signing","requestSignPayload","MICHELINE","r","createTezosPayments","keyPairGenerators","ed25519","Ed25519","Secp256k1","P256","useKeyPairGenerator","isLoaded","setIsLoaded","useState","isInitialized","useEffect","isCanceled","initialize","defaultConnectPath","PrivateRoute","children","isConnected","connectPath","routeProps","props","to","pathname","location","PrivateRouteContainer","TokenListItem","valueClassNames","combineClassNames","highlightSign","isZero","isPositive","isNegative","abs","shortAmount","toFormat","groupSeparator","decimalSeparator","substring","getStringAmounts","allDecimalsShown","substr","split","every","amountSpan","className","src","iconSrc","alt","ticker","handleDelete","danger","DeleteOutlined","onClick","TokenList","Item","ExplorerLink","commonLangResources","handleCopyAddressClick","useCallback","navigator","clipboard","writeText","href","tezosExplorer","getEntityUrl","target","rel","showCopyButton","CopyOutlined","ExplorerLinkPure","memo","ExternalLink","NoServicesCreated","servicesLangResources","history","useHistory","handleCreateServiceClick","NoServicesCreatedPure","ViewTitle","createElement","defaultProps","View","document","Title","OperationCountChart","month","xField","yField","height","meta","alias","paragraph","rows","OperationCountChartPure","VolumeChart","quarter","sum","smooth","VolumeChartPure","selectBalancesState","balancesState","Balances","acceptTezos","items","BalancesPure","Incoming","IncomingPure","Outgoing","OutgoingPure","Overview","langResources","overviewLangResources","size","OverviewPure","getSortedOperations","operationsState","OperationIcon","operationsLangResources","isIncoming","direction","Cancelled","ArrowRightOutlined","ArrowLeftOutlined","Pending","ClockCircleTwoTone","ExclamationCircleFilled","OperationIconPure","OperationList","getShortHash","accountAddress","amountClassNames","serviceLink","toLocaleString","colSpan","NoOperationsPerformed","NoOperationsPerformedPure","getFormattedOperationData","Operations","operationProps","tokenSymbol","sender","OperationsPure","NewServiceCard","handleCardClick","bodyStyle","padding","PlusOutlined","NewServiceCardPure","ActiveTag","isUpdating","SyncOutlined","spin","CloseCircleOutlined","PauseCircleOutlined","CheckCircleOutlined","ActiveTagPure","CustomTag","CustomTagPure","ServiceCard","tagName","toLowerCase","logoClassName","getAvatarText","ServiceCardPure","Services","servicesCards","has","ServicesPure","ActionsZone","readOnly","handleAcceptPaymentsClick","disabled","ActionsZonePure","DangerZone","dangerZoneLangResources","handlePauseModalOkClick","handleDeleteModalOkClick","confirm","isDanger","onOk","Modal","content","okText","okType","cancelText","centered","transitionName","maskTransitionName","handlePauseClick","handleDeleteClick","DangerZonePure","Search","Input","algorithmOptions","v","label","AddApiKeyModal","generateKeyPair","setKeyPair","publicKeyRef","useRef","secretKeyRef","algorithmType","setAlgorithmType","handleAlgorithmTypeChanges","setName","handleNameChanged","handleCopyClick","ref","input","current","select","handleGenerateKeysButton","handleAddKeyConfirm","onCancel","editorsDisabled","modalBody","autoFocus","onChange","Group","enterButton","onSearch","Text","mark","destroyOnClose","visible","footer","placement","onConfirm","AddApiKeyModalPure","ApiKeyList","apiKeys","useMemo","keys","handleRemoveItem","item","bordered","apiKey","ApiKeyListPure","DevZone","addKeyModalVisible","setAddKeyModalVisible","handleAddKeyButtonClick","handleClosePopupClick","DevZonePure","Header","arePaymentsAllowed","All","areDonationsAllowed","handleEditClick","EditFilled","HeaderPure","_g","_extends","assign","arguments","source","key","prototype","hasOwnProperty","call","apply","SvgTelegram","titleId","svgRef","width","viewBox","xmlns","xmlnsXlink","stroke","strokeWidth","fillRule","cx","cy","ForwardRef","iconIdMap","LinkOutlined","MailOutlined","Telegram","TelegramIcon","Facebook","FacebookOutlined","Twitter","TwitterOutlined","Instagram","InstagramOutlined","GitHub","GithubOutlined","Reddit","RedditOutlined","serviceLinkHelper","ServiceLink","Icon","ServiceLinks","Boolean","ServiceLinkEditor","handleChange","onDelete","ServiceLinksEditor","splice","handleAdd","editors","l","TokensEditor","selectedAddresses","allItems","handleTokensChanged","addresses","selectedItems","unSelectedItems","menu","trigger","overlay","ServiceEditForm","handleCancelClick","isFormValid","setIsFormValid","setDescription","setLinks","setAllowedTokens","isValid","handleNameChange","handleDescriptionChange","handleLinksChange","setAcceptPayments","setAcceptDonations","handleAllowedTokensChange","handleAcceptPaymentsChange","checked","handleDonationsPaymentsChange","handleUpdateClick","isNewService","isCreateMode","updatedService","placeholder","TextArea","ServiceEditFormPure","Tokens","tokenItems","TokensPure","ViewZone","ViewZonePure","ServiceViewMode","Service","isEdit","URLSearchParams","useLocation","search","useParams","mode","Create","ServicePure","About","aboutLangResources","tezosPayments","webSite","GlobalOutlined","gitHub","GithubFilled","telegram","twitter","TwitterCircleFilled","reddit","RedditCircleFilled","AboutPure","ConnectDropdown","handleConnectButtonClick","handleMenuItemButtonClick","selectedNetwork","n","connectLangResources","connectMenuItems","style","backgroundColor","color","connectMenu","connectButtonTitle","Button","ConnectDropdownPure","Connect","ConnectPure","PaymentAmount","imageUrl","Option","onAssetChange","stringMode","min","onAmountChange","PaymentAmountPure","AcceptPaymentsSettings","acceptPaymentsLangResources","serviceLangResources","operationsByService","serviceOptions","typeOptions","onServiceAddressChange","optionType","buttonStyle","paymentType","onPaymentTypeChange","onPaymentIdChange","onDonationDescriptionChange","showCount","base64PaymentUrlFactory","tezosPaymentsInternal","paymentsApp","DirectLinkGenerator","setUrl","getPaymentLink","defaultNetwork","createPayment","now","helpText","handleGenerateAndSignClick","DirectLinkGeneratorPure","FailedValidationResult","_props","Generator","currentAssetToken","tabList","tab","clientData","activeTabKey","results","GeneratorPure","AcceptPayments","addressFromUrl","setServiceAddress","setPaymentType","setAmount","getDefaultAsset","setAsset","setPaymentId","setClientData","handleServiceAddressChange","handlePaymentTypeChange","handleAmountChange","rawValue","formattedValue","handleAssetChange","handlePaymentIdChange","handleDonationDescriptionChange","AcceptPaymentsPure","Account","AccountNetworkGroup","AccountNetworkGroupPure","AccountDropDown","actionsLangResources","accountsByNetwork","currentAccountAddress","currentNetworkConfig","currentExplorer","explorers","default","explorer","handleViewOnExplorerClick","window","getAccountUrl","handleDisconnectButtonClick","ItemGroup","UserOutlined","blue","primary","Divider","LoginOutlined","LogoutOutlined","borderColor","getShortAddress","AccountDropDownPure","NavBar","viewsLangResources","selectedKeys","DashboardOutlined","UnorderedListOutlined","ProfileOutlined","SettingOutlined","InfoCircleOutlined","NavBarPure","Notifications","confirmations","duration","NotificationsPure","App","exact","path","template","ViewAndEdit","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","appReducer","combineReducers","reducer","enableMapSet","webApp","storeFactory","store","reactAppContext","BeaconWallet","colorMode","ColorMode","LIGHT","_network","_tezosToolkit","_services","onStoreChangedListener","onStoreChanged","bind","unsubscribeStoreChanged","createHistory","applyNetwork","createReactAppContext","getNetworkError","appState","createBrowserHistory","createTezosBlockchainUrlExplorer","networkConfig","TezosToolkit","rpcUrls","rpc","setSignerProvider","setWalletProvider","createServicesProvider","indexer","TzKTDataProvider","indexerUrls","minimumSupportedServiceVersion","BetterCallDevDataProvider","betterCallDev","TzKTBlockchainUrlExplorer","TzStatsBlockchainUrlExplorer","tzStats","BetterCallDevBlockchainUrlExplorer","configureStore","devTools","middleware","getDefaultMiddleware","thunk","extraArgument","serializableCheck","isSerializable","isPlain","isBigNumber","getEntries","entries","ReactDOM","render","StrictMode","Provider","getElementById"],"mappings":"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","file":"static/js/main.a2b9231b.chunk.js","sourcesContent":["import { MichelsonMap, TezosToolkit, TransactionWalletOperation, Wallet } from '@taquito/taquito';\n\nimport type { Service, ServiceOperation, ServiceSigningKey } from '@tezospayments/common';\nimport type { ServicesProvider, TezosPaymentsFactoryImplementationContract, TezosPaymentsServiceContract } from '@tezospayments/react-web-core';\n\nimport type { Account } from '../models/blockchain';\nimport type { ServiceFactoryStorage } from '../models/contracts';\n\nexport class ServicesService {\n  constructor(\n    private readonly tezosToolkit: TezosToolkit,\n    private readonly servicesProvider: ServicesProvider,\n    private readonly servicesFactoryContractAddress: string\n  ) {\n  }\n\n  async getServices(account: Account): Promise<readonly Service[]> {\n    return this.servicesProvider.getServices(account.address);\n  }\n\n  async getService(serviceContractAddress: string): Promise<Service> {\n    return this.servicesProvider.getService(serviceContractAddress);\n  }\n\n  async getOperations(serviceContractAddress: string): Promise<readonly ServiceOperation[]> {\n    return this.servicesProvider.getOperations(serviceContractAddress);\n  }\n\n  async updateService(service: Service): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    const encodedServiceMetadata = this.encodeMetadata(service);\n    return await serviceContract.methodsObject.update_service_parameters({\n      metadata: encodedServiceMetadata,\n      allowed_tokens: {\n        tez: service.allowedTokens.tez,\n        assets: [...service.allowedTokens.assets] // immerjs fix (without it we will fail in taquito on sorting the array)\n      },\n      allowed_operation_type: service.allowedOperationType\n    }).send();\n  }\n\n  async setPaused(service: Service, paused: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.set_pause(paused).send();\n  }\n\n  async setDeleted(service: Service, deleted: boolean): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.set_deleted(deleted).send();\n  }\n\n  async createService(service: Service): Promise<TransactionWalletOperation> {\n    const factoryContract = await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress);\n    const factoryStorage = await factoryContract.storage<ServiceFactoryStorage>();\n    const factoryImplementationContract = await this.getFactoryImplementationContract(factoryStorage.factory_implementation);\n\n    const encodedServiceMetadata = this.encodeMetadata(service);\n\n    const signingKeysMichelsonMap = new MichelsonMap<string, { public_key: string, name?: string }>();\n    for (const signingKey of service.signingKeys.values())\n      signingKeysMichelsonMap.set(signingKey.publicKey, { public_key: signingKey.publicKey, name: signingKey.name });\n\n    return await factoryImplementationContract.methodsObject.create_service({\n      metadata: encodedServiceMetadata,\n      allowed_tokens: {\n        tez: service.allowedTokens.tez,\n        assets: service.allowedTokens.assets,\n      },\n      allowed_operation_type: service.allowedOperationType,\n      signing_keys: signingKeysMichelsonMap\n    }).send();\n  }\n\n  addApiKey(service: Service, signingKey: ServiceSigningKey): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, { public_key: string, name?: string }>();\n    signingKeyUpdatesMap.set(signingKey.publicKey, { public_key: signingKey.publicKey, name: signingKey.name });\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  deleteApiKey(service: Service, publicKey: ServiceSigningKey['publicKey']): Promise<TransactionWalletOperation> {\n    const signingKeyUpdatesMap = new MichelsonMap<string, undefined>();\n    signingKeyUpdatesMap.set(publicKey, undefined);\n\n    return this.updateSigningKeys(service, signingKeyUpdatesMap);\n  }\n\n  private async updateSigningKeys(\n    service: Service,\n    signingKeyUpdatesMap: MichelsonMap<string, { public_key: string, name?: string } | undefined>\n  ): Promise<TransactionWalletOperation> {\n    const serviceContract = await this.getServiceContract(service.contractAddress);\n    return await serviceContract.methodsObject.update_signing_keys(signingKeyUpdatesMap).send();\n  }\n\n  private encodeMetadata(service: Service): string {\n    const serviceMetadata = {\n      name: service.name || undefined,\n      links: service.links.length ? service.links : undefined,\n      description: service.description || undefined,\n      iconUrl: service.iconUrl || undefined\n    };\n\n    return Buffer.from(JSON.stringify(serviceMetadata), 'utf8').toString('hex');\n  }\n\n  private async getServiceContract(contractAddress: string): Promise<TezosPaymentsServiceContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsServiceContract<Wallet>>(contractAddress);\n  }\n\n  private async getFactoryImplementationContract(contractAddress: string): Promise<TezosPaymentsFactoryImplementationContract<Wallet>> {\n    return await this.tezosToolkit.wallet.at<TezosPaymentsFactoryImplementationContract<Wallet>>(contractAddress);\n  }\n}\n","import { Buffer } from 'buffer';\n\ntype ValidBase64Format = 'base64' | 'base64url';\n\n// Node.js < 15\nconst isBase64UrlFormatSupported = Buffer.isEncoding('base64url');\n\nexport const decode = (base64String: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (!isBase64UrlFormatSupported) {\n    format = 'base64';\n    base64String = base64UrlPreprocessor.prepareValueForDecoding(base64String);\n  }\n\n  return Buffer.from(base64String, format).toString('utf8');\n};\n\nexport const encode = (value: string, format: ValidBase64Format = 'base64'): string => {\n  if (format !== 'base64' && format !== 'base64url')\n    return '';\n\n  if (isBase64UrlFormatSupported)\n    return Buffer.from(value, 'utf8').toString(format);\n\n  const encodedValue = Buffer.from(value, 'utf8').toString('base64');\n  return base64UrlPreprocessor.prepareEncodedValue(encodedValue);\n};\n\nconst base64UrlPreprocessor = {\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  prepareEncodedValue: (base64value: string) => base64value\n    .split('=')[0]!\n    .replace(/\\+/g, '-')\n    .replace(/\\//g, '_'),\n\n  prepareValueForDecoding: (base64value: string) => {\n    base64value = base64value\n      .replace(/-/g, '+')\n      .replace(/_/g, '/');\n\n    switch (base64value.length % 4) {\n      case 0: return base64value;\n      case 2: return base64value + '==';\n      case 3: return base64value + '=';\n      default:\n        throw new Error('Invalid base64url value');\n    }\n  }\n};\n","import { Buffer } from 'buffer';\n\nimport BigNumber from 'bignumber.js';\n\nexport const stringToUint8Array = (hex: string): Uint8Array => {\n  const integers = hex.match(/[\\da-f]{2}/gi)?.map(val => parseInt(val, 16));\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return new Uint8Array(integers!);\n};\n\nexport const stringToBytes = (value: string): string => Buffer.from(value, 'utf8').toString('hex');\nexport const bytesToString = (value: string): string => Buffer.from(stringToUint8Array(value)).toString('utf8');\n\nexport const objectToBytes = (value: Record<string, unknown>): string => stringToBytes(JSON.stringify(value));\nexport const bytesToObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: string): T | null => {\n  try {\n    return JSON.parse(bytesToString(value));\n  }\n  catch {\n    return null;\n  }\n};\n\nexport const tokensAmountToNat = (tokensAmount: BigNumber | number, decimals: number): BigNumber => {\n  return new BigNumber(tokensAmount).multipliedBy(10 ** decimals).integerValue();\n};\n\nexport const numberToTokensAmount = (value: BigNumber | number, decimals: number): BigNumber => {\n  return new BigNumber(value).integerValue().div(10 ** decimals);\n};\n\nexport const tezToMutez = (tez: BigNumber | number): BigNumber => tokensAmountToNat(tez, 6);\nexport const mutezToTez = (mutez: BigNumber | number): BigNumber => numberToTokensAmount(mutez, 6);\n","import isPlainObjectLodashFunction from 'lodash.isplainobject';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isArray = (arg: any): arg is any[] => {\n  return Array.isArray(arg);\n};\n\nexport const isReadonlyArray = (arg: unknown): arg is readonly unknown[] => {\n  return Array.isArray(arg);\n};\n\nexport const isPlainObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: unknown): value is T => {\n  return isPlainObjectLodashFunction(value);\n};\n","const defaultEqualityCheck = <T>(a: T, b: T) => a === b;\n\nconst areArgumentsShallowlyEqual = <T extends IArguments | null>(equalityCheck: (a: T, b: T) => boolean, prev: T, next: T) => {\n    if (prev === null || next === null || prev.length !== next.length) {\n        return false;\n    }\n\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n    const length = prev.length;\n    for (let i = 0; i < length; i++) {\n        if (!equalityCheck(prev[i], next[i])) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n/* eslint-disable prefer-rest-params  */\n/* eslint-disable prefer-spread */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const memoize = <TF extends (...args: any) => any>(func: TF, equalityCheck = defaultEqualityCheck): TF => {\n    let lastArgs: IArguments | null = null;\n    let lastResult: unknown = null;\n\n    return (function () {\n        if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n            // apply arguments instead of spreading for performance.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            lastResult = func.apply(null, arguments as any);\n        }\n\n        lastArgs = arguments;\n        return lastResult;\n    } as TF);\n};\n/* eslint-enable prefer-spread */\n/* eslint-enable prefer-rest-params */\n/* eslint-enable @typescript-eslint/no-explicit-any */\n","import BigNumber from 'bignumber.js';\n\n/* eslint-disable @typescript-eslint/no-explicit-any */\nconst emptyArray: any[] = [];\nconst emptyObject = {};\nconst emptyMap = new Map();\nconst emptySet: Set<any> = new Set();\nconst zeroBigNumber = new BigNumber(0);\n\nexport default {\n    emptyArray,\n    emptyMap,\n    emptySet,\n    emptyObject,\n    zeroBigNumber\n};\n","export const capitalize = (value: string): string => value && (value[0]?.toLocaleUpperCase() + value.slice(1));\n\nexport const getAvatarText = (value: string, maxLength = 2) => {\n  if (!value || !maxLength)\n    return '';\n\n  let result = '';\n\n  for (let i = 0, j = 0, isWord = false; i < value.length; i++) {\n    if (!isWord && value[i] !== ' ') {\n      isWord = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      result += value[i]!;\n\n      if (++j === maxLength)\n        return result;\n    }\n    else if (isWord && value[i] === ' ') {\n      isWord = false;\n    }\n  }\n\n  return result;\n};\n\nconst stringPad = (string: string, isStart: boolean, maxLength: number, fillString = ' ') => {\n  if (String.prototype.padStart !== undefined)\n    return string.padStart(maxLength, fillString);\n\n  const stringLength = string.length;\n  // eslint-disable-next-line eqeqeq\n  if (maxLength <= stringLength || fillString == '')\n    return string;\n\n  const fillLength = maxLength - stringLength;\n  let filler = fillString.repeat(Math.ceil(fillLength / fillString.length));\n\n  if (filler.length > fillLength)\n    filler = filler.slice(0, fillLength);\n\n  return isStart ? filler + string : string + filler;\n};\n\nexport const padStart = (string: string, maxLength: number, fillString = ' ') => String.prototype.padStart !== undefined\n  ? string.padStart(maxLength, fillString)\n  : stringPad(string, true, maxLength, fillString);\n\nexport const padEnd = (string: string, maxLength: number, fillString = ' ') => String.prototype.padEnd !== undefined\n  ? string.padEnd(maxLength, fillString)\n  : stringPad(string, false, maxLength, fillString);\n","import combineClassNames from 'clsx';\n\nimport * as base64 from './base64';\nimport * as converters from './converters';\nimport * as guards from './guards';\nimport { memoize } from './memoize';\nimport optimization from './optimization';\nimport shallowEqual from './shallowEqual';\nimport * as text from './text';\n\nconst wait = (ms: number) => new Promise<void>(resolve => setTimeout(resolve, ms));\n\nexport {\n  wait,\n  combineClassNames,\n  memoize,\n  shallowEqual,\n  base64,\n  optimization,\n  guards,\n  text,\n  converters\n};\n","import { memoize } from '../utils';\n\nexport enum IconId {\n  Common = 0,\n  Email = 1,\n  Telegram = 2,\n  Facebook = 3,\n  Twitter = 4,\n  Instagram = 5,\n  GitHub = 6,\n  Reddit = 7\n}\n\ninterface LinkInfo {\n  readonly rawLink: string;\n  readonly formattedLink: string;\n  readonly displayLink: string;\n  readonly icon: IconId;\n}\n\nconst getInvalidLinkInfo = (link: string): LinkInfo => ({\n  rawLink: link,\n  formattedLink: '#',\n  displayLink: 'Invalid Link',\n  icon: IconId.Common\n});\n\ntype LinkInfoProvider = (link: string) => LinkInfo | false;\n\nconst prepareFormattedLink = memoize((link: string) => link.trim());\nconst prepareDisplayLink = memoize((link: string) => link.trim().replace(/\\/$/, ''));\n\nconst socialMediaLinkInfoProvider = (link: string, baseUrl: string, icon: IconId): LinkInfo | false => {\n  if (!link.startsWith(baseUrl))\n    return false;\n\n  const formattedLink = prepareFormattedLink(link);\n  if (formattedLink === baseUrl)\n    return false;\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link).replace(baseUrl, ''),\n    icon\n  };\n};\n\nconst telegramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://t.me/', IconId.Telegram);\nconst facebookLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://facebook.com/', IconId.Facebook);\nconst twitterLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://twitter.com/', IconId.Twitter);\nconst instagramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://instagram.com/', IconId.Instagram);\nconst gitHubLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://github.com/', IconId.GitHub);\nconst redditLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://www.reddit.com/', IconId.Reddit);\n\n// This regex should not use for email validation\nconst emailCheckingRegEx = /^[^\\s/@]+@[^\\s@/]+$/;\nconst emailLinkInfoProvider: LinkInfoProvider = link => {\n  const preparedFormattedLink = prepareFormattedLink(link);\n\n  return emailCheckingRegEx.test(preparedFormattedLink) && {\n    rawLink: link,\n    formattedLink: `mailto:${preparedFormattedLink}`,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Email\n  };\n};\n\nconst javascriptLinkInfoProvider: LinkInfoProvider = link => link.startsWith('javascript') ? getInvalidLinkInfo(link) : false;\n\n// https://datatracker.ietf.org/doc/html/rfc3986#section-3.1\nconst urlSchemeRegEx = /^([a-z][a-z0-9+\\-.]*):/;\nconst commonLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return urlSchemeRegEx.test(formattedLink) && {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nconst editLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nexport class ServiceLinkHelper {\n  // Order is important\n  static readonly linkInfoProviders: readonly LinkInfoProvider[] = [\n    // Disallowed\n    javascriptLinkInfoProvider,\n    // Allowed\n    telegramLinkInfoProvider,\n    facebookLinkInfoProvider,\n    twitterLinkInfoProvider,\n    instagramLinkInfoProvider,\n    gitHubLinkInfoProvider,\n    emailLinkInfoProvider,\n    redditLinkInfoProvider,\n    commonLinkInfoProvider\n  ];\n\n  getLinkInfo(link: string, isEditMode = false): LinkInfo | null {\n    for (const provider of ServiceLinkHelper.linkInfoProviders) {\n      const linkInfo = provider(link);\n\n      if (linkInfo)\n        return this.linkInfoIsValid(linkInfo) ? linkInfo : null;\n    }\n\n    if (isEditMode)\n      return editLinkInfoProvider(link) as LinkInfo;\n\n    return null;\n  }\n\n  linkInfoIsValid(linkInfo: LinkInfo) {\n    return linkInfo.formattedLink !== '#';\n  }\n}\n","export enum PaymentType {\n  Payment = 1,\n  Donation = 2\n}\n\nexport interface PaymentBase {\n  readonly type: PaymentType;\n  readonly targetAddress: string;\n}\n","import { PaymentBase } from '../../models/payment/paymentBase';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { guards } from '../../utils';\nimport { PaymentValidationMethod } from './paymentValidationMethod';\n\nexport abstract class PaymentValidatorBase<TPayment extends PaymentBase> {\n  protected readonly abstract validationMethods: ReadonlyArray<PaymentValidationMethod<TPayment>>;\n  protected readonly abstract invalidPaymentObjectError: string;\n\n  validate(payment: TPayment, bail = false): FailedValidationResults {\n    if (!guards.isPlainObject(payment))\n      return [this.invalidPaymentObjectError];\n\n    let failedValidationResults: FailedValidationResults;\n    for (const validationMethod of this.validationMethods) {\n      const currentFailedValidationResults = validationMethod(payment);\n      if (currentFailedValidationResults) {\n        if (!bail)\n          return currentFailedValidationResults;\n\n        failedValidationResults = (failedValidationResults || []).concat(currentFailedValidationResults);\n      }\n    }\n\n    return failedValidationResults;\n  }\n}\n","const networksInternal = {\n  // mainnet: {\n  //   id: 'NetXdQprcVkpaWU',\n  //   name: 'mainnet',\n  // },\n  granadanet: {\n    id: 'NetXz969SFaFn8k',\n    name: 'granadanet',\n  },\n} as const;\n\ninterface NetworkInternal {\n  readonly id: string;\n  readonly name: string;\n}\n\ntype Networks = {\n  readonly [P in keyof typeof networksInternal]: (typeof networksInternal)[P] extends NetworkInternal & {\n    readonly name: P;\n  }\n  ? (typeof networksInternal)[P]\n  : never\n};\n\nexport type Network = Networks[keyof Networks];\nexport interface CustomNetwork {\n  readonly id?: string;\n  readonly name: string;\n}\n\nexport const networks: Networks = networksInternal;\nexport const networksCollection = Object.values(networksInternal);\n\nexport const networkIdRegExp = /^[a-zA-Z]\\w*$/;\nexport const networkNameRegExp = networkIdRegExp;\n","import { Network, networks, networksCollection } from './network';\n\ninterface TokenBase {\n  readonly network: Network;\n  readonly contractAddress: string;\n  readonly metadata?: TokenMetadata;\n}\n\nexport interface TokenFA12 extends TokenBase {\n  readonly type: 'fa1.2';\n}\n\nexport interface TokenFA2 extends TokenBase {\n  readonly type: 'fa2';\n  readonly id: number;\n}\n\nexport type Token = TokenFA12 | TokenFA2;\n\nexport type TokenMetadata = {\n  readonly decimals: number;\n  readonly symbol: string;\n  readonly name: string;\n  readonly thumbnailUri: string;\n};\n\nexport const tezosMeta: TokenMetadata = {\n  symbol: 'XTZ',\n  name: 'Tezos',\n  decimals: 6,\n  thumbnailUri: 'https://dashboard.tezospayments.com/tokens/tezos.png'\n};\n\nexport const unknownAssetMeta: TokenMetadata = {\n  name: 'Unknown',\n  symbol: 'Unknown',\n  decimals: 0,\n  thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png'\n};\n\nexport const tokenWhitelist: readonly Token[] = [\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa1.2',\n  //   contractAddress: 'KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV',\n  //   metadata: {\n  //     decimals: 18,\n  //     symbol: 'KUSD',\n  //     name: 'Kolibri',\n  //     thumbnailUri: 'https://kolibri-data.s3.amazonaws.com/logo.png',\n  //   },\n  // },\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa2',\n  //   contractAddress: 'KT1REEb5VxWRjcHm5GzDMwErMmNFftsE5Gpf',\n  //   fa2TokenId: 0,\n  //   metadata: {\n  //     decimals: 6,\n  //     symbol: 'USDS',\n  //     name: 'Stably USD',\n  //     thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n  //   },\n  // },\n  {\n    network: networks.granadanet,\n    type: 'fa1.2',\n    contractAddress: 'KT1KcuD9MmgZuGcptdD3qRqxXpGg4WxFsfVc',\n    metadata: {\n      decimals: 0,\n      symbol: 'fa12',\n      name: 'Test fa12',\n      thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png',\n    },\n  },\n  {\n    network: networks.granadanet,\n    type: 'fa2',\n    contractAddress: 'KT1BBfxboq63dbaKCAc4uwVKLFzVn1b4fy37',\n    id: 0,\n    metadata: {\n      decimals: 0,\n      symbol: 'fa20',\n      name: 'Test fa20',\n      thumbnailUri: 'https://dashboard.tezospayments.com/tokens/unknown.png',\n    },\n  },\n  {\n    network: networks.granadanet,\n    type: 'fa2',\n    contractAddress: 'KT1PMAT81mmL6NFp9rVU3xoVzU2dRdcXt4R9',\n    id: 0,\n    metadata: {\n      decimals: 6,\n      symbol: 'USDS',\n      name: 'Stably USD',\n      thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n    },\n  },\n];\n\nexport const tokenWhitelistMap: ReadonlyMap<Network, ReadonlyMap<Token['contractAddress'], Token>> = new Map(\n  networksCollection.map(nc => [nc, new Map(tokenWhitelist.filter(t => t.network === nc).map(t => [t.contractAddress, t]))])\n);\n","const contractAddressPrefixes = ['KT'] as const;\nconst implicitAddressPrefixes = ['tz1', 'tz2', 'tz3'] as const;\nconst addressPrefixes = [...contractAddressPrefixes, ...implicitAddressPrefixes] as const;\n\nexport const tezosInfo = {\n  addressLength: 36,\n  contractAddressPrefixes,\n  implicitAddressPrefixes,\n  addressPrefixes,\n} as const;\n","export enum KeyType {\n  Ed25519 = 'Ed25519',\n  Secp256k1 = 'Secp256k1',\n  P256 = 'P256'\n}\n","/* eslint-disable @typescript-eslint/no-redeclare */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { URL as NodeURL } from 'url';\n\nexport type URL = NodeURL;\nexport const URL = NodeURL || (globalThis as any).URL;\n","import BigNumber from 'bignumber.js';\n\nimport { tezosInfo } from '../../models/blockchain';\nimport { DonationAsset, Payment, PaymentAsset } from '../../models/payment';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { URL } from '../../native';\nimport { guards } from '../../utils';\n\ntype Errors<FieldNames extends string> = {\n  readonly [P in FieldNames]: string;\n};\n\nexport const validateTargetAddress = (\n  targetAddress: string,\n  errors: Errors<'invalidTargetAddress' | 'targetAddressHasInvalidLength' | 'targetAddressIsNotNetworkAddress'>\n): FailedValidationResults => {\n  if (typeof targetAddress !== 'string')\n    return [errors.invalidTargetAddress];\n\n  if (targetAddress.length !== tezosInfo.addressLength)\n    return [errors.targetAddressHasInvalidLength];\n\n  if (!tezosInfo.addressPrefixes.some(prefix => targetAddress.startsWith(prefix)))\n    return [errors.targetAddressIsNotNetworkAddress];\n};\n\nexport const validateId = (\n  id: string,\n  errors: Errors<'invalidId' | 'emptyId'>\n): FailedValidationResults => {\n  if (typeof id !== 'string')\n    return [errors.invalidId];\n\n  if (id === '')\n    return [errors.emptyId];\n};\n\nexport const validateAmount = (\n  amount: BigNumber,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  if (!BigNumber.isBigNumber(amount) || amount.isNaN() || !amount.isFinite())\n    return [errors.invalidAmount];\n\n  if (amount.isZero() || amount.isNegative())\n    return [errors.amountIsNonPositive];\n};\n\nexport const validateDesiredAmount = (\n  desiredAmount: BigNumber | undefined,\n  errors: Errors<'invalidAmount' | 'amountIsNonPositive'>\n): FailedValidationResults => {\n  return desiredAmount === undefined ? undefined : validateAmount(desiredAmount, errors);\n};\n\nexport const validatePaymentAsset = (\n  asset: PaymentAsset | undefined,\n  errors: Errors<\n    | 'invalidAsset'\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n    | 'invalidAssetDecimals' | 'assetDecimalsNumberIsNegative' | 'assetDecimalsNumberIsNotInteger'\n  >\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (!guards.isPlainObject(asset))\n    return [errors.invalidAsset];\n\n  return validateAsset(asset, errors) || validateAssetDecimals(asset.decimals, errors);\n};\n\nexport const validateDonationAsset = (\n  asset: DonationAsset | undefined,\n  errors: Errors<\n    | 'invalidAsset'\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n  >\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (!guards.isPlainObject(asset))\n    return [errors.invalidAsset];\n\n  return validateAsset(asset, errors);\n};\n\nexport const validateCreatedDate = (\n  date: Date,\n  errors: Errors<'invalidCreatedDate'>\n): FailedValidationResults => {\n  if (!(date instanceof Date) || isNaN(date.getTime()))\n    return [errors.invalidCreatedDate];\n};\n\nexport const validateUrl = (\n  url: URL | undefined,\n  errors: Errors<'invalidUrl' | 'invalidProtocol'>\n): FailedValidationResults => {\n  if (url === undefined)\n    return;\n\n  if (!(url instanceof URL))\n    return [errors.invalidUrl];\n\n  if (url.protocol.indexOf('javascript') > -1)\n    return [errors.invalidProtocol];\n};\n\nexport const validateExpiredDate = (\n  expiredDate: Date | undefined,\n  createdDate: Date,\n  minimumPaymentLifetime: number,\n  errors: Errors<'invalidExpiredDate' | 'paymentLifetimeIsShort'>\n): FailedValidationResults => {\n  if (expiredDate === undefined)\n    return;\n\n  if (!(expiredDate instanceof Date) || isNaN(expiredDate.getTime()))\n    return [errors.invalidExpiredDate];\n\n  if (expiredDate.getTime() - createdDate.getTime() < minimumPaymentLifetime) {\n    return [errors.paymentLifetimeIsShort];\n  }\n};\n\nexport const validateData = (\n  data: Payment['data'],\n  errors: Errors<'invalidData'>\n): FailedValidationResults => {\n  if (data === undefined)\n    return;\n\n  if (!guards.isPlainObject(data))\n    return [errors.invalidData];\n};\n\nconst validateAsset = (\n  asset: PaymentAsset | DonationAsset,\n  errors: Errors<\n    | 'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'\n    | 'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'\n  >\n): FailedValidationResults => {\n  return validateAssetAddress(asset.address, errors) || validateAssetId(asset.id, errors);\n};\n\nconst validateAssetAddress = (\n  assetAddress: string,\n  errors: Errors<'invalidAssetAddress' | 'assetAddressHasInvalidLength' | 'assetAddressIsNotContractAddress'>\n): FailedValidationResults => {\n  if (typeof assetAddress !== 'string')\n    return [errors.invalidAssetAddress];\n\n  if (assetAddress.length !== tezosInfo.addressLength)\n    return [errors.assetAddressHasInvalidLength];\n\n  if (!tezosInfo.contractAddressPrefixes.some(prefix => assetAddress.startsWith(prefix)))\n    return [errors.assetAddressIsNotContractAddress];\n};\n\nconst validateAssetId = (\n  assetId: number | null,\n  errors: Errors<'invalidAssetId' | 'assetIdIsNegative' | 'assetIdIsNotInteger'>\n): FailedValidationResults => {\n  if (assetId === null)\n    return;\n\n  if (typeof assetId !== 'number' || Number.isNaN(assetId) || !Number.isFinite(assetId))\n    return [errors.invalidAssetId];\n\n  if (assetId < 0)\n    return [errors.assetIdIsNegative];\n\n  if (!Number.isInteger(assetId))\n    return [errors.assetIdIsNotInteger];\n};\n\nconst validateAssetDecimals = (\n  assetDecimals: number,\n  errors: Errors<'invalidAssetDecimals' | 'assetDecimalsNumberIsNegative' | 'assetDecimalsNumberIsNotInteger'>\n): FailedValidationResults => {\n  if (typeof assetDecimals !== 'number' || Number.isNaN(assetDecimals) || !Number.isFinite(assetDecimals))\n    return [errors.invalidAssetDecimals];\n\n  if (assetDecimals < 0)\n    return [errors.assetDecimalsNumberIsNegative];\n\n  if (!Number.isInteger(assetDecimals))\n    return [errors.assetDecimalsNumberIsNotInteger];\n};\n","import type { Payment, UnsignedPayment } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport {\n  validateTargetAddress, validateId, validateAmount, validateData, validatePaymentAsset,\n  validateCreatedDate, validateExpiredDate, validateUrl\n} from './validationMethods';\n\nexport class PaymentValidator extends PaymentValidatorBase<Payment | UnsignedPayment> {\n  static readonly errors = {\n    invalidPaymentObject: 'Payment is undefined or not object',\n    invalidType: 'Payment type is invalid',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidId: 'Id is invalid',\n    emptyId: 'Id is empty',\n    invalidAmount: 'Amount is invalid',\n    amountIsNonPositive: 'Amount is less than or equal to zero',\n    invalidData: 'Payment data is invalid',\n    invalidAsset: 'Asset is invalid',\n    invalidAssetAddress: 'Asset address is invalid',\n    assetAddressIsNotContractAddress: 'Asset address isn\\'t a contract address',\n    assetAddressHasInvalidLength: 'Asset address has an invalid address',\n    invalidAssetId: 'Asset Id is invalid',\n    assetIdIsNegative: 'Asset Id is negative',\n    assetIdIsNotInteger: 'Asset Id isn\\'t an integer',\n    invalidAssetDecimals: 'Asset number of decimals is invalid',\n    assetDecimalsNumberIsNegative: 'Asset number of decimals is negative',\n    assetDecimalsNumberIsNotInteger: 'Asset number of decimals isn\\'t an integer',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol',\n    invalidCreatedDate: 'Created date is invalid',\n    invalidExpiredDate: 'Expired date is invalid',\n    paymentLifetimeIsShort: 'Payment lifetime is short'\n  } as const;\n  static readonly minimumPaymentLifetime = 600000; // 10 * 60 * 1000;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Payment | UnsignedPayment>> = [\n    payment => payment.type !== PaymentType.Payment ? [PaymentValidator.errors.invalidType] : undefined,\n    payment => validateTargetAddress(payment.targetAddress, PaymentValidator.errors),\n    payment => validateId(payment.id, PaymentValidator.errors),\n    payment => validateAmount(payment.amount, PaymentValidator.errors),\n    payment => validatePaymentAsset(payment.asset, PaymentValidator.errors),\n    payment => validateData(payment.data, PaymentValidator.errors),\n    payment => validateUrl(payment.successUrl, PaymentValidator.successUrlErrors),\n    payment => validateUrl(payment.cancelUrl, PaymentValidator.cancelUrlErrors),\n    payment => validateCreatedDate(payment.created, PaymentValidator.errors),\n    payment => validateExpiredDate(payment.expired, payment.created, PaymentValidator.minimumPaymentLifetime, PaymentValidator.errors),\n  ];\n\n  protected readonly invalidPaymentObjectError = PaymentValidator.errors.invalidPaymentObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidSuccessUrl,\n    invalidProtocol: PaymentValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidCancelUrl,\n    invalidProtocol: PaymentValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","import type { Donation, UnsignedDonation } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport { validateTargetAddress, validateDesiredAmount, validateDonationAsset, validateUrl, validateData } from './validationMethods';\n\nexport class DonationValidator extends PaymentValidatorBase<Donation | UnsignedDonation> {\n  static readonly errors = {\n    invalidDonationObject: 'Donation is undefined or not object',\n    invalidType: 'Donation type is invalid',\n    invalidData: 'Donation data is invalid',\n    invalidAmount: 'Desired amount is invalid',\n    amountIsNonPositive: 'Desired amount is less than or equal to zero',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidAsset: 'Desired asset is invalid',\n    invalidAssetAddress: 'Desired asset address is invalid',\n    assetAddressIsNotContractAddress: 'Desired asset address isn\\'t a contract address',\n    assetAddressHasInvalidLength: 'Desired asset address has an invalid address',\n    invalidAssetId: 'Asset Id is invalid',\n    assetIdIsNegative: 'Asset Id is negative',\n    assetIdIsNotInteger: 'Asset Id isn\\'t an integer',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol'\n  } as const;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Donation | UnsignedDonation>> = [\n    donation => donation.type !== PaymentType.Donation ? [DonationValidator.errors.invalidType] : undefined,\n    donation => validateData(donation.data, DonationValidator.errors),\n    donation => validateTargetAddress(donation.targetAddress, DonationValidator.errors),\n    donation => validateDesiredAmount(donation.desiredAmount, DonationValidator.errors),\n    donation => validateDonationAsset(donation.desiredAsset, DonationValidator.errors),\n    donation => validateUrl(donation.successUrl, DonationValidator.successUrlErrors),\n    donation => validateUrl(donation.cancelUrl, DonationValidator.cancelUrlErrors)\n  ];\n\n  protected readonly invalidPaymentObjectError = DonationValidator.errors.invalidDonationObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidSuccessUrl,\n    invalidProtocol: DonationValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidCancelUrl,\n    invalidProtocol: DonationValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","export abstract class StateModel {\n    protected constructor() {\n    // All derived classes should be static\n    }\n}\n","import { SerializedFieldType } from './serializedFieldType';\n\nexport class ObjectSerializationValidator<T extends Record<string | number, unknown>> {\n  private _minObjectFieldsCount: number | undefined;\n\n  constructor(\n    protected readonly objectFieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>\n  ) {\n  }\n\n  private get minObjectFieldsCount() {\n    if (!this._minObjectFieldsCount) {\n      let count = 0;\n      for (const info of this.objectFieldTypes) {\n        if (typeof info[1] === 'string' ? info[1] !== 'undefined' : info[1].every(type => type !== 'undefined'))\n          count++;\n      }\n\n      this._minObjectFieldsCount = count;\n    }\n\n    return this._minObjectFieldsCount;\n  }\n\n  private get maxObjectFieldsCount() {\n    return this.objectFieldTypes.size;\n  }\n\n  validate(value: T): value is T {\n    if (!value)\n      return false;\n\n    const fieldNames = Object.getOwnPropertyNames(value) as ReadonlyArray<keyof T>;\n\n    // Prevent the field checking if the deserializedValue has an invalid number of fields\n    if (fieldNames.length < this.minObjectFieldsCount || fieldNames.length > this.maxObjectFieldsCount)\n      return false;\n\n    for (const [fieldName, expectedFieldType] of this.objectFieldTypes) {\n      const fieldValue = value[fieldName];\n      const actualFieldType = fieldValue === null ? 'null' : typeof fieldValue;\n\n      if (Array.isArray(expectedFieldType)\n        ? !expectedFieldType.some(expectedType => actualFieldType === expectedType)\n        : actualFieldType !== expectedFieldType\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Serializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  serialize(value: T): string | null {\n    try {\n      if (!this.objectSerializationValidator.validate(value))\n        return null;\n\n      const jsonString = JSON.stringify(value);\n      return base64.encode(jsonString, 'base64url');\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { base64 } from '../../utils';\nimport { ObjectSerializationValidator } from './objectSerializationValidator';\nimport type { SerializedFieldType } from './serializedFieldType';\n\nexport class Base64Deserializer<T extends Record<string | number, unknown>> {\n  private objectSerializationValidator: ObjectSerializationValidator<T>;\n\n  constructor(fieldTypes: ReadonlyMap<keyof T, SerializedFieldType | readonly SerializedFieldType[]>) {\n    this.objectSerializationValidator = new ObjectSerializationValidator(fieldTypes);\n  }\n\n  deserialize(serializedValue: string): T | null {\n    try {\n      let value: T;\n\n      if (serializedValue) {\n        const serializedValueString = base64.decode(serializedValue, 'base64url');\n        value = JSON.parse(serializedValueString);\n      }\n      else\n        value = {} as T;\n\n      return this.objectSerializationValidator.validate(value)\n        ? value\n        : null;\n    }\n    catch {\n      return null;\n    }\n  }\n}\n","import { SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nconst _serializedPaymentAssetFieldTypes: ReadonlyMap<\n  keyof SerializedPaymentAsset, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPaymentAsset, SerializedFieldType | readonly SerializedFieldType[]>()\n  // address\n  .set('a', 'string')\n  // decimals\n  .set('d', 'number')\n  // id\n  .set('i', ['number', 'undefined', 'null']);\n\nconst _serializedPaymentSignatureFieldTypes: ReadonlyMap<\n  keyof SerializedPaymentSignature, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPaymentSignature, SerializedFieldType | readonly SerializedFieldType[]>()\n  // contract\n  .set('c', 'string')\n  // client\n  .set('cl', ['string', 'undefined', 'null'])\n  // signature.signingPublicKey\n  .set('k', 'string');\n\nexport const serializedPaymentFieldTypes: ReadonlyMap<\n  keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedPayment, SerializedFieldType | readonly SerializedFieldType[]>()\n  // id\n  .set('i', 'string')\n  // amount\n  .set('a', 'string')\n  // asset\n  .set('as', ['object', 'undefined', 'null'])\n  // .set('as', serializedPaymentAssetFieldTypes)\n  // data\n  .set('d', ['object', 'undefined', 'null'])\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null'])\n  // created\n  .set('c', 'number')\n  // expired\n  .set('e', ['number', 'undefined', 'null'])\n  // signature\n  .set('s', 'object');\n  // .set('s', serializedPaymentSignatureFieldTypes);\n","import type {\n  Payment, PaymentAsset, PaymentSignature,\n  SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature\n} from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentSerializer {\n  protected static readonly serializedPaymentBase64Serializer = new Base64Serializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  serialize(payment: Payment): string | null {\n    try {\n      const serializedPayment = this.mapPaymentToSerializedPayment(payment);\n      return PaymentSerializer.serializedPaymentBase64Serializer.serialize(serializedPayment);\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapPaymentToSerializedPayment(payment: Payment): SerializedPayment {\n    return {\n      i: payment.id,\n      a: payment.amount.toString(),\n      as: payment.asset ? this.mapPaymentAssetToSerializedPaymentAsset(payment.asset) : undefined,\n      d: payment.data,\n      su: payment.successUrl?.toString(),\n      cu: payment.cancelUrl?.toString(),\n      c: payment.created.getTime(),\n      e: payment.expired?.getTime(),\n      s: this.mapPaymentSignatureToSerializedPaymentSignature(payment.signature)\n    };\n  }\n\n  protected mapPaymentAssetToSerializedPaymentAsset(paymentAsset: PaymentAsset): SerializedPaymentAsset {\n    return {\n      a: paymentAsset.address,\n      d: paymentAsset.decimals,\n      i: paymentAsset.id !== null ? paymentAsset.id : undefined\n    };\n  }\n\n  protected mapPaymentSignatureToSerializedPaymentSignature(paymentSignature: PaymentSignature): SerializedPaymentSignature {\n    return {\n      k: paymentSignature.signingPublicKey,\n      c: paymentSignature.contract,\n      cl: paymentSignature.client\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type {\n  NonSerializedPaymentSlice, Payment, PaymentAsset, PaymentSignature,\n  SerializedPayment, SerializedPaymentAsset, SerializedPaymentSignature\n} from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedPaymentFieldTypes } from './serializedPaymentFieldTypes';\n\nexport class PaymentDeserializer {\n  protected static readonly serializedPaymentBase64Deserializer = new Base64Deserializer<SerializedPayment>(\n    serializedPaymentFieldTypes\n  );\n\n  deserialize(serializedPaymentBase64: string, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment | null {\n    try {\n      const serializedPayment = PaymentDeserializer.serializedPaymentBase64Deserializer.deserialize(serializedPaymentBase64);\n\n      return serializedPayment ? this.mapSerializedPaymentToPayment(serializedPayment, nonSerializedPaymentSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedPaymentToPayment(serializedPayment: SerializedPayment, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment {\n    return {\n      type: PaymentType.Payment,\n      id: serializedPayment.i,\n      amount: new BigNumber(serializedPayment.a),\n      asset: serializedPayment.as ? this.mapSerializedPaymentAssetToPaymentAsset(serializedPayment.as) : undefined,\n      data: serializedPayment.d,\n      successUrl: serializedPayment.su ? new URL(serializedPayment.su) : undefined,\n      cancelUrl: serializedPayment.cu ? new URL(serializedPayment.cu) : undefined,\n      created: new Date(serializedPayment.c),\n      expired: serializedPayment.e ? new Date(serializedPayment.e) : undefined,\n      targetAddress: nonSerializedPaymentSlice.targetAddress,\n      signature: this.mapSerializedPaymentSignatureToPaymentSignature(serializedPayment.s)\n    };\n  }\n\n  protected mapSerializedPaymentAssetToPaymentAsset(serializedPaymentAsset: SerializedPaymentAsset): PaymentAsset {\n    return {\n      address: serializedPaymentAsset.a,\n      decimals: serializedPaymentAsset.d,\n      id: serializedPaymentAsset.i !== undefined ? serializedPaymentAsset.i : null\n    };\n  }\n\n  protected mapSerializedPaymentSignatureToPaymentSignature(serializedPaymentSignature: SerializedPaymentSignature): PaymentSignature {\n    return {\n      signingPublicKey: serializedPaymentSignature.k,\n      contract: serializedPaymentSignature.c,\n      client: serializedPaymentSignature.cl\n    };\n  }\n}\n","import { SerializedDonation, SerializedDonationAsset, SerializedDonationSignature } from '../../models';\nimport { SerializedFieldType } from '../base64';\n\nconst _serializedDonationAssetFieldTypes: ReadonlyMap<\n  keyof SerializedDonationAsset, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonationAsset, SerializedFieldType | readonly SerializedFieldType[]>()\n  // address\n  .set('a', 'string')\n  // id\n  .set('i', ['number', 'undefined', 'null']);\n\nconst _serializedDonationSignatureFieldTypes: ReadonlyMap<\n  keyof SerializedDonationSignature, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonationSignature, SerializedFieldType | readonly SerializedFieldType[]>()\n  // client\n  .set('cl', 'string')\n  // signature.signingPublicKey\n  .set('k', 'string');\n\nexport const serializedDonationFieldTypes: ReadonlyMap<\n  keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]\n> = new Map<keyof SerializedDonation, SerializedFieldType | readonly SerializedFieldType[]>()\n  // data\n  .set('d', ['object', 'undefined', 'null'])\n  // desiredAmount\n  .set('da', ['string', 'undefined', 'null'])\n  // desiredAsset\n  .set('das', ['object', 'undefined', 'null'])\n  // .set('das', serializedDonationAssetFieldTypes)\n  // successUrl\n  .set('su', ['string', 'undefined', 'null'])\n  // cancelUrl\n  .set('cu', ['string', 'undefined', 'null'])\n  // signature\n  .set('s', ['object', 'undefined', 'null']);\n  // .set('da', serializedDonationSignatureFieldTypes)\n","import type {\n  Donation, DonationAsset, DonationSignature,\n  SerializedDonation, SerializedDonationAsset, SerializedDonationSignature\n} from '../../models';\nimport { Base64Serializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nconst serializedEmptyObjectBase64 = 'e30';\nexport class DonationSerializer {\n  protected static readonly serializedDonationBase64Serializer = new Base64Serializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  serialize(donation: Donation): string | null {\n    try {\n      const serializedDonation = this.mapDonationToSerializedDonation(donation);\n      const serializedDonationBase64 = DonationSerializer.serializedDonationBase64Serializer.serialize(serializedDonation);\n\n      return serializedDonationBase64 === serializedEmptyObjectBase64 ? '' : serializedDonationBase64;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapDonationToSerializedDonation(donation: Donation): SerializedDonation {\n    return {\n      d: donation.data,\n      da: donation.desiredAmount?.toString(),\n      das: donation.desiredAsset ? this.mapDonationAssetToSerializedDonationAsset(donation.desiredAsset) : undefined,\n      su: donation.successUrl?.toString(),\n      cu: donation.cancelUrl?.toString(),\n      s: donation.signature ? this.mapDonationSignatureToSerializedDonationSignature(donation.signature) : undefined\n    };\n  }\n\n  protected mapDonationAssetToSerializedDonationAsset(donationAsset: DonationAsset): SerializedDonationAsset {\n    return {\n      a: donationAsset.address,\n      i: donationAsset.id !== null ? donationAsset.id : undefined\n    };\n  }\n\n  protected mapDonationSignatureToSerializedDonationSignature(donationSignature: DonationSignature): SerializedDonationSignature {\n    return {\n      k: donationSignature.signingPublicKey,\n      cl: donationSignature.client\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport type {\n  NonSerializedDonationSlice, Donation, DonationAsset, DonationSignature,\n  SerializedDonation, SerializedDonationSignature, SerializedDonationAsset,\n} from '../../models';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { Base64Deserializer } from '../base64';\nimport { serializedDonationFieldTypes } from './serializedDonationFieldTypes';\n\nexport class DonationDeserializer {\n  protected static readonly serializedDonationBase64Deserializer = new Base64Deserializer<SerializedDonation>(\n    serializedDonationFieldTypes\n  );\n\n  deserialize(serializedDonationBase64: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    try {\n      const serializedDonation = DonationDeserializer.serializedDonationBase64Deserializer.deserialize(serializedDonationBase64);\n\n      return serializedDonation ? this.mapSerializedDonationToDonation(serializedDonation, nonSerializedDonationSlice) : null;\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected mapSerializedDonationToDonation(serializedDonation: SerializedDonation, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation {\n    return {\n      type: PaymentType.Donation,\n      data: serializedDonation.d,\n      desiredAmount: serializedDonation.da ? new BigNumber(serializedDonation.da) : undefined,\n      desiredAsset: serializedDonation.das ? this.mapSerializedDonationAssetToDonationAsset(serializedDonation.das) : undefined,\n      successUrl: serializedDonation.su ? new URL(serializedDonation.su) : undefined,\n      cancelUrl: serializedDonation.cu ? new URL(serializedDonation.cu) : undefined,\n      targetAddress: nonSerializedDonationSlice.targetAddress,\n      signature: serializedDonation.s ? this.mapSerializedDonationSignatureToDonationSignature(serializedDonation.s) : undefined\n    };\n  }\n\n  protected mapSerializedDonationAssetToDonationAsset(serializedDonationAsset: SerializedDonationAsset): DonationAsset {\n    return {\n      address: serializedDonationAsset.a,\n      id: serializedDonationAsset.i !== undefined ? serializedDonationAsset.i : null\n    };\n  }\n\n  protected mapSerializedDonationSignatureToDonationSignature(serializedDonationSignature: SerializedDonationSignature): DonationSignature {\n    return {\n      signingPublicKey: serializedDonationSignature.k,\n      client: serializedDonationSignature.cl\n    };\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { PaymentValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { PaymentDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport type { PaymentSignature } from '../signing';\nimport { PaymentBase, PaymentType } from './paymentBase';\nimport { NonSerializedPaymentSlice } from './serializedPayment';\n\nexport interface Payment extends PaymentBase {\n  readonly type: PaymentType.Payment;\n  readonly id: string;\n  readonly amount: BigNumber;\n  readonly asset?: PaymentAsset;\n  readonly created: Date;\n  readonly expired?: Date;\n  readonly data?: PaymentData;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n  readonly signature: PaymentSignature;\n}\n\nexport type UnsignedPayment = Omit<Payment, 'signature'>;\n\ninterface PaymentData {\n  readonly [fieldName: string]: unknown;\n}\n\nexport interface PaymentAsset {\n  readonly address: string;\n  readonly decimals: number;\n  readonly id: number | null;\n}\n\nexport class Payment extends StateModel {\n  static readonly defaultDeserializer: PaymentDeserializer = new PaymentDeserializer();\n  static readonly defaultValidator: PaymentValidator = new PaymentValidator();\n\n  static validate(payment: Payment) {\n    return Payment.defaultValidator.validate(payment);\n  }\n\n  static deserialize(serializedPayment: string, nonSerializedPaymentSlice: NonSerializedPaymentSlice): Payment | null {\n    return Payment.defaultDeserializer.deserialize(serializedPayment, nonSerializedPaymentSlice);\n  }\n}\n","import BigNumber from 'bignumber.js';\n\nimport { DonationValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { DonationDeserializer } from '../../serialization';\nimport { StateModel } from '../core';\nimport type { DonationSignature } from '../signing';\nimport { PaymentBase, PaymentType } from './paymentBase';\nimport { NonSerializedDonationSlice } from './serializedDonation';\n\nexport interface Donation extends PaymentBase {\n  readonly type: PaymentType.Donation;\n  readonly data?: DonationData;\n  readonly desiredAmount?: BigNumber;\n  readonly desiredAsset?: DonationAsset;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n  readonly signature?: DonationSignature;\n}\n\nexport type UnsignedDonation = Omit<Donation, 'signature'>;\n\ninterface DonationData {\n  readonly [fieldName: string]: unknown;\n}\n\nexport interface DonationAsset {\n  readonly address: string;\n  readonly id: number | null;\n}\n\nexport class Donation extends StateModel {\n  static readonly defaultDeserializer: DonationDeserializer = new DonationDeserializer();\n  static readonly defaultValidator: DonationValidator = new DonationValidator();\n\n  static validate(donation: Donation) {\n    return Donation.defaultValidator.validate(donation);\n  }\n\n  static deserialize(serializedDonation: string, nonSerializedDonationSlice: NonSerializedDonationSlice): Donation | null {\n    return Donation.defaultDeserializer.deserialize(serializedDonation, nonSerializedDonationSlice);\n  }\n}\n\n","import { text } from '../../utils';\n\nexport enum PaymentUrlType {\n  Base64 = 0\n}\n\nconst encodedPaymentUrlTypeMap = new Map<PaymentUrlType, string>(\n  Object.keys(PaymentUrlType)\n    .filter(value => !isNaN(+value))\n    .map(value => [+value, text.padStart(value, 2, '0')])\n);\n\nexport const getEncodedPaymentUrlType = (paymentUrlType: PaymentUrlType) => encodedPaymentUrlTypeMap.get(paymentUrlType) || '';\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype ParameterizedRouteFactory = (...args: any[]) => string;\nexport type ParameterizedRoute<Factory extends ParameterizedRouteFactory> = Factory & {\n  readonly template: string;\n};\n\nexport const getParameterizedRoute = <Factory extends ParameterizedRouteFactory>(\n  factory: Factory, template: string\n): ParameterizedRoute<Factory> => {\n  (factory as Factory & { template: string }).template = template;\n\n  return factory as ParameterizedRoute<Factory>;\n};\n","export enum ServiceOperationType {\n  Payment = 1,\n  Donation = 2,\n\n  All = Payment | Donation\n}\n","import { optimization } from '../../utils';\nimport { Network, networks } from '../blockchain/network';\nimport { ServiceOperationType } from './serviceOperationType';\nimport { ServiceSigningKey } from './serviceSigningKey';\n\nexport interface Service {\n  readonly name: string;\n  readonly links: readonly string[];\n  readonly description?: string;\n  readonly iconUrl?: string;\n  readonly version: number;\n  readonly metadata: string;\n\n  readonly contractAddress: string;\n  readonly network: Network;\n  readonly allowedTokens: {\n    readonly tez: boolean;\n    readonly assets: readonly string[];\n  }\n  readonly allowedOperationType: ServiceOperationType;\n\n  readonly owner: string;\n  readonly paused: boolean;\n  readonly deleted: boolean;\n  readonly signingKeys: ReadonlyMap<ServiceSigningKey['publicKey'], ServiceSigningKey>;\n}\n\nexport const emptyService: Service = {\n  name: '',\n  description: '',\n  links: optimization.emptyArray,\n  version: 0,\n  metadata: '',\n  contractAddress: '',\n  allowedTokens: {\n    tez: true,\n    assets: optimization.emptyArray\n  },\n  allowedOperationType: ServiceOperationType.Payment,\n  owner: '',\n  paused: false,\n  deleted: false,\n  network: networks.granadanet,\n  signingKeys: optimization.emptyMap\n};\n","export enum OperationType {\n  Payment = 1,\n  Donation = 2\n}\n","export enum OperationDirection {\n  Incoming = 0,\n  Outgoing = 1\n}\n","export enum OperationStatus {\n  Pending = 0,\n  Success = 1,\n  Cancelled = 2\n}\n","\nimport { converters } from '../../utils';\nimport { StateModel } from '../core';\nimport { Operation } from './operation';\nimport { OperationDirection } from './operationDirection';\nimport { OperationType } from './operationType';\n\nexport interface DonationOperation extends Operation {\n  readonly type: OperationType.Donation;\n  readonly direction: OperationDirection.Incoming;\n  readonly payload?: DonationOperationPayload;\n}\n\nexport interface DonationOperationPayload {\n  readonly value: { readonly [fieldName: string]: unknown; } | null;\n  readonly valueString: string;\n  readonly encodedValue: string;\n}\n\nexport class DonationOperation extends StateModel {\n  static parsePayload(encodedValue: string): DonationOperationPayload {\n    const valueString = converters.bytesToString(encodedValue);\n\n    let value: DonationOperationPayload['value'] = null;\n    try { value = JSON.parse(valueString); } catch { /**/ }\n\n    return {\n      value,\n      valueString,\n      encodedValue,\n    };\n  }\n}\n","import type { MichelsonType } from '@taquito/michel-codec';\n\nexport const contractPaymentInTezSignPayloadMichelsonType: MichelsonType = {\n  prim: 'pair',\n  args: [\n    {\n      prim: 'pair',\n      args: [\n        { prim: 'string' },\n        { prim: 'address' }\n      ]\n    },\n    { prim: 'mutez' }\n  ]\n};\n\nexport const contractPaymentInAssetSignPayloadMichelsonType: MichelsonType = {\n  prim: 'pair',\n  args: [\n    {\n      prim: 'pair',\n      args: [\n        {\n          prim: 'pair',\n          args: [\n            { prim: 'string' },\n            { prim: 'address' }\n          ]\n        },\n        {\n          prim: 'pair',\n          args: [\n            { prim: 'nat' },\n            { prim: 'address' }\n          ]\n        }\n      ]\n    },\n    {\n      prim: 'option',\n      args: [{ prim: 'nat' }]\n    }\n  ]\n};\n","\nimport { MichelsonType, packDataBytes } from '@taquito/michel-codec';\n\nimport type { UnsignedPayment, EncodedPaymentSignPayload } from '../../models';\nimport { tezToMutez, tokensAmountToNat } from '../../utils/converters';\nimport { contractPaymentInTezSignPayloadMichelsonType, contractPaymentInAssetSignPayloadMichelsonType } from './michelsonTypes';\n\nexport class PaymentSignPayloadEncoder {\n  protected static readonly contractPaymentInTezSignPayloadMichelsonType: MichelsonType = contractPaymentInTezSignPayloadMichelsonType;\n  protected static readonly contractPaymentInAssetSignPayloadMichelsonType: MichelsonType = contractPaymentInAssetSignPayloadMichelsonType;\n\n  encode(payment: UnsignedPayment): EncodedPaymentSignPayload {\n    return {\n      contractSignPayload: this.getContractSignPayload(payment),\n      clientSignPayload: this.getClientSignPayload(payment)\n    };\n  }\n\n  protected getContractSignPayload(payment: UnsignedPayment): EncodedPaymentSignPayload['contractSignPayload'] {\n    const signPayload = payment.asset\n      ? packDataBytes(\n        {\n          prim: 'Pair',\n          args: [\n            {\n              prim: 'Pair',\n              args: [\n                {\n                  prim: 'Pair',\n                  args: [\n                    { string: payment.id },\n                    { string: payment.targetAddress }\n                  ]\n                },\n                {\n                  prim: 'Pair',\n                  args: [\n                    { int: tokensAmountToNat(payment.amount, payment.asset.decimals).toString(10) },\n                    { string: payment.asset.address }\n                  ]\n                }\n              ]\n            },\n            payment.asset.id !== undefined && payment.asset.id !== null\n              ? { prim: 'Some', args: [{ int: payment.asset.id.toString() }] }\n              : { prim: 'None' }\n          ]\n        },\n        contractPaymentInAssetSignPayloadMichelsonType\n      )\n      : packDataBytes(\n        {\n          prim: 'Pair',\n          args: [\n            {\n              prim: 'Pair',\n              args: [\n                { string: payment.id },\n                { string: payment.targetAddress }\n              ]\n            },\n            { int: tezToMutez(payment.amount).toString(10) }\n          ]\n        },\n        contractPaymentInTezSignPayloadMichelsonType\n      );\n\n    return '0x' + signPayload.bytes;\n  }\n\n  protected getClientSignPayload(payment: UnsignedPayment): EncodedPaymentSignPayload['clientSignPayload'] {\n    return (\n      (payment.successUrl ? payment.successUrl.href : '')\n      + (payment.cancelUrl ? payment.cancelUrl.href : '')\n    ) || null;\n  }\n}\n","import { b58cencode, prefix } from '@taquito/utils';\nimport sodium from 'libsodium-wrappers';\n\nimport { EncodedKeyPair, KeyPair, KeyPairGeneratorResult, KeyType } from '../../models';\nimport type { KeyPairGenerator } from './keyPairGenerator';\n\nexport class Ed25519KeyGenerator implements KeyPairGenerator {\n  private _isInitialized = false;\n\n  get isInitialized() {\n    return this._isInitialized;\n  }\n\n  generate(): KeyPairGeneratorResult {\n    if (!this.isInitialized)\n      throw new Error('Ed25519 key generator is not initialized');\n\n    const keyPair = sodium.crypto_sign_keypair('uint8array');\n    const raw: KeyPair = {\n      keyType: KeyType.Ed25519,\n      privateKey: keyPair.privateKey,\n      publicKey: keyPair.publicKey,\n    };\n\n    const encoded: EncodedKeyPair = {\n      keyType: KeyType.Ed25519,\n      privateKey: b58cencode(raw.privateKey, prefix['edsk']),\n      publicKey: b58cencode(raw.publicKey, prefix['edpk']),\n    };\n\n    return {\n      raw,\n      encoded\n    };\n  }\n\n  async initialize(): Promise<void> {\n    await sodium.ready;\n    this._isInitialized = true;\n  }\n\n  static async create(): Promise<Ed25519KeyGenerator> {\n    const instance = new Ed25519KeyGenerator();\n    await instance.initialize();\n\n    return instance;\n  }\n}\n","import { b58cencode, prefix } from '@taquito/utils';\nimport { ec } from 'elliptic';\n\nimport { EncodedKeyPair, KeyPair, KeyPairGeneratorResult, KeyType } from '../../models';\nimport type { KeyPairGenerator } from './keyPairGenerator';\n\nexport class EllipticCurveKeyGenerator implements KeyPairGenerator {\n  protected static readonly curveInfo = {\n    secp256k1: {\n      name: 'secp256k1',\n      keyType: KeyType.Secp256k1,\n      privateKeyPrefix: prefix['spsk'],\n      publicKeyPrefix: prefix['sppk'],\n    },\n    p256: {\n      name: 'p256',\n      keyType: KeyType.P256,\n      privateKeyPrefix: prefix['p2sk'],\n      publicKeyPrefix: prefix['p2pk'],\n    },\n  } as const;\n\n  protected readonly ec: ec;\n  protected readonly curveInfo: typeof EllipticCurveKeyGenerator.curveInfo[keyof typeof EllipticCurveKeyGenerator.curveInfo];\n\n  constructor(curveName: keyof typeof EllipticCurveKeyGenerator.curveInfo) {\n    this.ec = new ec(curveName);\n    this.curveInfo = EllipticCurveKeyGenerator.curveInfo[curveName];\n  }\n\n  generate(): KeyPairGeneratorResult {\n    const keyPair = this.ec.genKeyPair();\n    console.log(keyPair);\n\n    const publicBasePoint = keyPair.getPublic();\n    const publicPointX = publicBasePoint.getX().toArray();\n    const publicPointY = publicBasePoint.getY().toArray();\n    // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n    const firstByte = publicPointY[publicPointY.length - 1]! % 2 ? 3 : 2;\n\n    const privateKey = new Uint8Array(keyPair.getPrivate().toArray());\n    const pad = new Array(32).fill(0);\n    const publicKey = new Uint8Array([firstByte].concat(pad.concat(publicPointX).slice(-32)));\n\n    const raw: KeyPair = {\n      keyType: KeyType.P256,\n      privateKey,\n      publicKey,\n    };\n\n    const encoded: EncodedKeyPair = {\n      keyType: this.curveInfo.keyType,\n      privateKey: b58cencode(privateKey, this.curveInfo.privateKeyPrefix),\n      publicKey: b58cencode(publicKey, this.curveInfo.publicKeyPrefix),\n    };\n\n    return {\n      raw,\n      encoded\n    };\n  }\n}\n","export const defaultConfig = {\n    links: {\n        tezosPayments: {\n            webSite: 'https://tezospayments.com',\n            paymentsApp: 'https://payment.tezospayments.com',\n            gitHub: 'https://github.com/fastwaterbear/tezospayments',\n            telegram: 'https://t.me/fastwaterbear',\n            twitter: 'https://twitter.com/fastwaterbear',\n            reddit: 'https://www.reddit.com/user/fastwaterbear'\n        }\n    },\n    tezos: {\n        defaultNetwork: 'granadanet',\n        networks: {\n            granadanet: {\n                title: 'Granada Testnet',\n                color: '#667eea',\n                minimumSupportedServiceVersion: 3,\n                default: {\n                    rpc: 'smartPy',\n                    indexer: 'tzKT',\n                    explorer: 'tzKT'\n                },\n                rpcUrls: {\n                    smartPy: 'https://granadanet.smartpy.io'\n                },\n                indexerUrls: {\n                    tzKT: 'https://api.granadanet.tzkt.io',\n                    betterCallDev: 'https://api.better-call.dev'\n                },\n                explorers: {\n                    tzKT: { baseUrl: 'https://granadanet.tzkt.io', title: 'TzKT' },\n                    betterCallDev: { baseUrl: 'https://better-call.dev', title: 'Better Call Dev' },\n                    tzStats: { baseUrl: 'https://granada.tzstats.com', title: 'TzStats' }\n                },\n                servicesFactoryContractAddress: 'KT1NxBzCJtvHFLKfiSAX3PGxdiJMAC8CtSZV'\n            }\n        }\n    }\n};\n//# sourceMappingURL=defaultConfig.js.map","export class BlockchainUrlExplorer {\n    constructor(network, baseUrl) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n    }\n}\n//# sourceMappingURL=blockchainUrlExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzKTBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzKTBlockchainUrlExplorer.js.map","import { tezosInfo } from '@tezospayments/common';\nimport { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class BetterCallDevBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return tezosInfo.addressPrefixes.some(prefix => entity.startsWith(prefix))\n            ? this.getAccountUrl(entity)\n            : this.getOperationUrl(entity);\n    }\n    getOperationUrl(operationHash) {\n        return `${this.baseUrl}/${this.network.name}/opg/${operationHash}/contents`;\n    }\n    getAccountUrl(contractAddress) {\n        return `${this.baseUrl}/${this.network.name}/${contractAddress}`;\n    }\n}\n//# sourceMappingURL=betterCallDevUrlBlockchainExplorer.js.map","import { BlockchainUrlExplorer } from './blockchainUrlExplorer';\nexport class TzStatsBlockchainUrlExplorer extends BlockchainUrlExplorer {\n    getEntityUrl(entity) {\n        return `${this.baseUrl}/${entity}`;\n    }\n    getOperationUrl(operationHash) {\n        return this.getEntityUrl(operationHash);\n    }\n    getAccountUrl(contractAddress) {\n        return this.getEntityUrl(contractAddress);\n    }\n}\n//# sourceMappingURL=tzStatsBlockchainUrlExplorer.js.map","import BigNumber from 'bignumber.js';\nimport { converters, DonationOperation, guards, OperationDirection, OperationStatus, OperationType, optimization, tezosMeta, tokenWhitelistMap } from '@tezospayments/common';\nexport class TzKTDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress, minimumSupportedServiceVersion) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n        this.minimumSupportedServiceVersion = minimumSupportedServiceVersion;\n        this.tokenWhiteList = tokenWhitelistMap.get(this.network) || optimization.emptyMap;\n    }\n    async getService(serviceContractAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contracts/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        if ('version' in serviceDto && +serviceDto.version < this.minimumSupportedServiceVersion) {\n            // Only for Dev\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return null;\n        }\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const keysUrl = `${this.baseUrl}/v1/contracts/${this.servicesFactoryContractAddress}/bigmaps/services/keys`;\n        const allKeysResponse = await fetch(keysUrl);\n        const allKeys = await allKeysResponse.json();\n        if (allKeys.every(k => k.key !== ownerAddress)) {\n            return [];\n        }\n        const response = await fetch(`${keysUrl}/${ownerAddress}`);\n        const keyValue = await response.json();\n        const contractAddresses = keyValue.value;\n        return (await Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)))).filter(Boolean);\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/accounts/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('type', 'transaction');\n        url.searchParams.set('entrypoint.in', 'send_payment,send_donation');\n        const response = await fetch(url.href);\n        const operations = await response.json();\n        return operations\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            .map(operation => this.mapOperationDtoToServiceOperation(operation))\n            .filter(Boolean);\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        const metadataJson = converters.bytesToObject(serviceDto.metadata);\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto.version,\n                metadata: serviceDto.metadata,\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto.allowed_tokens.tez,\n                    assets: serviceDto.allowed_tokens.assets\n                },\n                allowedOperationType: +serviceDto.allowed_operation_type,\n                owner: serviceDto.owner,\n                paused: serviceDto.paused,\n                deleted: serviceDto.deleted,\n                signingKeys: this.mapSigningKeyDtosToSigningKeys(serviceDto.signing_keys)\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return Object.keys(signingKeyDtos)\n            .reduce((map, signingKey) => map.set(signingKey, { publicKey: signingKey, name: signingKeyDtos[signingKey]?.name || undefined }), new Map());\n    }\n    mapOperationDtoToServiceOperation(operationDto) {\n        const decimals = operationDto.parameter.value.asset_value\n            ? this.tokenWhiteList.get(operationDto.parameter.value.asset_value.token_address)?.metadata?.decimals || 0\n            : tezosMeta.decimals;\n        const amount = operationDto.parameter.value.asset_value ? operationDto.parameter.value.asset_value.value : operationDto.amount.toString();\n        const operationType = operationDto.parameter.entrypoint === 'send_payment' ? OperationType.Payment : OperationType.Donation;\n        const operationBase = {\n            hash: operationDto.hash,\n            type: operationType,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: operationDto.parameter.value.asset_value?.token_address,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.sender.address,\n            target: operationDto.target.address,\n        };\n        switch (operationBase.type) {\n            case OperationType.Payment: {\n                const paymentOperation = operationBase;\n                paymentOperation.paymentId = operationDto.parameter.value.id;\n                return paymentOperation;\n            }\n            case OperationType.Donation: {\n                const donationOperation = operationBase;\n                donationOperation.payload = DonationOperation.parsePayload(operationDto.parameter.value.payload);\n                return donationOperation;\n            }\n            default:\n                return null;\n        }\n    }\n}\n//# sourceMappingURL=tzKTDataProvider.js.map","import BigNumber from 'bignumber.js';\nimport { converters, DonationOperation, guards, OperationDirection, OperationStatus, OperationType, optimization, tezosMeta, tokenWhitelistMap } from '@tezospayments/common';\nexport class BetterCallDevDataProvider {\n    constructor(network, baseUrl, servicesFactoryContractAddress, minimumSupportedServiceVersion) {\n        this.network = network;\n        this.baseUrl = baseUrl;\n        this.servicesFactoryContractAddress = servicesFactoryContractAddress;\n        this.minimumSupportedServiceVersion = minimumSupportedServiceVersion;\n        this.tokenWhiteList = tokenWhitelistMap.get(this.network) || optimization.emptyMap;\n    }\n    async getService(serviceContractAddress) {\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${serviceContractAddress}/storage`);\n        const serviceDto = await response.json();\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        if ((+serviceDto?.[0].children?.[serviceDto[0].children.length - 1].value < this.minimumSupportedServiceVersion)) {\n            // Only for Dev\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            return null;\n        }\n        const result = this.mapServiceDtoToService(serviceDto, serviceContractAddress, this.network);\n        if (!result)\n            throw new Error('Service not found');\n        return result;\n    }\n    async getServices(ownerAddress) {\n        const servicesFactoryDto = await this.getServicesFactoryDto();\n        const servicesBigMapId = servicesFactoryDto[0].children[4].value;\n        const response = await fetch(`${this.baseUrl}/v1/bigmap/${this.network.name}/${servicesBigMapId}/keys`);\n        const servicesBigMapDto = await response.json();\n        const servicesSet = servicesBigMapDto.find(pair => pair.data.key_string === ownerAddress);\n        if (!servicesSet)\n            return optimization.emptyArray;\n        const contractAddresses = servicesSet.data.value.children.map(serviceAddressDto => serviceAddressDto.value);\n        return (await Promise.all(contractAddresses.map(contractAddress => this.getService(contractAddress)))).filter(Boolean);\n    }\n    async getOperations(serviceContractAddress) {\n        const url = new URL(`v1/contract/${this.network.name}/${serviceContractAddress}/operations`, this.baseUrl);\n        url.searchParams.set('entrypoints', 'send_payment,send_donation');\n        const response = await fetch(url.href);\n        const operations = (await response.json()).operations;\n        return operations\n            .filter(operation => !operation.internal)\n            .filter(operation => operation.entrypoint === 'send_payment' || operation.entrypoint === 'send_donation')\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            .map(operation => operation.entrypoint === 'send_payment'\n            ? this.mapSendPaymentOperationToServiceOperation(operation)\n            : this.mapSendDonationOperationToServiceOperation(operation))\n            .filter(Boolean);\n    }\n    async getServicesFactoryDto() {\n        const response = await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${this.servicesFactoryContractAddress}/storage`);\n        return response.json();\n    }\n    mapServiceDtoToService(serviceDto, serviceAddress, network) {\n        let metadataJson;\n        try {\n            metadataJson = JSON.parse(serviceDto[0].children[4].value);\n        }\n        catch {\n            return null;\n        }\n        return (metadataJson && typeof metadataJson.name === 'string'\n            && (guards.isArray(metadataJson.links) || metadataJson.links === undefined)\n            && (typeof metadataJson.description === 'string' || metadataJson.description === undefined)\n            && (typeof metadataJson.iconUrl === 'string' || metadataJson.iconUrl === undefined))\n            ? {\n                name: metadataJson.name,\n                links: metadataJson.links || optimization.emptyArray,\n                description: metadataJson.description,\n                iconUrl: metadataJson.iconUrl,\n                version: +serviceDto[0].children[8].value,\n                metadata: converters.stringToBytes(serviceDto[0].children[4].value),\n                contractAddress: serviceAddress,\n                network,\n                allowedTokens: {\n                    tez: serviceDto[0].children[1].children[0].value,\n                    assets: optimization.emptyArray\n                },\n                allowedOperationType: +serviceDto[0].children[0].value,\n                owner: serviceDto[0].children[5].value,\n                paused: serviceDto[0].children[6].value,\n                deleted: serviceDto[0].children[3].value,\n                signingKeys: serviceDto[0].children[7].children\n                    ? this.mapSigningKeyDtosToSigningKeys(serviceDto[0].children[7].children)\n                    : new Map()\n            }\n            : null;\n    }\n    mapSigningKeyDtosToSigningKeys(signingKeyDtos) {\n        return signingKeyDtos.reduce((map, signingKeyDto) => {\n            const publicKey = signingKeyDto.children[0].value;\n            const rawName = signingKeyDto.children[1].value;\n            return map.set(publicKey, { publicKey, name: rawName !== 'None' ? rawName : undefined });\n        }, new Map());\n    }\n    mapSendPaymentOperationToServiceOperation(operationDto) {\n        const assetInfo = operationDto.parameters[0].children[1].children;\n        const assetAddress = assetInfo?.[0].value;\n        const assetValue = assetInfo?.[2].value;\n        const decimals = assetAddress\n            ? this.tokenWhiteList.get(assetAddress)?.metadata?.decimals || 0\n            : tezosMeta.decimals;\n        const amount = assetValue || (operationDto.amount || 0).toString();\n        const paymentOperation = {\n            hash: operationDto.hash,\n            type: OperationType.Payment,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            paymentId: operationDto.parameters[0].children[0].value,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: assetAddress,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.source,\n            target: operationDto.destination,\n        };\n        return paymentOperation;\n    }\n    mapSendDonationOperationToServiceOperation(operationDto) {\n        const assetInfo = operationDto.parameters[0].children[0].children;\n        const assetAddress = assetInfo?.[0].value;\n        const assetValue = assetInfo?.[2].value;\n        const decimals = assetAddress\n            ? this.tokenWhiteList.get(assetAddress)?.metadata?.decimals || 0\n            : tezosMeta.decimals;\n        const amount = assetValue || (operationDto.amount || 0).toString();\n        const donationOperation = {\n            hash: operationDto.hash,\n            type: OperationType.Donation,\n            direction: OperationDirection.Incoming,\n            status: operationDto.status === 'applied' ? OperationStatus.Success : OperationStatus.Cancelled,\n            amount: converters.numberToTokensAmount(new BigNumber(amount), decimals),\n            asset: assetAddress,\n            timestamp: operationDto.timestamp,\n            date: new Date(operationDto.timestamp),\n            sender: operationDto.source,\n            target: operationDto.destination,\n            payload: DonationOperation.parsePayload(converters.stringToBytes(operationDto.parameters[0].children[1].value))\n        };\n        return donationOperation;\n    }\n}\n//# sourceMappingURL=betterCallDevDataProvider.js.map","import { NetworkType } from '@airgap/beacon-sdk';\nimport { networks } from '@tezospayments/common';\nexport const beaconNetworkToNetwork = networkType => {\n    switch (networkType) {\n        case NetworkType.GRANADANET:\n            return networks.granadanet;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\nexport const networkToBeaconNetwork = network => {\n    switch (network) {\n        case networks.granadanet:\n            return NetworkType.GRANADANET;\n        default:\n            throw new Error('Not Supported network type');\n    }\n};\n//# sourceMappingURL=converters.js.map","import { getParameterizedRoute } from '@tezospayments/common';\nimport { defaultConfig } from '@tezospayments/react-web-core';\n\nimport type { AppConfig } from './appConfig';\n\nconst commitShortSha = process.env.REACT_APP_COMMIT_SHORT_SHA || '';\n\nexport const config: AppConfig = {\n  ...defaultConfig,\n  app: {\n    publicUrl: process.env.PUBLIC_URL || '/',\n    name: 'Tezos Payments',\n    title: 'Tezos Payments',\n    version: {\n      name: 'Dev Version',\n      link: 'https://github.com/fastwaterbear/tezospayments/tree/master'\n    },\n    buildInfo: {\n      commitShortSha,\n      link: `https://github.com/fastwaterbear/tezospayments/tree/${commitShortSha}`\n    }\n  },\n  routers: {\n    overview: '/',\n    operations: '/operations',\n    services: '/services',\n    service: getParameterizedRoute(address => `/services/${address}`, '/services/:address'),\n    createService: '/services/create',\n    acceptPayments: '/accept',\n    acceptServicePayments: getParameterizedRoute(address => `/accept/${address}`, '/accept/:address'),\n    connect: '/connect',\n    about: '/about'\n  },\n  links: {\n    ...defaultConfig.links,\n    tzKT: 'https://tzkt.io'\n  }\n};\n","import { DAppClient } from '@airgap/beacon-sdk';\nimport { TezosToolkit } from '@taquito/taquito';\nimport BigNumber from 'bignumber.js';\n\nimport { Token, TokenFA2, TokenFA12, Network, tezosMeta } from '@tezospayments/common';\nimport { converters } from '@tezospayments/react-web-core';\n\nimport { Account } from '../models/blockchain';\n\nexport class AccountsService {\n  constructor(\n    private readonly tezosToolkit: TezosToolkit,\n    private readonly dAppClient: DAppClient\n  ) {\n  }\n\n  async connect(network: Network): Promise<Account | null> {\n    return this.dAppClient.requestPermissions({ network: { type: converters.networkToBeaconNetwork(network) } })\n      .then(permissions => {\n        return {\n          address: permissions.address,\n          publicKey: permissions.publicKey,\n          network\n        };\n      })\n      .catch(e => {\n        console.error(e);\n        this.dAppClient.clearActiveAccount();\n        return null;\n      });\n  }\n\n  disconnect(): Promise<void> {\n    return this.dAppClient.clearActiveAccount();\n  }\n\n  async getActiveAccount(): Promise<Account | undefined> {\n    const activeAccount = await this.dAppClient.getActiveAccount();\n\n    return activeAccount\n      ? {\n        address: activeAccount.address,\n        publicKey: activeAccount.publicKey,\n        network: converters.beaconNetworkToNetwork(activeAccount.network.type)\n      }\n      : undefined;\n  }\n\n  async getTezosBalance(account: Account): Promise<BigNumber> {\n    const balance = await this.tezosToolkit.tz.getBalance(account.address);\n\n    return balance.div(10 ** tezosMeta.decimals);\n  }\n\n  async getTokenBalance(account: Account, token: Token): Promise<BigNumber> {\n    let result: BigNumber | null = null;\n\n    switch (token.type) {\n      case 'fa1.2':\n        result = await this.getTokenFA12Balance(account, token);\n        break;\n      case 'fa2':\n        result = await this.getTokenFA2Balance(account, token);\n        break;\n      default:\n        throw new Error('Not Supported');\n    }\n    const divider = token.metadata ? 10 ** token.metadata.decimals : 1;\n\n    return result.div(divider);\n  }\n\n  private async getTokenFA12Balance(account: Account, token: TokenFA12): Promise<BigNumber> {\n    const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n    const result = await contract.views.getBalance?.(account.address).read();\n\n    return result || 0;\n  }\n\n  private async getTokenFA2Balance(account: Account, token: TokenFA2): Promise<BigNumber> {\n    const contract = await this.tezosToolkit.contract.at(token.contractAddress);\n    const response = await contract.views?.['balance_of']?.([{ owner: account.address, token_id: token.id }])\n      .read();\n\n    const result = response[0].balance;\n\n    return result || 0;\n  }\n}\n","export class ReadOnlySigner {\n  async publicKeyHash() {\n    return 'tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A';\n  }\n\n  async publicKey() {\n    return 'edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K';\n  }\n\n  async secretKey(): Promise<string> {\n    throw new Error('Secret key cannot be exposed');\n  }\n\n  async sign(): Promise<{\n    bytes: string;\n    sig: string;\n    prefixSig: string;\n    sbytes: string;\n  }> {\n    throw new Error('Cannot sign');\n  }\n}\n","import type { BeaconWallet } from '@taquito/beacon-wallet';\nimport React from 'react';\n\nimport type { BlockchainUrlExplorer } from '@tezospayments/react-web-core';\n\nexport interface ReactAppContext {\n  readonly tezosWallet: BeaconWallet;\n  readonly tezosExplorer: BlockchainUrlExplorer;\n}\n\n// eslint-disable-next-line @typescript-eslint/no-redeclare\nexport const ReactAppContext = React.createContext<ReactAppContext>({} as ReactAppContext);\n","import { createSelector } from 'reselect';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../config';\nimport { Account } from '../../models/blockchain';\nimport type { AppState } from '../index';\n\nexport const selectAccountsState = (state: AppState) => state.accountsState;\nexport const getCurrentAccount = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.currentAccount\n    ? (accountsState.connectedAccounts.find(account =>\n      account.address === accountsState.currentAccount?.address && account.network.id === accountsState.currentAccount.network.id) || null)\n    : null\n);\nexport const getAccountsByNetwork = createSelector(\n  selectAccountsState,\n  accountsState => accountsState.connectedAccounts.reduce((p, c) => p.set(c.network, [...(p.get(c.network) || []), c]), new Map<Network, Account[]>())\n);\nexport const getCurrentNetworkConfig = createSelector(\n  getCurrentAccount,\n  account => account && config.tezos.networks[account.network.name]\n);\n","import { createSelector } from 'reselect';\n\nimport { optimization, Token, tokenWhitelistMap } from '@tezospayments/common';\n\nimport { selectAccountsState } from '../accounts/selectors';\nimport { AppState } from '../index';\nimport { PendingOperation } from './slice';\n\nexport const selectTokensState = createSelector(\n  selectAccountsState,\n  accountsState => {\n    const network = accountsState.currentAccount?.network;\n    return (network && tokenWhitelistMap.get(network)) || optimization.emptyMap as Map<string, Token>;\n  }\n);\n\nexport const selectServicesState = (state: AppState) => state.servicesState;\nexport const getAllAcceptedTokens = createSelector(\n  selectServicesState,\n  selectTokensState,\n  (servicesState, tokensState) => {\n    const result = new Set<Token>();\n\n    servicesState.services.forEach(s => s.allowedTokens.assets\n      .forEach(assetAddress => {\n        const token = tokensState.get(assetAddress);\n        if (!token)\n          return;\n\n        result.add(token);\n      })\n    );\n\n    return [...result];\n  }\n);\n\nexport const getAcceptTezos = createSelector(\n  selectServicesState,\n  servicesState => {\n    return servicesState.services.some(s => s.allowedTokens.tez);\n  }\n);\n\nexport const getSortedServices = createSelector(\n  selectServicesState,\n  servicesState => {\n    return [...servicesState.services].sort((a, b) => a.name.localeCompare(b.name));\n  }\n);\n\nexport const getOperationsByService = createSelector(\n  selectServicesState,\n  servicesState => {\n    const operationsMap = new Map<string, PendingOperation[]>();\n\n    servicesState.pendingOperations.forEach(op => {\n      const operations = operationsMap.get(op.serviceAddress);\n\n      if (operations)\n        operations.push(op);\n      else\n        operationsMap.set(op.serviceAddress, [op]);\n    });\n\n    return operationsMap;\n  }\n);\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\nimport BigNumber from 'bignumber.js';\n\nimport { optimization } from '@tezospayments/common';\n\nimport { Account } from '../../models/blockchain';\nimport { getAllAcceptedTokens } from '../services/selectors';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface BalancesState {\n  readonly tezos: BigNumber;\n  readonly tokens: { [key: string]: BigNumber };\n  readonly initialized: boolean;\n}\n\nconst initialState: BalancesState = {\n  tezos: optimization.zeroBigNumber,\n  tokens: optimization.emptyObject,\n  initialized: false\n};\n\nconst namespace = 'balances';\n\nexport const loadBalances = createAsyncThunk<Pick<BalancesState, 'tezos' | 'tokens'>, Account, AppThunkAPI>(\n  `${namespace}/loadBalances`,\n  async (account, { extra: app, getState }) => {\n    const tezos = await app.services.accountsService.getTezosBalance(account);\n\n    const acceptedTokens = getAllAcceptedTokens(getState());\n    const tokens: { [key: string]: BigNumber } = {};\n    const balancesPromises = acceptedTokens.map(t => app.services.accountsService.getTokenBalance(account, t));\n    const balances = await Promise.all(balancesPromises);\n\n    balances.forEach((b, i) => {\n      const address = acceptedTokens[i]?.contractAddress;\n      if (address) {\n        tokens[address] = b;\n      }\n    });\n\n    return { tezos, tokens };\n  }\n);\n\nexport const balancesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearBalances: state => {\n      state.tezos = optimization.zeroBigNumber;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadBalances.fulfilled, (state, action) => {\n      const { tezos, tokens } = action.payload;\n      state.tezos = tezos;\n      state.tokens = tokens;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearBalances } = balancesSlice.actions;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { ServiceOperation, Network, optimization } from '@tezospayments/common';\n\nimport { AppThunkAPI } from '../thunk';\n\nexport interface OperationsState {\n  readonly operations: readonly ServiceOperation[];\n  readonly initialized: boolean;\n}\n\nconst initialState: OperationsState = {\n  operations: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'operations';\n\nexport const loadOperations = createAsyncThunk<ServiceOperation[], { servicesAddresses: string[], network: Network }, AppThunkAPI>(\n  `${namespace}/loadOperations`,\n  async ({ servicesAddresses }, { extra: app }) => {\n    const operationsPromises = servicesAddresses.map(s => app.services.servicesService.getOperations(s));\n    const operations = (await Promise.all(operationsPromises)).flat();\n\n    return operations;\n  }\n);\n\nexport const operationsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    clearOperations: state => {\n      state.operations = optimization.emptyArray;\n      state.initialized = false;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(loadOperations.fulfilled, (state, action) => {\n      state.operations = action.payload;\n      state.initialized = true;\n    });\n  }\n});\n\nexport const { clearOperations } = operationsSlice.actions;\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\nimport { WalletOperation } from '@taquito/taquito';\n\nimport { Service, optimization, ServiceSigningKey, wait } from '@tezospayments/common';\n\nimport { AppDispatch, AppState } from '..';\nimport { Account } from '../../models/blockchain';\nimport { getCurrentAccount } from '../accounts/selectors';\nimport { clearBalances, loadBalances } from '../balances/slice';\nimport { loadOperations } from '../operations/slice';\nimport { AppThunkAPI } from '../thunk';\n\nexport enum PendingOperationStatus { loading, success, error }\n\nexport interface PendingOperation {\n  readonly hash: string;\n  readonly serviceAddress: string;\n  readonly action: string;\n  readonly confirmationCount: number;\n  readonly targetConfirmationCount: number;\n  readonly status: PendingOperationStatus;\n}\n\nexport interface ServicesState {\n  readonly services: readonly Service[];\n  readonly initialized: boolean;\n  readonly pendingOperations: PendingOperation[];\n}\n\nconst initialState: ServicesState = {\n  services: optimization.emptyArray,\n  initialized: false,\n  pendingOperations: optimization.emptyArray\n};\n\nconst namespace = 'services';\n\nexport const loadServices = createAsyncThunk<readonly Service[], Account, AppThunkAPI>(\n  `${namespace}/loadServices`,\n  async (account, { extra: app, dispatch }) => {\n    const services = await app.services.servicesService.getServices(account);\n\n    if (services.length) {\n      dispatch(loadBalances(account));\n      dispatch(loadOperations({ servicesAddresses: services.map(s => s.contractAddress), network: account.network }));\n    }\n\n    return services;\n  }\n);\n\nexport const updateService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/updateService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.updateService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'updating');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const createService = createAsyncThunk<void, Service, AppThunkAPI>(\n  `${namespace}/createService`,\n  async (service, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.createService(service);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'creating new service');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setPaused = createAsyncThunk<void, { service: Service, paused: boolean }, AppThunkAPI>(\n  `${namespace}/setPaused`,\n  async ({ service, paused }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setPaused(service, paused);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, paused ? 'pausing' : 'unpausing');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const setDeleted = createAsyncThunk<void, { service: Service, deleted: boolean }, AppThunkAPI>(\n  `${namespace}/setDeleted`,\n  async ({ service, deleted }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.setDeleted(service, deleted);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, deleted ? 'deleting' : 'undeleting');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const addApiKey = createAsyncThunk<void, { service: Service, signingKey: ServiceSigningKey }, AppThunkAPI>(\n  `${namespace}/addApiKey`,\n  async ({ service, signingKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.addApiKey(service, signingKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'adding API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const deleteApiKey = createAsyncThunk<void, { service: Service, publicKey: string }, AppThunkAPI>(\n  `${namespace}/deleteApiKey`,\n  async ({ service, publicKey }, { extra: app, dispatch, getState }) => {\n    const operation = await app.services.servicesService.deleteApiKey(service, publicKey);\n    await waitOperationConfirmation(dispatch, operation, service.contractAddress, 'deleting API key');\n    reloadServices(dispatch, getState);\n  }\n);\n\nexport const clearServices = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/clearServices`,\n  async (_, { dispatch }) => {\n    dispatch(clearBalances());\n  }\n);\n\nconst createPendingOperation = (hash: string, serviceAddress: string, action: string, targetConfirmationCount: number): PendingOperation => ({\n  hash,\n  action,\n  serviceAddress,\n  targetConfirmationCount,\n  confirmationCount: 0,\n  status: PendingOperationStatus.loading,\n});\n\nconst reloadServices = (dispatch: AppDispatch, getState: () => AppState) => {\n  const account = getCurrentAccount(getState());\n  if (account) {\n    dispatch(loadServices(account));\n  }\n};\n\nconst waitOperationConfirmation = (\n  dispatch: AppDispatch,\n  operation: WalletOperation,\n  serviceAddress: string,\n  operationName: string,\n  confirmationsNumber = 2\n): Promise<void> => {\n  const pendingOperation = createPendingOperation(operation.opHash, serviceAddress, operationName, confirmationsNumber);\n  dispatch(addPendingOperation(pendingOperation));\n\n  return new Promise<void>((resolve, reject) => {\n    operation.confirmationObservable(confirmationsNumber)\n      .subscribe(\n        confirmation => dispatch(setPendingOperationConfirmationCount(\n          { hash: pendingOperation.hash, confirmationCount: confirmation.currentConfirmation })\n        ),\n        async error => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.error }));\n          reject(error);\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        },\n        async () => {\n          dispatch(setPendingOperationStatus({ hash: pendingOperation.hash, status: PendingOperationStatus.success }));\n          resolve();\n          await wait(1000);\n          dispatch(deletePendingOperation(pendingOperation.hash));\n        }\n      );\n  });\n};\n\nexport const servicesSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n    addPendingOperation: (state, action: PayloadAction<PendingOperation>) => {\n      const operation = action.payload;\n      state.pendingOperations.push(operation);\n    },\n    setPendingOperationStatus: (state, action: PayloadAction<{ hash: string, status: PendingOperationStatus }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.status = action.payload.status;\n    },\n    setPendingOperationConfirmationCount: (state, action: PayloadAction<{ hash: string, confirmationCount: number }>) => {\n      const operation = state.pendingOperations.find(o => o.hash === action.payload.hash);\n      if (operation)\n        operation.confirmationCount = action.payload.confirmationCount;\n    },\n    deletePendingOperation: (state, action: PayloadAction<string>) => {\n      state.pendingOperations = state.pendingOperations.filter(o => o.hash !== action.payload);\n    },\n  },\n  extraReducers: builder => {\n    builder.addCase(loadServices.fulfilled, (state, action) => ({\n      ...state,\n      services: action.payload,\n      initialized: true\n    }));\n\n    builder.addCase(clearServices.fulfilled, state => ({\n      ...state,\n      services: optimization.emptyArray,\n      initialized: false\n    }));\n  }\n});\n\nexport const { addPendingOperation, setPendingOperationStatus, setPendingOperationConfirmationCount, deletePendingOperation } = servicesSlice.actions;\n","import { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\n\nimport { optimization, Network } from '@tezospayments/common';\n\nimport type { Account, CurrentAccountInfo } from '../../models/blockchain';\nimport { clearServices, loadServices } from '../services/slice';\nimport { AppThunkAPI } from '../thunk';\n\nexport interface AccountsState {\n  readonly currentAccount: CurrentAccountInfo | null;\n  readonly connectedAccounts: readonly Account[];\n  readonly initialized: boolean;\n}\n\nconst initialState: AccountsState = {\n  currentAccount: null,\n  connectedAccounts: optimization.emptyArray,\n  initialized: false\n};\n\nconst namespace = 'accounts';\n\nexport const loadActiveAccount = createAsyncThunk<Account | null, void, AppThunkAPI>(\n  `${namespace}/loadActiveAccount`,\n  async (_, { extra: app, dispatch }) => {\n    const account = await app.services.accountsService.getActiveAccount();\n\n    if (account) {\n      dispatch(loadServices(account));\n    }\n\n    return account || null;\n  }\n);\n\nexport const connectAccount = createAsyncThunk<Account | null, Network, AppThunkAPI>(\n  `${namespace}/connect`,\n  async (network: Network, { extra: app, dispatch }) => {\n    const account = await app.services.accountsService.connect(network);\n\n    if (account) {\n      dispatch(loadServices(account));\n    }\n\n    return account;\n  }\n);\n\nexport const disconnectAccount = createAsyncThunk<void, void, AppThunkAPI>(\n  `${namespace}/disconnect`,\n  async (_, { extra: app, dispatch }) => {\n    const result = await app.services.accountsService.disconnect();\n    dispatch(clearServices());\n\n    return result;\n  }\n);\n\nexport const accountsSlice = createSlice({\n  name: namespace,\n  initialState,\n  reducers: {\n  },\n  extraReducers: builder => {\n    builder.addCase(loadActiveAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n      state.initialized = true;\n    });\n\n    builder.addCase(connectAccount.fulfilled, (state, action) => {\n      const account = action.payload;\n      if (account) {\n        state.currentAccount = {\n          address: account.address,\n          network: account.network\n        };\n\n        if (!state.connectedAccounts.some(a => a.address === account.address)) {\n          state.connectedAccounts.push(account);\n        }\n      }\n    });\n\n    builder.addCase(disconnectAccount.fulfilled, state => {\n      state.connectedAccounts = state.connectedAccounts.filter(a =>\n        a.address !== state.currentAccount?.address || a.network.id !== state.currentAccount?.network.id\n      );\n\n      const nextAccount = state.connectedAccounts[0];\n      state.currentAccount = nextAccount ? { address: nextAccount.address, network: nextAccount.network } : null;\n    });\n  }\n});\n","import { common } from './common';\nimport { overview, createService, connect, header, about, operations, services, settings, acceptPayments } from './views';\n\nexport const enUS = {\n  id: 'en-US',\n  resources: {\n    common,\n    views: {\n      header,\n      overview,\n      createService,\n      connect,\n      about,\n      operations,\n      services,\n      settings,\n      acceptPayments\n    },\n  }\n} as const;\n","export const common = {\n  comingSoon: 'Coming soon',\n  copy: 'Copy',\n  copyLink: 'Copy Link',\n  open: 'Open',\n  new: 'New',\n  cancel: 'Cancel',\n  save: 'Save',\n  yes: 'Yes',\n  no: 'No'\n};\n","export const header = {\n  accountActions: {\n    copyAddress: {\n      title: 'Copy address'\n    },\n    viewOn: 'View on',\n    connectAnotherAccount: {\n      title: 'Connect another account'\n    },\n    disconnect: {\n      title: 'Disconnect'\n    }\n  }\n};\n","export const overview = {\n  title: 'Overview',\n  balances: {\n    title: 'Balances'\n  },\n  incoming: {\n    title: 'Incoming'\n  },\n  outgoing: {\n    title: 'Outgoing'\n  },\n  operationCount: {\n    title: 'Operation count'\n  },\n  volume: {\n    title: 'Volume'\n  }\n};\n","export const createService = {\n  title: 'Create Service'\n};\n","import { config } from '../../../config';\n\nexport const connect = {\n  actions: {\n    connect: {\n      title: 'Connect',\n      connectTo: 'Connect to',\n      description: `In order to use the ${config.app.title} service you have to connect a Tezos account`\n    }\n  }\n};\n","export const about = {\n  title: 'About',\n  detailedTitle: 'Decentralized Payment Solution built on Tezos blockchain',\n  build: 'build',\n  poweredBy: 'Powered by',\n  tzKt: 'TzKT',\n  api: 'API'\n};\n","export const operations = {\n  title: 'Operations',\n  operationList: {\n    paymentId: 'Payment Id:',\n    donationData: 'Donation Data:',\n    income: 'Income',\n    expense: 'Expense',\n    cancelled: 'Cancelled',\n    pending: 'Pending',\n    noOperationsPerformedYet: 'No operations performed yet'\n  }\n};\n","export const services = {\n  title: 'Services',\n  status: {\n    active: 'Active',\n    paused: 'Paused',\n    deleted: 'Deleted',\n    updating: 'Updating'\n  },\n  createNewService: 'Create New Service',\n  acceptPayments: 'Accept Payments',\n  acceptPaymentsDescription: 'Generate a payment link using our constructor to accept payments on your service',\n  youDoNotHaveAnyServicesYet: 'You don\\'t have any services yet',\n  createYourFirstService: 'Create your first service to accept payments or connect another Tezos account',\n  operations: {\n    paymentsEnabled: 'Payments Enabled',\n    donationsEnabled: 'Donations Enabled',\n  },\n  allowedCurrencies: 'Allowed Currencies',\n  service: 'Service',\n  links: 'Links',\n  dangerZone: {\n    title: 'Danger Zone',\n    pauseService: 'Pause Service',\n    pauseServiceConfirmation: 'Are you sure you want to pause the service',\n    pauseServiceDescription: 'Pause accepting payments and donations',\n    unPauseService: 'Unpause Service',\n    unPauseServiceConfirmation: 'Are you sure you want to unpause the service',\n    unPauseServiceDescription: 'Accepting payments and donations are paused',\n    deleteService: 'Delete Service',\n    deleteServiceConfirmation: 'Are you sure you want to delete the service',\n    deleteServiceDescription: 'Delete this service. After deleting this service can’t accept payments and donations. You can restore the deleted service',\n    unDeleteService: 'Undelete Service',\n    unDeleteServiceConfirmation: 'Are you sure you want to undelete the service',\n    unDeleteServiceDescription: 'Service is marked as deleted',\n  },\n  devZone: {\n    title: 'API Keys',\n    addKey: 'Add Key',\n    saveKeys: 'Save Keys',\n    generateKeys: 'Generate Keys',\n    name: 'Name',\n    algorithm: 'Algorithm',\n    publicKey: 'Public Key',\n    secretKey: 'Secret Key',\n    saveSecretKeyWarning: 'Write down the secret key, we will never show it again',\n    saveSecretKeyConfirm: 'Have you written down the secret key?',\n    noApiKeysAddedYet: 'No API keys added yet',\n    deleteKeyConfirmation: 'Are you sure you want to delete the API key',\n  },\n  editing: {\n    editService: 'Edit Service',\n    updateService: 'Update Service',\n    createService: 'Create Service',\n    addCurrency: 'Add Currency',\n    addLink: 'Add Link',\n    serviceName: 'Service Name',\n    description: 'Description',\n    accept: 'Accept',\n    acceptPayments: 'Accept Payments',\n    acceptDonations: 'Accept Donations',\n  }\n};\n","export const settings = {\n  title: 'Settings',\n};\n","export const acceptPayments = {\n  title: 'Accept Payments',\n  type: 'Type',\n  amount: 'Amount',\n  paymentData: 'Payment Data',\n  paymentId: 'Payment ID',\n  paymentIdHelpText: 'Payment ID/invoice number/any unique identifier in your system',\n  donationData: 'Donation Data',\n  donationDescription: 'Short description on the page',\n  generateAndSignPaymentLink: 'Generate and Sign Payment Link',\n  donationDescriptionHelpText: 'This message will be shown to your donators when they will donate',\n  directLinkPaymentHelpText: 'Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc',\n  directLinkDonationHelpText: 'Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link',\n  errors: {\n    fillRequiredData: 'Fill required data to generate corresponding content'\n  }\n};\n","import { enUS } from '../../localization/en-US';\nimport { Language } from '../../models/system';\n\nexport const useCurrentLanguage = (): Language => {\n    // TODO: implement language change\n    return enUS;\n};\n\nexport const useCurrentLanguageResources = () => {\n    const currentLanguage = useCurrentLanguage();\n\n    return currentLanguage.resources;\n};\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\n\nimport type { AppDispatch, AppState } from '../../store';\n\nexport const useAppDispatch: () => AppDispatch = useDispatch;\nexport const useAppSelector: TypedUseSelectorHook<AppState> = useSelector;\n\n","import { useContext } from 'react';\n\nimport { ReactAppContext } from '../../app';\n\nexport const useAppContext = () => useContext(ReactAppContext);\n","export default {\n  defaultNetworkName: 'mainnet',\n  paymentAppBaseUrl: 'https://payment.tezospayments.com'\n} as const;\n","import { guards } from '@tezospayments/common';\n\nconst getErrorMessageByValidationErrors = (validationErrors: readonly string[], brief = '') => validationErrors\n  .reduce((result, error, index) => `${result}\\n\\t${index + 1}. ${error};`, brief);\n\nexport abstract class TezosPaymentsError extends Error {\n  readonly name: string;\n\n  constructor(message?: string) {\n    super(message);\n\n    this.name = this.constructor.name;\n  }\n}\n\nexport class InvalidTezosPaymentsOptionsError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidTezosPaymentsOptionsError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'options are invalid, see details below:');\n  }\n}\n\nexport class InvalidPaymentCreateParametersError extends TezosPaymentsError {\n}\n\nexport class InvalidPaymentError extends TezosPaymentsError {\n  constructor(message?: string);\n  constructor(validationErrors: readonly string[]);\n  constructor(messageOrValidationErrors: (string | undefined) | readonly string[]) {\n    super(\n      guards.isReadonlyArray(messageOrValidationErrors)\n        ? InvalidPaymentError.getMessage(messageOrValidationErrors)\n        : messageOrValidationErrors\n    );\n  }\n\n  private static getMessage(validationErrors: readonly string[]): string {\n    return getErrorMessageByValidationErrors(validationErrors, 'payment is invalid, see details below:');\n  }\n}\n\nexport class UnsupportedPaymentUrlTypeError extends TezosPaymentsError {\n}\n\nexport class PaymentUrlError extends TezosPaymentsError {\n}\n\nexport class DonationUrlError extends TezosPaymentsError {\n}\n","import { CustomNetwork, Donation, Network, Payment, PaymentUrlType } from '@tezospayments/common';\n\nexport abstract class PaymentUrlFactory {\n  constructor(readonly urlType: PaymentUrlType) {\n  }\n\n  abstract createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string | Promise<string>;\n}\n","import {\n  native, PaymentUrlType,\n  PaymentSerializer, CustomNetwork, Network, Payment, Donation, DonationSerializer, PaymentType, getEncodedPaymentUrlType\n} from '@tezospayments/common';\n\nimport constants from '../constants';\nimport { DonationUrlError, PaymentUrlError } from '../errors';\nimport { PaymentUrlFactory } from './paymentUrlFactory';\n\nexport class Base64PaymentUrlFactory extends PaymentUrlFactory {\n  static readonly baseUrl = constants.paymentAppBaseUrl;\n\n  protected readonly paymentSerializer: PaymentSerializer = new PaymentSerializer();\n  protected readonly donationSerializer: DonationSerializer = new DonationSerializer();\n\n  constructor(readonly baseUrl: string = Base64PaymentUrlFactory.baseUrl) {\n    super(PaymentUrlType.Base64);\n  }\n\n  createPaymentUrl(paymentOrDonation: Payment | Donation, network: Network | CustomNetwork): string {\n    return paymentOrDonation.type === PaymentType.Payment\n      ? this.createPaymentUrlInternal(paymentOrDonation, network)\n      : this.createDonationUrlInternal(paymentOrDonation, network);\n  }\n\n  protected createPaymentUrlInternal(payment: Payment, network: Network | CustomNetwork): string {\n    const serializedPaymentBase64 = this.paymentSerializer.serialize(payment);\n    if (!serializedPaymentBase64)\n      throw new PaymentUrlError('It\\'s impossible to serialize the payment');\n\n    try {\n      return this.createUrl(true, payment.targetAddress, serializedPaymentBase64, network);\n    } catch (error: unknown) {\n      throw new PaymentUrlError('It\\'s impossible to create an URL for the payment');\n    }\n  }\n\n  protected createDonationUrlInternal(donation: Donation, network: Network | CustomNetwork): string {\n    const serializedDonationBase64 = this.donationSerializer.serialize(donation);\n    if (!serializedDonationBase64 && serializedDonationBase64 !== '')\n      throw new DonationUrlError('It\\'s impossible to serialize the donation');\n\n    try {\n      return this.createUrl(false, donation.targetAddress, serializedDonationBase64, network);\n    } catch (error: unknown) {\n      throw new DonationUrlError('It\\'s impossible to create an URL for the donation');\n    }\n  }\n\n  protected createUrl(\n    isPayment: boolean,\n    targetAddress: string,\n    serializedPaymentOrDonationBase64: string,\n    network: Network | CustomNetwork\n  ) {\n    const url = new native.URL(`${targetAddress}/${isPayment ? 'payment' : 'donation'}`, this.baseUrl);\n\n    if (serializedPaymentOrDonationBase64 !== '')\n      url.hash = getEncodedPaymentUrlType(this.urlType) + serializedPaymentOrDonationBase64;\n    if (network.name !== constants.defaultNetworkName)\n      url.searchParams.append('network', network.name);\n\n    return url.href;\n  }\n}\n","export type Payment = import('@tezospayments/common').Payment & {\n  readonly url: string;\n};\n\nexport enum SigningType {\n  ApiSecretKey = 0,\n  Wallet = 1,\n  Custom = 2,\n}\n","import { UnsignedPayment, PaymentSignature } from '@tezospayments/common';\n\nimport type { SigningType } from '../models';\n\nexport abstract class TezosPaymentsSigner {\n  constructor(readonly signingType: SigningType) {\n  }\n\n  abstract sign(payment: UnsignedPayment): PaymentSignature | Promise<PaymentSignature>;\n}\n","import { InMemorySigner } from '@taquito/signer';\n\nimport { PaymentSignPayloadEncoder, PaymentSignature, UnsignedPayment } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class ApiSecretKeySigner extends TezosPaymentsSigner {\n  protected readonly paymentSignPayloadEncoder: PaymentSignPayloadEncoder = new PaymentSignPayloadEncoder();\n  protected readonly inMemorySigner: InMemorySigner;\n\n  constructor(readonly apiSecretKey: string) {\n    super(SigningType.ApiSecretKey);\n\n    this.inMemorySigner = new InMemorySigner(this.apiSecretKey);\n  }\n\n  async sign(payment: UnsignedPayment): Promise<PaymentSignature> {\n    const signPayload = this.paymentSignPayloadEncoder.encode(payment);\n    const contractSigningPromise = this.inMemorySigner.sign(signPayload.contractSignPayload);\n    const signingPromises = signPayload.clientSignPayload\n      ? [contractSigningPromise, this.inMemorySigner.sign(signPayload.clientSignPayload)]\n      : [contractSigningPromise];\n\n    // TODO: add \"[Awaited<ReturnType<typeof this.inMemorySigner.sign>>, Awaited<ReturnType<typeof this.inMemorySigner.sign>>?]\" type\n    const signatures = await Promise.all(signingPromises);\n\n    return {\n      signingPublicKey: await this.inMemorySigner.publicKey(),\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      contract: signatures[0]!.prefixSig,\n      client: signatures[1]?.prefixSig,\n    };\n  }\n}\n","import { UnsignedPayment, PaymentSignature, PaymentSignPayloadEncoder } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class WalletSigner extends TezosPaymentsSigner {\n  protected readonly paymentSignPayloadEncoder: PaymentSignPayloadEncoder = new PaymentSignPayloadEncoder();\n\n  constructor(readonly walletSigning: (dataBytes: string) => Promise<string>) {\n    super(SigningType.Wallet);\n  }\n\n  async sign(payment: UnsignedPayment): Promise<PaymentSignature> {\n    const signPayload = this.paymentSignPayloadEncoder.encode(payment);\n    const walletContractSignPayload = signPayload.contractSignPayload.substring(2);\n\n    const contractSigningPromise = this.walletSigning(walletContractSignPayload);\n    const signingPromises = signPayload.clientSignPayload\n      ? [contractSigningPromise, this.walletSigning(signPayload.clientSignPayload)]\n      : [contractSigningPromise];\n\n    // TODO: add \"[Awaited<ReturnType<typeof this.inMemorySigner.sign>>, Awaited<ReturnType<typeof this.inMemorySigner.sign>>?]\" type\n    const signatures = await Promise.all(signingPromises);\n\n    return {\n      signingPublicKey: '',\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      contract: signatures[0]!,\n      client: signatures[1],\n    };\n  }\n}\n","import type { UnsignedPayment, PaymentSignature } from '@tezospayments/common';\n\nimport { SigningType } from '../models';\nimport { TezosPaymentsSigner } from './tezosPaymentsSigner';\n\nexport class CustomSigner extends TezosPaymentsSigner {\n  constructor(readonly customSigning: (payment: UnsignedPayment) => Promise<string>) {\n    super(SigningType.Custom);\n  }\n\n  sign(_payment: UnsignedPayment): PaymentSignature | Promise<PaymentSignature> {\n    throw new Error('Method not implemented.');\n  }\n}\n","import BigNumber from 'bignumber.js';\nimport { nanoid } from 'nanoid';\n\nimport {\n  native, networks, tezosInfo, networkNameRegExp, networkIdRegExp, PaymentUrlType,\n  DeepReadonly, FailedValidationResults, UnsignedPayment as CommonUnsignedPaymentModel, Payment as CommonPaymentModel,\n  PaymentType, PaymentValidator, Mutable\n} from '@tezospayments/common';\n\nimport { InvalidPaymentCreateParametersError, InvalidPaymentError, InvalidTezosPaymentsOptionsError, UnsupportedPaymentUrlTypeError } from './errors';\nimport { Payment } from './models';\nimport type { DefaultPaymentParameters, PaymentCreateParameters, TezosPaymentsOptions } from './options';\nimport { Base64PaymentUrlFactory, PaymentUrlFactory } from './paymentUrlFactories';\nimport { ApiSecretKeySigner, CustomSigner, TezosPaymentsSigner, WalletSigner } from './signers';\nimport { tezosPaymentsOptionsValidationErrors } from './validationErrors';\n\nexport class TezosPayments {\n  static readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters> = {\n    network: networks.granadanet,\n    urlType: PaymentUrlType.Base64\n  };\n  protected static readonly optionsValidationErrors = tezosPaymentsOptionsValidationErrors;\n\n  protected readonly paymentValidator: PaymentValidator = new PaymentValidator();\n  protected readonly serviceContractAddress: string;\n  protected readonly signer: TezosPaymentsSigner;\n  protected readonly defaultPaymentParameters: DeepReadonly<DefaultPaymentParameters>;\n\n  private paymentUrlFactories: Map<PaymentUrlType, PaymentUrlFactory> = new Map();\n\n  constructor(options: DeepReadonly<TezosPaymentsOptions>) {\n    const errors = this.validateOptions(options);\n    if (errors)\n      throw new InvalidTezosPaymentsOptionsError(errors);\n\n    this.serviceContractAddress = options.serviceContractAddress;\n    this.defaultPaymentParameters = options.defaultPaymentParameters\n      ? {\n        network: options.defaultPaymentParameters.network || TezosPayments.defaultPaymentParameters.network,\n        urlType: options.defaultPaymentParameters.urlType || TezosPayments.defaultPaymentParameters.urlType\n      }\n      : TezosPayments.defaultPaymentParameters;\n\n    this.signer = this.createSigner(options.signing);\n    this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType);\n  }\n\n  async createPayment(createParameters: PaymentCreateParameters): Promise<Payment> {\n    if (!createParameters)\n      throw new InvalidPaymentCreateParametersError(createParameters);\n\n    let errors: FailedValidationResults;\n    if (createParameters.urlType) {\n      errors = this.validateDefaultPaymentParameters(createParameters);\n      if (errors)\n        throw new InvalidPaymentError(errors);\n    }\n\n    const unsignedPayment = this.createPaymentByCreateParameters(createParameters);\n    errors = this.paymentValidator.validate(unsignedPayment, true);\n    if (errors)\n      throw new InvalidPaymentError(errors);\n\n    const signedPayment = await this.getSignedPayment(unsignedPayment);\n    errors = this.paymentValidator.validate(signedPayment, true);\n    if (errors)\n      throw new InvalidPaymentError(errors);\n\n    const paymentUrl = await this.getPaymentUrl(signedPayment, createParameters.urlType);\n    const payment = this.applyPaymentUrl(signedPayment, paymentUrl);\n\n    return payment;\n  }\n\n  protected getPaymentUrl(payment: CommonPaymentModel, urlType = this.defaultPaymentParameters.urlType): string | Promise<string> {\n    return this.getPaymentUrlFactory(urlType).createPaymentUrl(payment, this.defaultPaymentParameters.network);\n  }\n\n  protected applyPaymentUrl(payment: CommonPaymentModel, url: string): Payment {\n    (payment as Mutable<Payment>).url = url;\n\n    return (payment as Payment);\n  }\n\n  protected getPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    let paymentUrlFactory = this.paymentUrlFactories.get(paymentUrlType);\n    if (!paymentUrlFactory) {\n      paymentUrlFactory = this.createPaymentUrlFactory(paymentUrlType);\n      this.paymentUrlFactories.set(paymentUrlType, paymentUrlFactory);\n    }\n\n    return paymentUrlFactory;\n  }\n\n  protected async getSignedPayment(unsignedPayment: CommonUnsignedPaymentModel): Promise<CommonPaymentModel> {\n    (unsignedPayment as Mutable<CommonPaymentModel>).signature = await this.signer.sign(unsignedPayment);\n\n    return unsignedPayment as CommonPaymentModel;\n  }\n\n  protected createSigner(signingOptions: TezosPaymentsOptions['signing']): TezosPaymentsSigner {\n    if ('apiSecretKey' in signingOptions)\n      return new ApiSecretKeySigner(signingOptions.apiSecretKey);\n    if ('walletSigning' in signingOptions)\n      return new WalletSigner(signingOptions.walletSigning);\n\n    return new CustomSigner(signingOptions);\n  }\n\n  protected createPaymentUrlFactory(paymentUrlType: PaymentUrlType): PaymentUrlFactory {\n    switch (paymentUrlType) {\n      case PaymentUrlType.Base64:\n        return new Base64PaymentUrlFactory();\n      default:\n        throw new UnsupportedPaymentUrlTypeError(`This payment url type is not supported: ${paymentUrlType}`);\n    }\n  }\n\n  protected createPaymentByCreateParameters(createParameters: PaymentCreateParameters): CommonUnsignedPaymentModel {\n    // TODO: check decimals\n    // TODO: floor amount to decimals count: new BigNumber(amount).toFixed(asset.decimals)\n    const payment: Mutable<CommonUnsignedPaymentModel> = {\n      type: PaymentType.Payment,\n      id: createParameters.id || nanoid(),\n      targetAddress: this.serviceContractAddress,\n      amount: new BigNumber(createParameters.amount),\n      data: createParameters.data,\n      created: createParameters.created ? new Date(createParameters.created) : new Date(),\n    };\n\n    if (createParameters.asset)\n      payment.asset = createParameters.asset;\n    if (createParameters.expired)\n      payment.expired = new Date(createParameters.expired);\n    if (createParameters.successUrl)\n      payment.successUrl = new native.URL(createParameters.successUrl);\n    if (createParameters.cancelUrl)\n      payment.cancelUrl = new native.URL(createParameters.cancelUrl);\n\n    return payment;\n  }\n\n  protected validateOptions(options: DeepReadonly<TezosPaymentsOptions>): FailedValidationResults {\n    return [\n      this.validateServiceContractAddress(options.serviceContractAddress),\n      this.validateSigningOptions(options.signing),\n      this.validateDefaultPaymentParameters(options.defaultPaymentParameters)\n    ].reduce(\n      (result, currentErrors) => currentErrors ? (result || []).concat(currentErrors) : result,\n      undefined\n    );\n  }\n\n  private validateServiceContractAddress(serviceContractAddress: string): FailedValidationResults {\n    if (!serviceContractAddress || typeof serviceContractAddress !== 'string')\n      return [TezosPayments.optionsValidationErrors.invalidServiceContractAddressType];\n\n    if (serviceContractAddress.length !== tezosInfo.addressLength)\n      return [TezosPayments.optionsValidationErrors.serviceContractAddressHasInvalidLength];\n\n    if (!tezosInfo.contractAddressPrefixes.some(prefix => serviceContractAddress.startsWith(prefix)))\n      return [TezosPayments.optionsValidationErrors.serviceContractAddressIsNotContractAddress];\n  }\n\n  private validateSigningOptions(signingOptions: TezosPaymentsOptions['signing']): FailedValidationResults {\n    if (typeof signingOptions !== 'object')\n      return [TezosPayments.optionsValidationErrors.invalidSigningOption];\n\n    if (typeof signingOptions === 'function')\n      return;\n    else if (!('apiSecretKey' in signingOptions) && !('walletSigning' in signingOptions))\n      return [TezosPayments.optionsValidationErrors.invalidSigningOption];\n\n    if ('apiSecretKey' in signingOptions) {\n      if (typeof signingOptions.apiSecretKey !== 'string')\n        return [TezosPayments.optionsValidationErrors.invalidApiSecretKeyType];\n      if (!signingOptions.apiSecretKey)\n        return [TezosPayments.optionsValidationErrors.emptyApiSecretKey];\n    }\n\n    if ('walletSigning' in signingOptions && typeof signingOptions.walletSigning !== 'function')\n      return [TezosPayments.optionsValidationErrors.invalidWalletSigningOptionType];\n  }\n\n  private validateDefaultPaymentParameters(defaultPaymentParameters: TezosPaymentsOptions['defaultPaymentParameters']): FailedValidationResults {\n    if (defaultPaymentParameters === undefined)\n      return;\n\n    if (typeof defaultPaymentParameters !== 'object')\n      return [TezosPayments.optionsValidationErrors.invalidDefaultPaymentParameters];\n\n    if ('network' in defaultPaymentParameters) {\n      if (typeof defaultPaymentParameters.network !== 'object')\n        return [TezosPayments.optionsValidationErrors.invalidNetwork];\n\n      if (defaultPaymentParameters.network.name === undefined || defaultPaymentParameters.network.name === '')\n        return [TezosPayments.optionsValidationErrors.emptyNetworkName];\n\n      if (typeof defaultPaymentParameters.network.name !== 'string' || !networkNameRegExp.test(defaultPaymentParameters.network.name))\n        return [TezosPayments.optionsValidationErrors.invalidNetworkName];\n\n      if (defaultPaymentParameters.network.id && (typeof defaultPaymentParameters.network.id !== 'string' || !networkIdRegExp.test(defaultPaymentParameters.network.id)))\n        return [TezosPayments.optionsValidationErrors.invalidNetworkId];\n    }\n\n    if ('urlType' in defaultPaymentParameters && defaultPaymentParameters.urlType !== PaymentUrlType.Base64)\n      return [TezosPayments.optionsValidationErrors.invalidUrlType];\n  }\n}\n","export const tezosPaymentsOptionsValidationErrors = {\n  // serviceContractAddress\n  invalidServiceContractAddressType: 'Type of the serviceContractAddress option is invalid',\n  serviceContractAddressHasInvalidLength: 'The serviceContractAddress option has an invalid address',\n  serviceContractAddressIsNotContractAddress: 'The serviceContractAddress option isn\\'t a contract address',\n  // signing\n  invalidSigningOption: 'The signing option is invalid',\n  invalidApiSecretKeyType: 'The API secret key has an invalid type, it should be a string',\n  emptyApiSecretKey: 'The API secret key is empty',\n  invalidWalletSigningOptionType: 'The WalletSigning option has an invalid type, it should be a function',\n  // defaultPaymentParameters\n  invalidDefaultPaymentParameters: 'The default payment parameters are invalid',\n  // defaultPaymentParameters.network\n  emptyNetworkName: 'The network name is empty',\n  invalidNetwork: 'The network is invalid',\n  invalidNetworkName: 'The network name is invalid',\n  invalidNetworkId: 'The network id is invalid',\n  // defaultPaymentParameters.urlType\n  invalidUrlType: 'The url type is invalid'\n} as const;\n","import constants from './constants';\nimport * as errors from './errors';\nimport * as paymentUrlFactories from './paymentUrlFactories';\nimport * as signers from './signers';\n\nexport { PaymentUrlType } from '@tezospayments/common';\nexport type { PaymentAsset } from '@tezospayments/common';\n\nexport type { Payment } from './models';\nexport { SigningType } from './models';\n\nexport type { TezosPaymentsOptions, PaymentCreateParameters } from './options';\nexport { TezosPayments } from './tezosPayments';\n\nexport const internal = {\n  constants,\n  errors,\n  paymentUrlFactories,\n  signers\n};\n","import { SigningType } from '@airgap/beacon-sdk';\nimport { BeaconWallet } from '@taquito/beacon-wallet';\nimport { TezosPayments } from 'tezospayments';\n\nimport { Network } from '@tezospayments/common';\n\nimport { getCurrentAccount } from '../../store/accounts/selectors';\nimport { useAppSelector } from './reduxHooks';\nimport { useAppContext } from './useAppContext';\n\nconst createTezosPayments = (serviceContractAddress: string, network: Network, tezosWallet: BeaconWallet) => {\n  return new TezosPayments({\n    serviceContractAddress,\n    signing: {\n      walletSigning: payload => tezosWallet.client\n        .requestSignPayload({ signingType: SigningType.MICHELINE, payload })\n        .then(r => r.signature)\n    },\n    defaultPaymentParameters: { network }\n  });\n};\n\nconst tezosPaymentsInstancesMap = new Map<string, TezosPayments>();\n\nexport const useTezosPayments = (serviceContractAddress: string | undefined | null) => {\n  const appContext = useAppContext();\n  const currentNetwork = useAppSelector(getCurrentAccount)?.network;\n\n  if (!serviceContractAddress || !currentNetwork)\n    return null;\n\n  let tezosPaymentsInstance = tezosPaymentsInstancesMap.get(serviceContractAddress);\n  if (!tezosPaymentsInstance) {\n    tezosPaymentsInstance = createTezosPayments(serviceContractAddress, currentNetwork, appContext.tezosWallet);\n    tezosPaymentsInstancesMap.set(serviceContractAddress, tezosPaymentsInstance);\n  }\n\n  return tezosPaymentsInstance;\n};\n","import { useState, useEffect } from 'react';\n\nimport { Ed25519KeyGenerator, EncodedKeyPair, KeyType, EllipticCurveKeyGenerator } from '@tezospayments/common';\n\ninterface KeyPairGenerators {\n  readonly ed25519: Ed25519KeyGenerator;\n  readonly secp256k1: EllipticCurveKeyGenerator;\n  readonly p256: EllipticCurveKeyGenerator;\n}\n\ninterface GenerateKeyPair {\n  (keyType: KeyType): EncodedKeyPair;\n}\n\ntype HookState = false | GenerateKeyPair;\n\nconst keyPairGenerators: KeyPairGenerators = {\n  ed25519: new Ed25519KeyGenerator(),\n  secp256k1: new EllipticCurveKeyGenerator('secp256k1'),\n  p256: new EllipticCurveKeyGenerator('p256')\n};\n\nconst loadKeyPairGenerators = () => keyPairGenerators.ed25519.initialize();\n\nconst areGeneratorsInitialized = () => keyPairGenerators.ed25519.isInitialized;\n\nconst generate: GenerateKeyPair = keyType => {\n  switch (keyType) {\n    case KeyType.Ed25519:\n      return keyPairGenerators.ed25519.generate().encoded;\n    case KeyType.Secp256k1:\n      return keyPairGenerators.secp256k1.generate().encoded;\n    case KeyType.P256:\n      return keyPairGenerators.p256.generate().encoded;\n\n    default:\n      throw new Error('Unknown algorithm type');\n  }\n};\n\nexport const useKeyPairGenerator = (): HookState => {\n  const [isLoaded, setIsLoaded] = useState(areGeneratorsInitialized());\n\n  useEffect(() => {\n    let isCanceled = false;\n    if (!isLoaded)\n      loadKeyPairGenerators().then(() => !isCanceled && setIsLoaded(true));\n\n    return () => {\n      isCanceled = true;\n    };\n  }, [isLoaded]);\n\n  return isLoaded ? generate : false;\n};\n","import { Route, RouteProps, Redirect } from 'react-router';\n\nimport { config } from '../../config';\nimport { useAppSelector } from '../hooks';\n\nconst defaultConnectPath = config.routers.connect;\ninterface PrivateRouteProps extends RouteProps {\n    children: NonNullable<RouteProps['children']>;\n    connectPath?: string;\n    isConnected: boolean;\n}\n\nexport const PrivateRoute = ({ children, isConnected, connectPath = defaultConnectPath, ...routeProps }: PrivateRouteProps) => (\n    <Route {...routeProps} children={props => isConnected\n        ? children\n        : <Redirect to={{\n            pathname: connectPath,\n            state: { from: props.location }\n        }} />\n    } />\n);\n\ntype PrivateRouteContainerProps = Omit<PrivateRouteProps, 'isConnected'>;\n\nexport const PrivateRouteContainer = (props: PrivateRouteContainerProps) => {\n    const currentAccount = useAppSelector(state => state.accountsState.currentAccount);\n\n    return <PrivateRoute {...props} isConnected={!!currentAccount} />;\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, Tooltip } from 'antd';\nimport BigNumber from 'bignumber.js';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport './TokenListItem.scss';\n\ninterface TokenListItemProps {\n  name: string;\n  ticker: string;\n  contractAddress: string;\n  iconSrc?: string;\n  value?: BigNumber;\n  decimals?: number;\n  highlightSign?: boolean;\n  className?: string;\n  handleDelete?: (contractAddress: string) => void;\n}\n\nconst getStringAmounts = (value: BigNumber): [string, string] => {\n  const displayedDecimals = 6;\n  const shortAmount = value.toFormat(displayedDecimals, { groupSeparator: '', decimalSeparator: '.' });\n  const amount = value.toString();\n\n  return [amount.substring(0, shortAmount.length), amount];\n};\n\nexport const TokenListItem = (props: TokenListItemProps) => {\n  const valueClassNames = combineClassNames('token-list-item__value',\n    { 'token-list-item__value_positive': props.highlightSign && props.value && !props.value.isZero() && props.value.isPositive() },\n    { 'token-list-item__value_negative': props.highlightSign && props.value && !props.value.isZero() && props.value.isNegative() }\n  );\n\n  const sign = props.value?.isNegative()\n    ? '-'\n    : props.highlightSign && props.value?.isPositive()\n      ? '+'\n      : '';\n\n  const value = props.value && props.value.abs();\n  const [shortAmount, amount] = value !== undefined && value !== null ? getStringAmounts(value) : [null, null];\n  const allDecimalsShown = shortAmount !== null && amount !== null && (shortAmount === amount || amount.substr(shortAmount.length).split('').every(s => s === '0'));\n  const amountSpan = shortAmount && <span className={valueClassNames}>\n    {`${sign}${shortAmount}${allDecimalsShown ? '' : '...'}`}\n  </span>;\n\n  return <li className={combineClassNames('token-list-item', props.className)}>\n    <img className=\"token-list-item__icon\" src={props.iconSrc} alt={props.name} />\n    <div>\n      <div className=\"token-list-item__name-container\">\n        <span className=\"token-list-item__ticker\">{props.ticker}</span>\n        <span className=\"token-list-item__name\">{props.name}</span>\n        {props.handleDelete && <Button\n          className=\"service-link-editor__delete-button\"\n          type=\"text\" danger icon={<DeleteOutlined />}\n          onClick={() => props.handleDelete?.(props.contractAddress)} />}\n      </div>\n      {!allDecimalsShown && value !== undefined && value !== null\n        ? <Tooltip title={amount}>\n          {amountSpan}\n        </Tooltip>\n        : amountSpan}\n    </div>\n  </li>;\n};\n","import { TokenListItem } from './TokenListItem';\n\nimport './TokenList.scss';\n\ninterface TokenListProps {\n  children: React.ReactNode;\n}\n\nexport const TokenList = (props: TokenListProps) => {\n  return <ul className=\"token-list\">\n    {props.children}\n  </ul>;\n};\n\nTokenList.Item = TokenListItem;\n","import { CopyOutlined } from '@ant-design/icons';\nimport React, { useCallback } from 'react';\n\nimport { useAppContext, useCurrentLanguageResources } from '../../hooks';\n\nimport './ExplorerLink.scss';\n\ninterface ExplorerLinkProps {\n  hash: string;\n  className?: string;\n  showCopyButton?: boolean;\n  children: React.ReactNode;\n}\n\nexport const ExplorerLink = (props: ExplorerLinkProps) => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(props.hash);\n  }, [props.hash]);\n\n  return <div className=\"explorer-link__container\">\n    <a href={appContext.tezosExplorer.getEntityUrl(props.hash)} target=\"_blank\" rel=\"noreferrer\" className={props.className}>\n      {props.children}\n    </a>\n    {props.showCopyButton && <CopyOutlined className=\"explorer-link__copy-icon\" title={commonLangResources.copy} onClick={handleCopyAddressClick} />}\n  </div>;\n};\n\nexport const ExplorerLinkPure = React.memo(ExplorerLink);\n","type ExternalLinkProps = Omit<JSX.IntrinsicElements['a'], 'target' | 'rel'>;\n\nexport const ExternalLink = (props: ExternalLinkProps) => <a {...props} target=\"_blank\" rel=\"noopener noreferrer\">\n  {props.children}\n</a>;\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\n\nimport './NoServicesCreated.scss';\n\nexport const NoServicesCreated = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleCreateServiceClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  return <div className=\"no-services-created\">\n    <div>\n      <p>{servicesLangResources.youDoNotHaveAnyServicesYet}</p>\n      <p>{servicesLangResources.createYourFirstService}</p>\n      <Button type=\"primary\" onClick={handleCreateServiceClick}>{servicesLangResources.editing.createService}</Button>\n    </div>\n  </div>;\n};\n\nexport const NoServicesCreatedPure = React.memo(NoServicesCreated);\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\ninterface ViewTitleProps {\n    className?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewTitleProps = Required<Pick<ViewTitleProps, 'as'>>;\n\nexport const defaultProps: DefaultViewTitleProps = {\n    as: 'h1',\n};\n\nconst viewTitleClassName = 'view__title';\nexport const ViewTitle = (props: ViewTitleProps & DefaultViewTitleProps) => {\n    const className = combineClassNames(props.className, viewTitleClassName);\n\n    return React.createElement(props.as, { className }, props.children);\n};\nViewTitle.defaultProps = defaultProps;\n","import React from 'react';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useViewTitle } from '../../hooks';\nimport { ViewTitle } from './ViewTitle';\nimport './View.scss';\n\ninterface ViewProps {\n    className?: string;\n    title?: string;\n    children?: React.ReactNode;\n    as?: keyof React.ReactHTML;\n}\n\ntype DefaultViewProps = Required<Pick<ViewProps, 'as'>>;\n\nconst defaultProps: DefaultViewProps = {\n    as: 'main'\n};\n\nexport const View = (props: ViewProps & DefaultViewProps) => {\n    useViewTitle(props.title ? `${props.title} | ${config.app.title}` : config.app.title);\n    const className = combineClassNames('view', props.className);\n\n    return React.createElement(props.as, { className }, props.children);\n};\n\nView.defaultProps = defaultProps;\nView.Title = ViewTitle;\n","import { useEffect } from 'react';\n\nexport const useViewTitle = (title: string) => {\n    useEffect(() => {\n        document.title = title;\n    }, [title]);\n};\n","import { Column } from '@ant-design/charts';\nimport { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\nexport const OperationCountChart = () => {\n  const data = [\n    {\n      month: 'May',\n      operationCount: 900,\n    },\n    {\n      month: 'June',\n      operationCount: 1600,\n    },\n    {\n      month: 'July',\n      operationCount: 600,\n    },\n    {\n      month: 'August',\n      operationCount: 2200,\n    },\n    {\n      month: 'September',\n      operationCount: 950,\n    },\n    {\n      month: 'October',\n      operationCount: 1100,\n    },\n  ];\n\n  const config: React.ComponentProps<typeof Column> = {\n    data,\n    xField: 'month',\n    yField: 'operationCount',\n    height: 400,\n    meta: {\n      operationCount: { alias: 'Operation count' },\n    },\n  };\n\n  const services = useAppSelector(selectServicesState);\n\n  if (!services.initialized) {\n    return <Skeleton active paragraph={{ rows: 12 }} />;\n  }\n\n  return <Column {...config} />;\n};\n\nexport const OperationCountChartPure = React.memo(OperationCountChart);\n","import { Line } from '@ant-design/charts';\nimport { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\nexport const VolumeChart = () => {\n  const data = [\n    {\n      quarter: 'Q1 2020',\n      sum: 24756,\n    },\n    {\n      quarter: 'Q2 2020',\n      sum: 22178,\n    },\n    {\n      quarter: 'Q3 2020',\n      sum: 13613,\n    },\n    {\n      quarter: 'Q4 2020',\n      sum: 29436,\n    },\n    {\n      quarter: 'Q1 2021',\n      sum: 25679,\n    },\n    {\n      quarter: 'Q2 2021',\n      sum: 26483,\n    },\n    {\n      quarter: 'Q3 2021',\n      sum: 41835,\n    },\n    {\n      quarter: 'Q4 2021',\n      sum: 32412,\n    },\n  ];\n\n  const config: React.ComponentProps<typeof Line> = {\n    data,\n    xField: 'quarter',\n    yField: 'sum',\n    height: 400,\n    smooth: true,\n    meta: {\n      sum: { alias: 'Sum' },\n    },\n  };\n\n  const services = useAppSelector(selectServicesState);\n\n  if (!services.initialized) {\n    return <Skeleton active paragraph={{ rows: 12 }} />;\n  }\n\n  return <Line {...config} />;\n};\n\nexport const VolumeChartPure = React.memo(VolumeChart);\n","import { AppState } from '..';\n\nexport const selectBalancesState = (state: AppState) => state.balancesState;\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { optimization, tezosMeta } from '@tezospayments/common';\n\nimport { selectBalancesState } from '../../../../store/balances/selectors';\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Balances = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n  const services = useAppSelector(selectServicesState);\n  const balances = useAppSelector(selectBalancesState);\n\n  if (!services.initialized || !balances.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={balances.tezos}\n      iconSrc={tezosMeta.thumbnailUri} />);\n  }\n\n  tokens.forEach(t => {\n    if (t.metadata) {\n      items.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={''}\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        value={balances.tokens[t.contractAddress] || optimization.zeroBigNumber}\n        iconSrc={t.metadata.thumbnailUri} />);\n    }\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const BalancesPure = React.memo(Balances);\n","import { Skeleton } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Incoming = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const services = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n\n  if (!services.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={new BigNumber(52.4)}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  tokens.forEach(t => {\n    if (t.metadata) {\n      items.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={t.contractAddress}\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        value={new BigNumber(462518)}\n        iconSrc={t.metadata.thumbnailUri}\n        highlightSign />);\n    }\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const IncomingPure = React.memo(Incoming);\n","import { Skeleton } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport React from 'react';\n\nimport { tezosMeta } from '@tezospayments/common';\n\nimport { getAcceptTezos, getAllAcceptedTokens, selectServicesState } from '../../../../store/services/selectors';\nimport { TokenList } from '../../../common';\nimport { useAppSelector } from '../../../hooks';\n\nexport const Outgoing = () => {\n  const acceptTezos = useAppSelector(getAcceptTezos);\n  const services = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(getAllAcceptedTokens);\n\n  if (!services.initialized) {\n    return <Skeleton active />;\n  }\n\n  const items = [];\n\n  if (acceptTezos) {\n    items.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      value={new BigNumber(-52.4)}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  tokens.forEach(t => {\n    if (t.metadata) {\n      items.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={t.contractAddress}\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        value={new BigNumber(-462518.0000006)}\n        iconSrc={t.metadata.thumbnailUri}\n        highlightSign />);\n    }\n  });\n\n  return <TokenList>\n    {items}\n  </TokenList>;\n};\n\nexport const OutgoingPure = React.memo(Outgoing);\n","import { Card } from 'antd';\nimport React from 'react';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { OperationCountChartPure, VolumeChartPure } from './LargeCards';\nimport { BalancesPure, IncomingPure, OutgoingPure } from './SmallCards';\nimport './Overview.scss';\n\nexport const Overview = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const overviewLangResources = langResources.views.overview;\n\n  const servicesState = useAppSelector(selectServicesState);\n\n  return <View title={overviewLangResources.title} className=\"overview\">\n    <View.Title>{overviewLangResources.title}</View.Title>\n\n    {servicesState.initialized && !servicesState.services.length\n      ? <NoServicesCreatedPure />\n      : <div className=\"cards-container\">\n        <Card className=\"cards-container__small-card\" size=\"small\" title={overviewLangResources.balances.title}>\n          <BalancesPure />\n        </Card>\n\n        {/*eslint-disable-next-line max-len*/}\n        <Card className=\"cards-container__small-card\" size=\"small\" title={`${overviewLangResources.incoming.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">All Month</a>}>\n          <IncomingPure />\n        </Card>\n\n        {/*eslint-disable-next-line max-len*/}\n        <Card className=\"cards-container__small-card\" size=\"small\" title={`${overviewLangResources.outgoing.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">All Month</a>}>\n          <OutgoingPure />\n        </Card>\n\n        <Card className=\"cards-container__large-card\" title={`${overviewLangResources.operationCount.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">6 Months</a>}>\n          <OperationCountChartPure />\n        </Card>\n\n        <Card className=\"cards-container__large-card\" title={`${overviewLangResources.volume.title} (${commonLangResources.comingSoon})`} extra={<a href=\"#void\">Last 2 Years</a>}>\n          <VolumeChartPure />\n        </Card>\n      </div>}\n  </View >;\n};\n\nexport const OverviewPure = React.memo(Overview);\n","import { createSelector } from 'reselect';\n\nimport { AppState } from '../index';\n\nexport const selectOperationsState = (state: AppState) => state.operationsState;\n\nexport const getSortedOperations = createSelector(\n  selectOperationsState,\n  operationsState => [...operationsState.operations].sort((a, b) => +b.date - +a.date)\n);\n","import { ArrowRightOutlined, ArrowLeftOutlined, ClockCircleTwoTone, ExclamationCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { combineClassNames, OperationDirection, OperationStatus } from '@tezospayments/common';\n\nimport './OperationIcon.scss';\nimport { useCurrentLanguageResources } from '../../hooks';\n\ninterface OperationIconProps {\n  className?: string;\n  direction: OperationDirection;\n  status: OperationStatus;\n}\n\nexport const OperationIcon = (props: OperationIconProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === OperationDirection.Incoming;\n\n  const className = combineClassNames(\n    props.className,\n    'operation-icon',\n    { 'operation-icon_income': isIncoming },\n    { 'operation-icon_expense': !isIncoming },\n    { 'operation-icon_cancelled': props.status === OperationStatus.Cancelled }\n  );\n\n  return <div className={className}>\n    {isIncoming ? <ArrowRightOutlined title={operationsLangResources.income} /> : <ArrowLeftOutlined title={operationsLangResources.expense} />}\n    {props.status === OperationStatus.Pending && <ClockCircleTwoTone className=\"operation-icon__status operation-icon__status_pending\" title={operationsLangResources.pending} />}\n    {props.status === OperationStatus.Cancelled && <ExclamationCircleFilled className=\"operation-icon__status operation-icon__status_cancelled\" title={operationsLangResources.cancelled} />}\n  </div >;\n};\n\nexport const OperationIconPure = React.memo(OperationIcon);\n","import { BigNumber } from 'bignumber.js';\nimport React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { combineClassNames, OperationDirection, OperationStatus, OperationType } from '@tezospayments/common';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ExplorerLink } from '../ExplorerLink/ExplorerLink';\nimport { OperationIconPure } from './OperationIcon';\n\nimport './OperationList.scss';\n\ninterface OperationListProps {\n  children: React.ReactNode;\n}\n\nexport const OperationList = (props: OperationListProps) => {\n  return <table className=\"operation-list\">\n    {props.children}\n  </table>;\n};\n\ninterface OperationListItemProps {\n  type: OperationType;\n  direction: OperationDirection;\n  status: OperationStatus;\n  date: Date;\n  hash: string;\n  serviceAddress: string;\n  serviceName: string;\n  accountAddress: string;\n  data: string;\n  value: BigNumber;\n  ticker: string;\n}\n\nconst OperationListItem = (props: OperationListItemProps) => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  const isIncoming = props.direction === OperationDirection.Incoming;\n  const from = isIncoming ? props.accountAddress : props.serviceAddress;\n  const to = isIncoming ? props.serviceAddress : props.accountAddress;\n\n  const hash = getShortHash(props.hash);\n  const isDonation = props.type === OperationType.Donation;\n  const data = `${isDonation ? operationsLangResources.donationData : operationsLangResources.paymentId} ${props.data}`;\n\n  const sign = isIncoming ? '+' : '−';\n  const amountClassNames = combineClassNames('operation-list-item__amount',\n    { 'operation-list-item__amount_income': isIncoming },\n    { 'operation-list-item__amount_expense': !isIncoming },\n    { 'operation-list-item__amount_cancelled': props.status === OperationStatus.Cancelled }\n  );\n\n  const serviceLink = `${config.routers.services}/${props.serviceAddress}`;\n\n  return <tbody className=\"operation-list-group\">\n    <tr className=\"operation-list-row operation-list-row_general\">\n      <td className=\"operation-list-item__icon\">\n        <OperationIconPure direction={props.direction} status={props.status} />\n      </td>\n      <td className=\"operation-list-item__main-info\">\n        <span className=\"operation-list-item__date\">{props.date.toLocaleString()}</span>\n        <ExplorerLink hash={props.hash} className=\"operation-list-item__operation-hash\">{hash}</ExplorerLink>\n      </td>\n      <td className=\"operation-list-item__transfer-info\">\n        {from === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={from}>{getShortHash(from)}</ExplorerLink>}\n        &nbsp;→&nbsp;\n        {to === props.serviceAddress\n          ? <Link to={serviceLink}>{props.serviceName}</Link>\n          : <ExplorerLink hash={to}>{getShortHash(to)}</ExplorerLink>}\n      </td>\n      <td className={amountClassNames}>{sign}{props.value.toFormat()} {props.ticker}</td>\n    </tr>\n    <tr className=\"operation-list-row operation-list-row_order-data\">\n      <td></td>\n      <td className=\"operation-list-item__data\" colSpan={3}>\n        {data}\n      </td>\n    </tr>\n  </tbody>;\n};\n\nconst getShortHash = (hash: string) => `${hash.substr(0, 9)}...${hash.substr(hash.length - 6, 6)}`;\n\nOperationList.Item = OperationListItem;\n","import React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NoOperationsPerformed.scss';\n\nexport const NoOperationsPerformed = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations.operationList;\n\n  return <div className=\"no-operations-performed-container\">\n    {operationsLangResources.noOperationsPerformedYet}\n  </div>;\n};\n\nexport const NoOperationsPerformedPure = React.memo(NoOperationsPerformed);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { DonationOperation, Operation, OperationDirection, OperationType, PaymentOperation } from '@tezospayments/common';\n\nimport { getSortedOperations } from '../../../store/operations/selectors';\nimport { selectServicesState, selectTokensState } from '../../../store/services/selectors';\nimport { NoServicesCreated } from '../../common/NoServicesCreated';\nimport { OperationList } from '../../common/OperationList';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NoOperationsPerformedPure } from './NoOperationsPerformed';\n\nconst getFormattedOperationData = (operation: Operation): string | undefined => {\n  switch (operation.type) {\n    case OperationType.Payment:\n      return (operation as PaymentOperation).paymentId;\n    case OperationType.Donation:\n      return (operation as DonationOperation).payload?.valueString;\n    default:\n      return undefined;\n  }\n};\n\nexport const Operations = () => {\n  const langResources = useCurrentLanguageResources();\n  const operationsLangResources = langResources.views.operations;\n  const operations = useAppSelector(getSortedOperations);\n  const servicesState = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(selectTokensState);\n\n  const operationProps: Array<React.ComponentProps<typeof OperationList.Item>> = operations.map(o => {\n    const tokenSymbol = o.asset && tokens.get(o.asset)?.metadata?.symbol;\n\n    return {\n      date: o.date,\n      hash: o.hash,\n      data: getFormattedOperationData(o) || '',\n      accountAddress: o.sender,\n      serviceAddress: o.target,\n      serviceName: servicesState.services.filter(s => s.contractAddress === o.target)[0]?.name || '',\n      ticker: tokenSymbol || 'XTZ',\n      value: o.amount,\n      status: o.status,\n      type: o.type,\n      direction: OperationDirection.Incoming\n    };\n  });\n\n  return <View title={operationsLangResources.title}>\n    <View.Title>{operationsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreated />\n        : !operations.length\n          ? <NoOperationsPerformedPure />\n          : <OperationList>\n            {operationProps.map(o => <OperationList.Item key={o.hash} {...o} />)}\n          </OperationList>}\n  </View>;\n};\n\nexport const OperationsPure = React.memo(Operations);\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './NewServiceCard.scss';\n\nexport const NewServiceCard = () => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleCardClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  return <Card bodyStyle={{ padding: 0 }} className=\"new-service-card-container\" onClick={handleCardClick}>\n    <div className=\"new-service-card\" title={servicesLangResources.createNewService}>\n      <div className=\"new-service-card__info\">\n        <PlusOutlined className=\"new-service-card__icon\" />\n        <span>{commonLangResources.new}</span>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const NewServiceCardPure = React.memo(NewServiceCard);\n","import { CheckCircleOutlined, CloseCircleOutlined, PauseCircleOutlined, SyncOutlined } from '@ant-design/icons';\nimport { Tag } from 'antd';\nimport React from 'react';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActiveTag.scss';\n\ninterface ActiveTagProps {\n  paused: boolean;\n  deleted: boolean;\n  isUpdating: boolean;\n}\n\nexport const ActiveTag = (props: ActiveTagProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return props.isUpdating ?\n    <Tag icon={<SyncOutlined spin />} className=\"tag-active tag-active_updating\">{servicesLangResources.status.updating}</Tag>\n    : props.deleted\n      ? <Tag icon={<CloseCircleOutlined />} className=\"tag-active tag-active_deleted\">{servicesLangResources.status.deleted}</Tag>\n      : props.paused\n        ? <Tag icon={<PauseCircleOutlined />} className=\"tag-active tag-active_paused\">{servicesLangResources.status.paused}</Tag>\n        : <Tag icon={<CheckCircleOutlined />} className=\"tag-active tag-active_active\">{servicesLangResources.status.active}</Tag>;\n};\n\nexport const ActiveTagPure = React.memo(ActiveTag);\n","import { Tag } from 'antd';\nimport React from 'react';\n\nimport './CustomTag.scss';\n\ninterface CustomTagProps {\n  text: string;\n}\n\nexport const CustomTag = (props: CustomTagProps) => {\n  return <Tag className=\"tag-custom\">{props.text}</Tag>;\n};\n\nexport const CustomTagPure = React.memo(CustomTag);\n","import { Button, Card } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ServiceCard.scss';\n\ninterface ServiceCardProps {\n  service: Service;\n  isUpdating: boolean;\n}\n\nexport const ServiceCard = (props: ServiceCardProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n\n  const handleCardClick = useCallback((e: React.MouseEvent<HTMLDivElement>) => {\n    const tagName = (e.target as HTMLElement).tagName.toLowerCase();\n    if (tagName !== 'svg' && tagName !== 'a' && tagName !== 'path') {\n      history.push(`${config.routers.services}/${props.service.contractAddress}`);\n    }\n  }, [history, props.service.contractAddress]);\n\n  const logoClassName = combineClassNames(\n    'service-card__logo',\n    props.service.iconUrl ? 'service-card__logo_image' : 'service-card__logo_text',\n  );\n\n  return <Card size=\"small\" bodyStyle={{ padding: 0 }} className=\"service-card-container\" onClick={handleCardClick}>\n    <div className=\"service-card\">\n      <div className=\"service-card__info-container\">\n        <div className=\"service-card__main-info\">\n          {props.service.iconUrl\n            ? <img className={logoClassName} alt=\"logo\" src={props.service.iconUrl} />\n            : <span className={logoClassName}>{text.getAvatarText(props.service.name)}</span>}\n          <div className=\"service-card__name-container\">\n            <span className=\"service-card__name\" title={props.service.name}>{props.service.name}</span>\n            <div className=\"service-card__tags-container\">\n              <ActiveTagPure paused={props.service.paused} deleted={props.service.deleted} isUpdating={props.isUpdating} />\n            </div>\n          </div>\n        </div>\n        <div className=\"service-card__link-container\">\n          <ExplorerLinkPure hash={props.service.contractAddress} className=\"service-card__link\" showCopyButton>\n            {props.service.contractAddress}\n          </ExplorerLinkPure>\n        </div>\n      </div>\n      <div className=\"service-card__button-container\">\n        <Button className=\"service-card__button\" type=\"primary\">{commonLangResources.open}</Button>\n      </div>\n    </div>\n  </Card>;\n};\n\nexport const ServiceCardPure = React.memo(ServiceCard);\n","import { Skeleton } from 'antd';\nimport React from 'react';\n\nimport { getOperationsByService, getSortedServices, selectServicesState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { NewServiceCardPure, ServiceCardPure } from './ServiceCards';\nimport './Services.scss';\n\nexport const Services = () => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const servicesState = useAppSelector(selectServicesState);\n  const pendingOperations = useAppSelector(getOperationsByService);\n\n  const services = useAppSelector(getSortedServices);\n  const servicesCards = services.map(s => <ServiceCardPure\n    key={s.contractAddress}\n    service={s}\n    isUpdating={pendingOperations.has(s.contractAddress)}\n  />);\n\n  return <View title={servicesLangResources.title}>\n    <View.Title>{servicesLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"services-container\">\n          {servicesCards}\n          <NewServiceCardPure />\n        </div>}\n  </View >;\n};\n\nexport const ServicesPure = React.memo(Services);\n","import { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './ActionsZone.scss';\n\ninterface ActionsZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ActionsZone = ({ service, readOnly }: ActionsZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const history = useHistory();\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    history.push(config.routers.acceptServicePayments(service.contractAddress));\n  }, [history, service.contractAddress]);\n\n  return <div className=\"service-actions-zone\">\n    <span className=\"service-actions-zone__header\">Actions</span>\n\n    <div className=\"service-actions-zone__button-container\">\n      <p>{servicesLangResources.acceptPaymentsDescription}</p>\n      <Button disabled={readOnly} onClick={handleAcceptPaymentsClick} className=\"service-button\" type=\"primary\">{servicesLangResources.acceptPayments}</Button>\n    </div>\n  </div>;\n};\n\nexport const ActionsZonePure = React.memo(ActionsZone);\n","import { Button, Modal } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { setDeleted, setPaused } from '../../../../store/services/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './DangerZone.scss';\n\ninterface DangerZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DangerZone = (props: DangerZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const dangerZoneLangResources = langResources.views.services.dangerZone;\n  const dispatch = useAppDispatch();\n\n  const handlePauseModalOkClick = useCallback(() => {\n    dispatch(setPaused({ service: props.service, paused: !props.service.paused }));\n  }, [dispatch, props.service]);\n\n  const handleDeleteModalOkClick = useCallback(() => {\n    dispatch(setDeleted({ service: props.service, deleted: !props.service.deleted }));\n  }, [dispatch, props.service]);\n\n  const confirm = useCallback((text: string, isDanger: boolean, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: isDanger ? 'danger' : 'primary',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handlePauseClick = useCallback(() => {\n    const text = props.service.paused ? dangerZoneLangResources.unPauseServiceConfirmation : dangerZoneLangResources.pauseServiceConfirmation;\n    confirm(text, false, handlePauseModalOkClick);\n  }, [confirm, dangerZoneLangResources.pauseServiceConfirmation, dangerZoneLangResources.unPauseServiceConfirmation, handlePauseModalOkClick, props.service.paused]);\n\n  const handleDeleteClick = useCallback(() => {\n    const text = props.service.deleted ? dangerZoneLangResources.unDeleteServiceConfirmation : dangerZoneLangResources.deleteServiceConfirmation;\n    confirm(text, !props.service.deleted, handleDeleteModalOkClick);\n  }, [confirm, dangerZoneLangResources.deleteServiceConfirmation, dangerZoneLangResources.unDeleteServiceConfirmation, handleDeleteModalOkClick, props.service.deleted]);\n\n  return <>\n    <div className=\"service-danger-zone\">\n      <span className=\"service-danger-zone__header\">{dangerZoneLangResources.title}</span>\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.paused ? dangerZoneLangResources.unPauseServiceDescription : dangerZoneLangResources.pauseServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handlePauseClick}>\n          {props.service.paused ? dangerZoneLangResources.unPauseService : dangerZoneLangResources.pauseService}\n        </Button>\n      </div>\n      <hr className=\"service-danger-zone__divider\" />\n      <div className=\"service-danger-zone__button-container\">\n        <p>{props.service.deleted ? dangerZoneLangResources.unDeleteServiceDescription : dangerZoneLangResources.deleteServiceDescription}</p>\n        <Button disabled={props.readOnly} className=\"service-button\" type=\"primary\" danger onClick={handleDeleteClick}>\n          {props.service.deleted ? dangerZoneLangResources.unDeleteService : dangerZoneLangResources.deleteService}\n        </Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const DangerZonePure = React.memo(DangerZone);\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button, Divider, Input, Modal, Radio, RadioChangeEvent, Typography, Popconfirm, Spin } from 'antd';\nimport React, { useCallback, useRef, useState, useEffect } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { EncodedKeyPair, KeyType, Service } from '@tezospayments/common';\n\nimport { addApiKey } from '../../../../../store/services/slice';\nimport { useCurrentLanguageResources, useKeyPairGenerator } from '../../../../hooks';\n\nimport './AddApiKeyModal.scss';\n\nconst Search = Input.Search;\n\ninterface AddApiKeyModalProps {\n  service: Service;\n  visible: boolean;\n  onCancel: () => void;\n}\n\nconst algorithmOptions = Object.values(KeyType).map(v => ({ label: v, value: v }));\n\nexport const AddApiKeyModal = (props: AddApiKeyModalProps) => {\n  const generateKeyPair = useKeyPairGenerator();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const [keyPair, setKeyPair] = useState<EncodedKeyPair>();\n  const publicKeyRef = useRef<Input>(null);\n  const secretKeyRef = useRef<Input>(null);\n  const dispatch = useDispatch();\n\n  const [algorithmType, setAlgorithmType] = useState(algorithmOptions[0]?.value || KeyType.Ed25519);\n  const handleAlgorithmTypeChanges = useCallback((e: RadioChangeEvent) => {\n    setAlgorithmType(e.target.value);\n  }, []);\n\n  const [name, setName] = useState('');\n  const handleNameChanged = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n  }, []);\n\n  useEffect(() => {\n    generateKeyPair && setKeyPair(generateKeyPair(algorithmType));\n  }, [algorithmType, generateKeyPair]);\n\n  const handleCopyClick = useCallback((ref: React.RefObject<Input>) => {\n    const input = ref.current;\n\n    if (input) {\n      input.select();\n      navigator.clipboard.writeText(input.state.value);\n    }\n  }, []);\n\n  const handleGenerateKeysButton = useCallback(() => {\n    generateKeyPair && setKeyPair(generateKeyPair(algorithmType));\n  }, [algorithmType, generateKeyPair]);\n\n  const handleAddKeyConfirm = useCallback(() => {\n    if (keyPair?.publicKey)\n      dispatch(addApiKey({ service: props.service, signingKey: { name, publicKey: keyPair.publicKey } }));\n\n    props.onCancel();\n  }, [dispatch, name, props, keyPair]);\n\n  const editorsDisabled = !keyPair;\n  const modalBody = <>\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.name}:</span>\n    <Input disabled={editorsDisabled} autoFocus value={name} onChange={handleNameChanged} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.algorithm}:</span>\n    <div className=\"api-key-modal__algorithm-container\">\n      <Radio.Group disabled={editorsDisabled} options={algorithmOptions} value={algorithmType} onChange={handleAlgorithmTypeChanges} />\n      <Button disabled={editorsDisabled} onClick={handleGenerateKeysButton}>{servicesLangResources.devZone.generateKeys}</Button>\n    </div>\n    <Divider />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.publicKey}:</span>\n    <Search ref={publicKeyRef} disabled={editorsDisabled} readOnly value={keyPair?.publicKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(publicKeyRef)} />\n    <span className=\"api-key-modal__label\">{servicesLangResources.devZone.secretKey}:</span>\n    <Search ref={secretKeyRef} disabled={editorsDisabled} readOnly value={keyPair?.privateKey} enterButton={<Button icon={<CopyOutlined />} />} onSearch={() => handleCopyClick(secretKeyRef)} />\n    <Typography.Text mark>{servicesLangResources.devZone.saveSecretKeyWarning}</Typography.Text>\n  </>;\n\n  return <Modal className=\"api-key-modal\" title={servicesLangResources.devZone.addKey}\n    centered destroyOnClose visible={props.visible} onCancel={props.onCancel}\n    footer={<div className=\"api-key-modal__footer\">\n      <Button key=\"back\" onClick={props.onCancel}>\n        {commonLangResources.cancel}\n      </Button>\n      <Popconfirm\n        disabled={!name}\n        title={servicesLangResources.devZone.saveSecretKeyConfirm}\n        placement=\"topRight\"\n        onConfirm={handleAddKeyConfirm}\n        okText={commonLangResources.yes}\n        cancelText={commonLangResources.no}\n      >\n        <Button key=\"submit\" className=\"api-key-modal__ok-button\" type=\"primary\" disabled={!name}>\n          {servicesLangResources.devZone.saveKeys}\n        </Button>\n      </Popconfirm>\n    </div>}\n  >\n    {keyPair\n      ? modalBody\n      : <Spin size=\"large\" >{modalBody}</Spin>\n    }\n  </Modal>;\n};\n\nexport const AddApiKeyModalPure = React.memo(AddApiKeyModal);\n\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, List, Modal } from 'antd';\nimport React, { useCallback, useMemo } from 'react';\nimport { useDispatch } from 'react-redux';\n\nimport { Service, ServiceSigningKey } from '@tezospayments/common';\n\nimport { getCurrentAccount } from '../../../../../store/accounts/selectors';\nimport { deleteApiKey } from '../../../../../store/services/slice';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\nimport './ApiKeyList.scss';\n\ninterface ApiKeyListProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const ApiKeyList = (props: ApiKeyListProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n  const currentAccount = useAppSelector(getCurrentAccount);\n  const dispatch = useDispatch();\n  const apiKeys = useMemo(\n    () => {\n      let keys = [...props.service.signingKeys.values()];\n\n      if (currentAccount)\n        keys = keys.filter(k => k.publicKey !== currentAccount.publicKey);\n\n      return keys;\n    },\n    [currentAccount, props.service.signingKeys]\n  );\n\n  const confirm = useCallback((text: string, onOk: () => void) => {\n    Modal.confirm({\n      title: 'Confirm Operation',\n      onOk,\n      content: <p>{text}</p>,\n      okText: 'Yes',\n      okType: 'danger',\n      cancelText: 'No',\n      centered: true,\n      transitionName: '',\n      maskTransitionName: ''\n    });\n  }, []);\n\n  const handleRemoveItem = useCallback((item: ServiceSigningKey) => {\n    const text = servicesLangResources.devZone.deleteKeyConfirmation + (item.name ? `: ${item.name}` : '');\n    confirm(text, () => {\n      dispatch(deleteApiKey({ service: props.service, publicKey: item.publicKey }));\n    });\n  }, [confirm, dispatch, props.service, servicesLangResources.devZone.deleteKeyConfirmation]);\n\n  return <List size=\"small\" bordered>\n    {apiKeys.length\n      ? apiKeys.map(apiKey => <List.Item key={apiKey.publicKey} className=\"api-keys__item\">\n        <span>{apiKey.name}</span>\n        <div>\n          <span className=\"api-keys__item-key\">{apiKey.publicKey}</span>\n          <Button disabled={props.readOnly} onClick={() => handleRemoveItem(apiKey)} icon={<DeleteOutlined />} danger type=\"link\"></Button>\n        </div>\n      </List.Item>\n      ) :\n      <List.Item className=\"api-keys__item api-keys__item_empty\">\n        {servicesLangResources.devZone.noApiKeysAddedYet}\n      </List.Item>}\n  </List>;\n};\n\nexport const ApiKeyListPure = React.memo(ApiKeyList);\n","\nimport { Button, } from 'antd';\nimport React, { useCallback, useState } from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { AddApiKeyModalPure } from './AddApiKeyModal';\nimport { ApiKeyListPure } from './ApiKeyList';\n\nimport './DevZone.scss';\n\ninterface DevZoneProps {\n  service: Service;\n  readOnly: boolean;\n}\n\nexport const DevZone = (props: DevZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const [addKeyModalVisible, setAddKeyModalVisible] = useState(false);\n  const handleAddKeyButtonClick = useCallback(() => setAddKeyModalVisible(true), []);\n  const handleClosePopupClick = useCallback(() => setAddKeyModalVisible(false), []);\n\n  return <>\n    <div className=\"service-dev-zone__button-container\">\n      <span className=\"service-dev-zone__header\">{servicesLangResources.devZone.title}</span>\n      <Button disabled={props.readOnly} className=\"service-button\" type=\"default\" onClick={handleAddKeyButtonClick}>\n        {servicesLangResources.devZone.addKey}\n      </Button>\n    </div>\n    <ApiKeyListPure service={props.service} readOnly={props.readOnly} />\n    <AddApiKeyModalPure service={props.service} visible={addKeyModalVisible} onCancel={handleClosePopupClick} />\n  </>;\n};\n\nexport const DevZonePure = React.memo(DevZone);\n","import { EditFilled } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { Service, ServiceOperationType, combineClassNames, text } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { ExplorerLinkPure } from '../../../common';\nimport { ActiveTagPure, CustomTagPure } from '../../../common/Tags';\nimport { useCurrentLanguageResources } from '../../../hooks';\n\nimport './Header.scss';\n\ninterface HeaderProps {\n  service: Service;\n  isUpdating: boolean;\n  readOnly: boolean;\n}\n\nexport const Header = ({ service, isUpdating, readOnly }: HeaderProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const logoClassName = combineClassNames(\n    'service__logo',\n    service?.iconUrl ? 'service__logo_image' : 'service__logo_text',\n  );\n\n  const arePaymentsAllowed = service?.allowedOperationType === ServiceOperationType.Payment || service?.allowedOperationType === ServiceOperationType.All;\n  const areDonationsAllowed = service?.allowedOperationType === ServiceOperationType.Donation || service?.allowedOperationType === ServiceOperationType.All;\n\n  const handleEditClick = useCallback(() => {\n    history.push(`${config.routers.services}/${service.contractAddress}?edit=true`);\n  }, [history, service.contractAddress]);\n\n  return <div className=\"service-header\">\n    <div className=\"service-header__logo-container\">\n      {service.iconUrl\n        ? <img className={logoClassName} alt=\"logo\" src={service.iconUrl} />\n        : <span className={logoClassName}>{text.getAvatarText(service.name)}</span>}\n      <div className=\"service-header__main-info\">\n        <h1>{service.name}</h1>\n        <ExplorerLinkPure hash={service.contractAddress} className=\"service__link\" showCopyButton>\n          {service.contractAddress}\n        </ExplorerLinkPure>\n        <div className=\"service-header__tags-container\">\n          <ActiveTagPure paused={service.paused} deleted={service.deleted} isUpdating={isUpdating} />\n          {arePaymentsAllowed && <CustomTagPure text={servicesLangResources.operations.paymentsEnabled} />}\n          {areDonationsAllowed && <CustomTagPure text={servicesLangResources.operations.donationsEnabled} />}\n        </div>\n      </div>\n    </div>\n    <Button disabled={readOnly} className=\"service-button\" icon={<EditFilled />} type=\"primary\" onClick={handleEditClick}>{servicesLangResources.editing.editService}</Button>\n  </div>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","var _g;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport * as React from \"react\";\n\nfunction SvgTelegram({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: \"1000px\",\n    height: \"1000px\",\n    viewBox: \"0 0 1000 1000\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    xmlnsXlink: \"http://www.w3.org/1999/xlink\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _g || (_g = /*#__PURE__*/React.createElement(\"g\", {\n    id: \"Artboard\",\n    stroke: \"none\",\n    strokeWidth: 1,\n    fill: \"none\",\n    fillRule: \"evenodd\"\n  }, /*#__PURE__*/React.createElement(\"circle\", {\n    id: \"Oval\",\n    fill: \"currentColor\",\n    cx: 500,\n    cy: 500,\n    r: 500\n  }), /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z\",\n    id: \"Path-3\",\n    fill: \"#FFFFFF\"\n  }))));\n}\n\nconst ForwardRef = /*#__PURE__*/React.forwardRef(SvgTelegram);\nexport default __webpack_public_path__ + \"static/media/telegram.fee81c94.svg\";\nexport { ForwardRef as ReactComponent };","import {\n  LinkOutlined, FacebookOutlined, TwitterOutlined, InstagramOutlined,\n  GithubOutlined, MailOutlined, RedditOutlined\n} from '@ant-design/icons';\n\nimport { IconId } from '@tezospayments/common';\n\nimport { TelegramIcon } from '../../../assets/icons';\n\nexport const iconIdMap = {\n  [IconId.Common]: LinkOutlined,\n  [IconId.Email]: MailOutlined,\n  [IconId.Telegram]: TelegramIcon,\n  [IconId.Facebook]: FacebookOutlined,\n  [IconId.Twitter]: TwitterOutlined,\n  [IconId.Instagram]: InstagramOutlined,\n  [IconId.GitHub]: GithubOutlined,\n  [IconId.Reddit]: RedditOutlined\n};\n","import React from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { ExternalLink } from '../../common';\nimport { iconIdMap } from './iconIdMap';\nimport './ServiceLink.scss';\n\ninterface ServiceLinkProps {\n  link: string;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLink = (props: ServiceLinkProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.link);\n  if (!linkInfo)\n    return null;\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <span className=\"service-link\">\n    <Icon className=\"service-link__icon\" />\n    <ExternalLink className=\"service-link__link\" href={linkInfo.formattedLink}>{linkInfo.displayLink}</ExternalLink>\n  </span>;\n};\n\nexport const ServiceLinkPure = React.memo(ServiceLink);\n","import { combineClassNames } from '@tezospayments/common';\n\nimport { ServiceLink } from './ServiceLink';\nimport './ServiceLinks.scss';\n\ninterface ServiceLinksProps {\n  className?: string;\n  links: readonly string[];\n}\n\nexport const ServiceLinks = (props: ServiceLinksProps) => {\n  return <div className={combineClassNames('service-links', props.className)}>\n    {props.links.map(link => <ServiceLink link={link} key={link} />).filter(Boolean)}\n  </div>;\n};\n","import { DeleteOutlined } from '@ant-design/icons';\nimport { Button, Input } from 'antd';\nimport { useCallback } from 'react';\n\nimport { ServiceLinkHelper } from '@tezospayments/common';\n\nimport { iconIdMap } from './iconIdMap';\n\nimport './ServiceLinkEditor.scss';\n\ninterface ServiceLinkEditorProps {\n  value: string;\n  readOnly: boolean;\n  onChange: (e: { value: string }) => void\n  onDelete: () => void;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceLinkEditor = (props: ServiceLinkEditorProps) => {\n  const linkInfo = serviceLinkHelper.getLinkInfo(props.value, true);\n  const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    props.onChange({ value: e.target.value });\n  }, [props]);\n\n  if (!linkInfo) {\n    return null;\n  }\n\n  const Icon = iconIdMap[linkInfo.icon];\n\n  return <div className=\"service-link-editor\">\n    <Icon className=\"service-link-editor__icon\" />\n    <Input readOnly={props.readOnly} className=\"service-link-editor__input\" value={props.value} onChange={handleChange} />\n    <Button disabled={props.readOnly} className=\"service-link-editor__delete-button\" type=\"text\" danger icon={<DeleteOutlined />} onClick={props.onDelete} />\n  </div>;\n};\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport { useCallback } from 'react';\n\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { ServiceLinkEditor } from './ServiceLinkEditor';\n\nimport './ServiceLinksEditor.scss';\n\ninterface ServiceLinksEditorProps {\n  value: string[];\n  readOnly: boolean;\n  onChange: (e: { value: string[] }) => void;\n}\n\nexport const ServiceLinksEditor = (props: ServiceLinksEditorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const handleChange = useCallback((i: number, e: { value: string }) => {\n    const value = [...props.value];\n    value[i] = e.value;\n    props.onChange({ value });\n  }, [props]);\n\n  const handleDelete = useCallback((i: number) => {\n    const value = [...props.value];\n    value.splice(i, 1);\n    props.onChange({ value });\n  }, [props]);\n\n  const handleAdd = useCallback(() => {\n    const value = [...props.value, ''];\n    props.onChange({ value });\n  }, [props]);\n\n  const editors = props.value.map((l, i) => <ServiceLinkEditor readOnly={props.readOnly} key={i} value={l} onDelete={() => handleDelete(i)} onChange={e => handleChange(i, e)} />);\n\n  return <div className=\"service-links-editor\">\n    {editors}\n    <Button disabled={props.readOnly} className=\"service-links-editor__button\" icon={<PlusOutlined />} onClick={handleAdd}>\n      {servicesLangResources.editing.addLink}\n    </Button>\n  </div >;\n};\n","import { PlusOutlined } from '@ant-design/icons';\nimport { Button, Dropdown, Menu } from 'antd';\nimport { useCallback, useMemo } from 'react';\n\nimport { tezosMeta, Service } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../../store/services/selectors';\nimport { TokenListItem } from '../../../../common/TokenList/TokenListItem';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../../hooks';\n\nimport './TokensEditor.scss';\n\ninterface TokensEditorProps {\n  allowedTokens: Service['allowedTokens'];\n  onChange: (allowedTokens: Service['allowedTokens']) => void;\n}\n\ninterface TokenListEditorItemProps {\n  name: string;\n  address: string;\n  ticker: string;\n  iconSrc?: string;\n}\n\nexport const TokensEditor = (props: TokensEditorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  const tokens = useAppSelector(selectTokensState);\n  const selectedAddresses = useMemo<string[]>(() => {\n    const result: string[] = [];\n    if (props.allowedTokens.tez) {\n      result.push('');\n    }\n\n    props.allowedTokens.assets.forEach(a => {\n      const token = tokens.get(a);\n      if (token) {\n        result.push(token.contractAddress);\n      }\n    });\n\n    return result;\n  }, [props.allowedTokens.assets, props.allowedTokens.tez, tokens]);\n\n\n  const allItems: Map<string, TokenListEditorItemProps> = new Map();\n  allItems.set('', {\n    ticker: tezosMeta.symbol,\n    address: '',\n    name: tezosMeta.name,\n    iconSrc: tezosMeta.thumbnailUri\n  });\n\n  const allTokens = Array.from(tokens.values());\n  allTokens.forEach(t => {\n    if (t.metadata) {\n      allItems.set(t.contractAddress, {\n        ticker: t.metadata.symbol,\n        address: t.contractAddress,\n        name: t.metadata.name,\n        iconSrc: t.metadata.thumbnailUri\n      });\n    }\n  });\n\n  const handleTokensChanged = useCallback((addresses: string[]) => {\n    props.onChange({\n      tez: addresses.some(a => a === ''),\n      assets: addresses.filter(a => !!a)\n    });\n  }, [props]);\n\n  const handleAdd = useCallback((address: string) => handleTokensChanged([...selectedAddresses, address]), [handleTokensChanged, selectedAddresses]);\n  const handleDelete = useCallback((address: string) => handleTokensChanged(selectedAddresses.filter(a => a !== address)), [handleTokensChanged, selectedAddresses]);\n\n  const selectedItems = selectedAddresses.map(t => allItems.get(t) as TokenListEditorItemProps);\n  const unSelectedItems = Array.from(allItems.values()).filter(i => selectedAddresses.every(t => t !== i.address));\n\n  const menu = <Menu>\n    {unSelectedItems.map(i => <Menu.Item className=\"token-list-editor-menu-item\" key={i.ticker} onClick={() => handleAdd(i.address)}>\n      <img className=\"token-list-editor-menu-item__icon\" src={i.iconSrc} alt={i.name} />\n      <span className=\"token-list-editor-menu-item__ticker\">{i.ticker}</span>\n      <span className=\"token-list-editor-menu-item__name\">{i.name}</span>\n    </Menu.Item >)}\n  </Menu>;\n\n  return <>\n    <ul className=\"token-list-editor\">\n      {selectedItems.map(i => <TokenListItem className=\"token-list-editor__item\" key={i.address} name={i.name} contractAddress={i.address}\n        ticker={i.ticker} iconSrc={i.iconSrc} handleDelete={handleDelete} />)}\n    </ul>\n\n    {unSelectedItems.length > 0 && <Dropdown trigger={['click']} overlay={menu} placement=\"bottomCenter\">\n      <Button className=\"token-list-editor__add-button\" icon={<PlusOutlined />}>\n        {servicesLangResources.editing.addCurrency}\n      </Button>\n    </Dropdown>}\n  </>;\n};\n","import { Button, Checkbox, Input } from 'antd';\nimport { CheckboxChangeEvent } from 'antd/lib/checkbox';\nimport React, { useCallback, useEffect, useState } from 'react';\nimport { useHistory } from 'react-router-dom';\n\nimport { ServiceLinkHelper, Service, ServiceOperationType, ServiceSigningKey } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { getCurrentAccount } from '../../../../store/accounts/selectors';\nimport { createService, updateService } from '../../../../store/services/slice';\nimport { ServiceLinksEditor } from '../../../common/ServiceLinks';\nimport { useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { View } from '../../View';\nimport { TokensEditor } from './TokensEditor';\n\nimport './ServiceEditForm.scss';\n\ninterface ServiceEditFormProps {\n  service: Service;\n  isCreateMode: boolean;\n  readOnly: boolean;\n}\n\nconst serviceLinkHelper = new ServiceLinkHelper();\n\nexport const ServiceEditForm = (props: ServiceEditFormProps) => {\n  const history = useHistory();\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const servicesLangResources = langResources.views.services;\n  const currentAccount = useAppSelector(getCurrentAccount);\n\n  const dispatch = useAppDispatch();\n\n  const handleCancelClick = useCallback(() => {\n    history.push(`${config.routers.services}/${props.service.contractAddress}`);\n  }, [history, props.service.contractAddress]);\n\n  const [isFormValid, setIsFormValid] = useState(false);\n  const [name, setName] = useState(props.service.name);\n  const [description, setDescription] = useState(props.service.description);\n  const [links, setLinks] = useState(props.service.links);\n  const [allowedTokens, setAllowedTokens] = useState(props.service.allowedTokens);\n\n  const validate = useCallback(() => {\n    const isValid = !!name\n      && links.every(l => !!serviceLinkHelper.getLinkInfo(l))\n      && (allowedTokens.tez || allowedTokens.assets.length > 0);\n\n    setIsFormValid(isValid);\n  }, [allowedTokens.assets.length, allowedTokens.tez, links, name]);\n\n  useEffect(() => validate(), [validate]);\n\n  const handleNameChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setName(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setDescription(e.target.value);\n    validate();\n  }, [validate]);\n\n  const handleLinksChange = useCallback((e: { value: string[] }) => {\n    setLinks(e.value);\n    validate();\n  }, [validate]);\n\n  const [acceptPayments, setAcceptPayments] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Payment);\n  const [acceptDonations, setAcceptDonations] = useState(props.service.allowedOperationType === ServiceOperationType.All || props.service.allowedOperationType === ServiceOperationType.Donation);\n\n  const handleAllowedTokensChange = useCallback((allowedTokens: Service['allowedTokens']) => {\n    setAllowedTokens(allowedTokens);\n    validate();\n  }, [validate]);\n\n  const handleAcceptPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptPayments(e.target.checked);\n    if (!e.target.checked && !acceptDonations) {\n      setAcceptDonations(true);\n    }\n  }, [acceptDonations]);\n\n  const handleDonationsPaymentsChange = useCallback((e: CheckboxChangeEvent) => {\n    setAcceptDonations(e.target.checked);\n    if (!e.target.checked && !acceptPayments) {\n      setAcceptPayments(true);\n    }\n  }, [acceptPayments]);\n\n  const handleUpdateClick = useCallback(() => {\n    const allowedOperationType = acceptPayments && acceptDonations\n      ? ServiceOperationType.All\n      : acceptPayments\n        ? ServiceOperationType.Payment\n        : ServiceOperationType.Donation;\n\n    const isNewService = props.isCreateMode && !!currentAccount;\n    const updatedService: Service = {\n      ...props.service,\n      name,\n      description,\n      allowedOperationType,\n      allowedTokens,\n      links,\n      signingKeys: isNewService\n        ? new Map<ServiceSigningKey['publicKey'], ServiceSigningKey>().set(currentAccount.publicKey, { publicKey: currentAccount.publicKey })\n        : props.service.signingKeys,\n      network: isNewService ? currentAccount.network : props.service.network\n    };\n\n    if (props.isCreateMode) {\n      dispatch(createService(updatedService));\n    } else {\n      dispatch(updateService(updatedService));\n    }\n\n    handleCancelClick();\n  }, [acceptDonations, acceptPayments, allowedTokens, currentAccount, description, dispatch, handleCancelClick, links, name, props.isCreateMode, props.service]);\n\n  const operationName = props.isCreateMode ? servicesLangResources.editing.createService : servicesLangResources.editing.updateService;\n\n  return <>\n    <View.Title>{operationName}</View.Title>\n    <div className=\"service-edit\">\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.serviceName}</span>\n      <Input readOnly={props.readOnly} placeholder={servicesLangResources.editing.serviceName} value={name} onChange={handleNameChange} />\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.description}</span>\n      <Input.TextArea readOnly={props.readOnly} rows={5} placeholder={servicesLangResources.editing.description} value={description} onChange={handleDescriptionChange} />\n      <div className=\"service-edit__lists-container\">\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.allowedCurrencies}</span>\n          <TokensEditor allowedTokens={allowedTokens} onChange={handleAllowedTokensChange} />\n        </div>\n        <div className=\"service-edit__list-container\">\n          <span className=\"service-edit__list-header\">{servicesLangResources.links}</span>\n          <ServiceLinksEditor readOnly={props.readOnly} value={links as string[]} onChange={handleLinksChange} />\n        </div>\n      </div>\n      <span className=\"service-edit__caption\">{servicesLangResources.editing.accept}</span>\n      <div className=\"service-edit__accept-list\">\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptPayments} onChange={handleAcceptPaymentsChange}>\n          {servicesLangResources.editing.acceptPayments}\n        </Checkbox>\n        <Checkbox disabled={props.readOnly} className=\"service-edit__accept-list-item\" checked={acceptDonations} onChange={handleDonationsPaymentsChange}>\n          {servicesLangResources.editing.acceptDonations}\n        </Checkbox>\n      </div>\n      <div className=\"service-edit__buttons-container\">\n        <Button className=\"service-edit__button\" onClick={handleCancelClick}>{commonLangResources.cancel}</Button>\n        <Button className=\"service-edit__button\" onClick={handleUpdateClick} disabled={!isFormValid || props.readOnly} type=\"primary\">{operationName}</Button>\n      </div>\n    </div>\n  </>;\n};\n\nexport const ServiceEditFormPure = React.memo(ServiceEditForm);\n","import React from 'react';\n\nimport { tezosMeta, Token, Service } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../../store/services/selectors';\nimport { TokenList } from '../../../../common';\nimport { useAppSelector } from '../../../../hooks';\n\nimport './Tokens.scss';\n\ninterface TokensProps {\n  service: Service\n}\n\nexport const Tokens = ({ service }: TokensProps) => {\n  const tokens = useAppSelector(selectTokensState);\n  const allowedTokens: Token[] = [];\n  service?.allowedTokens.assets.forEach(a => {\n    const token = tokens.get(a);\n    if (token) {\n      allowedTokens.push(token);\n    }\n  });\n\n  const tokenItems = [];\n  if (service?.allowedTokens.tez) {\n    tokenItems.push(<TokenList.Item\n      key={tezosMeta.symbol}\n      contractAddress={''}\n      className=\"service-token-list-item\"\n      ticker={tezosMeta.symbol}\n      name={tezosMeta.name}\n      decimals={tezosMeta.decimals}\n      iconSrc={tezosMeta.thumbnailUri}\n      highlightSign />);\n  }\n\n  allowedTokens.forEach(t => {\n    if (t.metadata) {\n      tokenItems.push(<TokenList.Item\n        key={t.metadata.symbol}\n        contractAddress={t.contractAddress}\n        className=\"service-token-list-item\"\n        ticker={t.metadata.symbol}\n        name={t.metadata.name}\n        decimals={t.metadata.decimals}\n        iconSrc={t.metadata.thumbnailUri}\n        highlightSign />);\n    }\n  });\n\n  return <TokenList>\n    {tokenItems}\n  </TokenList>;\n};\n\nexport const TokensPure = React.memo(Tokens);\n","import React from 'react';\n\nimport { Service } from '@tezospayments/common';\n\nimport { ServiceLinks } from '../../../common/ServiceLinks';\nimport { useCurrentLanguageResources } from '../../../hooks';\nimport { TokensPure } from './Tokens';\n\nimport './ViewZone.scss';\n\ninterface ViewZoneProps {\n  service: Service;\n}\n\nexport const ViewZone = ({ service }: ViewZoneProps) => {\n  const langResources = useCurrentLanguageResources();\n  const servicesLangResources = langResources.views.services;\n\n  return <div className=\"service-view-zone\">\n    <p className=\"service-view-zone__description\">{service.description}</p>\n    <div className=\"service-view-zone__lists-container\">\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.allowedCurrencies}</span>\n        <TokensPure service={service} />\n      </div>\n      <div className=\"service-view-zone__list-container\">\n        <span className=\"service-view-zone__list-header\">{servicesLangResources.links}</span>\n        <ServiceLinks className=\"service-info__links\" links={service.links} />\n      </div>\n    </div>\n  </div>;\n};\n\nexport const ViewZonePure = React.memo(ViewZone);\n","import { Skeleton } from 'antd';\nimport React from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { emptyService, Service as ServiceInterface, combineClassNames } from '@tezospayments/common';\n\nimport { getOperationsByService, selectServicesState } from '../../../store/services/selectors';\nimport { useAppSelector, useQuery } from '../../hooks';\nimport { View } from '../View';\nimport { ActionsZonePure } from './ActionsZone';\nimport { DangerZonePure } from './DangerZone';\nimport { DevZonePure } from './DevZone';\nimport { HeaderPure } from './Header';\nimport { ServiceEditFormPure } from './ServiceEditForm';\nimport { ViewZonePure } from './ViewZone';\n\nimport './Service.scss';\n\nexport enum ServiceViewMode {\n  ViewAndEdit, Create\n}\n\ninterface ServiceProps {\n  mode: ServiceViewMode,\n}\n\nexport const Service = (props: ServiceProps) => {\n  const query = useQuery();\n  const isEdit = !!query.get('edit');\n  const { address } = useParams<{ address: string }>();\n  const { services, initialized: isInitialized } = useAppSelector(selectServicesState);\n  const pendingOperations = useAppSelector(getOperationsByService);\n  const isUpdating = pendingOperations.has(address);\n  const readOnly = !!pendingOperations.size;\n  const isCreateMode = props.mode === ServiceViewMode.Create;\n\n  //TODO: Use Map\n  const service = isCreateMode ? { ...emptyService } as ServiceInterface : services.filter(s => s.contractAddress === address)[0];\n\n  const title = isInitialized && service ? service.name : address;\n  const className = combineClassNames('service-container', isEdit || isCreateMode ? 'service-container_edit' : 'service-container_view');\n\n  return <View title={title} className={className}>\n    {!isInitialized || !service\n      ? <Skeleton active />\n      : isEdit || isCreateMode\n        ? <ServiceEditFormPure service={service} isCreateMode={isCreateMode} readOnly={readOnly} />\n        : <>\n          <HeaderPure service={service} isUpdating={isUpdating} readOnly={readOnly} />\n          <ViewZonePure service={service} />\n          <ActionsZonePure service={service} readOnly={isUpdating || service.deleted} />\n          <DevZonePure service={service} readOnly={readOnly} />\n          <DangerZonePure service={service} readOnly={readOnly} />\n        </>}\n  </View>;\n};\n\nexport const ServicePure = React.memo(Service);\n","import { useLocation } from 'react-router-dom';\n\nexport const useQuery = () => {\n  return new URLSearchParams(useLocation().search);\n};\n","import { GlobalOutlined, GithubFilled, TwitterCircleFilled, RedditCircleFilled } from '@ant-design/icons';\nimport React from 'react';\n\nimport { TelegramIcon } from '../../../assets/icons';\nimport { config } from '../../../config';\nimport { ExternalLink } from '../../common';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport './About.scss';\n\nexport const About = () => {\n  const langResources = useCurrentLanguageResources();\n  const aboutLangResources = langResources.views.about;\n\n  return <View title={aboutLangResources.title} className=\"about-view\">\n    <View.Title className=\"about-view__title\">{aboutLangResources.detailedTitle}</View.Title>\n    <div className=\"about-view__version-info\">\n      <ExternalLink href={config.app.version.link}>\n        {config.app.version.name}\n      </ExternalLink>\n      &nbsp;{aboutLangResources.build}&nbsp;\n      <ExternalLink href={config.app.buildInfo.link}>\n        {config.app.buildInfo.commitShortSha}\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__links\">\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.webSite}>\n        <GlobalOutlined className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.gitHub}>\n        <GithubFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.telegram}>\n        <TelegramIcon className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.twitter}>\n        <TwitterCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n      <ExternalLink className=\"about-link\" href={config.links.tezosPayments.reddit}>\n        <RedditCircleFilled className=\"about-link__icon\" />\n      </ExternalLink>\n    </div>\n    <div className=\"about-view__powered-by\">\n      {aboutLangResources.poweredBy}\n      &nbsp;\n      <ExternalLink href={config.links.tzKT}>\n        {aboutLangResources.tzKt}\n      </ExternalLink>\n      &nbsp;\n      {aboutLangResources.api}\n    </div>\n  </View>;\n};\n\nexport const AboutPure = React.memo(About);\n","import { Button, Dropdown, Menu } from 'antd';\nimport React, { useCallback } from 'react';\n\nimport { Network, networks, networksCollection } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\nimport { connectAccount } from '../../../../store/accounts/slice';\nimport { useAppDispatch, useCurrentLanguageResources } from '../../../hooks';\n\nimport './ConnectDropdown.scss';\n\nexport const ConnectDropdown = () => {\n  const dispatch = useAppDispatch();\n  const handleConnectButtonClick = useCallback(() => {\n    dispatch(connectAccount(networks.granadanet));\n  }, [dispatch]);\n\n  const handleMenuItemButtonClick = useCallback((e: { key: string }) => {\n    const selectedNetwork = networksCollection.find(n => n.id === e.key);\n    if (selectedNetwork) {\n      dispatch(connectAccount(selectedNetwork));\n    }\n  }, [dispatch]);\n\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const networkTypes: Network[] = [];\n  const connectMenuItems = networkTypes.map(t => {\n    const network = config.tezos.networks[t.name];\n\n    return <Menu.Item key={t.id}>\n      <div className=\"connect-dropdown__item-container\">\n        <div className=\"connect-dropdown__item-icon-container\">\n          <div className=\"connect-dropdown__item-icon\" style={{ backgroundColor: network.color }}></div>\n        </div>\n        <div className=\"connect-dropdown__item-text\">{`${connectLangResources.connectTo} ${network.title}`}</div>\n      </div>\n    </Menu.Item>;\n  });\n\n  const connectMenu = (\n    <Menu onClick={handleMenuItemButtonClick}>\n      {connectMenuItems}\n    </Menu>\n  );\n\n  const connectButtonTitle = `${connectLangResources.connectTo} ${config.tezos.networks.granadanet.title}`;\n\n  return connectMenuItems.length\n    ? <Dropdown.Button className=\"connect-dropdown\" type=\"primary\" onClick={handleConnectButtonClick} overlay={connectMenu}>\n      {connectButtonTitle}\n    </Dropdown.Button>\n    : <Button type=\"primary\" onClick={handleConnectButtonClick}>{connectButtonTitle}</Button>;\n};\n\nexport const ConnectDropdownPure = React.memo(ConnectDropdown);\n","import React from 'react';\nimport { Redirect } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { getCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport './Connect.scss';\nimport { ConnectDropdownPure } from './ConnectDropdown';\n\nexport const Connect = () => {\n  const langResources = useCurrentLanguageResources();\n  const connectLangResources = langResources.views.connect.actions.connect;\n\n  const currentAccount = useAppSelector(getCurrentAccount);\n  if (currentAccount) {\n    return <Redirect push to={config.routers.overview} />;\n  }\n\n  return <View title=\"Connect\" className=\"connect\">\n    <div className=\"connect-info-container\">\n      <div className=\"connect-info-container__message\">{connectLangResources.description}</div>\n      <ConnectDropdownPure />\n    </div>\n  </View >;\n};\nexport const ConnectPure = React.memo(Connect);\n","import { InputNumber, Select } from 'antd';\nimport React from 'react';\n\nimport { tezosMeta, Token } from '@tezospayments/common';\n\nimport './PaymentAmount.scss';\nimport { selectServicesState, selectTokensState } from '../../../../store/services/selectors';\nimport { useAppSelector } from '../../../hooks';\n\ninterface DonationAmountProps {\n  serviceAddress: string | undefined;\n  amount: string;\n  onAmountChange: (rawValue: string) => void;\n  asset: string | undefined;\n  onAssetChange: (ticker: string) => void;\n}\n\nexport const PaymentAmount = (props: DonationAmountProps) => {\n  const services = useAppSelector(selectServicesState);\n  const service = services.services.find(s => s.contractAddress === props.serviceAddress);\n  const tokens = useAppSelector(selectTokensState);\n  const assets: Array<{ label: string; value: string; imageUrl: string }> = [];\n\n  if (service) {\n    const allowedTokens: Token[] = [];\n    service.allowedTokens.assets.forEach(a => {\n      const token = tokens.get(a);\n      if (token) {\n        allowedTokens.push(token);\n      }\n    });\n\n    if (service.allowedTokens.tez) {\n      assets.push({ label: tezosMeta.symbol, value: '', imageUrl: tezosMeta.thumbnailUri });\n    }\n    allowedTokens.forEach(t => t.metadata && assets.push({ label: t.metadata.symbol, value: t.contractAddress, imageUrl: t.metadata.thumbnailUri }));\n  }\n\n  const options = assets.map(a => <Select.Option key={a.label} value={a.value} label={a.label}>\n    <div className=\"payment-amount__select-option\">\n      <img className=\"payment-amount__select-option-image\" alt={a.label} src={a.imageUrl} />\n      <span className=\"payment-amount__select-option-label\">{a.label}</span>\n    </div>\n  </Select.Option>);\n\n  const disabled = assets.length === 0;\n\n  return <div className=\"payment-amount\">\n    <Select className=\"payment-amount__select\" value={props.asset || ''} onChange={props.onAssetChange} disabled={disabled}>\n      {options}\n    </Select>\n    <InputNumber\n      className=\"payment-amount__input\"\n      stringMode\n      min={'0'}\n      value={props.amount.toString()}\n      onChange={props.onAmountChange}\n      disabled={disabled} />\n  </div>;\n};\n\nexport const PaymentAmountPure = React.memo(PaymentAmount);\n","import { Input, Radio, RadioChangeEvent, Select } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport React from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { PaymentType } from '@tezospayments/common';\n\nimport { getOperationsByService, getSortedServices } from '../../../../store/services/selectors';\nimport { useAppSelector, useCurrentLanguageResources } from '../../../hooks';\nimport { PaymentAmountPure } from '../PaymentAmount';\n\nimport './AcceptPaymentsSettings.scss';\n\ninterface AcceptPaymentsSettingsProps {\n  serviceAddress: string | undefined;\n  onServiceAddressChange: (value: SelectValue) => void;\n\n  paymentType: PaymentType;\n  onPaymentTypeChange: (e: RadioChangeEvent) => void;\n\n  amount: string;\n  onAmountChange: (rawValue: string) => void;\n\n  asset: string | undefined;\n  onAssetChange: (rawValue: string | undefined) => void;\n\n  paymentId: string;\n  onPaymentIdChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\n\n  donationDescription: string;\n  onDonationDescriptionChange: (e: React.ChangeEvent<HTMLTextAreaElement>) => void;\n}\n\nexport const AcceptPaymentsSettings = (props: AcceptPaymentsSettingsProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const serviceLangResources = langResources.views.services;\n  const operationsByService = useSelector(getOperationsByService);\n\n  const services = useAppSelector(getSortedServices);\n  const serviceOptions = services.filter(s => !s.deleted).map(service => ({\n    label: service.name,\n    value: service.contractAddress,\n    disabled: operationsByService.has(service.contractAddress)\n  }));\n\n  const typeOptions = [\n    { label: 'Payment', value: PaymentType.Payment },\n    { label: 'Donation', value: PaymentType.Donation },\n  ];\n\n  return <div className=\"accept-payments-settings\">\n    <span className=\"accept-payments-settings__caption\">{serviceLangResources.service}</span>\n    <Select\n      className=\"accept-payments-settings__service-select\"\n      options={serviceOptions}\n      value={props.serviceAddress}\n      onChange={props.onServiceAddressChange}\n    />\n\n    <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.type}</span>\n    <Radio.Group\n      className=\"accept-payments-settings__type-select\"\n      optionType=\"button\"\n      buttonStyle=\"outline\"\n      options={typeOptions}\n      value={props.paymentType}\n      onChange={props.onPaymentTypeChange}\n    />\n\n    {props.paymentType === PaymentType.Payment\n      ? <>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.amount}</span>\n        <PaymentAmountPure serviceAddress={props.serviceAddress} amount={props.amount} onAmountChange={props.onAmountChange}\n          asset={props.asset} onAssetChange={props.onAssetChange} />\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.paymentData}</span>\n        <span className=\"accept-payments-settings__caption\">{acceptPaymentsLangResources.paymentId}</span>\n        <Input className=\"accept-payments-settings__payment-id-input\" value={props.paymentId} onChange={props.onPaymentIdChange} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.paymentIdHelpText}</span>\n      </>\n      : <>\n        <span className=\"accept-payments-settings__header\">{acceptPaymentsLangResources.donationData}</span>\n        <span className=\"accept-payments-settings__description-caption\">{acceptPaymentsLangResources.donationDescription}</span>\n        <Input.TextArea className=\"accept-payments-settings__description-input\" value={props.donationDescription} onChange={props.onDonationDescriptionChange}\n          showCount rows={5} maxLength={250} />\n        <span className=\"accept-payments-settings__help-text\">{acceptPaymentsLangResources.donationDescriptionHelpText}</span>\n      </>}\n  </div>;\n};\n\nexport const AcceptPaymentsSettingsPure = React.memo(AcceptPaymentsSettings);\n","import { CopyOutlined } from '@ant-design/icons';\nimport { Button } from 'antd';\nimport React, { useCallback, useState, useEffect } from 'react';\nimport { internal as tezosPaymentsInternal } from 'tezospayments';\n\nimport { Donation, Payment, PaymentType, networks } from '@tezospayments/common';\n\nimport { config } from '../../../../../config';\nimport { getCurrentAccount } from '../../../../../store/accounts/selectors';\nimport { ExternalLink } from '../../../../common';\nimport { useAppSelector, useCurrentLanguageResources, useTezosPayments } from '../../../../hooks';\n\nimport './DirectLinkGenerator.scss';\n\ninterface DirectLinkGeneratorProps {\n  paymentOrDonation: Payment | Donation;\n  serviceAddress: string | undefined;\n}\n\nconst base64PaymentUrlFactory = new tezosPaymentsInternal.paymentUrlFactories.Base64PaymentUrlFactory(\n  config.links.tezosPayments.paymentsApp\n);\n\nexport const DirectLinkGenerator = ({ paymentOrDonation, serviceAddress }: DirectLinkGeneratorProps) => {\n  const langResources = useCurrentLanguageResources();\n  const commonLangResources = langResources.common;\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const currentAccount = useAppSelector(getCurrentAccount);\n  const tezosPayments = useTezosPayments(serviceAddress);\n\n  const [url, setUrl] = useState('');\n\n  const getPaymentLink = useCallback(\n    async () => {\n      const network = currentAccount?.network || networks[config.tezos.defaultNetwork];\n\n      if (paymentOrDonation.type === PaymentType.Donation)\n        return base64PaymentUrlFactory.createPaymentUrl(paymentOrDonation, network);\n\n      if (!tezosPayments)\n        return '';\n\n      try {\n        const payment = await tezosPayments.createPayment({\n          id: paymentOrDonation.id,\n          amount: paymentOrDonation.amount.toString(),\n          asset: paymentOrDonation.asset,\n          created: Date.now(),\n          data: paymentOrDonation.data,\n        });\n\n        return payment.url;\n      }\n      catch (e) {\n        console.error(e);\n        return '';\n      }\n    }, [currentAccount?.network, paymentOrDonation, tezosPayments]\n  );\n\n  useEffect(() => {\n    (async () => {\n      setUrl(paymentOrDonation.type === PaymentType.Payment ? '' : await getPaymentLink());\n    })();\n  }, [getPaymentLink, paymentOrDonation]);\n\n  const helpText = paymentOrDonation.type === PaymentType.Payment\n    ? acceptPaymentsLangResources.directLinkPaymentHelpText\n    : acceptPaymentsLangResources.directLinkDonationHelpText;\n\n  const handleGenerateAndSignClick = useCallback(() => {\n    (async () => {\n      setUrl(await getPaymentLink());\n    })();\n  }, [getPaymentLink]);\n\n  const handleCopyClick = useCallback(() => {\n    navigator.clipboard.writeText(url);\n  }, [url]);\n\n  return <div className=\"generator__direct-link\">\n    {url && <span className=\"generator__direct-link-help-text\">{helpText}</span>}\n    <ExternalLink className=\"generator__direct-link-link\" href={url}>{url}</ExternalLink>\n    <div className=\"generator__direct-link-buttons\">\n      {!url && <Button type=\"primary\" onClick={handleGenerateAndSignClick}>{acceptPaymentsLangResources.generateAndSignPaymentLink}</Button>}\n      {url && <Button onClick={handleCopyClick} icon={<CopyOutlined />}>{commonLangResources.copyLink}</Button>}\n    </div>\n  </div >;\n};\n\nexport const DirectLinkGeneratorPure = React.memo(DirectLinkGenerator);\n","import React from 'react';\n\nimport { FailedValidationResults } from '@tezospayments/common';\n\nimport './FailedValidationResult.scss';\nimport { useCurrentLanguageResources } from '../../../../hooks';\n\ninterface FailedValidationResultProps {\n  results: FailedValidationResults\n}\n\nexport const FailedValidationResult = (_props: FailedValidationResultProps) => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n\n  return <div className=\"failed-validation-result\">\n    {acceptPaymentsLangResources.errors.fillRequiredData}\n  </div>;\n};\n\nexport const FailedValidationResultPure = React.memo(FailedValidationResult);\n","import { Card } from 'antd';\nimport BigNumber from 'bignumber.js';\nimport React from 'react';\n\nimport { Donation, Payment, PaymentType } from '@tezospayments/common';\n\nimport { selectTokensState } from '../../../../store/services/selectors';\nimport { useAppSelector, useTezosPayments } from '../../../hooks';\nimport { DirectLinkGeneratorPure } from './DirectLinkGenerator';\nimport { FailedValidationResult } from './FailedValidationResult';\nimport './Generator.scss';\n\ninterface GeneratorProps {\n  serviceAddress: string | undefined;\n  paymentType: PaymentType;\n  assetAddress: string | undefined;\n  amount: string;\n  paymentId: string;\n  clientData: Record<string, unknown> | undefined;\n}\n\nexport const Generator = (props: GeneratorProps) => {\n  const tokens = useAppSelector(selectTokensState);\n  const tezosPayments = useTezosPayments(props.serviceAddress);\n  const currentAssetToken = props.assetAddress ? tokens.get(props.assetAddress) : undefined;\n\n  const tabList = [\n    { key: 'widget', tab: 'Widget', disabled: true },\n    { key: 'typescript', tab: 'TypeScript Library', disabled: true },\n    { key: 'dotnet', tab: '.NET Library', disabled: true },\n  ] as Array<{ key: string, tab: string, disabled?: boolean }>;\n\n  if (tezosPayments) {\n    tabList.splice(0, 0, { key: 'directLink', tab: 'Direct Link' });\n  }\n\n  const paymentOrDonation = props.paymentType === PaymentType.Payment\n    ? {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n      id: props.paymentId,\n      asset: currentAssetToken ? {\n        address: currentAssetToken.contractAddress,\n        decimals: currentAssetToken.metadata?.decimals || 0,\n        id: currentAssetToken.type === 'fa2' ? currentAssetToken.id : null\n      } : undefined,\n      amount: new BigNumber(props.amount),\n      created: new Date(),\n      signature: {\n        signingPublicKey: 'edpkuWJYhY5TVZ6xaoubNkidXArJmVhjA2yuZZuucEN6FF4fQeV9Dd',\n        contract: 'edsigtaNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNog2Ndso',\n      }\n    } as Payment\n    : {\n      type: props.paymentType,\n      targetAddress: props.serviceAddress,\n      data: props.clientData\n    } as Donation;\n\n  const failedValidationResults = paymentOrDonation.type === PaymentType.Payment\n    ? Payment.validate(paymentOrDonation)\n    : Donation.validate(paymentOrDonation);\n\n  return <Card\n    className=\"generator\"\n    style={{ width: '100%' }}\n    tabList={tabList}\n    activeTabKey={'directLink'}\n  >\n    {failedValidationResults\n      ? <FailedValidationResult results={failedValidationResults} />\n      : <DirectLinkGeneratorPure paymentOrDonation={paymentOrDonation} serviceAddress={props.serviceAddress} />}\n  </Card >;\n};\n\nexport const GeneratorPure = React.memo(Generator);\n","import { RadioChangeEvent, Skeleton } from 'antd';\nimport { SelectValue } from 'antd/lib/select';\nimport BigNumber from 'bignumber.js';\nimport React, { useCallback, useState } from 'react';\nimport { useParams } from 'react-router-dom';\n\nimport { PaymentType, tezosMeta } from '@tezospayments/common';\n\nimport { selectServicesState, selectTokensState } from '../../../store/services/selectors';\nimport { NoServicesCreatedPure } from '../../common/NoServicesCreated';\nimport { useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { View } from '../View';\nimport { AcceptPaymentsSettings } from './AcceptPaymentsSettings';\nimport { GeneratorPure } from './Generator';\n\nimport './AcceptPayments.scss';\n\nexport const AcceptPayments = () => {\n  const langResources = useCurrentLanguageResources();\n  const acceptPaymentsLangResources = langResources.views.acceptPayments;\n  const servicesState = useAppSelector(selectServicesState);\n  const tokens = useAppSelector(selectTokensState);\n\n  const { address: addressFromUrl } = useParams<{ address: string }>();\n  const [serviceAddress, setServiceAddress] = useState<string | undefined>(addressFromUrl);\n  const [paymentType, setPaymentType] = useState<PaymentType>(PaymentType.Payment);\n  const [amount, setAmount] = useState<string>('');\n\n  const getDefaultAsset = useCallback((serviceAddress: string | undefined) => {\n    const service = servicesState.services.filter(s => s.contractAddress === serviceAddress)[0];\n\n    return service\n      ? service.allowedTokens.tez ? undefined : service.allowedTokens.assets[0]\n      : undefined;\n  }, [servicesState.services]);\n\n  const [asset, setAsset] = useState<string | undefined>(getDefaultAsset(serviceAddress));\n  const [paymentId, setPaymentId] = useState<string>('');\n  const [clientData, setClientData] = useState<Record<string, string>>();\n\n  const decimals = asset ? tokens.get(asset)?.metadata?.decimals || 0 : tezosMeta.decimals;\n\n  const handleServiceAddressChange = useCallback((value: SelectValue) => {\n    const service = value as string;\n    setServiceAddress(service);\n    setAsset(getDefaultAsset(service));\n  }, [getDefaultAsset]);\n\n  const handlePaymentTypeChange = useCallback((e: RadioChangeEvent) => {\n    setPaymentType(e.target.value);\n  }, []);\n\n  const handleAmountChange = useCallback((rawValue: string) => {\n    const formattedValue = rawValue ? new BigNumber(rawValue).toFormat(decimals, { groupSeparator: '', decimalSeparator: '.' }) : '';\n    setAmount(formattedValue);\n  }, [decimals]);\n\n  const handleAssetChange = useCallback((rawValue: string | undefined) => {\n    setAsset(rawValue || undefined);\n    setAmount('');\n  }, []);\n\n  const handlePaymentIdChange = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\n    setPaymentId(e.target.value);\n  }, []);\n\n  const handleDonationDescriptionChange = useCallback((e: React.ChangeEvent<HTMLTextAreaElement>) => {\n    setClientData({ description: e.target.value });\n  }, []);\n\n  return <View title={acceptPaymentsLangResources.title}>\n    <View.Title>{acceptPaymentsLangResources.title}</View.Title>\n    {!servicesState.initialized\n      ? <Skeleton active />\n      : !servicesState.services.length\n        ? <NoServicesCreatedPure />\n        : <div className=\"accept-payments\">\n          <div className=\"accept-payments__settings\">\n            <AcceptPaymentsSettings\n              serviceAddress={serviceAddress} onServiceAddressChange={handleServiceAddressChange}\n              paymentType={paymentType} onPaymentTypeChange={handlePaymentTypeChange}\n              amount={amount} onAmountChange={handleAmountChange}\n              asset={asset} onAssetChange={handleAssetChange}\n              paymentId={paymentId} onPaymentIdChange={handlePaymentIdChange}\n              donationDescription={clientData?.description || ''} onDonationDescriptionChange={handleDonationDescriptionChange}\n            />\n          </div>\n          <div className=\"accept-payments__generator\">\n            <GeneratorPure\n              serviceAddress={serviceAddress}\n              paymentType={paymentType}\n              assetAddress={asset}\n              amount={amount}\n              paymentId={paymentId}\n              clientData={clientData}\n            />\n          </div>\n        </div>}\n  </View >;\n};\n\nexport const AcceptPaymentsPure = React.memo(AcceptPayments);\n","import { StateModel, Network } from '@tezospayments/common';\n\nexport interface Account {\n  readonly address: string;\n  readonly publicKey: string;\n  readonly network: Network;\n}\n\nexport class Account extends StateModel {\n  static getShortAddress(account: Account) {\n    return `${account.address.substr(0, 9)}...${account.address.substr(account.address.length - 6, 6)}`;\n  }\n}\n","import React from 'react';\n\nimport { Network } from '@tezospayments/common';\n\nimport { config } from '../../../../config';\n\nimport './AccountNetworkGroup.scss';\n\ninterface AccountNetworkGroupProps {\n  network: Network;\n}\n\nexport const AccountNetworkGroup = (props: AccountNetworkGroupProps) => {\n  const network = config.tezos.networks[props.network.name];\n\n  return <div className=\"account-network-group\">\n    <div className=\"account-network-group__icon-container\">\n      <div className=\"account-network-group__icon\" style={{ backgroundColor: network.color }}></div>\n    </div>\n    <div>{network.title}</div>\n  </div>;\n};\n\nexport const AccountNetworkGroupPure = React.memo(AccountNetworkGroup);\n","import { blue } from '@ant-design/colors';\nimport { ArrowRightOutlined, CopyOutlined, LogoutOutlined, LoginOutlined, UserOutlined } from '@ant-design/icons';\nimport { Dropdown, Button, Menu } from 'antd';\nimport React, { useCallback } from 'react';\nimport './AccountDropdown.scss';\n\nimport { combineClassNames } from '@tezospayments/common';\n\nimport { Account } from '../../../models/blockchain';\nimport { getAccountsByNetwork, getCurrentAccount, getCurrentNetworkConfig } from '../../../store/accounts/selectors';\nimport { disconnectAccount } from '../../../store/accounts/slice';\nimport { useAppContext, useAppDispatch, useAppSelector, useCurrentLanguageResources } from '../../hooks';\nimport { AccountNetworkGroupPure } from './AccountNetworkGroup';\n\nexport const AccountDropDown = () => {\n  const appContext = useAppContext();\n  const langResources = useCurrentLanguageResources();\n  const actionsLangResources = langResources.views.header.accountActions;\n\n  const accountsByNetwork = useAppSelector(getAccountsByNetwork);\n  const currentAccount = useAppSelector(getCurrentAccount);\n  const currentAccountAddress = currentAccount?.address || '';\n  const currentNetworkConfig = useAppSelector(getCurrentNetworkConfig);\n  const currentExplorer = currentNetworkConfig && currentNetworkConfig.explorers[currentNetworkConfig.default.explorer];\n\n  const handleCopyAddressClick = useCallback(() => {\n    navigator.clipboard.writeText(currentAccountAddress);\n  }, [currentAccountAddress]);\n\n  const handleViewOnExplorerClick = useCallback(() => {\n    if (currentExplorer) {\n      window.open(appContext.tezosExplorer.getAccountUrl(currentAccountAddress), '_blank');\n    }\n  }, [appContext.tezosExplorer, currentAccountAddress, currentExplorer]);\n\n  const dispatch = useAppDispatch();\n  const handleDisconnectButtonClick = useCallback(() => {\n    dispatch(disconnectAccount());\n  }, [dispatch]);\n\n  if (!currentAccount) {\n    return null;\n  }\n\n  const connectedAccounts = [...accountsByNetwork.keys()].map(k =>\n    <Menu.ItemGroup key={k.id} title={<AccountNetworkGroupPure network={k} />}>\n      {accountsByNetwork.get(k)?.map(a =>\n        <Menu.Item\n          key={a.address}\n          icon={<UserOutlined />}\n          className={combineClassNames('account-menu-item', { 'account-menu-item_selected': a.address === currentAccount.address })}\n          style={a.address !== currentAccount.address ? undefined : {\n            backgroundColor: blue[0],\n            color: blue.primary\n          }}\n        >\n          {a.address}\n        </Menu.Item>\n      )}\n    </Menu.ItemGroup>\n  );\n\n  const menu = <Menu>\n    {connectedAccounts}\n    <Menu.Divider />\n    <Menu.Item key={1} icon={<CopyOutlined />} onClick={handleCopyAddressClick}>\n      {actionsLangResources.copyAddress.title}\n    </Menu.Item>\n    <Menu.Item key={2} icon={<ArrowRightOutlined />} onClick={handleViewOnExplorerClick}>\n      {`${actionsLangResources.viewOn} ${currentExplorer?.title}`}\n    </Menu.Item>\n    <Menu.Item key={3} icon={<LoginOutlined />}>\n      {`${actionsLangResources.connectAnotherAccount.title} (${langResources.common.comingSoon.toLowerCase()})`}\n    </Menu.Item>\n    <Menu.Divider />\n    <Menu.Item key={5} icon={<LogoutOutlined />} onClick={handleDisconnectButtonClick}>\n      {actionsLangResources.disconnect.title}\n    </Menu.Item>\n  </Menu >;\n\n  return <Dropdown overlay={menu} placement=\"bottomRight\">\n    <Button style={{ borderColor: blue.primary, color: blue.primary }} className=\"account-dropdown\">{Account.getShortAddress(currentAccount)}</Button>\n  </Dropdown >;\n};\n\nexport const AccountDropDownPure = React.memo(AccountDropDown);\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { getCurrentAccount } from '../../../store/accounts/selectors';\nimport { useAppSelector } from '../../hooks';\nimport { AccountDropDownPure } from './../AccountDropdown';\n\nimport './Header.scss';\n\nexport const Header = () => {\n  const currentAccount = useAppSelector(getCurrentAccount);\n\n  return <header className=\"header\">\n    <Link className=\"header__title\" to={config.routers.overview}>{config.app.name}</Link>\n    {currentAccount && <AccountDropDownPure />}\n  </header>;\n};\n\nexport const HeaderPure = React.memo(Header);\n","import { SettingOutlined, DashboardOutlined, UnorderedListOutlined, ProfileOutlined, InfoCircleOutlined } from '@ant-design/icons';\nimport { Menu, Button } from 'antd';\nimport React, { useCallback } from 'react';\nimport { Link, useHistory, useLocation } from 'react-router-dom';\n\nimport { config } from '../../../config';\nimport { useCurrentLanguageResources } from '../../hooks';\nimport './NavBar.scss';\n\nexport const NavBar = () => {\n  const location = useLocation();\n  const langResources = useCurrentLanguageResources();\n  const viewsLangResources = langResources.views;\n  const history = useHistory();\n\n  const handleCreateServiceClick = useCallback(() => {\n    history.push(config.routers.createService);\n  }, [history]);\n\n  const handleAcceptPaymentsClick = useCallback(() => {\n    history.push(config.routers.acceptPayments);\n  }, [history]);\n\n  return <nav className=\"navbar\">\n    <Menu className=\"navbar__menu\" mode=\"inline\" selectedKeys={[location.pathname]}>\n      <Menu.Item key={config.routers.overview} icon={<DashboardOutlined />}>\n        <Link to={config.routers.overview}>{viewsLangResources.overview.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.operations} icon={<UnorderedListOutlined />}>\n        <Link to={config.routers.operations}>{viewsLangResources.operations.title}</Link>\n      </Menu.Item>\n      <Menu.Item key={config.routers.services} icon={<ProfileOutlined />}>\n        <Link to={config.routers.services}>{viewsLangResources.services.title}</Link>\n      </Menu.Item>\n      <Menu.Item key=\"settings\" icon={<SettingOutlined />} disabled>{viewsLangResources.settings.title}</Menu.Item >\n      <Menu.Item key={config.routers.about} icon={<InfoCircleOutlined />}>\n        <Link to={config.routers.about}>{viewsLangResources.about.title}</Link>\n      </Menu.Item>\n    </Menu>\n\n    <div className=\"navbar__bottom-buttons\">\n      <Button onClick={handleCreateServiceClick}>{viewsLangResources.createService.title}</Button>\n      <Button onClick={handleAcceptPaymentsClick} type=\"primary\">{viewsLangResources.acceptPayments.title}</Button>\n    </div>\n  </nav>;\n};\n\nexport const NavBarPure = React.memo(NavBar);\n","import { message } from 'antd';\nimport React, { useEffect } from 'react';\nimport { useSelector } from 'react-redux';\n\nimport { selectServicesState } from '../../../store/services/selectors';\nimport { PendingOperationStatus } from '../../../store/services/slice';\n\nexport const Notifications = () => {\n  const { services, pendingOperations } = useSelector(selectServicesState);\n\n  useEffect(() => {\n    pendingOperations.forEach(operation => {\n      const service = services.find(s => s.contractAddress === operation.serviceAddress);\n\n      const content = <span><b>{operation.action}</b>{service && <> for service: <b>{`${service.name}`}</b></>}</span>;\n      const key = operation.hash;\n\n      switch (operation.status) {\n        case PendingOperationStatus.loading: {\n          const confirmations = `${operation.confirmationCount} / ${operation.targetConfirmationCount}`;\n          message.loading({ content: <span>Executing operation: {content} ({confirmations})</span>, key, duration: 0 });\n          break;\n        }\n\n        case PendingOperationStatus.success:\n          message.success({ content: <span>Finished operation: {content}</span>, key, duration: 4 });\n          break;\n\n        case PendingOperationStatus.error:\n          message.error({ content: <span>Failed operation: {content}</span>, key, duration: 4 });\n          break;\n      }\n    });\n  }, [pendingOperations, services]);\n\n  return null;\n};\n\nexport const NotificationsPure = React.memo(Notifications);\n","import { Skeleton } from 'antd';\nimport { useEffect } from 'react';\nimport { Switch } from 'react-router';\nimport { Route } from 'react-router-dom';\n\nimport { config } from '../../config';\nimport { selectAccountsState } from '../../store/accounts/selectors';\nimport { loadActiveAccount } from '../../store/accounts/slice';\nimport { PrivateRouteContainer } from '../common';\nimport { useAppDispatch, useAppSelector } from '../hooks';\nimport { OverviewPure, ConnectPure, OperationsPure, ServicePure, ServicesPure, AboutPure } from '../views';\nimport { AcceptPaymentsPure } from '../views/AcceptPayments';\nimport { ServiceViewMode } from '../views/Service/Service';\nimport { HeaderPure } from './Header';\nimport { NavBarPure } from './NavBar';\nimport { NotificationsPure } from './Notifications';\n\nimport 'antd/dist/antd.css';\nimport './App.scss';\n\nexport const App = () => {\n  const initialized = useAppSelector(selectAccountsState).initialized;\n  const dispatch = useAppDispatch();\n\n  useEffect(() => {\n    dispatch(loadActiveAccount());\n  }, [dispatch]);\n\n  return <div className=\"main-container\">\n    <NotificationsPure />\n    <HeaderPure />\n    <NavBarPure />\n    {!initialized\n      ? <Skeleton />\n      : <Switch>\n        <PrivateRouteContainer exact path={config.routers.overview} >\n          <OverviewPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.operations}>\n          <OperationsPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.createService}>\n          <ServicePure mode={ServiceViewMode.Create} />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.service.template}>\n          <ServicePure mode={ServiceViewMode.ViewAndEdit} />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={config.routers.services}>\n          <ServicesPure />\n        </PrivateRouteContainer>\n        <PrivateRouteContainer exact path={[config.routers.acceptPayments, config.routers.acceptServicePayments.template]}>\n          <AcceptPaymentsPure />\n        </PrivateRouteContainer>\n        <Route path={config.routers.about}>\n          <AboutPure />\n        </Route>\n        <Route path={config.routers.connect}>\n          <ConnectPure />\n        </Route>\n      </Switch>\n    }\n    {/* <FooterPure /> */}\n  </div>;\n};\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { combineReducers, EnhancedStore } from '@reduxjs/toolkit';\n\nimport { accountsSlice } from './accounts/slice';\nimport { balancesSlice } from './balances/slice';\nimport { operationsSlice } from './operations/slice';\nimport { servicesSlice } from './services/slice';\nimport { AppThunkDispatch } from './thunk';\n\nexport const appReducer = combineReducers({\n  accountsState: accountsSlice.reducer,\n  servicesState: servicesSlice.reducer,\n  balancesState: balancesSlice.reducer,\n  operationsState: operationsSlice.reducer,\n});\n\nexport type AppStore = EnhancedStore<AppState>;\nexport type AppState = ReturnType<typeof appReducer>;\nexport type AppDispatch = AppThunkDispatch & AppStore['dispatch'];\n","import { configureStore, isPlain } from '@reduxjs/toolkit';\nimport { BigNumber } from 'bignumber.js';\nimport { enableMapSet } from 'immer';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { Router } from 'react-router-dom';\n\nimport { ReactAppContext, WebApp } from './app';\nimport { App } from './components/App';\nimport { AppConfig, config } from './config';\nimport reportWebVitals from './reportWebVitals';\nimport { appReducer } from './store';\nimport './index.scss';\n\nenableMapSet();\n\nconst webApp = new WebApp(app => configureStore({\n  reducer: appReducer,\n  devTools: {\n    serialize: true\n  },\n  middleware: getDefaultMiddleware =>\n    getDefaultMiddleware({\n      thunk: {\n        extraArgument: app,\n      },\n      serializableCheck: {\n        isSerializable: (value: unknown) => isPlain(value)\n          || value instanceof Map\n          || value instanceof Set\n          || BigNumber.isBigNumber(value)\n          || value instanceof Date,\n        // eslint-disable-next-line @typescript-eslint/no-explicit-any\n        getEntries: (value: any) => value instanceof Map || value instanceof Set\n          ? [...value.entries()]\n          : Object.entries(value)\n      }\n    })\n}));\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={webApp.store}>\n      <Router history={webApp.history}>\n        <ReactAppContext.Provider value={webApp.reactAppContext}>\n          <App />\n        </ReactAppContext.Provider>\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n(window as unknown as { webApp: WebApp }).webApp = webApp;\n(window as unknown as { config: AppConfig }).config = config;\n\nreportWebVitals();\n","import { ColorMode } from '@airgap/beacon-sdk';\nimport { BeaconWallet } from '@taquito/beacon-wallet';\nimport { TezosToolkit } from '@taquito/taquito';\nimport { History, createBrowserHistory } from 'history';\n\nimport { Network, networks } from '@tezospayments/common';\nimport {\n  ServicesProvider, TzKTDataProvider, BetterCallDevDataProvider,\n  BlockchainUrlExplorer, TzStatsBlockchainUrlExplorer, BetterCallDevBlockchainUrlExplorer, TzKTBlockchainUrlExplorer\n} from '@tezospayments/react-web-core';\n\nimport { config } from '../config';\nimport { AccountsService } from '../services/accountsService';\nimport { ServicesService } from '../services/servicesService';\nimport { AppStore } from '../store';\nimport type { ReactAppContext } from './reactAppContext';\nimport { ReadOnlySigner } from './readOnlySigner';\n\ninterface AppServices {\n  readonly accountsService: AccountsService;\n  readonly servicesService: ServicesService;\n}\n\nexport class WebApp {\n  readonly store: AppStore;\n  readonly reactAppContext: ReactAppContext;\n  readonly tezosWallet = new BeaconWallet({ name: config.app.name, colorMode: ColorMode.LIGHT });\n  readonly history: History;\n\n  private _network: Network | undefined;\n  private _tezosToolkit: TezosToolkit | undefined;\n  private _services: AppServices | undefined;\n  private onStoreChangedListener = this.onStoreChanged.bind(this);\n  private unsubscribeStoreChanged: (() => void);\n\n  constructor(storeFactory: (app: WebApp) => AppStore) {\n    this.store = storeFactory(this);\n    this.history = this.createHistory();\n    this.applyNetwork(networks[config.tezos.defaultNetwork]);\n\n    this.unsubscribeStoreChanged = this.store.subscribe(this.onStoreChangedListener);\n    this.reactAppContext = this.createReactAppContext();\n  }\n\n  get network() {\n    if (!this._network)\n      throw this.getNetworkError();\n    return this._network;\n  }\n\n  get tezosToolkit() {\n    if (!this._tezosToolkit)\n      throw this.getNetworkError();\n    return this._tezosToolkit;\n  }\n\n  get services() {\n    if (!this._services)\n      throw this.getNetworkError();\n    return this._services;\n  }\n\n  protected onStoreChanged() {\n    const appState = this.store.getState();\n\n    if (appState.accountsState.currentAccount && appState.accountsState.currentAccount.network !== this.network) {\n      this.applyNetwork(appState.accountsState.currentAccount.network);\n    }\n  }\n\n  protected createHistory() {\n    return createBrowserHistory();\n  }\n\n  protected createReactAppContext(): ReactAppContext {\n    return {\n      tezosWallet: this.tezosWallet,\n      tezosExplorer: this.createTezosBlockchainUrlExplorer(this.network)\n    };\n  }\n\n  protected applyNetwork(network: Network) {\n    this._network = network;\n\n    const networkConfig = config.tezos.networks[this.network.name];\n    this._tezosToolkit = new TezosToolkit(networkConfig.rpcUrls[networkConfig.default.rpc]);\n    this.tezosToolkit.setSignerProvider(new ReadOnlySigner());\n    this.tezosToolkit.setWalletProvider(this.tezosWallet);\n\n    const servicesProvider = this.createServicesProvider(this.network);\n    this._services = {\n      accountsService: new AccountsService(this.tezosToolkit, this.tezosWallet.client),\n      servicesService: new ServicesService(\n        this.tezosToolkit,\n        servicesProvider,\n        networkConfig.servicesFactoryContractAddress\n      )\n    };\n  }\n\n  private createServicesProvider(network: Network): ServicesProvider {\n    const networkConfig = config.tezos.networks[network.name];\n    const indexerName = networkConfig.default.indexer;\n\n    switch (indexerName) {\n      case 'tzKT':\n        return new TzKTDataProvider(network, networkConfig.indexerUrls.tzKT, networkConfig.servicesFactoryContractAddress, networkConfig.minimumSupportedServiceVersion);\n      case 'betterCallDev':\n        return new BetterCallDevDataProvider(network, networkConfig.indexerUrls.betterCallDev, networkConfig.servicesFactoryContractAddress, networkConfig.minimumSupportedServiceVersion);\n      default:\n        throw new Error('Unknown service provider');\n    }\n  }\n\n  private createTezosBlockchainUrlExplorer(network: Network): BlockchainUrlExplorer {\n    const networkConfig = config.tezos.networks[network.name];\n    const explorerName = networkConfig.default.explorer;\n\n    switch (explorerName) {\n      case 'tzKT':\n        return new TzKTBlockchainUrlExplorer(network, networkConfig.explorers.tzKT.baseUrl);\n      case 'tzStats':\n        return new TzStatsBlockchainUrlExplorer(network, networkConfig.explorers.tzStats.baseUrl);\n      case 'betterCallDev':\n        return new BetterCallDevBlockchainUrlExplorer(network, networkConfig.explorers.betterCallDev.baseUrl);\n      default:\n        throw new Error('Unknown blockchain explorer');\n    }\n  }\n\n  private getNetworkError() {\n    return new Error('Network is not defined');\n  }\n}\n"],"sourceRoot":""}