(this["webpackJsonp@tezospayments/dashboard-react-web"]=this["webpackJsonp@tezospayments/dashboard-react-web"]||[]).push([[0],{379:function(e,t){},518:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var s=a(139);class n{constructor(e,t,a){this.tezosToolkit=e,this.servicesProvider=t,this.servicesFactoryContractAddress=a}async getServices(e){return this.servicesProvider.getServices(e.address)}async getService(e){return this.servicesProvider.getService(e)}async getOperations(e){return this.servicesProvider.getOperations(e)}async updateService(e){const t=await this.getServiceContract(e.contractAddress),a=this.encodeMetadata(e);return await t.methodsObject.update_service_parameters({metadata:a,allowed_tokens:{tez:e.allowedTokens.tez,assets:e.allowedTokens.assets},allowed_operation_type:e.allowedOperationType}).send()}async setPaused(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_pause(t).send()}async setDeleted(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_deleted(t).send()}async createService(e){const t=await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress),a=await t.storage(),n=await this.getFactoryImplementationContract(a.factory_implementation),i=this.encodeMetadata(e),r=new s.a;for(const s of e.signingKeys.values())r.set(s.publicKey,{public_key:s.publicKey,name:s.name});return await n.methodsObject.create_service({metadata:i,allowed_tokens:{tez:e.allowedTokens.tez,assets:e.allowedTokens.assets},allowed_operation_type:e.allowedOperationType,signing_keys:r}).send()}addApiKey(e,t){const a=new s.a;return a.set(t.publicKey,{public_key:t.publicKey,name:t.name}),this.updateSigningKeys(e,a)}deleteApiKey(e,t){const a=new s.a;return a.set(t,void 0),this.updateSigningKeys(e,a)}async updateSigningKeys(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.update_signing_keys(t).send()}encodeMetadata(t){const a={name:t.name||void 0,links:t.links.length?t.links:void 0,description:t.description||void 0,iconUrl:t.iconUrl||void 0};return e.from(JSON.stringify(a),"utf8").toString("hex")}async getServiceContract(e){return await this.tezosToolkit.wallet.at(e)}async getFactoryImplementationContract(e){return await this.tezosToolkit.wallet.at(e)}}}).call(this,a(32).Buffer)},572:function(e,t){},574:function(e,t){},584:function(e,t){},586:function(e,t){},613:function(e,t){},615:function(e,t){},616:function(e,t){},621:function(e,t){},623:function(e,t){},642:function(e,t){},654:function(e,t){},657:function(e,t){},749:function(e,t,a){},794:function(e,t,a){},795:function(e,t,a){},796:function(e,t,a){},797:function(e,t,a){},805:function(e,t,a){},806:function(e,t,a){},807:function(e,t,a){},808:function(e,t,a){},809:function(e,t,a){},810:function(e,t,a){},811:function(e,t,a){},812:function(e,t,a){},813:function(e,t,a){},814:function(e,t,a){},815:function(e,t,a){},816:function(e,t,a){},818:function(e,t,a){},823:function(e,t,a){},824:function(e,t,a){},825:function(e,t,a){},826:function(e,t,a){},827:function(e,t,a){},828:function(e,t,a){},829:function(e,t,a){},830:function(e,t,a){},831:function(e,t,a){},832:function(e,t,a){},833:function(e,t,a){},834:function(e,t,a){},835:function(e,t,a){},836:function(e,t,a){},837:function(e,t,a){},838:function(e,t,a){},839:function(e,t,a){},840:function(e,t,a){},841:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},844:function(e,t,a){},845:function(e,t,a){},846:function(e,t,a){},848:function(e,t,a){},849:function(e,t,a){},850:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"beaconNetworkToNetwork",(function(){return rt})),a.d(s,"networkToBeaconNetwork",(function(){return ct}));var n=a(63),i=a(21),r=a.n(i),c=a(74),o=a(0),l=a.n(o),d=a(57),u=a.n(d),m=a(108),p=a(60),v=a(43),h=a(515),b=a(139),j=a(90),y=a(51),g=a.n(y),O=a(446),w=a(32),x=a(517),k=a.n(x),f=a(230),S=a(126);const A=w.Buffer.isEncoding("base64url"),_=(e,t="base64")=>"base64"!==t&&"base64url"!==t?"":(A||(t="base64",e=C.prepareValueForDecoding(e)),w.Buffer.from(e,t).toString("utf8")),N=(e,t="base64")=>{if("base64"!==t&&"base64url"!==t)return"";if(A)return w.Buffer.from(e,"utf8").toString(t);const a=w.Buffer.from(e,"utf8").toString("base64");return C.prepareEncodedValue(a)},C={prepareEncodedValue:e=>e.split("=")[0].replace(/\+/g,"-").replace(/\//g,"_"),prepareValueForDecoding:e=>{switch((e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4){case 0:return e;case 2:return e+"==";case 3:return e+"=";default:throw new Error("Invalid base64url value")}}};const P=e=>{var t;const a=null===(t=e.match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return new Uint8Array(a)},T=e=>w.Buffer.from(e,"utf8").toString("hex"),z=e=>w.Buffer.from(P(e)).toString("utf8"),D=(e,t)=>new r.a(e).multipliedBy(10**t).integerValue(),U=(e,t)=>new r.a(e).integerValue().div(10**t),I=e=>D(e,6);var E=Object.freeze({__proto__:null,stringToUint8Array:P,stringToBytes:T,bytesToString:z,objectToBytes:e=>T(JSON.stringify(e)),bytesToObject:e=>{try{return JSON.parse(z(e))}catch{return null}},tokensAmountToNat:D,numberToTokensAmount:U,tezToMutez:I,mutezToTez:e=>U(e,6)});const K=e=>k()(e);var L=Object.freeze({__proto__:null,isArray:e=>Array.isArray(e),isReadonlyArray:e=>Array.isArray(e),isPlainObject:K});const F=(e,t)=>e===t,B=(e,t,a)=>{if(null===t||null===a||t.length!==a.length)return!1;const s=t.length;for(let n=0;n<s;n++)if(!e(t[n],a[n]))return!1;return!0},$=(e,t=F)=>{let a=null,s=null;return function(){return B(t,a,arguments)||(s=e.apply(null,arguments)),a=arguments,s}};var M={emptyArray:[],emptyMap:new Map,emptySet:new Set,emptyObject:{},zeroBigNumber:new r.a(0)};const V=(e,t,a,s=" ")=>{if(void 0!==String.prototype.padStart)return e.padStart(a,s);const n=e.length;if(a<=n||""==s)return e;const i=a-n;let r=s.repeat(Math.ceil(i/s.length));return r.length>i&&(r=r.slice(0,i)),t?r+e:e+r},R=(e,t,a=" ")=>void 0!==String.prototype.padStart?e.padStart(t,a):V(e,!0,t,a);var H=Object.freeze({__proto__:null,capitalize:e=>{var t;return e&&(null===(t=e[0])||void 0===t?void 0:t.toLocaleUpperCase())+e.slice(1)},getAvatarText:(e,t=2)=>{if(!e||!t)return"";let a="";for(let s=0,n=0,i=!1;s<e.length;s++)if(i||" "===e[s])i&&" "===e[s]&&(i=!1);else if(i=!0,a+=e[s],++n===t)return a;return a},padStart:R,padEnd:(e,t,a=" ")=>void 0!==String.prototype.padEnd?e.padEnd(t,a):V(e,!1,t,a)});const W=e=>new Promise((t=>setTimeout(t,e)));var Z;!function(e){e[e.Common=0]="Common",e[e.Email=1]="Email",e[e.Telegram=2]="Telegram",e[e.Facebook=3]="Facebook",e[e.Twitter=4]="Twitter",e[e.Instagram=5]="Instagram",e[e.GitHub=6]="GitHub",e[e.Reddit=7]="Reddit"}(Z||(Z={}));const Y=$((e=>e.trim())),q=$((e=>e.trim().replace(/\/$/,""))),G=(e,t,a)=>{if(!e.startsWith(t))return!1;const s=Y(e);return s!==t&&{rawLink:e,formattedLink:s,displayLink:q(e).replace(t,""),icon:a}},J=/^[^\s/@]+@[^\s@/]+$/,Q=/^([a-z][a-z0-9+\-.]*):/;class X{getLinkInfo(e,t=!1){for(const a of X.linkInfoProviders){const t=a(e);if(t)return this.linkInfoIsValid(t)?t:null}return t?(e=>({rawLink:e,formattedLink:Y(e),displayLink:q(e),icon:Z.Common}))(e):null}linkInfoIsValid(e){return"#"!==e.formattedLink}}var ee;g()(X,"linkInfoProviders",[e=>!!e.startsWith("javascript")&&(e=>({rawLink:e,formattedLink:"#",displayLink:"Invalid Link",icon:Z.Common}))(e),e=>G(e,"https://t.me/",Z.Telegram),e=>G(e,"https://facebook.com/",Z.Facebook),e=>G(e,"https://twitter.com/",Z.Twitter),e=>G(e,"https://instagram.com/",Z.Instagram),e=>G(e,"https://github.com/",Z.GitHub),e=>{const t=Y(e);return J.test(t)&&{rawLink:e,formattedLink:`mailto:${t}`,displayLink:q(e),icon:Z.Email}},e=>G(e,"https://www.reddit.com/",Z.Reddit),e=>{const t=Y(e);return Q.test(t)&&{rawLink:e,formattedLink:t,displayLink:q(e),icon:Z.Common}}]),function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(ee||(ee={}));class te{validate(e,t=!1){if(!K(e))return[this.invalidPaymentObjectError];let a;for(const s of this.validationMethods){const n=s(e);if(n){if(!t)return n;a=(a||[]).concat(n)}}return a}}const ae={granadanet:{id:"NetXz969SFaFn8k",name:"granadanet"}},se=ae,ne=Object.values(ae),ie=/^[a-zA-Z]\w*$/,re=ie,ce="XTZ",oe="Tezos",le=6,de="https://dashboard.tezospayments.com/tokens/tezos.png",ue=[{network:se.granadanet,type:"fa1.2",contractAddress:"KT1KcuD9MmgZuGcptdD3qRqxXpGg4WxFsfVc",metadata:{decimals:0,symbol:"fa12",name:"Test fa12",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:se.granadanet,type:"fa2",contractAddress:"KT1BBfxboq63dbaKCAc4uwVKLFzVn1b4fy37",id:0,metadata:{decimals:0,symbol:"fa20",name:"Test fa20",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:se.granadanet,type:"fa2",contractAddress:"KT1PMAT81mmL6NFp9rVU3xoVzU2dRdcXt4R9",id:0,metadata:{decimals:6,symbol:"USDS",name:"Stably USD",thumbnailUri:"https://quipuswap.com/tokens/stably.png"}}],me=new Map(ne.map((e=>[e,new Map(ue.filter((t=>t.network===e)).map((e=>[e.contractAddress,e])))]))),pe=["KT"],ve=["tz1","tz2","tz3"],he={addressLength:36,contractAddressPrefixes:pe,implicitAddressPrefixes:ve,addressPrefixes:[...pe,...ve]};var be;!function(e){e.Ed25519="Ed25519",e.Secp256k1="Secp256k1",e.P256="P256"}(be||(be={}));const je=f.URL||globalThis.URL;var ye=Object.freeze({__proto__:null,URL:je});const ge=(e,t)=>"string"!==typeof e?[t.invalidTargetAddress]:e.length!==he.addressLength?[t.targetAddressHasInvalidLength]:he.addressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.targetAddressIsNotNetworkAddress],Oe=(e,t)=>r.a.isBigNumber(e)&&!e.isNaN()&&e.isFinite()?e.isZero()||e.isNegative()?[t.amountIsNonPositive]:void 0:[t.invalidAmount],we=(e,t)=>{if(void 0!==e)return e instanceof je?e.protocol.indexOf("javascript")>-1?[t.invalidProtocol]:void 0:[t.invalidUrl]},xe=(e,t)=>{if(void 0!==e)return K(e)?void 0:[t.invalidData]},ke=(e,t)=>fe(e.address,t)||Se(e.id,t),fe=(e,t)=>"string"!==typeof e?[t.invalidAssetAddress]:e.length!==he.addressLength?[t.assetAddressHasInvalidLength]:he.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.assetAddressIsNotContractAddress],Se=(e,t)=>{if(null!==e)return"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetId]:e<0?[t.assetIdIsNegative]:Number.isInteger(e)?void 0:[t.assetIdIsNotInteger]},Ae=(e,t)=>"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetDecimals]:e<0?[t.assetDecimalsNumberIsNegative]:Number.isInteger(e)?void 0:[t.assetDecimalsNumberIsNotInteger];class _e extends te{constructor(...e){super(...e),g()(this,"validationMethods",[e=>e.type!==ee.Payment?[_e.errors.invalidType]:void 0,e=>ge(e.targetAddress,_e.errors),e=>{return t=e.id,a=_e.errors,"string"!==typeof t?[a.invalidId]:""===t?[a.emptyId]:void 0;var t,a},e=>Oe(e.amount,_e.errors),e=>((e,t)=>{if(void 0!==e)return K(e)?ke(e,t)||Ae(e.decimals,t):[t.invalidAsset]})(e.asset,_e.errors),e=>xe(e.data,_e.errors),e=>we(e.successUrl,_e.successUrlErrors),e=>we(e.cancelUrl,_e.cancelUrlErrors),e=>((e,t)=>{if(!(e instanceof Date)||isNaN(e.getTime()))return[t.invalidCreatedDate]})(e.created,_e.errors),e=>((e,t,a,s)=>{if(void 0!==e)return e instanceof Date&&!isNaN(e.getTime())?e.getTime()-t.getTime()<a?[s.paymentLifetimeIsShort]:void 0:[s.invalidExpiredDate]})(e.expired,e.created,_e.minimumPaymentLifetime,_e.errors)]),g()(this,"invalidPaymentObjectError",_e.errors.invalidPaymentObject)}}g()(_e,"errors",{invalidPaymentObject:"Payment is undefined or not object",invalidType:"Payment type is invalid",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidId:"Id is invalid",emptyId:"Id is empty",invalidAmount:"Amount is invalid",amountIsNonPositive:"Amount is less than or equal to zero",invalidData:"Payment data is invalid",invalidAsset:"Asset is invalid",invalidAssetAddress:"Asset address is invalid",assetAddressIsNotContractAddress:"Asset address isn't a contract address",assetAddressHasInvalidLength:"Asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidAssetDecimals:"Asset number of decimals is invalid",assetDecimalsNumberIsNegative:"Asset number of decimals is negative",assetDecimalsNumberIsNotInteger:"Asset number of decimals isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol",invalidCreatedDate:"Created date is invalid",invalidExpiredDate:"Expired date is invalid",paymentLifetimeIsShort:"Payment lifetime is short"}),g()(_e,"minimumPaymentLifetime",6e5),g()(_e,"successUrlErrors",{invalidUrl:_e.errors.invalidSuccessUrl,invalidProtocol:_e.errors.successUrlHasInvalidProtocol}),g()(_e,"cancelUrlErrors",{invalidUrl:_e.errors.invalidCancelUrl,invalidProtocol:_e.errors.cancelUrlHasInvalidProtocol});class Ne extends te{constructor(...e){super(...e),g()(this,"validationMethods",[e=>e.type!==ee.Donation?[Ne.errors.invalidType]:void 0,e=>xe(e.data,Ne.errors),e=>ge(e.targetAddress,Ne.errors),e=>{return t=e.desiredAmount,a=Ne.errors,void 0===t?void 0:Oe(t,a);var t,a},e=>((e,t)=>{if(void 0!==e)return K(e)?ke(e,t):[t.invalidAsset]})(e.desiredAsset,Ne.errors),e=>we(e.successUrl,Ne.successUrlErrors),e=>we(e.cancelUrl,Ne.cancelUrlErrors)]),g()(this,"invalidPaymentObjectError",Ne.errors.invalidDonationObject)}}g()(Ne,"errors",{invalidDonationObject:"Donation is undefined or not object",invalidType:"Donation type is invalid",invalidData:"Donation data is invalid",invalidAmount:"Desired amount is invalid",amountIsNonPositive:"Desired amount is less than or equal to zero",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidAsset:"Desired asset is invalid",invalidAssetAddress:"Desired asset address is invalid",assetAddressIsNotContractAddress:"Desired asset address isn't a contract address",assetAddressHasInvalidLength:"Desired asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol"}),g()(Ne,"successUrlErrors",{invalidUrl:Ne.errors.invalidSuccessUrl,invalidProtocol:Ne.errors.successUrlHasInvalidProtocol}),g()(Ne,"cancelUrlErrors",{invalidUrl:Ne.errors.invalidCancelUrl,invalidProtocol:Ne.errors.cancelUrlHasInvalidProtocol});class Ce{constructor(){}}class Pe{constructor(e){this.objectFieldTypes=e}get minObjectFieldsCount(){if(!this._minObjectFieldsCount){let e=0;for(const t of this.objectFieldTypes)("string"===typeof t[1]?"undefined"!==t[1]:t[1].every((e=>"undefined"!==e)))&&e++;this._minObjectFieldsCount=e}return this._minObjectFieldsCount}get maxObjectFieldsCount(){return this.objectFieldTypes.size}validate(e){if(!e)return!1;const t=Object.getOwnPropertyNames(e);if(t.length<this.minObjectFieldsCount||t.length>this.maxObjectFieldsCount)return!1;for(const[a,s]of this.objectFieldTypes){const t=e[a],n=null===t?"null":typeof t;if(Array.isArray(s)?!s.some((e=>n===e)):n!==s)return!1}return!0}}class Te{constructor(e){this.objectSerializationValidator=new Pe(e)}serialize(e){try{if(!this.objectSerializationValidator.validate(e))return null;const t=JSON.stringify(e);return N(t,"base64url")}catch{return null}}}class ze{constructor(e){this.objectSerializationValidator=new Pe(e)}deserialize(e){try{let t;if(e){const a=_(e,"base64url");t=JSON.parse(a)}else t={};return this.objectSerializationValidator.validate(t)?t:null}catch{return null}}}(new Map).set("a","string").set("d","number").set("i",["number","undefined","null"]),(new Map).set("c","string").set("cl",["string","undefined","null"]).set("k","string");const De=(new Map).set("i","string").set("a","string").set("as",["object","undefined","null"]).set("d",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("c","number").set("e",["number","undefined","null"]).set("s","object");class Ue{serialize(e){try{const t=this.mapPaymentToSerializedPayment(e);return Ue.serializedPaymentBase64Serializer.serialize(t)}catch{return null}}mapPaymentToSerializedPayment(e){var t,a,s;return{i:e.id,a:e.amount.toString(),as:e.asset?this.mapPaymentAssetToSerializedPaymentAsset(e.asset):void 0,d:e.data,su:null===(t=e.successUrl)||void 0===t?void 0:t.toString(),cu:null===(a=e.cancelUrl)||void 0===a?void 0:a.toString(),c:e.created.getTime(),e:null===(s=e.expired)||void 0===s?void 0:s.getTime(),s:this.mapPaymentSignatureToSerializedPaymentSignature(e.signature)}}mapPaymentAssetToSerializedPaymentAsset(e){return{a:e.address,d:e.decimals,i:null!==e.id?e.id:void 0}}mapPaymentSignatureToSerializedPaymentSignature(e){return{k:e.signingPublicKey,c:e.contract,cl:e.client}}}g()(Ue,"serializedPaymentBase64Serializer",new Te(De));class Ie{deserialize(e,t){try{const a=Ie.serializedPaymentBase64Deserializer.deserialize(e);return a?this.mapSerializedPaymentToPayment(a,t):null}catch{return null}}mapSerializedPaymentToPayment(e,t){return{type:ee.Payment,id:e.i,amount:new r.a(e.a),asset:e.as?this.mapSerializedPaymentAssetToPaymentAsset(e.as):void 0,data:e.d,successUrl:e.su?new je(e.su):void 0,cancelUrl:e.cu?new je(e.cu):void 0,created:new Date(e.c),expired:e.e?new Date(e.e):void 0,targetAddress:t.targetAddress,signature:this.mapSerializedPaymentSignatureToPaymentSignature(e.s)}}mapSerializedPaymentAssetToPaymentAsset(e){return{address:e.a,decimals:e.d,id:void 0!==e.i?e.i:null}}mapSerializedPaymentSignatureToPaymentSignature(e){return{signingPublicKey:e.k,contract:e.c,client:e.cl}}}g()(Ie,"serializedPaymentBase64Deserializer",new ze(De)),(new Map).set("a","string").set("i",["number","undefined","null"]),(new Map).set("cl","string").set("k","string");const Ee=(new Map).set("d",["object","undefined","null"]).set("da",["string","undefined","null"]).set("das",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("s",["object","undefined","null"]);class Ke{serialize(e){try{const t=this.mapDonationToSerializedDonation(e),a=Ke.serializedDonationBase64Serializer.serialize(t);return"e30"===a?"":a}catch{return null}}mapDonationToSerializedDonation(e){var t,a,s;return{d:e.data,da:null===(t=e.desiredAmount)||void 0===t?void 0:t.toString(),das:e.desiredAsset?this.mapDonationAssetToSerializedDonationAsset(e.desiredAsset):void 0,su:null===(a=e.successUrl)||void 0===a?void 0:a.toString(),cu:null===(s=e.cancelUrl)||void 0===s?void 0:s.toString(),s:e.signature?this.mapDonationSignatureToSerializedDonationSignature(e.signature):void 0}}mapDonationAssetToSerializedDonationAsset(e){return{a:e.address,i:null!==e.id?e.id:void 0}}mapDonationSignatureToSerializedDonationSignature(e){return{k:e.signingPublicKey,cl:e.client}}}g()(Ke,"serializedDonationBase64Serializer",new Te(Ee));class Le{deserialize(e,t){try{const a=Le.serializedDonationBase64Deserializer.deserialize(e);return a?this.mapSerializedDonationToDonation(a,t):null}catch{return null}}mapSerializedDonationToDonation(e,t){return{type:ee.Donation,data:e.d,desiredAmount:e.da?new r.a(e.da):void 0,desiredAsset:e.das?this.mapSerializedDonationAssetToDonationAsset(e.das):void 0,successUrl:e.su?new je(e.su):void 0,cancelUrl:e.cu?new je(e.cu):void 0,targetAddress:t.targetAddress,signature:e.s?this.mapSerializedDonationSignatureToDonationSignature(e.s):void 0}}mapSerializedDonationAssetToDonationAsset(e){return{address:e.a,id:void 0!==e.i?e.i:null}}mapSerializedDonationSignatureToDonationSignature(e){return{signingPublicKey:e.k,client:e.cl}}}g()(Le,"serializedDonationBase64Deserializer",new ze(Ee));class Fe extends Ce{static validate(e){return Fe.defaultValidator.validate(e)}static deserialize(e,t){return Fe.defaultDeserializer.deserialize(e,t)}}g()(Fe,"defaultDeserializer",new Ie),g()(Fe,"defaultValidator",new _e);class Be extends Ce{static validate(e){return Be.defaultValidator.validate(e)}static deserialize(e,t){return Be.defaultDeserializer.deserialize(e,t)}}var $e;g()(Be,"defaultDeserializer",new Le),g()(Be,"defaultValidator",new Ne),function(e){e[e.Base64=0]="Base64"}($e||($e={}));const Me=new Map(Object.keys($e).filter((e=>!isNaN(+e))).map((e=>[+e,R(e,2,"0")]))),Ve=(e,t)=>(e.template=t,e);var Re;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation",e[e.All=3]="All"}(Re||(Re={}));const He={name:"",description:"",links:M.emptyArray,version:0,metadata:"",contractAddress:"",allowedTokens:{tez:!0,assets:M.emptyArray},allowedOperationType:Re.Payment,owner:"",paused:!1,deleted:!1,network:se.granadanet,signingKeys:M.emptyMap};var We,Ze,Ye;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(We||(We={})),function(e){e[e.Incoming=0]="Incoming",e[e.Outgoing=1]="Outgoing"}(Ze||(Ze={})),function(e){e[e.Pending=0]="Pending",e[e.Success=1]="Success",e[e.Cancelled=2]="Cancelled"}(Ye||(Ye={}));class qe extends Ce{static parsePayload(e){const t=z(e);let a=null;try{a=JSON.parse(t)}catch{}return{value:a,valueString:t,encodedValue:e}}}const Ge={prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"mutez"}]},Je={prim:"pair",args:[{prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"pair",args:[{prim:"nat"},{prim:"address"}]}]},{prim:"option",args:[{prim:"nat"}]}]};class Qe{encode(e){return{contractSignPayload:this.getContractSignPayload(e),clientSignPayload:this.getClientSignPayload(e)}}getContractSignPayload(e){return"0x"+(e.asset?Object(S.b)({prim:"Pair",args:[{prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{prim:"Pair",args:[{int:D(e.amount,e.asset.decimals).toString(10)},{string:e.asset.address}]}]},void 0!==e.asset.id&&null!==e.asset.id?{prim:"Some",args:[{int:e.asset.id.toString()}]}:{prim:"None"}]},Je):Object(S.b)({prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{int:I(e.amount).toString(10)}]},Ge)).bytes}getClientSignPayload(e){return(e.successUrl?e.successUrl.href:"")+(e.cancelUrl?e.cancelUrl.href:"")||null}}g()(Qe,"contractPaymentInTezSignPayloadMichelsonType",Ge),g()(Qe,"contractPaymentInAssetSignPayloadMichelsonType",Je);const Xe={links:{tezosPayments:{webSite:"https://tezospayments.com",paymentsApp:"https://payment.tezospayments.com",gitHub:"https://github.com/fastwaterbear/tezospayments",telegram:"https://t.me/fastwaterbear",twitter:"https://twitter.com/fastwaterbear",reddit:"https://www.reddit.com/user/fastwaterbear"}},tezos:{defaultNetwork:"granadanet",networks:{granadanet:{title:"Granada Testnet",color:"#667eea",minimumSupportedServiceVersion:3,default:{rpc:"smartPy",indexer:"tzKT",explorer:"tzKT"},rpcUrls:{smartPy:"https://granadanet.smartpy.io"},indexerUrls:{tzKT:"https://api.granadanet.tzkt.io",betterCallDev:"https://api.better-call.dev"},explorers:{tzKT:{baseUrl:"https://granadanet.tzkt.io",title:"TzKT"},betterCallDev:{baseUrl:"https://better-call.dev",title:"Better Call Dev"},tzStats:{baseUrl:"https://granada.tzstats.com",title:"TzStats"}},servicesFactoryContractAddress:"KT1NxBzCJtvHFLKfiSAX3PGxdiJMAC8CtSZV"}}}};class et{constructor(e,t){this.network=e,this.baseUrl=t}}class tt extends et{getEntityUrl(e){return`${this.baseUrl}/${e}`}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class at extends et{getEntityUrl(e){return he.addressPrefixes.some((t=>e.startsWith(t)))?this.getAccountUrl(e):this.getOperationUrl(e)}getOperationUrl(e){return`${this.baseUrl}/${this.network.name}/opg/${e}/contents`}getAccountUrl(e){return`${this.baseUrl}/${this.network.name}/${e}`}}class st extends et{getEntityUrl(e){return`${this.baseUrl}/${e}`}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class nt{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=me.get(this.network)||M.emptyMap}async getService(e){const t=await fetch(`${this.baseUrl}/v1/contracts/${e}/storage`),a=await t.json();if("version"in a&&+a.version<this.minimumSupportedServiceVersion)return null;const s=this.mapServiceDtoToService(a,e,this.network);if(!s)throw new Error("Service not found");return s}async getServices(e){const t=`${this.baseUrl}/v1/contracts/${this.servicesFactoryContractAddress}/bigmaps/services/keys`,a=await fetch(t);if((await a.json()).every((t=>t.key!==e)))return[];const s=await fetch(`${t}/${e}`),n=(await s.json()).value;return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL(`v1/accounts/${e}/operations`,this.baseUrl);t.searchParams.set("type","transaction"),t.searchParams.set("entrypoint.in","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).map((e=>this.mapOperationDtoToServiceOperation(e))).filter(Boolean)}mapServiceDtoToService(e,t,a){const s=E.bytesToObject(e.metadata);return!s||"string"!==typeof s.name||!L.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||M.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e.version,metadata:e.metadata,contractAddress:t,network:a,allowedTokens:{tez:e.allowed_tokens.tez,assets:e.allowed_tokens.assets},allowedOperationType:+e.allowed_operation_type,owner:e.owner,paused:e.paused,deleted:e.deleted,signingKeys:this.mapSigningKeyDtosToSigningKeys(e.signing_keys)}}mapSigningKeyDtosToSigningKeys(e){return Object.keys(e).reduce(((t,a)=>{var s;return t.set(a,{publicKey:a,name:(null===(s=e[a])||void 0===s?void 0:s.name)||void 0})}),new Map)}mapOperationDtoToServiceOperation(e){var t,a,s;const n=e.parameter.value.asset_value?(null===(t=this.tokenWhiteList.get(e.parameter.value.asset_value.token_address))||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.decimals)||0:le,i=e.parameter.value.asset_value?e.parameter.value.asset_value.value:e.amount.toString(),c="send_payment"===e.parameter.entrypoint?We.Payment:We.Donation,o={hash:e.hash,type:c,direction:Ze.Incoming,status:"applied"===e.status?Ye.Success:Ye.Cancelled,amount:E.numberToTokensAmount(new r.a(i),n),asset:null===(s=e.parameter.value.asset_value)||void 0===s?void 0:s.token_address,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.sender.address,target:e.target.address};switch(o.type){case We.Payment:{const t=o;return t.paymentId=e.parameter.value.id,t}case We.Donation:{const t=o;return t.payload=qe.parsePayload(e.parameter.value.payload),t}default:return null}}}class it{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=me.get(this.network)||M.emptyMap}async getService(e){var t;const a=await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${e}/storage`),s=await a.json();if(+(null===s||void 0===s||null===(t=s[0].children)||void 0===t?void 0:t[s[0].children.length-1].value)<this.minimumSupportedServiceVersion)return null;const n=this.mapServiceDtoToService(s,e,this.network);if(!n)throw new Error("Service not found");return n}async getServices(e){const t=(await this.getServicesFactoryDto())[0].children[4].value,a=await fetch(`${this.baseUrl}/v1/bigmap/${this.network.name}/${t}/keys`),s=(await a.json()).find((t=>t.data.key_string===e));if(!s)return M.emptyArray;const n=s.data.value.children.map((e=>e.value));return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL(`v1/contract/${this.network.name}/${e}/operations`,this.baseUrl);t.searchParams.set("entrypoints","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).operations.filter((e=>!e.internal)).filter((e=>"send_payment"===e.entrypoint||"send_donation"===e.entrypoint)).map((e=>"send_payment"===e.entrypoint?this.mapSendPaymentOperationToServiceOperation(e):this.mapSendDonationOperationToServiceOperation(e))).filter(Boolean)}async getServicesFactoryDto(){return(await fetch(`${this.baseUrl}/v1/contract/${this.network.name}/${this.servicesFactoryContractAddress}/storage`)).json()}mapServiceDtoToService(e,t,a){let s;try{s=JSON.parse(e[0].children[4].value)}catch{return null}return!s||"string"!==typeof s.name||!L.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||M.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e[0].children[8].value,metadata:E.stringToBytes(e[0].children[4].value),contractAddress:t,network:a,allowedTokens:{tez:e[0].children[1].children[0].value,assets:M.emptyArray},allowedOperationType:+e[0].children[0].value,owner:e[0].children[5].value,paused:e[0].children[6].value,deleted:e[0].children[3].value,signingKeys:e[0].children[7].children?this.mapSigningKeyDtosToSigningKeys(e[0].children[7].children):new Map}}mapSigningKeyDtosToSigningKeys(e){return e.reduce(((e,t)=>{const a=t.children[0].value,s=t.children[1].value;return e.set(a,{publicKey:a,name:"None"!==s?s:void 0})}),new Map)}mapSendPaymentOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[1].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(t=this.tokenWhiteList.get(n))||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.decimals)||0:le,o=i||(e.amount||0).toString();return{hash:e.hash,type:We.Payment,direction:Ze.Incoming,status:"applied"===e.status?Ye.Success:Ye.Cancelled,paymentId:e.parameters[0].children[0].value,amount:E.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination}}mapSendDonationOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[0].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(t=this.tokenWhiteList.get(n))||void 0===t||null===(a=t.metadata)||void 0===a?void 0:a.decimals)||0:le,o=i||(e.amount||0).toString();return{hash:e.hash,type:We.Donation,direction:Ze.Incoming,status:"applied"===e.status?Ye.Success:Ye.Cancelled,amount:E.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination,payload:qe.parsePayload(E.stringToBytes(e.parameters[0].children[1].value))}}}const rt=e=>{switch(e){case v.p.GRANADANET:return se.granadanet;default:throw new Error("Not Supported network type")}},ct=e=>{switch(e){case se.granadanet:return v.p.GRANADANET;default:throw new Error("Not Supported network type")}},ot="78b6da1",lt={...Xe,app:{publicUrl:"/",name:"Tezos Payments",title:"Tezos Payments",version:{name:"Dev Version",link:"https://github.com/fastwaterbear/tezospayments/tree/master"},buildInfo:{commitShortSha:ot,link:"https://github.com/fastwaterbear/tezospayments/tree/78b6da1"}},routers:{overview:"/",operations:"/operations",services:"/services",service:Ve((e=>`/services/${e}`),"/services/:address"),createService:"/services/create",acceptPayments:"/accept",acceptServicePayments:Ve((e=>`/accept/${e}`),"/accept/:address"),connect:"/connect",about:"/about"},links:{...Xe.links,tzKT:"https://tzkt.io"}};class dt{constructor(e,t){this.tezosToolkit=e,this.dAppClient=t}async connect(e){return this.dAppClient.requestPermissions({network:{type:s.networkToBeaconNetwork(e)}}).then((t=>({address:t.address,publicKey:t.publicKey,network:e}))).catch((e=>(console.error(e),this.dAppClient.clearActiveAccount(),null)))}disconnect(){return this.dAppClient.clearActiveAccount()}async getActiveAccount(){const e=await this.dAppClient.getActiveAccount();return e?{address:e.address,publicKey:e.publicKey,network:s.beaconNetworkToNetwork(e.network.type)}:void 0}async getTezosBalance(e){return(await this.tezosToolkit.tz.getBalance(e.address)).div(10**le)}async getTokenBalance(e,t){let a=null;switch(t.type){case"fa1.2":a=await this.getTokenFA12Balance(e,t);break;case"fa2":a=await this.getTokenFA2Balance(e,t);break;default:throw new Error("Not Supported")}const s=t.metadata?10**t.metadata.decimals:1;return a.div(s)}async getTokenFA12Balance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return await(null===(a=(s=n.views).getBalance)||void 0===a?void 0:a.call(s,e.address).read())||0}async getTokenFA2Balance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return(await(null===(a=n.views)||void 0===a||null===(s=a.balance_of)||void 0===s?void 0:s.call(a,[{owner:e.address,token_id:t.id}]).read()))[0].balance||0}}var ut=a(518);class mt{async publicKeyHash(){return"tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A"}async publicKey(){return"edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K"}async secretKey(){throw new Error("Secret key cannot be exposed")}async sign(){throw new Error("Cannot sign")}}const pt=l.a.createContext({});var vt=a(864),ht=a(85);const bt=e=>e.accountsState,jt=Object(ht.a)(bt,(e=>e.currentAccount&&e.connectedAccounts.find((t=>{var a;return t.address===(null===(a=e.currentAccount)||void 0===a?void 0:a.address)&&t.network.id===e.currentAccount.network.id}))||null)),yt=Object(ht.a)(bt,(e=>e.connectedAccounts.reduce(((e,t)=>e.set(t.network,[...e.get(t.network)||[],t])),new Map))),gt=Object(ht.a)(jt,(e=>e&&lt.tezos.networks[e.network.name])),Ot=Object(ht.a)(bt,(e=>{var t;const a=null===(t=e.currentAccount)||void 0===t?void 0:t.network;return a&&me.get(a)||M.emptyMap})),wt=e=>e.servicesState,xt=Object(ht.a)(wt,Ot,((e,t)=>{const a=new Set;return e.services.forEach((e=>e.allowedTokens.assets.forEach((e=>{const s=t.get(e);s&&a.add(s)})))),[...a]})),kt=Object(ht.a)(wt,(e=>e.services.some((e=>e.allowedTokens.tez)))),ft=Object(ht.a)(wt,(e=>[...e.services].sort(((e,t)=>e.name.localeCompare(t.name))))),St=Object(ht.a)(wt,(e=>{const t=new Map;return e.pendingOperations.forEach((e=>{const a=t.get(e.serviceAddress);a?a.push(e):t.set(e.serviceAddress,[e])})),t})),At={tezos:M.zeroBigNumber,tokens:M.emptyObject,initialized:!1},_t="balances",Nt=Object(n.b)("balances/loadBalances",(async(e,{extra:t,getState:a})=>{const s=await t.services.accountsService.getTezosBalance(e),n=xt(a()),i={},r=n.map((a=>t.services.accountsService.getTokenBalance(e,a)));return(await Promise.all(r)).forEach(((e,t)=>{var a;const s=null===(a=n[t])||void 0===a?void 0:a.contractAddress;s&&(i[s]=e)})),{tezos:s,tokens:i}})),Ct=Object(n.c)({name:_t,initialState:At,reducers:{clearBalances:e=>{e.tezos=M.zeroBigNumber,e.initialized=!1}},extraReducers:e=>{e.addCase(Nt.fulfilled,((e,t)=>{const{tezos:a,tokens:s}=t.payload;e.tezos=a,e.tokens=s,e.initialized=!0}))}}),{clearBalances:Pt}=Ct.actions,Tt={operations:M.emptyArray,initialized:!1},zt="operations",Dt=Object(n.b)("operations/loadOperations",(async({servicesAddresses:e},{extra:t})=>{const a=e.map((e=>t.services.servicesService.getOperations(e)));return(await Promise.all(a)).flat()})),Ut=Object(n.c)({name:zt,initialState:Tt,reducers:{clearOperations:e=>{e.operations=M.emptyArray,e.initialized=!1}},extraReducers:e=>{e.addCase(Dt.fulfilled,((e,t)=>{e.operations=t.payload,e.initialized=!0}))}}),{clearOperations:It}=Ut.actions;let Et;!function(e){e[e.loading=0]="loading",e[e.success=1]="success",e[e.error=2]="error"}(Et||(Et={}));const Kt={services:M.emptyArray,initialized:!1,pendingOperations:M.emptyArray},Lt="services",Ft=Object(n.b)("services/loadServices",(async(e,{extra:t,dispatch:a})=>{const s=await t.services.servicesService.getServices(e);return s.length&&(a(Nt(e)),a(Dt({servicesAddresses:s.map((e=>e.contractAddress)),network:e.network}))),s})),Bt=Object(n.b)("services/updateService",(async(e,{extra:t,dispatch:a,getState:s})=>{const n=await t.services.servicesService.updateService(e);await Yt(a,n,e.contractAddress,"updating"),Zt(a,s)})),$t=Object(n.b)("services/createService",(async(e,{extra:t,dispatch:a,getState:s})=>{const n=await t.services.servicesService.createService(e);await Yt(a,n,e.contractAddress,"creating new service"),Zt(a,s)})),Mt=Object(n.b)("services/setPaused",(async({service:e,paused:t},{extra:a,dispatch:s,getState:n})=>{const i=await a.services.servicesService.setPaused(e,t);await Yt(s,i,e.contractAddress,t?"pausing":"unpausing"),Zt(s,n)})),Vt=Object(n.b)("services/setDeleted",(async({service:e,deleted:t},{extra:a,dispatch:s,getState:n})=>{const i=await a.services.servicesService.setDeleted(e,t);await Yt(s,i,e.contractAddress,t?"deleting":"undeleting"),Zt(s,n)})),Rt=Object(n.b)("services/addApiKey",(async({service:e,signingKey:t},{extra:a,dispatch:s,getState:n})=>{const i=await a.services.servicesService.addApiKey(e,t);await Yt(s,i,e.contractAddress,"adding API key"),Zt(s,n)})),Ht=Object(n.b)("services/deleteApiKey",(async({service:e,publicKey:t},{extra:a,dispatch:s,getState:n})=>{const i=await a.services.servicesService.deleteApiKey(e,t);await Yt(s,i,e.contractAddress,"deleting API key"),Zt(s,n)})),Wt=Object(n.b)("services/clearServices",(async(e,{dispatch:t})=>{t(Pt())})),Zt=(e,t)=>{const a=jt(t());a&&e(Ft(a))},Yt=(e,t,a,s,n=2)=>{const i=((e,t,a,s)=>({hash:e,action:a,serviceAddress:t,targetConfirmationCount:s,confirmationCount:0,status:Et.loading}))(t.opHash,a,s,n);return e(Gt(i)),new Promise(((a,s)=>{t.confirmationObservable(n).subscribe((t=>e(Qt({hash:i.hash,confirmationCount:t.currentConfirmation}))),(async t=>{e(Jt({hash:i.hash,status:Et.error})),s(t),await W(1e3),e(Xt(i.hash))}),(async()=>{e(Jt({hash:i.hash,status:Et.success})),a(),await W(1e3),e(Xt(i.hash))}))}))},qt=Object(n.c)({name:Lt,initialState:Kt,reducers:{addPendingOperation:(e,t)=>{const a=t.payload;e.pendingOperations.push(a)},setPendingOperationStatus:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.status=t.payload.status)},setPendingOperationConfirmationCount:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.confirmationCount=t.payload.confirmationCount)},deletePendingOperation:(e,t)=>{e.pendingOperations=e.pendingOperations.filter((e=>e.hash!==t.payload))}},extraReducers:e=>{e.addCase(Ft.fulfilled,((e,t)=>({...e,services:t.payload,initialized:!0}))),e.addCase(Wt.fulfilled,(e=>({...e,services:M.emptyArray,initialized:!1})))}}),{addPendingOperation:Gt,setPendingOperationStatus:Jt,setPendingOperationConfirmationCount:Qt,deletePendingOperation:Xt}=qt.actions,ea={currentAccount:null,connectedAccounts:M.emptyArray,initialized:!1},ta="accounts",aa=Object(n.b)("accounts/loadActiveAccount",(async(e,{extra:t,dispatch:a})=>{const s=await t.services.accountsService.getActiveAccount();return s&&a(Ft(s)),s||null})),sa=Object(n.b)("accounts/connect",(async(e,{extra:t,dispatch:a})=>{const s=await t.services.accountsService.connect(e);return s&&a(Ft(s)),s})),na=Object(n.b)("accounts/disconnect",(async(e,{extra:t,dispatch:a})=>{const s=await t.services.accountsService.disconnect();return a(Wt()),s})),ia=Object(n.c)({name:ta,initialState:ea,reducers:{},extraReducers:e=>{e.addCase(aa.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a)),e.initialized=!0})),e.addCase(sa.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a))})),e.addCase(na.fulfilled,(e=>{e.connectedAccounts=e.connectedAccounts.filter((t=>{var a,s;return t.address!==(null===(a=e.currentAccount)||void 0===a?void 0:a.address)||t.network.id!==(null===(s=e.currentAccount)||void 0===s?void 0:s.network.id)}));const t=e.connectedAccounts[0];e.currentAccount=t?{address:t.address,network:t.network}:null}))}}),ra={id:"en-US",resources:{common:{comingSoon:"Coming soon",copy:"Copy",copyLink:"Copy Link",open:"Open",new:"New",cancel:"Cancel",save:"Save",yes:"Yes",no:"No"},views:{header:{accountActions:{copyAddress:{title:"Copy address"},viewOn:"View on",connectAnotherAccount:{title:"Connect another account"},disconnect:{title:"Disconnect"}}},overview:{title:"Overview",balances:{title:"Balances"},incoming:{title:"Incoming"},outgoing:{title:"Outgoing"},operationCount:{title:"Operation count"},volume:{title:"Volume"}},createService:{title:"Create Service"},connect:{actions:{connect:{title:"Connect",connectTo:"Connect to",description:`In order to use the ${lt.app.title} service you have to connect a Tezos account`}}},about:{title:"About",detailedTitle:"Decentralized Payment Solution built on Tezos blockchain",build:"build",poweredBy:"Powered by",tzKt:"TzKT",api:"API"},operations:{title:"Operations",operationList:{paymentId:"Payment Id:",donationData:"Donation Data:",income:"Income",expense:"Expense",cancelled:"Cancelled",pending:"Pending",noOperationsPerformedYet:"No operations performed yet"}},services:{title:"Services",status:{active:"Active",paused:"Paused",deleted:"Deleted",updating:"Updating"},createNewService:"Create New Service",acceptPayments:"Accept Payments",acceptPaymentsDescription:"Generate a payment link using our constructor to accept payments on your service",youDoNotHaveAnyServicesYet:"You don't have any services yet",createYourFirstService:"Create your first service to accept payments or connect another Tezos account",operations:{paymentsEnabled:"Payments Enabled",donationsEnabled:"Donations Enabled"},allowedCurrencies:"Allowed Currencies",service:"Service",links:"Links",dangerZone:{title:"Danger Zone",pauseService:"Pause Service",pauseServiceConfirmation:"Are you sure you want to pause the service",pauseServiceDescription:"Pause accepting payments and donations",unPauseService:"Unpause Service",unPauseServiceConfirmation:"Are you sure you want to unpause the service",unPauseServiceDescription:"Accepting payments and donations are paused",deleteService:"Delete Service",deleteServiceConfirmation:"Are you sure you want to delete the service",deleteServiceDescription:"Delete this service. After deleting this service can\u2019t accept payments and donations. You can restore the deleted service",unDeleteService:"Undelete Service",unDeleteServiceConfirmation:"Are you sure you want to undelete the service",unDeleteServiceDescription:"Service is marked as deleted"},devZone:{title:"API Keys",addKey:"Add Key",saveKeys:"Save Keys",generateKeys:"Generate Keys",name:"Name",algorithm:"Algorithm",publicKey:"Public Key",secretKey:"Secret Key",saveSecretKeyWarning:"Write down the secret key, we will never show it again",saveSecretKeyConfirm:"Have you written down the secret key?",noApiKeysAddedYet:"No API keys added yet",deleteKeyConfirmation:"Are you sure you want to delete the API key"},editing:{editService:"Edit Service",updateService:"Update Service",createService:"Create Service",addCurrency:"Add Currency",addLink:"Add Link",serviceName:"Service Name",description:"Description",accept:"Accept",acceptPayments:"Accept Payments",acceptDonations:"Accept Donations"}},settings:{title:"Settings"},acceptPayments:{title:"Accept Payments",type:"Type",amount:"Amount",paymentData:"Payment Data",paymentId:"Payment ID",paymentIdHelpText:"Payment ID/invoice number/any unique identifier in your system",donationData:"Donation Data",donationDescription:"Short description on the page",generateAndSignPaymentLink:"Generate and Sign Payment Link",donationDescriptionHelpText:"This message will be shown to your donators when they will donate",directLinkPaymentHelpText:"Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc",directLinkDonationHelpText:"Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link",errors:{fillRequiredData:"Fill required data to generate corresponding content"}}}}},ca=()=>ra.resources,oa=m.b,la=m.c,da=()=>Object(o.useContext)(pt);var ua=a(520),ma=a(548),pa={defaultNetworkName:"mainnet",paymentAppBaseUrl:"https://payment.tezospayments.com"};const va=(e,t="")=>e.reduce(((e,t,a)=>`${e}\n\t${a+1}. ${t};`),t);class ha extends Error{constructor(e){super(e),this.name=this.constructor.name}}class ba extends ha{constructor(e){super(L.isReadonlyArray(e)?ba.getMessage(e):e)}static getMessage(e){return va(e,"options are invalid, see details below:")}}class ja extends ha{}class ya extends ha{constructor(e){super(L.isReadonlyArray(e)?ya.getMessage(e):e)}static getMessage(e){return va(e,"payment is invalid, see details below:")}}class ga extends ha{}class Oa extends ha{}class wa extends ha{}var xa=Object.freeze({__proto__:null,TezosPaymentsError:ha,InvalidTezosPaymentsOptionsError:ba,InvalidPaymentCreateParametersError:ja,InvalidPaymentError:ya,UnsupportedPaymentUrlTypeError:ga,PaymentUrlError:Oa,DonationUrlError:wa});class ka{constructor(e){this.urlType=e}}class fa extends ka{constructor(e=fa.baseUrl){super($e.Base64),g()(this,"paymentSerializer",new Ue),g()(this,"donationSerializer",new Ke),this.baseUrl=e}createPaymentUrl(e,t){return e.type===ee.Payment?this.createPaymentUrlInternal(e,t):this.createDonationUrlInternal(e,t)}createPaymentUrlInternal(e,t){const a=this.paymentSerializer.serialize(e);if(!a)throw new Oa("It's impossible to serialize the payment");try{return this.createUrl(!0,e.targetAddress,a,t)}catch(s){throw new Oa("It's impossible to create an URL for the payment")}}createDonationUrlInternal(e,t){const a=this.donationSerializer.serialize(e);if(!a&&""!==a)throw new wa("It's impossible to serialize the donation");try{return this.createUrl(!1,e.targetAddress,a,t)}catch(s){throw new wa("It's impossible to create an URL for the donation")}}createUrl(e,t,a,s){const n=new ye.URL(`${t}/${e?"payment":"donation"}`,this.baseUrl);var i;return""!==a&&(n.hash=(i=this.urlType,(Me.get(i)||"")+a)),s.name!==pa.defaultNetworkName&&n.searchParams.append("network",s.name),n.href}}g()(fa,"baseUrl",pa.paymentAppBaseUrl);var Sa,Aa=Object.freeze({__proto__:null,PaymentUrlFactory:ka,Base64PaymentUrlFactory:fa});class _a{constructor(e){this.signingType=e}}!function(e){e[e.ApiSecretKey=0]="ApiSecretKey",e[e.Wallet=1]="Wallet",e[e.Custom=2]="Custom"}(Sa||(Sa={}));class Na extends _a{constructor(e){super(Sa.ApiSecretKey),g()(this,"paymentSignPayloadEncoder",new Qe),this.apiSecretKey=e,this.inMemorySigner=new ua.a(this.apiSecretKey)}async sign(e){var t;const a=this.paymentSignPayloadEncoder.encode(e),s=this.inMemorySigner.sign(a.contractSignPayload),n=a.clientSignPayload?[s,this.inMemorySigner.sign(a.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:await this.inMemorySigner.publicKey(),contract:i[0].prefixSig,client:null===(t=i[1])||void 0===t?void 0:t.prefixSig}}}class Ca extends _a{constructor(e){super(Sa.Wallet),g()(this,"paymentSignPayloadEncoder",new Qe),this.walletSigning=e}async sign(e){const t=this.paymentSignPayloadEncoder.encode(e),a=t.contractSignPayload.substring(2),s=this.walletSigning(a),n=t.clientSignPayload?[s,this.walletSigning(t.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:"",contract:i[0],client:i[1]}}}class Pa extends _a{constructor(e){super(Sa.Custom),this.customSigning=e}sign(e){throw new Error("Method not implemented.")}}var Ta=Object.freeze({__proto__:null,TezosPaymentsSigner:_a,ApiSecretKeySigner:Na,WalletSigner:Ca,CustomSigner:Pa});class za{constructor(e){g()(this,"paymentValidator",new _e),g()(this,"paymentUrlFactories",new Map);const t=this.validateOptions(e);if(t)throw new ba(t);this.serviceContractAddress=e.serviceContractAddress,this.defaultPaymentParameters=e.defaultPaymentParameters?{network:e.defaultPaymentParameters.network||za.defaultPaymentParameters.network,urlType:e.defaultPaymentParameters.urlType||za.defaultPaymentParameters.urlType}:za.defaultPaymentParameters,this.signer=this.createSigner(e.signing),this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType)}async createPayment(e){if(!e)throw new ja(e);let t;if(e.urlType&&(t=this.validateDefaultPaymentParameters(e),t))throw new ya(t);const a=this.createPaymentByCreateParameters(e);if(t=this.paymentValidator.validate(a,!0),t)throw new ya(t);const s=await this.getSignedPayment(a);if(t=this.paymentValidator.validate(s,!0),t)throw new ya(t);const n=await this.getPaymentUrl(s,e.urlType);return this.applyPaymentUrl(s,n)}getPaymentUrl(e,t=this.defaultPaymentParameters.urlType){return this.getPaymentUrlFactory(t).createPaymentUrl(e,this.defaultPaymentParameters.network)}applyPaymentUrl(e,t){return e.url=t,e}getPaymentUrlFactory(e){let t=this.paymentUrlFactories.get(e);return t||(t=this.createPaymentUrlFactory(e),this.paymentUrlFactories.set(e,t)),t}async getSignedPayment(e){return e.signature=await this.signer.sign(e),e}createSigner(e){return"apiSecretKey"in e?new Na(e.apiSecretKey):"walletSigning"in e?new Ca(e.walletSigning):new Pa(e)}createPaymentUrlFactory(e){switch(e){case $e.Base64:return new fa;default:throw new ga(`This payment url type is not supported: ${e}`)}}createPaymentByCreateParameters(e){const t={type:ee.Payment,id:e.id||Object(ma.a)(),targetAddress:this.serviceContractAddress,amount:new r.a(e.amount),data:e.data,created:e.created?new Date(e.created):new Date};return e.asset&&(t.asset=e.asset),e.expired&&(t.expired=new Date(e.expired)),e.successUrl&&(t.successUrl=new ye.URL(e.successUrl)),e.cancelUrl&&(t.cancelUrl=new ye.URL(e.cancelUrl)),t}validateOptions(e){return[this.validateServiceContractAddress(e.serviceContractAddress),this.validateSigningOptions(e.signing),this.validateDefaultPaymentParameters(e.defaultPaymentParameters)].reduce(((e,t)=>t?(e||[]).concat(t):e),void 0)}validateServiceContractAddress(e){return e&&"string"===typeof e?e.length!==he.addressLength?[za.optionsValidationErrors.serviceContractAddressHasInvalidLength]:he.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[za.optionsValidationErrors.serviceContractAddressIsNotContractAddress]:[za.optionsValidationErrors.invalidServiceContractAddressType]}validateSigningOptions(e){if("object"!==typeof e)return[za.optionsValidationErrors.invalidSigningOption];if("function"!==typeof e){if(!("apiSecretKey"in e)&&!("walletSigning"in e))return[za.optionsValidationErrors.invalidSigningOption];if("apiSecretKey"in e){if("string"!==typeof e.apiSecretKey)return[za.optionsValidationErrors.invalidApiSecretKeyType];if(!e.apiSecretKey)return[za.optionsValidationErrors.emptyApiSecretKey]}return"walletSigning"in e&&"function"!==typeof e.walletSigning?[za.optionsValidationErrors.invalidWalletSigningOptionType]:void 0}}validateDefaultPaymentParameters(e){if(void 0!==e){if("object"!==typeof e)return[za.optionsValidationErrors.invalidDefaultPaymentParameters];if("network"in e){if("object"!==typeof e.network)return[za.optionsValidationErrors.invalidNetwork];if(void 0===e.network.name||""===e.network.name)return[za.optionsValidationErrors.emptyNetworkName];if("string"!==typeof e.network.name||!re.test(e.network.name))return[za.optionsValidationErrors.invalidNetworkName];if(e.network.id&&("string"!==typeof e.network.id||!ie.test(e.network.id)))return[za.optionsValidationErrors.invalidNetworkId]}return"urlType"in e&&e.urlType!==$e.Base64?[za.optionsValidationErrors.invalidUrlType]:void 0}}}g()(za,"defaultPaymentParameters",{network:se.granadanet,urlType:$e.Base64}),g()(za,"optionsValidationErrors",{invalidServiceContractAddressType:"Type of the serviceContractAddress option is invalid",serviceContractAddressHasInvalidLength:"The serviceContractAddress option has an invalid address",serviceContractAddressIsNotContractAddress:"The serviceContractAddress option isn't a contract address",invalidSigningOption:"The signing option is invalid",invalidApiSecretKeyType:"The API secret key has an invalid type, it should be a string",emptyApiSecretKey:"The API secret key is empty",invalidWalletSigningOptionType:"The WalletSigning option has an invalid type, it should be a function",invalidDefaultPaymentParameters:"The default payment parameters are invalid",emptyNetworkName:"The network name is empty",invalidNetwork:"The network is invalid",invalidNetworkName:"The network name is invalid",invalidNetworkId:"The network id is invalid",invalidUrlType:"The url type is invalid"});const Da={constants:pa,errors:xa,paymentUrlFactories:Aa,signers:Ta},Ua=new Map,Ia=e=>{var t;const a=da(),s=null===(t=la(jt))||void 0===t?void 0:t.network;if(!e||!s)return null;let n=Ua.get(e);return n||(n=((e,t,a)=>new za({serviceContractAddress:e,signing:{walletSigning:e=>a.client.requestSignPayload({signingType:v.C.MICHELINE,payload:e}).then((e=>e.signature))},defaultPaymentParameters:{network:t}}))(e,s,a.tezosWallet),Ua.set(e,n)),n};var Ea=a(3);const Ka=lt.routers.connect,La=({children:e,isConnected:t,connectPath:a=Ka,...s})=>Object(Ea.jsx)(p.b,{...s,children:s=>t?e:Object(Ea.jsx)(p.a,{to:{pathname:a,state:{from:s.location}}})}),Fa=e=>{const t=la((e=>e.accountsState.currentAccount));return Object(Ea.jsx)(La,{...e,isConnected:!!t})};var Ba=a(876),$a=a(100),Ma=a(165);a(749);const Va=e=>{var t,a;const s=Object(O.a)("token-list-item__value",{"token-list-item__value_positive":e.highlightSign&&e.value&&!e.value.isZero()&&e.value.isPositive()},{"token-list-item__value_negative":e.highlightSign&&e.value&&!e.value.isZero()&&e.value.isNegative()}),n=(null===(t=e.value)||void 0===t?void 0:t.isNegative())?"-":e.highlightSign&&(null===(a=e.value)||void 0===a?void 0:a.isPositive())?"+":"",i=e.value&&e.value.abs(),[r,c]=void 0!==i&&null!==i?(e=>{const t=e.toFormat(6,{groupSeparator:"",decimalSeparator:"."}),a=e.toString();return[a.substring(0,t.length),a]})(i):[null,null],o=null!==r&&null!==c&&(r===c||c.substr(r.length).split("").every((e=>"0"===e))),l=r&&Object(Ea.jsx)("span",{className:s,children:`${n}${r}${o?"":"..."}`});return Object(Ea.jsxs)("li",{className:Object(O.a)("token-list-item",e.className),children:[Object(Ea.jsx)("img",{className:"token-list-item__icon",src:e.iconSrc,alt:e.name}),Object(Ea.jsxs)("div",{children:[Object(Ea.jsxs)("div",{className:"token-list-item__name-container",children:[Object(Ea.jsx)("span",{className:"token-list-item__ticker",children:e.ticker}),Object(Ea.jsx)("span",{className:"token-list-item__name",children:e.name}),e.handleDelete&&Object(Ea.jsx)($a.a,{className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Ea.jsx)(Ba.a,{}),onClick:()=>{var t;return null===(t=e.handleDelete)||void 0===t?void 0:t.call(e,e.contractAddress)}})]}),o||void 0===i||null===i?l:Object(Ea.jsx)(Ma.a,{title:c,children:l})]})]})};a(794);const Ra=e=>Object(Ea.jsx)("ul",{className:"token-list",children:e.children});Ra.Item=Va;var Ha=a(549);a(795);const Wa=e=>{const t=da(),a=ca().common,s=Object(o.useCallback)((()=>{navigator.clipboard.writeText(e.hash)}),[e.hash]);return Object(Ea.jsxs)("div",{className:"explorer-link__container",children:[Object(Ea.jsx)("a",{href:t.tezosExplorer.getEntityUrl(e.hash),target:"_blank",rel:"noreferrer",className:e.className,children:e.children}),e.showCopyButton&&Object(Ea.jsx)(Ha.a,{className:"explorer-link__copy-icon",title:a.copy,onClick:s})]})},Za=l.a.memo(Wa),Ya=e=>Object(Ea.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer",children:e.children});var qa=a(860);a(796);const Ga=()=>{const e=ca().views.services,t=Object(p.g)(),a=Object(o.useCallback)((()=>{t.push(lt.routers.createService)}),[t]);return Object(Ea.jsx)("div",{className:"no-services-created",children:Object(Ea.jsxs)("div",{children:[Object(Ea.jsx)("p",{children:e.youDoNotHaveAnyServicesYet}),Object(Ea.jsx)("p",{children:e.createYourFirstService}),Object(Ea.jsx)($a.a,{type:"primary",onClick:a,children:e.editing.createService})]})})},Ja=l.a.memo(Ga),Qa=e=>{const t=Object(O.a)(e.className,"view__title");return l.a.createElement(e.as,{className:t},e.children)};Qa.defaultProps={as:"h1"};a(797);const Xa=e=>{var t;t=e.title?`${e.title} | ${lt.app.title}`:lt.app.title,Object(o.useEffect)((()=>{document.title=t}),[t]);const a=Object(O.a)("view",e.className);return l.a.createElement(e.as,{className:a},e.children)};Xa.defaultProps={as:"main"},Xa.Title=Qa;var es=a(855);const ts=()=>{const e={data:[{month:"May",operationCount:900},{month:"June",operationCount:1600},{month:"July",operationCount:600},{month:"August",operationCount:2200},{month:"September",operationCount:950},{month:"October",operationCount:1100}],xField:"month",yField:"operationCount",height:400,meta:{operationCount:{alias:"Operation count"}}};return la(wt).initialized?Object(Ea.jsx)(es.a,{...e}):Object(Ea.jsx)(vt.a,{active:!0,paragraph:{rows:12}})},as=l.a.memo(ts);var ss=a(857);const ns=()=>{const e={data:[{quarter:"Q1 2020",sum:24756},{quarter:"Q2 2020",sum:22178},{quarter:"Q3 2020",sum:13613},{quarter:"Q4 2020",sum:29436},{quarter:"Q1 2021",sum:25679},{quarter:"Q2 2021",sum:26483},{quarter:"Q3 2021",sum:41835},{quarter:"Q4 2021",sum:32412}],xField:"quarter",yField:"sum",height:400,smooth:!0,meta:{sum:{alias:"Sum"}}};return la(wt).initialized?Object(Ea.jsx)(ss.a,{...e}):Object(Ea.jsx)(vt.a,{active:!0,paragraph:{rows:12}})},is=l.a.memo(ns),rs=e=>e.balancesState,cs=()=>{const e=la(kt),t=la(xt),a=la(wt),s=la(rs);if(!a.initialized||!s.initialized)return Object(Ea.jsx)(vt.a,{active:!0});const n=[];return e&&n.push(Object(Ea.jsx)(Ra.Item,{contractAddress:"",ticker:ce,name:oe,decimals:le,value:s.tezos,iconSrc:de},ce)),t.forEach((e=>{e.metadata&&n.push(Object(Ea.jsx)(Ra.Item,{contractAddress:"",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:s.tokens[e.contractAddress]||M.zeroBigNumber,iconSrc:e.metadata.thumbnailUri},e.metadata.symbol))})),Object(Ea.jsx)(Ra,{children:n})},os=l.a.memo(cs),ls=()=>{const e=la(kt),t=la(wt),a=la(xt);if(!t.initialized)return Object(Ea.jsx)(vt.a,{active:!0});const s=[];return e&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:"",ticker:ce,name:oe,decimals:le,value:new r.a(52.4),iconSrc:de,highlightSign:!0},ce)),a.forEach((e=>{e.metadata&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:e.contractAddress,ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:new r.a(462518),iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ea.jsx)(Ra,{children:s})},ds=l.a.memo(ls),us=()=>{const e=la(kt),t=la(wt),a=la(xt);if(!t.initialized)return Object(Ea.jsx)(vt.a,{active:!0});const s=[];return e&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:"",ticker:ce,name:oe,decimals:le,value:new r.a(-52.4),iconSrc:de,highlightSign:!0},ce)),a.forEach((e=>{e.metadata&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:e.contractAddress,ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:new r.a(-462518.0000006),iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ea.jsx)(Ra,{children:s})},ms=l.a.memo(us);a(805);const ps=()=>{const e=ca(),t=e.common,a=e.views.overview,s=la(wt);return Object(Ea.jsxs)(Xa,{title:a.title,className:"overview",children:[Object(Ea.jsx)(Xa.Title,{children:a.title}),s.initialized&&!s.services.length?Object(Ea.jsx)(Ja,{}):Object(Ea.jsxs)("div",{className:"cards-container",children:[Object(Ea.jsx)(qa.a,{className:"cards-container__small-card",size:"small",title:a.balances.title,children:Object(Ea.jsx)(os,{})}),Object(Ea.jsx)(qa.a,{className:"cards-container__small-card",size:"small",title:`${a.incoming.title} (${t.comingSoon})`,extra:Object(Ea.jsx)("a",{href:"#void",children:"All Month"}),children:Object(Ea.jsx)(ds,{})}),Object(Ea.jsx)(qa.a,{className:"cards-container__small-card",size:"small",title:`${a.outgoing.title} (${t.comingSoon})`,extra:Object(Ea.jsx)("a",{href:"#void",children:"All Month"}),children:Object(Ea.jsx)(ms,{})}),Object(Ea.jsx)(qa.a,{className:"cards-container__large-card",title:`${a.operationCount.title} (${t.comingSoon})`,extra:Object(Ea.jsx)("a",{href:"#void",children:"6 Months"}),children:Object(Ea.jsx)(as,{})}),Object(Ea.jsx)(qa.a,{className:"cards-container__large-card",title:`${a.volume.title} (${t.comingSoon})`,extra:Object(Ea.jsx)("a",{href:"#void",children:"Last 2 Years"}),children:Object(Ea.jsx)(is,{})})]})]})},vs=l.a.memo(ps),hs=Object(ht.a)((e=>e.operationsState),(e=>[...e.operations].sort(((e,t)=>+t.date-+e.date))));var bs=a(69),js=a(874),ys=a(875),gs=a(877),Os=a(338);a(806);const ws=e=>{const t=ca().views.operations.operationList,a=e.direction===Ze.Incoming,s=Object(O.a)(e.className,"operation-icon",{"operation-icon_income":a},{"operation-icon_expense":!a},{"operation-icon_cancelled":e.status===Ye.Cancelled});return Object(Ea.jsxs)("div",{className:s,children:[a?Object(Ea.jsx)(js.a,{title:t.income}):Object(Ea.jsx)(ys.a,{title:t.expense}),e.status===Ye.Pending&&Object(Ea.jsx)(gs.a,{className:"operation-icon__status operation-icon__status_pending",title:t.pending}),e.status===Ye.Cancelled&&Object(Ea.jsx)(Os.a,{className:"operation-icon__status operation-icon__status_cancelled",title:t.cancelled})]})},xs=l.a.memo(ws);a(807);const ks=e=>Object(Ea.jsx)("table",{className:"operation-list",children:e.children}),fs=e=>`${e.substr(0,9)}...${e.substr(e.length-6,6)}`;ks.Item=e=>{const t=ca().views.operations.operationList,a=e.direction===Ze.Incoming,s=a?e.accountAddress:e.serviceAddress,n=a?e.serviceAddress:e.accountAddress,i=fs(e.hash),r=`${e.type===We.Donation?t.donationData:t.paymentId} ${e.data}`,c=a?"+":"\u2212",o=Object(O.a)("operation-list-item__amount",{"operation-list-item__amount_income":a},{"operation-list-item__amount_expense":!a},{"operation-list-item__amount_cancelled":e.status===Ye.Cancelled}),l=`${lt.routers.services}/${e.serviceAddress}`;return Object(Ea.jsxs)("tbody",{className:"operation-list-group",children:[Object(Ea.jsxs)("tr",{className:"operation-list-row operation-list-row_general",children:[Object(Ea.jsx)("td",{className:"operation-list-item__icon",children:Object(Ea.jsx)(xs,{direction:e.direction,status:e.status})}),Object(Ea.jsxs)("td",{className:"operation-list-item__main-info",children:[Object(Ea.jsx)("span",{className:"operation-list-item__date",children:e.date.toLocaleString()}),Object(Ea.jsx)(Wa,{hash:e.hash,className:"operation-list-item__operation-hash",children:i})]}),Object(Ea.jsxs)("td",{className:"operation-list-item__transfer-info",children:[s===e.serviceAddress?Object(Ea.jsx)(bs.a,{to:l,children:e.serviceName}):Object(Ea.jsx)(Wa,{hash:s,children:fs(s)}),"\xa0\u2192\xa0",n===e.serviceAddress?Object(Ea.jsx)(bs.a,{to:l,children:e.serviceName}):Object(Ea.jsx)(Wa,{hash:n,children:fs(n)})]}),Object(Ea.jsxs)("td",{className:o,children:[c,e.value.toFormat()," ",e.ticker]})]}),Object(Ea.jsxs)("tr",{className:"operation-list-row operation-list-row_order-data",children:[Object(Ea.jsx)("td",{}),Object(Ea.jsx)("td",{className:"operation-list-item__data",colSpan:3,children:r})]})]})};a(808);const Ss=()=>{const e=ca().views.operations.operationList;return Object(Ea.jsx)("div",{className:"no-operations-performed-container",children:e.noOperationsPerformedYet})},As=l.a.memo(Ss),_s=e=>{var t;switch(e.type){case We.Payment:return e.paymentId;case We.Donation:return null===(t=e.payload)||void 0===t?void 0:t.valueString;default:return}},Ns=()=>{const e=ca().views.operations,t=la(hs),a=la(wt),s=la(Ot),n=t.map((e=>{var t,n,i;const r=e.asset&&(null===(t=s.get(e.asset))||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.symbol);return{date:e.date,hash:e.hash,data:_s(e)||"",accountAddress:e.sender,serviceAddress:e.target,serviceName:(null===(i=a.services.filter((t=>t.contractAddress===e.target))[0])||void 0===i?void 0:i.name)||"",ticker:r||"XTZ",value:e.amount,status:e.status,type:e.type,direction:Ze.Incoming}}));return Object(Ea.jsxs)(Xa,{title:e.title,children:[Object(Ea.jsx)(Xa.Title,{children:e.title}),a.initialized?a.services.length?t.length?Object(Ea.jsx)(ks,{children:n.map((e=>Object(Ea.jsx)(ks.Item,{...e},e.hash)))}):Object(Ea.jsx)(As,{}):Object(Ea.jsx)(Ga,{}):Object(Ea.jsx)(vt.a,{active:!0})]})},Cs=l.a.memo(Ns);var Ps=a(547);a(809);const Ts=()=>{const e=ca(),t=e.common,a=e.views.services,s=Object(p.g)(),n=Object(o.useCallback)((()=>{s.push(lt.routers.createService)}),[s]);return Object(Ea.jsx)(qa.a,{bodyStyle:{padding:0},className:"new-service-card-container",onClick:n,children:Object(Ea.jsx)("div",{className:"new-service-card",title:a.createNewService,children:Object(Ea.jsxs)("div",{className:"new-service-card__info",children:[Object(Ea.jsx)(Ps.a,{className:"new-service-card__icon"}),Object(Ea.jsx)("span",{children:t.new})]})})})},zs=l.a.memo(Ts);var Ds=a(878),Us=a(339),Is=a(879),Es=a(340),Ks=a(871);a(810);const Ls=e=>{const t=ca().views.services;return e.isUpdating?Object(Ea.jsx)(Ks.a,{icon:Object(Ea.jsx)(Ds.a,{spin:!0}),className:"tag-active tag-active_updating",children:t.status.updating}):e.deleted?Object(Ea.jsx)(Ks.a,{icon:Object(Ea.jsx)(Us.a,{}),className:"tag-active tag-active_deleted",children:t.status.deleted}):e.paused?Object(Ea.jsx)(Ks.a,{icon:Object(Ea.jsx)(Is.a,{}),className:"tag-active tag-active_paused",children:t.status.paused}):Object(Ea.jsx)(Ks.a,{icon:Object(Ea.jsx)(Es.a,{}),className:"tag-active tag-active_active",children:t.status.active})},Fs=l.a.memo(Ls);a(811);const Bs=e=>Object(Ea.jsx)(Ks.a,{className:"tag-custom",children:e.text}),$s=l.a.memo(Bs);a(812);const Ms=e=>{const t=Object(p.g)(),a=ca().common,s=Object(o.useCallback)((a=>{const s=a.target.tagName.toLowerCase();"svg"!==s&&"a"!==s&&"path"!==s&&t.push(`${lt.routers.services}/${e.service.contractAddress}`)}),[t,e.service.contractAddress]),n=Object(O.a)("service-card__logo",e.service.iconUrl?"service-card__logo_image":"service-card__logo_text");return Object(Ea.jsx)(qa.a,{size:"small",bodyStyle:{padding:0},className:"service-card-container",onClick:s,children:Object(Ea.jsxs)("div",{className:"service-card",children:[Object(Ea.jsxs)("div",{className:"service-card__info-container",children:[Object(Ea.jsxs)("div",{className:"service-card__main-info",children:[e.service.iconUrl?Object(Ea.jsx)("img",{className:n,alt:"logo",src:e.service.iconUrl}):Object(Ea.jsx)("span",{className:n,children:H.getAvatarText(e.service.name)}),Object(Ea.jsxs)("div",{className:"service-card__name-container",children:[Object(Ea.jsx)("span",{className:"service-card__name",title:e.service.name,children:e.service.name}),Object(Ea.jsx)("div",{className:"service-card__tags-container",children:Object(Ea.jsx)(Fs,{paused:e.service.paused,deleted:e.service.deleted,isUpdating:e.isUpdating})})]})]}),Object(Ea.jsx)("div",{className:"service-card__link-container",children:Object(Ea.jsx)(Za,{hash:e.service.contractAddress,className:"service-card__link",showCopyButton:!0,children:e.service.contractAddress})})]}),Object(Ea.jsx)("div",{className:"service-card__button-container",children:Object(Ea.jsx)($a.a,{className:"service-card__button",type:"primary",children:a.open})})]})})},Vs=l.a.memo(Ms);a(813);const Rs=()=>{const e=ca().views.services,t=la(wt),a=la(St),s=la(ft).map((e=>Object(Ea.jsx)(Vs,{service:e,isUpdating:a.has(e.contractAddress)},e.contractAddress)));return Object(Ea.jsxs)(Xa,{title:e.title,children:[Object(Ea.jsx)(Xa.Title,{children:e.title}),t.initialized?t.services.length?Object(Ea.jsxs)("div",{className:"services-container",children:[s,Object(Ea.jsx)(zs,{})]}):Object(Ea.jsx)(Ja,{}):Object(Ea.jsx)(vt.a,{active:!0})]})},Hs=l.a.memo(Rs);a(814);const Ws=({service:e,readOnly:t})=>{const a=ca().views.services,s=Object(p.g)(),n=Object(o.useCallback)((()=>{s.push(lt.routers.acceptServicePayments(e.contractAddress))}),[s,e.contractAddress]);return Object(Ea.jsxs)("div",{className:"service-actions-zone",children:[Object(Ea.jsx)("span",{className:"service-actions-zone__header",children:"Actions"}),Object(Ea.jsxs)("div",{className:"service-actions-zone__button-container",children:[Object(Ea.jsx)("p",{children:a.acceptPaymentsDescription}),Object(Ea.jsx)($a.a,{disabled:t,onClick:n,className:"service-button",type:"primary",children:a.acceptPayments})]})]})},Zs=l.a.memo(Ws);var Ys=a(865);a(815);const qs=e=>{const t=ca().views.services.dangerZone,a=oa(),s=Object(o.useCallback)((()=>{a(Mt({service:e.service,paused:!e.service.paused}))}),[a,e.service]),n=Object(o.useCallback)((()=>{a(Vt({service:e.service,deleted:!e.service.deleted}))}),[a,e.service]),i=Object(o.useCallback)(((e,t,a)=>{Ys.a.confirm({title:"Confirm Operation",onOk:a,content:Object(Ea.jsx)("p",{children:e}),okText:"Yes",okType:t?"danger":"primary",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((()=>{const a=e.service.paused?t.unPauseServiceConfirmation:t.pauseServiceConfirmation;i(a,!1,s)}),[i,t.pauseServiceConfirmation,t.unPauseServiceConfirmation,s,e.service.paused]),c=Object(o.useCallback)((()=>{const a=e.service.deleted?t.unDeleteServiceConfirmation:t.deleteServiceConfirmation;i(a,!e.service.deleted,n)}),[i,t.deleteServiceConfirmation,t.unDeleteServiceConfirmation,n,e.service.deleted]);return Object(Ea.jsx)(Ea.Fragment,{children:Object(Ea.jsxs)("div",{className:"service-danger-zone",children:[Object(Ea.jsx)("span",{className:"service-danger-zone__header",children:t.title}),Object(Ea.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Ea.jsx)("p",{children:e.service.paused?t.unPauseServiceDescription:t.pauseServiceDescription}),Object(Ea.jsx)($a.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:r,children:e.service.paused?t.unPauseService:t.pauseService})]}),Object(Ea.jsx)("hr",{className:"service-danger-zone__divider"}),Object(Ea.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Ea.jsx)("p",{children:e.service.deleted?t.unDeleteServiceDescription:t.deleteServiceDescription}),Object(Ea.jsx)($a.a,{disabled:e.readOnly,className:"service-button",type:"primary",danger:!0,onClick:c,children:e.service.deleted?t.unDeleteService:t.deleteService})]})]})})},Gs=l.a.memo(qs);var Js=a(867),Qs=a(872),Xs=a(868),en=a(859),tn=a(862);a(816);const an=Js.a.Search,sn=Object.values(be).map((e=>({label:e,value:e}))),nn=e=>{var t;const a=ca(),s=a.common,n=a.views.services,i=Object(m.b)(),[r,c]=Object(o.useState)((null===(t=sn[0])||void 0===t?void 0:t.value)||be.Ed25519),l=Object(o.useCallback)((e=>{c(e.target.value)}),[]),[d,u]=Object(o.useState)(""),p=Object(o.useCallback)((e=>{u(e.target.value)}),[]),[v,h]=cn(r),b=Object(o.useRef)(null),j=Object(o.useRef)(null),y=Object(o.useCallback)((e=>{const t=e.current;t&&(t.select(),navigator.clipboard.writeText(t.state.value))}),[]),g=Object(o.useCallback)((()=>{i(Rt({service:e.service,signingKey:{name:d,publicKey:v}})),e.onCancel()}),[i,d,e,v]);return Object(Ea.jsxs)(Ys.a,{className:"api-key-modal",title:`${n.devZone.addKey} (${a.common.comingSoon.toLowerCase()})`,centered:!0,destroyOnClose:!0,visible:e.visible,onCancel:e.onCancel,footer:Object(Ea.jsxs)("div",{className:"api-key-modal__footer",children:[Object(Ea.jsx)($a.a,{onClick:e.onCancel,children:s.cancel},"back"),Object(Ea.jsx)(Qs.a,{disabled:!d,title:n.devZone.saveSecretKeyConfirm,placement:"topRight",onConfirm:g,okText:s.yes,cancelText:s.no,children:Object(Ea.jsx)($a.a,{className:"api-key-modal__ok-button",type:"primary",disabled:!d,children:n.devZone.saveKeys},"submit")})]}),children:[Object(Ea.jsxs)("span",{className:"api-key-modal__label",children:[n.devZone.name,":"]}),Object(Ea.jsx)(Js.a,{autoFocus:!0,value:d,onChange:p}),Object(Ea.jsxs)("span",{className:"api-key-modal__label",children:[n.devZone.algorithm,":"]}),Object(Ea.jsxs)("div",{className:"api-key-modal__algorithm-container",children:[Object(Ea.jsx)(Xs.a.Group,{options:sn,value:r,onChange:l}),Object(Ea.jsx)($a.a,{children:n.devZone.generateKeys})]}),Object(Ea.jsx)(en.a,{}),Object(Ea.jsxs)("span",{className:"api-key-modal__label",children:[n.devZone.publicKey,":"]}),Object(Ea.jsx)(an,{ref:b,readOnly:!0,value:v,enterButton:Object(Ea.jsx)($a.a,{icon:Object(Ea.jsx)(Ha.a,{})}),onSearch:()=>y(b)}),Object(Ea.jsxs)("span",{className:"api-key-modal__label",children:[n.devZone.secretKey,":"]}),Object(Ea.jsx)(an,{ref:j,readOnly:!0,value:h,enterButton:Object(Ea.jsx)($a.a,{icon:Object(Ea.jsx)(Ha.a,{})}),onSearch:()=>y(j)}),Object(Ea.jsx)(tn.a.Text,{mark:!0,children:n.devZone.saveSecretKeyWarning})]})},rn=l.a.memo(nn),cn=e=>{switch(e){case be.Ed25519:return["edpkvQXtVcy8YrBLmMhn8EDt4Zb46TWZX1QUxxepFzJgsWU6YKadJP","edskRwse4Z8ZZNCC7xzCEUrTBtCeEPhv8gfBiWrE8cysRQpz45HCQjChdDckNEBZZMCxjPMkHhmGkUnwBs22cKr2nrwiGfQHsP"];case be.Secp256k1:return["sppk7cjayJkatAA6Kzd9w6DSRrRDq6JoRAfugi1fqahpyjCBRCLGfob","spsk1VyxSVYfX3CfNpSNDxBdR97LnAdQA59jWpc4HYXtYg1cX53V6Y"];case be.P256:return["p2pk65H621C6fgfcuhiUcQmx3GRz8iNxjzMB1BG2WQKAYKEcbVzyJMD","p2sk2yHAwhsLaRCm8zAfN4K1Py7fBhxgR1kAB5SCYn9yGWofkjqNTN"];default:throw new Error("Unknown algorithm type")}};var on=a(861);a(818);const ln=e=>{const t=ca().views.services,a=la(jt),s=Object(m.b)(),n=Object(o.useMemo)((()=>{let t=[...e.service.signingKeys.values()];return a&&(t=t.filter((e=>e.publicKey!==a.publicKey))),t}),[a,e.service.signingKeys]),i=Object(o.useCallback)(((e,t)=>{Ys.a.confirm({title:"Confirm Operation",onOk:t,content:Object(Ea.jsx)("p",{children:e}),okText:"Yes",okType:"danger",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((a=>{const n=t.devZone.deleteKeyConfirmation+(a.name?`: ${a.name}`:"");i(n,(()=>{s(Ht({service:e.service,publicKey:a.publicKey}))}))}),[i,s,e.service,t.devZone.deleteKeyConfirmation]);return Object(Ea.jsx)(on.b,{size:"small",bordered:!0,children:n.length?n.map((t=>Object(Ea.jsxs)(on.b.Item,{className:"api-keys__item",children:[Object(Ea.jsx)("span",{children:t.name}),Object(Ea.jsxs)("div",{children:[Object(Ea.jsx)("span",{className:"api-keys__item-key",children:t.publicKey}),Object(Ea.jsx)($a.a,{disabled:e.readOnly,onClick:()=>r(t),icon:Object(Ea.jsx)(Ba.a,{}),danger:!0,type:"link"})]})]},t.publicKey))):Object(Ea.jsx)(on.b.Item,{className:"api-keys__item api-keys__item_empty",children:t.devZone.noApiKeysAddedYet})})},dn=l.a.memo(ln);a(823);const un=e=>{const t=ca(),a=t.views.services,[s,n]=Object(o.useState)(!1),i=Object(o.useCallback)((()=>n(!0)),[]),r=Object(o.useCallback)((()=>n(!1)),[]);return Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsxs)("div",{className:"service-dev-zone__button-container",children:[Object(Ea.jsxs)("span",{className:"service-dev-zone__header",children:[`${a.devZone.title} (${t.common.comingSoon.toLowerCase()}`,")"]}),Object(Ea.jsx)($a.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:i,children:a.devZone.addKey})]}),Object(Ea.jsx)(dn,{service:e.service,readOnly:e.readOnly}),Object(Ea.jsx)(rn,{service:e.service,visible:s,onCancel:r})]})},mn=l.a.memo(un);var pn=a(880);a(824);const vn=({service:e,isUpdating:t,readOnly:a})=>{const s=Object(p.g)(),n=ca().views.services,i=Object(O.a)("service__logo",(null===e||void 0===e?void 0:e.iconUrl)?"service__logo_image":"service__logo_text"),r=(null===e||void 0===e?void 0:e.allowedOperationType)===Re.Payment||(null===e||void 0===e?void 0:e.allowedOperationType)===Re.All,c=(null===e||void 0===e?void 0:e.allowedOperationType)===Re.Donation||(null===e||void 0===e?void 0:e.allowedOperationType)===Re.All,l=Object(o.useCallback)((()=>{s.push(`${lt.routers.services}/${e.contractAddress}?edit=true`)}),[s,e.contractAddress]);return Object(Ea.jsxs)("div",{className:"service-header",children:[Object(Ea.jsxs)("div",{className:"service-header__logo-container",children:[e.iconUrl?Object(Ea.jsx)("img",{className:i,alt:"logo",src:e.iconUrl}):Object(Ea.jsx)("span",{className:i,children:H.getAvatarText(e.name)}),Object(Ea.jsxs)("div",{className:"service-header__main-info",children:[Object(Ea.jsx)("h1",{children:e.name}),Object(Ea.jsx)(Za,{hash:e.contractAddress,className:"service__link",showCopyButton:!0,children:e.contractAddress}),Object(Ea.jsxs)("div",{className:"service-header__tags-container",children:[Object(Ea.jsx)(Fs,{paused:e.paused,deleted:e.deleted,isUpdating:t}),r&&Object(Ea.jsx)($s,{text:n.operations.paymentsEnabled}),c&&Object(Ea.jsx)($s,{text:n.operations.donationsEnabled})]})]})]}),Object(Ea.jsx)($a.a,{disabled:a,className:"service-button",icon:Object(Ea.jsx)(pn.a,{}),type:"primary",onClick:l,children:n.editing.editService})]})},hn=l.a.memo(vn);var bn,jn=a(870),yn=a(881),gn=a(882),On=a(883),wn=a(884),xn=a(885),kn=a(886),fn=a(887);function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function An({title:e,titleId:t,...a},s){return o.createElement("svg",Sn({width:"1000px",height:"1000px",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:s,"aria-labelledby":t},a),e?o.createElement("title",{id:t},e):null,bn||(bn=o.createElement("g",{id:"Artboard",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("circle",{id:"Oval",fill:"currentColor",cx:500,cy:500,r:500}),o.createElement("path",{d:"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z",id:"Path-3",fill:"#FFFFFF"}))))}const _n=o.forwardRef(An);a.p;const Nn={[Z.Common]:yn.a,[Z.Email]:gn.a,[Z.Telegram]:_n,[Z.Facebook]:On.a,[Z.Twitter]:wn.a,[Z.Instagram]:xn.a,[Z.GitHub]:kn.a,[Z.Reddit]:fn.a};a(825);const Cn=new X,Pn=e=>{const t=Cn.getLinkInfo(e.link);if(!t)return null;const a=Nn[t.icon];return Object(Ea.jsxs)("span",{className:"service-link",children:[Object(Ea.jsx)(a,{className:"service-link__icon"}),Object(Ea.jsx)(Ya,{className:"service-link__link",href:t.formattedLink,children:t.displayLink})]})};a(826);const Tn=e=>Object(Ea.jsx)("div",{className:Object(O.a)("service-links",e.className),children:e.links.map((e=>Object(Ea.jsx)(Pn,{link:e},e))).filter(Boolean)});a(827);const zn=new X,Dn=e=>{const t=zn.getLinkInfo(e.value,!0),a=Object(o.useCallback)((t=>{e.onChange({value:t.target.value})}),[e]);if(!t)return null;const s=Nn[t.icon];return Object(Ea.jsxs)("div",{className:"service-link-editor",children:[Object(Ea.jsx)(s,{className:"service-link-editor__icon"}),Object(Ea.jsx)(Js.a,{readOnly:e.readOnly,className:"service-link-editor__input",value:e.value,onChange:a}),Object(Ea.jsx)($a.a,{disabled:e.readOnly,className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Ea.jsx)(Ba.a,{}),onClick:e.onDelete})]})};a(828);const Un=e=>{const t=ca().views.services,a=Object(o.useCallback)(((t,a)=>{const s=[...e.value];s[t]=a.value,e.onChange({value:s})}),[e]),s=Object(o.useCallback)((t=>{const a=[...e.value];a.splice(t,1),e.onChange({value:a})}),[e]),n=Object(o.useCallback)((()=>{const t=[...e.value,""];e.onChange({value:t})}),[e]),i=e.value.map(((t,n)=>Object(Ea.jsx)(Dn,{readOnly:e.readOnly,value:t,onDelete:()=>s(n),onChange:e=>a(n,e)},n)));return Object(Ea.jsxs)("div",{className:"service-links-editor",children:[i,Object(Ea.jsx)($a.a,{disabled:e.readOnly,className:"service-links-editor__button",icon:Object(Ea.jsx)(Ps.a,{}),onClick:n,children:t.editing.addLink})]})};var In=a(866),En=a(869);a(829);const Kn=e=>{const t=ca().views.services,a=la(Ot),s=Object(o.useMemo)((()=>{const t=[];return e.allowedTokens.tez&&t.push(""),e.allowedTokens.assets.forEach((e=>{const s=a.get(e);s&&t.push(s.contractAddress)})),t}),[e.allowedTokens.assets,e.allowedTokens.tez,a]),n=new Map;n.set("",{ticker:ce,address:"",name:oe,iconSrc:de});Array.from(a.values()).forEach((e=>{e.metadata&&n.set(e.contractAddress,{ticker:e.metadata.symbol,address:e.contractAddress,name:e.metadata.name,iconSrc:e.metadata.thumbnailUri})}));const i=Object(o.useCallback)((t=>{e.onChange({tez:t.some((e=>""===e)),assets:t.filter((e=>!!e))})}),[e]),r=Object(o.useCallback)((e=>i([...s,e])),[i,s]),c=Object(o.useCallback)((e=>i(s.filter((t=>t!==e)))),[i,s]),l=s.map((e=>n.get(e))),d=Array.from(n.values()).filter((e=>s.every((t=>t!==e.address)))),u=Object(Ea.jsx)(In.a,{children:d.map((e=>Object(Ea.jsxs)(In.a.Item,{className:"token-list-editor-menu-item",onClick:()=>r(e.address),children:[Object(Ea.jsx)("img",{className:"token-list-editor-menu-item__icon",src:e.iconSrc,alt:e.name}),Object(Ea.jsx)("span",{className:"token-list-editor-menu-item__ticker",children:e.ticker}),Object(Ea.jsx)("span",{className:"token-list-editor-menu-item__name",children:e.name})]},e.ticker)))});return Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsx)("ul",{className:"token-list-editor",children:l.map((e=>Object(Ea.jsx)(Va,{className:"token-list-editor__item",name:e.name,contractAddress:e.address,ticker:e.ticker,iconSrc:e.iconSrc,handleDelete:c},e.address)))}),d.length>0&&Object(Ea.jsx)(En.a,{trigger:["click"],overlay:u,placement:"bottomCenter",children:Object(Ea.jsx)($a.a,{className:"token-list-editor__add-button",icon:Object(Ea.jsx)(Ps.a,{}),children:t.editing.addCurrency})})]})};a(830);const Ln=new X,Fn=e=>{const t=Object(p.g)(),a=ca(),s=a.common,n=a.views.services,i=la(jt),r=oa(),c=Object(o.useCallback)((()=>{t.push(`${lt.routers.services}/${e.service.contractAddress}`)}),[t,e.service.contractAddress]),[l,d]=Object(o.useState)(!1),[u,m]=Object(o.useState)(e.service.name),[v,h]=Object(o.useState)(e.service.description),[b,j]=Object(o.useState)(e.service.links),[y,g]=Object(o.useState)(e.service.allowedTokens),O=Object(o.useCallback)((()=>{const e=!!u&&b.every((e=>!!Ln.getLinkInfo(e)))&&(y.tez||y.assets.length>0);d(e)}),[y.assets.length,y.tez,b,u]);Object(o.useEffect)((()=>O()),[O]);const w=Object(o.useCallback)((e=>{m(e.target.value),O()}),[O]),x=Object(o.useCallback)((e=>{h(e.target.value),O()}),[O]),k=Object(o.useCallback)((e=>{j(e.value),O()}),[O]),[f,S]=Object(o.useState)(e.service.allowedOperationType===Re.All||e.service.allowedOperationType===Re.Payment),[A,_]=Object(o.useState)(e.service.allowedOperationType===Re.All||e.service.allowedOperationType===Re.Donation),N=Object(o.useCallback)((e=>{g(e),O()}),[O]),C=Object(o.useCallback)((e=>{S(e.target.checked),e.target.checked||A||_(!0)}),[A]),P=Object(o.useCallback)((e=>{_(e.target.checked),e.target.checked||f||S(!0)}),[f]),T=Object(o.useCallback)((()=>{const t=f&&A?Re.All:f?Re.Payment:Re.Donation,a=e.isCreateMode&&!!i,s={...e.service,name:u,description:v,allowedOperationType:t,allowedTokens:y,links:b,signingKeys:a?(new Map).set(i.publicKey,{publicKey:i.publicKey}):e.service.signingKeys,network:a?i.network:e.service.network};e.isCreateMode?r($t(s)):r(Bt(s)),c()}),[A,f,y,i,v,r,c,b,u,e.isCreateMode,e.service]),z=e.isCreateMode?n.editing.createService:n.editing.updateService;return Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsx)(Xa.Title,{children:z}),Object(Ea.jsxs)("div",{className:"service-edit",children:[Object(Ea.jsx)("span",{className:"service-edit__caption",children:n.editing.serviceName}),Object(Ea.jsx)(Js.a,{readOnly:e.readOnly,placeholder:n.editing.serviceName,value:u,onChange:w}),Object(Ea.jsx)("span",{className:"service-edit__caption",children:n.editing.description}),Object(Ea.jsx)(Js.a.TextArea,{readOnly:e.readOnly,rows:5,placeholder:n.editing.description,value:v,onChange:x}),Object(Ea.jsxs)("div",{className:"service-edit__lists-container",children:[Object(Ea.jsxs)("div",{className:"service-edit__list-container",children:[Object(Ea.jsx)("span",{className:"service-edit__list-header",children:n.allowedCurrencies}),Object(Ea.jsx)(Kn,{allowedTokens:y,onChange:N})]}),Object(Ea.jsxs)("div",{className:"service-edit__list-container",children:[Object(Ea.jsx)("span",{className:"service-edit__list-header",children:n.links}),Object(Ea.jsx)(Un,{readOnly:e.readOnly,value:b,onChange:k})]})]}),Object(Ea.jsx)("span",{className:"service-edit__caption",children:n.editing.accept}),Object(Ea.jsxs)("div",{className:"service-edit__accept-list",children:[Object(Ea.jsx)(jn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:f,onChange:C,children:n.editing.acceptPayments}),Object(Ea.jsx)(jn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:A,onChange:P,children:n.editing.acceptDonations})]}),Object(Ea.jsxs)("div",{className:"service-edit__buttons-container",children:[Object(Ea.jsx)($a.a,{className:"service-edit__button",onClick:c,children:s.cancel}),Object(Ea.jsx)($a.a,{className:"service-edit__button",onClick:T,disabled:!l||e.readOnly,type:"primary",children:z})]})]})]})},Bn=l.a.memo(Fn);a(831);const $n=({service:e})=>{const t=la(Ot),a=[];null===e||void 0===e||e.allowedTokens.assets.forEach((e=>{const s=t.get(e);s&&a.push(s)}));const s=[];return(null===e||void 0===e?void 0:e.allowedTokens.tez)&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:"",className:"service-token-list-item",ticker:ce,name:oe,decimals:le,iconSrc:de,highlightSign:!0},ce)),a.forEach((e=>{e.metadata&&s.push(Object(Ea.jsx)(Ra.Item,{contractAddress:e.contractAddress,className:"service-token-list-item",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ea.jsx)(Ra,{children:s})},Mn=l.a.memo($n);a(832);const Vn=({service:e})=>{const t=ca().views.services;return Object(Ea.jsxs)("div",{className:"service-view-zone",children:[Object(Ea.jsx)("p",{className:"service-view-zone__description",children:e.description}),Object(Ea.jsxs)("div",{className:"service-view-zone__lists-container",children:[Object(Ea.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Ea.jsx)("span",{className:"service-view-zone__list-header",children:t.allowedCurrencies}),Object(Ea.jsx)(Mn,{service:e})]}),Object(Ea.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Ea.jsx)("span",{className:"service-view-zone__list-header",children:t.links}),Object(Ea.jsx)(Tn,{className:"service-info__links",links:e.links})]})]})]})},Rn=l.a.memo(Vn);a(833);let Hn;!function(e){e[e.ViewAndEdit=0]="ViewAndEdit",e[e.Create=1]="Create"}(Hn||(Hn={}));const Wn=e=>{const t=!!new URLSearchParams(Object(p.h)().search).get("edit"),{address:a}=Object(p.i)(),{services:s,initialized:n}=la(wt),i=la(St),r=i.has(a),c=!!i.size,o=e.mode===Hn.Create,l=o?{...He}:s.filter((e=>e.contractAddress===a))[0],d=n&&l?l.name:a,u=Object(O.a)("service-container",t||o?"service-container_edit":"service-container_view");return Object(Ea.jsx)(Xa,{title:d,className:u,children:n&&l?t||o?Object(Ea.jsx)(Bn,{service:l,isCreateMode:o,readOnly:c}):Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsx)(hn,{service:l,isUpdating:r,readOnly:c}),Object(Ea.jsx)(Rn,{service:l}),Object(Ea.jsx)(Zs,{service:l,readOnly:r||l.deleted}),Object(Ea.jsx)(mn,{service:l,readOnly:c}),Object(Ea.jsx)(Gs,{service:l,readOnly:c})]}):Object(Ea.jsx)(vt.a,{active:!0})})},Zn=l.a.memo(Wn);var Yn=a(888),qn=a(889),Gn=a(890),Jn=a(891);a(834);const Qn=()=>{const e=ca().views.about;return Object(Ea.jsxs)(Xa,{title:e.title,className:"about-view",children:[Object(Ea.jsx)(Xa.Title,{className:"about-view__title",children:e.detailedTitle}),Object(Ea.jsxs)("div",{className:"about-view__version-info",children:[Object(Ea.jsx)(Ya,{href:lt.app.version.link,children:lt.app.version.name}),"\xa0",e.build,"\xa0",Object(Ea.jsx)(Ya,{href:lt.app.buildInfo.link,children:lt.app.buildInfo.commitShortSha})]}),Object(Ea.jsxs)("div",{className:"about-view__links",children:[Object(Ea.jsx)(Ya,{className:"about-link",href:lt.links.tezosPayments.webSite,children:Object(Ea.jsx)(Yn.a,{className:"about-link__icon"})}),Object(Ea.jsx)(Ya,{className:"about-link",href:lt.links.tezosPayments.gitHub,children:Object(Ea.jsx)(qn.a,{className:"about-link__icon"})}),Object(Ea.jsx)(Ya,{className:"about-link",href:lt.links.tezosPayments.telegram,children:Object(Ea.jsx)(_n,{className:"about-link__icon"})}),Object(Ea.jsx)(Ya,{className:"about-link",href:lt.links.tezosPayments.twitter,children:Object(Ea.jsx)(Gn.a,{className:"about-link__icon"})}),Object(Ea.jsx)(Ya,{className:"about-link",href:lt.links.tezosPayments.reddit,children:Object(Ea.jsx)(Jn.a,{className:"about-link__icon"})})]}),Object(Ea.jsxs)("div",{className:"about-view__powered-by",children:[e.poweredBy,"\xa0",Object(Ea.jsx)(Ya,{href:lt.links.tzKT,children:e.tzKt}),"\xa0",e.api]})]})},Xn=l.a.memo(Qn);a(835),a(836);const ei=()=>{const e=oa(),t=Object(o.useCallback)((()=>{e(sa(se.granadanet))}),[e]),a=Object(o.useCallback)((t=>{const a=ne.find((e=>e.id===t.key));a&&e(sa(a))}),[e]),s=ca().views.connect.actions.connect,n=[].map((e=>{const t=lt.tezos.networks[e.name];return Object(Ea.jsx)(In.a.Item,{children:Object(Ea.jsxs)("div",{className:"connect-dropdown__item-container",children:[Object(Ea.jsx)("div",{className:"connect-dropdown__item-icon-container",children:Object(Ea.jsx)("div",{className:"connect-dropdown__item-icon",style:{backgroundColor:t.color}})}),Object(Ea.jsx)("div",{className:"connect-dropdown__item-text",children:`${s.connectTo} ${t.title}`})]})},e.id)})),i=Object(Ea.jsx)(In.a,{onClick:a,children:n}),r=`${s.connectTo} ${lt.tezos.networks.granadanet.title}`;return n.length?Object(Ea.jsx)(En.a.Button,{className:"connect-dropdown",type:"primary",onClick:t,overlay:i,children:r}):Object(Ea.jsx)($a.a,{type:"primary",onClick:t,children:r})},ti=l.a.memo(ei),ai=()=>{const e=ca().views.connect.actions.connect;return la(jt)?Object(Ea.jsx)(p.a,{push:!0,to:lt.routers.overview}):Object(Ea.jsx)(Xa,{title:"Connect",className:"connect",children:Object(Ea.jsxs)("div",{className:"connect-info-container",children:[Object(Ea.jsx)("div",{className:"connect-info-container__message",children:e.description}),Object(Ea.jsx)(ti,{})]})})},si=l.a.memo(ai);var ni=a(248),ii=a(863);a(837);const ri=e=>{const t=la(wt).services.find((t=>t.contractAddress===e.serviceAddress)),a=la(Ot),s=[];if(t){const e=[];t.allowedTokens.assets.forEach((t=>{const s=a.get(t);s&&e.push(s)})),t.allowedTokens.tez&&s.push({label:ce,value:"",imageUrl:de}),e.forEach((e=>e.metadata&&s.push({label:e.metadata.symbol,value:e.contractAddress,imageUrl:e.metadata.thumbnailUri})))}const n=s.map((e=>Object(Ea.jsx)(ni.a.Option,{value:e.value,label:e.label,children:Object(Ea.jsxs)("div",{className:"payment-amount__select-option",children:[Object(Ea.jsx)("img",{className:"payment-amount__select-option-image",alt:e.label,src:e.imageUrl}),Object(Ea.jsx)("span",{className:"payment-amount__select-option-label",children:e.label})]})},e.label))),i=0===s.length;return Object(Ea.jsxs)("div",{className:"payment-amount",children:[Object(Ea.jsx)(ni.a,{className:"payment-amount__select",value:e.asset||"",onChange:e.onAssetChange,disabled:i,children:n}),Object(Ea.jsx)(ii.a,{className:"payment-amount__input",stringMode:!0,min:"0",value:e.amount.toString(),onChange:e.onAmountChange,disabled:i})]})},ci=l.a.memo(ri);a(838);const oi=e=>{const t=ca(),a=t.views.acceptPayments,s=t.views.services,n=Object(m.c)(St),i=la(ft).filter((e=>!e.deleted)).map((e=>({label:e.name,value:e.contractAddress,disabled:n.has(e.contractAddress)}))),r=[{label:"Payment",value:ee.Payment},{label:"Donation",value:ee.Donation}];return Object(Ea.jsxs)("div",{className:"accept-payments-settings",children:[Object(Ea.jsx)("span",{className:"accept-payments-settings__caption",children:s.service}),Object(Ea.jsx)(ni.a,{className:"accept-payments-settings__service-select",options:i,value:e.serviceAddress,onChange:e.onServiceAddressChange}),Object(Ea.jsx)("span",{className:"accept-payments-settings__caption",children:a.type}),Object(Ea.jsx)(Xs.a.Group,{className:"accept-payments-settings__type-select",optionType:"button",buttonStyle:"outline",options:r,value:e.paymentType,onChange:e.onPaymentTypeChange}),e.paymentType===ee.Payment?Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsx)("span",{className:"accept-payments-settings__caption",children:a.amount}),Object(Ea.jsx)(ci,{serviceAddress:e.serviceAddress,amount:e.amount,onAmountChange:e.onAmountChange,asset:e.asset,onAssetChange:e.onAssetChange}),Object(Ea.jsx)("span",{className:"accept-payments-settings__header",children:a.paymentData}),Object(Ea.jsx)("span",{className:"accept-payments-settings__caption",children:a.paymentId}),Object(Ea.jsx)(Js.a,{className:"accept-payments-settings__payment-id-input",value:e.paymentId,onChange:e.onPaymentIdChange}),Object(Ea.jsx)("span",{className:"accept-payments-settings__help-text",children:a.paymentIdHelpText})]}):Object(Ea.jsxs)(Ea.Fragment,{children:[Object(Ea.jsx)("span",{className:"accept-payments-settings__header",children:a.donationData}),Object(Ea.jsx)("span",{className:"accept-payments-settings__description-caption",children:a.donationDescription}),Object(Ea.jsx)(Js.a.TextArea,{className:"accept-payments-settings__description-input",value:e.donationDescription,onChange:e.onDonationDescriptionChange,showCount:!0,rows:5,maxLength:250}),Object(Ea.jsx)("span",{className:"accept-payments-settings__help-text",children:a.donationDescriptionHelpText})]})]})};a(839);const li=new Da.paymentUrlFactories.Base64PaymentUrlFactory(lt.links.tezosPayments.paymentsApp),di=({paymentOrDonation:e,serviceAddress:t})=>{const a=ca(),s=a.common,n=a.views.acceptPayments,i=la(jt),r=Ia(t),[c,l]=Object(o.useState)(""),d=Object(o.useCallback)((async()=>{const t=(null===i||void 0===i?void 0:i.network)||se[lt.tezos.defaultNetwork];if(e.type===ee.Donation)return li.createPaymentUrl(e,t);if(!r)return"";try{return(await r.createPayment({id:e.id,amount:e.amount.toString(),asset:e.asset,created:Date.now(),data:e.data})).url}catch(a){return console.error(a),""}}),[null===i||void 0===i?void 0:i.network,e,r]);Object(o.useEffect)((()=>{(async()=>{l(e.type===ee.Payment?"":await d())})()}),[d,e]);const u=e.type===ee.Payment?n.directLinkPaymentHelpText:n.directLinkDonationHelpText,m=Object(o.useCallback)((()=>{(async()=>{l(await d())})()}),[d]),p=Object(o.useCallback)((()=>{navigator.clipboard.writeText(c)}),[c]);return Object(Ea.jsxs)("div",{className:"generator__direct-link",children:[c&&Object(Ea.jsx)("span",{className:"generator__direct-link-help-text",children:u}),Object(Ea.jsx)(Ya,{className:"generator__direct-link-link",href:c,children:c}),Object(Ea.jsxs)("div",{className:"generator__direct-link-buttons",children:[!c&&Object(Ea.jsx)($a.a,{type:"primary",onClick:m,children:n.generateAndSignPaymentLink}),c&&Object(Ea.jsx)($a.a,{onClick:p,icon:Object(Ea.jsx)(Ha.a,{}),children:s.copyLink})]})]})},ui=l.a.memo(di);a(840);const mi=e=>{const t=ca().views.acceptPayments;return Object(Ea.jsx)("div",{className:"failed-validation-result",children:t.errors.fillRequiredData})};a(841);const pi=e=>{var t;const a=la(Ot),s=Ia(e.serviceAddress),n=e.assetAddress?a.get(e.assetAddress):void 0,i=[{key:"widget",tab:"Widget",disabled:!0},{key:"typescript",tab:"TypeScript Library",disabled:!0},{key:"dotnet",tab:".NET Library",disabled:!0}];s&&i.splice(0,0,{key:"directLink",tab:"Direct Link"});const c=e.paymentType===ee.Payment?{type:e.paymentType,targetAddress:e.serviceAddress,id:e.paymentId,asset:n?{address:n.contractAddress,decimals:(null===(t=n.metadata)||void 0===t?void 0:t.decimals)||0,id:"fa2"===n.type?n.id:null}:void 0,amount:new r.a(e.amount),created:new Date,signature:{signingPublicKey:"edpkuWJYhY5TVZ6xaoubNkidXArJmVhjA2yuZZuucEN6FF4fQeV9Dd",contract:"edsigtaNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNog2Ndso"}}:{type:e.paymentType,targetAddress:e.serviceAddress,data:e.clientData},o=c.type===ee.Payment?Fe.validate(c):Be.validate(c);return Object(Ea.jsx)(qa.a,{className:"generator",style:{width:"100%"},tabList:i,activeTabKey:"directLink",children:o?Object(Ea.jsx)(mi,{results:o}):Object(Ea.jsx)(ui,{paymentOrDonation:c,serviceAddress:e.serviceAddress})})},vi=l.a.memo(pi);a(842);const hi=()=>{var e,t;const a=ca().views.acceptPayments,s=la(wt),n=la(Ot),{address:i}=Object(p.i)(),[c,l]=Object(o.useState)(i),[d,u]=Object(o.useState)(ee.Payment),[m,v]=Object(o.useState)(""),h=Object(o.useCallback)((e=>{const t=s.services.filter((t=>t.contractAddress===e))[0];return t?t.allowedTokens.tez?void 0:t.allowedTokens.assets[0]:void 0}),[s.services]),[b,j]=Object(o.useState)(h(c)),[y,g]=Object(o.useState)(""),[O,w]=Object(o.useState)(),x=b?(null===(e=n.get(b))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.decimals)||0:le,k=Object(o.useCallback)((e=>{const t=e;l(t),j(h(t))}),[h]),f=Object(o.useCallback)((e=>{u(e.target.value)}),[]),S=Object(o.useCallback)((e=>{const t=e?new r.a(e).toFormat(x,{groupSeparator:"",decimalSeparator:"."}):"";v(t)}),[x]),A=Object(o.useCallback)((e=>{j(e||void 0),v("")}),[]),_=Object(o.useCallback)((e=>{g(e.target.value)}),[]),N=Object(o.useCallback)((e=>{w({description:e.target.value})}),[]);return Object(Ea.jsxs)(Xa,{title:a.title,children:[Object(Ea.jsx)(Xa.Title,{children:a.title}),s.initialized?s.services.length?Object(Ea.jsxs)("div",{className:"accept-payments",children:[Object(Ea.jsx)("div",{className:"accept-payments__settings",children:Object(Ea.jsx)(oi,{serviceAddress:c,onServiceAddressChange:k,paymentType:d,onPaymentTypeChange:f,amount:m,onAmountChange:S,asset:b,onAssetChange:A,paymentId:y,onPaymentIdChange:_,donationDescription:(null===O||void 0===O?void 0:O.description)||"",onDonationDescriptionChange:N})}),Object(Ea.jsx)("div",{className:"accept-payments__generator",children:Object(Ea.jsx)(vi,{serviceAddress:c,paymentType:d,assetAddress:b,amount:m,paymentId:y,clientData:O})})]}):Object(Ea.jsx)(Ja,{}):Object(Ea.jsx)(vt.a,{active:!0})]})},bi=l.a.memo(hi);var ji=a(251),yi=a(892),gi=a(893),Oi=a(894);a(843);class wi extends Ce{static getShortAddress(e){return`${e.address.substr(0,9)}...${e.address.substr(e.address.length-6,6)}`}}a(844);const xi=e=>{const t=lt.tezos.networks[e.network.name];return Object(Ea.jsxs)("div",{className:"account-network-group",children:[Object(Ea.jsx)("div",{className:"account-network-group__icon-container",children:Object(Ea.jsx)("div",{className:"account-network-group__icon",style:{backgroundColor:t.color}})}),Object(Ea.jsx)("div",{children:t.title})]})},ki=l.a.memo(xi),fi=()=>{const e=da(),t=ca(),a=t.views.header.accountActions,s=la(yt),n=la(jt),i=(null===n||void 0===n?void 0:n.address)||"",r=la(gt),c=r&&r.explorers[r.default.explorer],l=Object(o.useCallback)((()=>{navigator.clipboard.writeText(i)}),[i]),d=Object(o.useCallback)((()=>{c&&window.open(e.tezosExplorer.getAccountUrl(i),"_blank")}),[e.tezosExplorer,i,c]),u=oa(),m=Object(o.useCallback)((()=>{u(na())}),[u]);if(!n)return null;const p=[...s.keys()].map((e=>{var t;return Object(Ea.jsx)(In.a.ItemGroup,{title:Object(Ea.jsx)(ki,{network:e}),children:null===(t=s.get(e))||void 0===t?void 0:t.map((e=>Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(yi.a,{}),className:Object(O.a)("account-menu-item",{"account-menu-item_selected":e.address===n.address}),style:e.address!==n.address?void 0:{backgroundColor:ji.a[0],color:ji.a.primary},children:e.address},e.address)))},e.id)})),v=Object(Ea.jsxs)(In.a,{children:[p,Object(Ea.jsx)(In.a.Divider,{}),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Ha.a,{}),onClick:l,children:a.copyAddress.title},1),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(js.a,{}),onClick:d,children:`${a.viewOn} ${null===c||void 0===c?void 0:c.title}`},2),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(gi.a,{}),children:`${a.connectAnotherAccount.title} (${t.common.comingSoon.toLowerCase()})`},3),Object(Ea.jsx)(In.a.Divider,{}),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Oi.a,{}),onClick:m,children:a.disconnect.title},5)]});return Object(Ea.jsx)(En.a,{overlay:v,placement:"bottomRight",children:Object(Ea.jsx)($a.a,{style:{borderColor:ji.a.primary,color:ji.a.primary},className:"account-dropdown",children:wi.getShortAddress(n)})})},Si=l.a.memo(fi);a(845);const Ai=()=>{const e=la(jt);return Object(Ea.jsxs)("header",{className:"header",children:[Object(Ea.jsx)(bs.a,{className:"header__title",to:lt.routers.overview,children:lt.app.name}),e&&Object(Ea.jsx)(Si,{})]})},_i=l.a.memo(Ai);var Ni=a(895),Ci=a(896),Pi=a(897),Ti=a(898),zi=a(342);a(846);const Di=()=>{const e=Object(p.h)(),t=ca().views,a=Object(p.g)(),s=Object(o.useCallback)((()=>{a.push(lt.routers.createService)}),[a]),n=Object(o.useCallback)((()=>{a.push(lt.routers.acceptPayments)}),[a]);return Object(Ea.jsxs)("nav",{className:"navbar",children:[Object(Ea.jsxs)(In.a,{className:"navbar__menu",mode:"inline",selectedKeys:[e.pathname],children:[Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Ni.a,{}),children:Object(Ea.jsx)(bs.a,{to:lt.routers.overview,children:t.overview.title})},lt.routers.overview),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Ci.a,{}),children:Object(Ea.jsx)(bs.a,{to:lt.routers.operations,children:t.operations.title})},lt.routers.operations),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Pi.a,{}),children:Object(Ea.jsx)(bs.a,{to:lt.routers.services,children:t.services.title})},lt.routers.services),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(Ti.a,{}),disabled:!0,children:t.settings.title},"settings"),Object(Ea.jsx)(In.a.Item,{icon:Object(Ea.jsx)(zi.a,{}),children:Object(Ea.jsx)(bs.a,{to:lt.routers.about,children:t.about.title})},lt.routers.about)]}),Object(Ea.jsxs)("div",{className:"navbar__bottom-buttons",children:[Object(Ea.jsx)($a.a,{onClick:s,children:t.createService.title}),Object(Ea.jsx)($a.a,{onClick:n,type:"primary",children:t.acceptPayments.title})]})]})},Ui=l.a.memo(Di);var Ii=a(543);const Ei=()=>{const{services:e,pendingOperations:t}=Object(m.c)(wt);return Object(o.useEffect)((()=>{t.forEach((t=>{const a=e.find((e=>e.contractAddress===t.serviceAddress)),s=Object(Ea.jsxs)("span",{children:[Object(Ea.jsx)("b",{children:t.action}),a&&Object(Ea.jsxs)(Ea.Fragment,{children:[" for service: ",Object(Ea.jsx)("b",{children:`${a.name}`})]})]}),n=t.hash;switch(t.status){case Et.loading:{const e=`${t.confirmationCount} / ${t.targetConfirmationCount}`;Ii.b.loading({content:Object(Ea.jsxs)("span",{children:["Executing operation: ",s," (",e,")"]}),key:n,duration:0});break}case Et.success:Ii.b.success({content:Object(Ea.jsxs)("span",{children:["Finished operation: ",s]}),key:n,duration:4});break;case Et.error:Ii.b.error({content:Object(Ea.jsxs)("span",{children:["Failed operation: ",s]}),key:n,duration:4})}}))}),[t,e]),null},Ki=l.a.memo(Ei);a(847),a(848);const Li=()=>{const e=la(bt).initialized,t=oa();return Object(o.useEffect)((()=>{t(aa())}),[t]),Object(Ea.jsxs)("div",{className:"main-container",children:[Object(Ea.jsx)(Ki,{}),Object(Ea.jsx)(_i,{}),Object(Ea.jsx)(Ui,{}),e?Object(Ea.jsxs)(p.d,{children:[Object(Ea.jsx)(Fa,{exact:!0,path:lt.routers.overview,children:Object(Ea.jsx)(vs,{})}),Object(Ea.jsx)(Fa,{exact:!0,path:lt.routers.operations,children:Object(Ea.jsx)(Cs,{})}),Object(Ea.jsx)(Fa,{exact:!0,path:lt.routers.createService,children:Object(Ea.jsx)(Zn,{mode:Hn.Create})}),Object(Ea.jsx)(Fa,{exact:!0,path:lt.routers.service.template,children:Object(Ea.jsx)(Zn,{mode:Hn.ViewAndEdit})}),Object(Ea.jsx)(Fa,{exact:!0,path:lt.routers.services,children:Object(Ea.jsx)(Hs,{})}),Object(Ea.jsx)(Fa,{exact:!0,path:[lt.routers.acceptPayments,lt.routers.acceptServicePayments.template],children:Object(Ea.jsx)(bi,{})}),Object(Ea.jsx)(p.b,{path:lt.routers.about,children:Object(Ea.jsx)(Xn,{})}),Object(Ea.jsx)(p.b,{path:lt.routers.connect,children:Object(Ea.jsx)(si,{})})]}):Object(Ea.jsx)(vt.a,{})]})};var Fi=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,900)).then((({getCLS:t,getFID:a,getFCP:s,getLCP:n,getTTFB:i})=>{t(e),a(e),s(e),n(e),i(e)}))},Bi=a(134);const $i=Object(Bi.b)({accountsState:ia.reducer,servicesState:qt.reducer,balancesState:Ct.reducer,operationsState:Ut.reducer});a(849);Object(c.d)();const Mi=new class{constructor(e){this.store=void 0,this.reactAppContext=void 0,this.tezosWallet=new h.a({name:lt.app.name,colorMode:v.i.LIGHT}),this.history=void 0,this._network=void 0,this._tezosToolkit=void 0,this._services=void 0,this.onStoreChangedListener=this.onStoreChanged.bind(this),this.unsubscribeStoreChanged=void 0,this.store=e(this),this.history=this.createHistory(),this.applyNetwork(se[lt.tezos.defaultNetwork]),this.unsubscribeStoreChanged=this.store.subscribe(this.onStoreChangedListener),this.reactAppContext=this.createReactAppContext()}get network(){if(!this._network)throw this.getNetworkError();return this._network}get tezosToolkit(){if(!this._tezosToolkit)throw this.getNetworkError();return this._tezosToolkit}get services(){if(!this._services)throw this.getNetworkError();return this._services}onStoreChanged(){const e=this.store.getState();e.accountsState.currentAccount&&e.accountsState.currentAccount.network!==this.network&&this.applyNetwork(e.accountsState.currentAccount.network)}createHistory(){return Object(j.a)()}createReactAppContext(){return{tezosWallet:this.tezosWallet,tezosExplorer:this.createTezosBlockchainUrlExplorer(this.network)}}applyNetwork(e){this._network=e;const t=lt.tezos.networks[this.network.name];this._tezosToolkit=new b.b(t.rpcUrls[t.default.rpc]),this.tezosToolkit.setSignerProvider(new mt),this.tezosToolkit.setWalletProvider(this.tezosWallet);const a=this.createServicesProvider(this.network);this._services={accountsService:new dt(this.tezosToolkit,this.tezosWallet.client),servicesService:new ut.a(this.tezosToolkit,a,t.servicesFactoryContractAddress)}}createServicesProvider(e){const t=lt.tezos.networks[e.name];switch(t.default.indexer){case"tzKT":return new nt(e,t.indexerUrls.tzKT,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);case"betterCallDev":return new it(e,t.indexerUrls.betterCallDev,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);default:throw new Error("Unknown service provider")}}createTezosBlockchainUrlExplorer(e){const t=lt.tezos.networks[e.name];switch(t.default.explorer){case"tzKT":return new tt(e,t.explorers.tzKT.baseUrl);case"tzStats":return new st(e,t.explorers.tzStats.baseUrl);case"betterCallDev":return new at(e,t.explorers.betterCallDev.baseUrl);default:throw new Error("Unknown blockchain explorer")}}getNetworkError(){return new Error("Network is not defined")}}((e=>Object(n.a)({reducer:$i,devTools:{serialize:!0},middleware:t=>t({thunk:{extraArgument:e},serializableCheck:{isSerializable:e=>Object(n.d)(e)||e instanceof Map||e instanceof Set||i.BigNumber.isBigNumber(e)||e instanceof Date,getEntries:e=>e instanceof Map||e instanceof Set?[...e.entries()]:Object.entries(e)}})})));u.a.render(Object(Ea.jsx)(l.a.StrictMode,{children:Object(Ea.jsx)(m.a,{store:Mi.store,children:Object(Ea.jsx)(p.c,{history:Mi.history,children:Object(Ea.jsx)(pt.Provider,{value:Mi.reactAppContext,children:Object(Ea.jsx)(Li,{})})})})}),document.getElementById("root")),window.webApp=Mi,window.config=lt,Fi()}},[[850,1,2]]]);
//# sourceMappingURL=main.94a36374.chunk.js.map