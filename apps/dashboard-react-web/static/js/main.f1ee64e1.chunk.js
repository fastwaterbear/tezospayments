(this["webpackJsonp@tezospayments/dashboard-react-web"]=this["webpackJsonp@tezospayments/dashboard-react-web"]||[]).push([[0],{410:function(e,t){},556:function(e,t,a){"use strict";(function(e){a.d(t,"a",(function(){return n}));var s=a(153);class n{constructor(e,t,a){this.tezosToolkit=e,this.servicesProvider=t,this.servicesFactoryContractAddress=a}async getServices(e){return this.servicesProvider.getServices(e.address)}async getService(e){return this.servicesProvider.getService(e)}async getOperations(e){return this.servicesProvider.getOperations(e)}async updateService(e){const t=await this.getServiceContract(e.contractAddress),a=this.encodeMetadata(e);return await t.methodsObject.update_service_parameters({metadata:a,allowed_tokens:{tez:e.allowedTokens.tez,assets:[...e.allowedTokens.assets]},allowed_operation_type:e.allowedOperationType}).send()}async setPaused(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_pause(t).send()}async setDeleted(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.set_deleted(t).send()}async createService(e){const t=await this.tezosToolkit.contract.at(this.servicesFactoryContractAddress),a=await t.storage(),n=await this.getFactoryImplementationContract(a.factory_implementation),i=this.encodeMetadata(e),r=new s.a;for(const s of e.signingKeys.values())r.set(s.publicKey,{public_key:s.publicKey,name:s.name});return await n.methodsObject.create_service({metadata:i,allowed_tokens:{tez:e.allowedTokens.tez,assets:e.allowedTokens.assets},allowed_operation_type:e.allowedOperationType,signing_keys:r}).send()}addApiKey(e,t){const a=new s.a;return a.set(t.publicKey,{public_key:t.publicKey,name:t.name}),this.updateSigningKeys(e,a)}deleteApiKey(e,t){const a=new s.a;return a.set(t,void 0),this.updateSigningKeys(e,a)}async updateSigningKeys(e,t){const a=await this.getServiceContract(e.contractAddress);return await a.methodsObject.update_signing_keys(t).send()}encodeMetadata(t){const a={name:t.name||void 0,links:t.links.length?t.links:void 0,description:t.description||void 0,iconUrl:t.iconUrl||void 0};return e.from(JSON.stringify(a),"utf8").toString("hex")}async getServiceContract(e){return await this.tezosToolkit.wallet.at(e)}async getFactoryImplementationContract(e){return await this.tezosToolkit.wallet.at(e)}}}).call(this,a(34).Buffer)},614:function(e,t){},616:function(e,t){},626:function(e,t){},628:function(e,t){},655:function(e,t){},657:function(e,t){},658:function(e,t){},663:function(e,t){},665:function(e,t){},684:function(e,t){},696:function(e,t){},699:function(e,t){},745:function(e,t){},763:function(e,t,a){},832:function(e,t,a){},833:function(e,t,a){},834:function(e,t,a){},835:function(e,t,a){},842:function(e,t,a){},843:function(e,t,a){},844:function(e,t,a){},845:function(e,t,a){},846:function(e,t,a){},847:function(e,t,a){},848:function(e,t,a){},849:function(e,t,a){},850:function(e,t,a){},851:function(e,t,a){},852:function(e,t,a){},853:function(e,t,a){},860:function(e,t,a){},861:function(e,t,a){},862:function(e,t,a){},863:function(e,t,a){},864:function(e,t,a){},865:function(e,t,a){},866:function(e,t,a){},867:function(e,t,a){},868:function(e,t,a){},869:function(e,t,a){},870:function(e,t,a){},871:function(e,t,a){},872:function(e,t,a){},873:function(e,t,a){},874:function(e,t,a){},875:function(e,t,a){},876:function(e,t,a){},877:function(e,t,a){},878:function(e,t,a){},879:function(e,t,a){},880:function(e,t,a){},881:function(e,t,a){},882:function(e,t,a){},883:function(e,t,a){},884:function(e,t,a){},886:function(e,t,a){},887:function(e,t,a){},888:function(e,t,a){"use strict";a.r(t);var s={};a.r(s),a.d(s,"beaconNetworkToNetwork",(function(){return pt})),a.d(s,"networkToBeaconNetwork",(function(){return vt}));var n=a(68),i=a(22),r=a.n(i),c=a(79),o=a(0),l=a.n(o),d=a(60),u=a.n(d),m=a(113),p=a(63),v=a(45),h=a(549),b=a(153),j=a(97),y=a(65),g=a.n(y),O=a(471),w=a(34),k=a(555),x=a.n(k),f=a(249),S=a(137),A=a(17),_=a(19),C=a.n(_),N=a(130);const P=w.Buffer.isEncoding("base64url"),T=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";return"base64"!==t&&"base64url"!==t?"":(P||(t="base64",e=D.prepareValueForDecoding(e)),w.Buffer.from(e,t).toString("utf8"))},z=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"base64";if("base64"!==t&&"base64url"!==t)return"";if(P)return w.Buffer.from(e,"utf8").toString(t);const a=w.Buffer.from(e,"utf8").toString("base64");return D.prepareEncodedValue(a)},D={prepareEncodedValue:e=>e.split("=")[0].replace(/\+/g,"-").replace(/\//g,"_"),prepareValueForDecoding:e=>{switch((e=e.replace(/-/g,"+").replace(/_/g,"/")).length%4){case 0:return e;case 2:return e+"==";case 3:return e+"=";default:throw new Error("Invalid base64url value")}}};const U=e=>{var t;const a=null===(t=e.match(/[\da-f]{2}/gi))||void 0===t?void 0:t.map((e=>parseInt(e,16)));return new Uint8Array(a)},I=e=>w.Buffer.from(e,"utf8").toString("hex"),K=e=>w.Buffer.from(U(e)).toString("utf8"),E=(e,t)=>new r.a(e).multipliedBy(10**t).integerValue(),L=(e,t)=>new r.a(e).integerValue().div(10**t),F=e=>E(e,6);var B=Object.freeze({__proto__:null,stringToUint8Array:U,stringToBytes:I,bytesToString:K,objectToBytes:e=>I(JSON.stringify(e)),bytesToObject:e=>{try{return JSON.parse(K(e))}catch{return null}},tokensAmountToNat:E,numberToTokensAmount:L,tezToMutez:F,mutezToTez:e=>L(e,6)});const M=e=>x()(e);var V=Object.freeze({__proto__:null,isArray:e=>Array.isArray(e),isReadonlyArray:e=>Array.isArray(e),isPlainObject:M});const R=(e,t)=>e===t,H=(e,t,a)=>{if(null===t||null===a||t.length!==a.length)return!1;const s=t.length;for(let n=0;n<s;n++)if(!e(t[n],a[n]))return!1;return!0},W=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R,a=null,s=null;return function(){return H(t,a,arguments)||(s=e.apply(null,arguments)),a=arguments,s}};var Z={emptyArray:[],emptyMap:new Map,emptySet:new Set,emptyObject:{},zeroBigNumber:new r.a(0)};const Y=function(e,t,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:" ";if(void 0!==String.prototype.padStart)return e.padStart(a,s);const n=e.length;if(a<=n||""==s)return e;const i=a-n;let r=s.repeat(Math.ceil(i/s.length));return r.length>i&&(r=r.slice(0,i)),t?r+e:e+r},q=function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return void 0!==String.prototype.padStart?e.padStart(t,a):Y(e,!0,t,a)};var G=Object.freeze({__proto__:null,capitalize:e=>{var t;return e&&(null===(t=e[0])||void 0===t?void 0:t.toLocaleUpperCase())+e.slice(1)},getAvatarText:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;if(!e||!t)return"";let a="";for(let s=0,n=0,i=!1;s<e.length;s++)if(i||" "===e[s])i&&" "===e[s]&&(i=!1);else if(i=!0,a+=e[s],++n===t)return a;return a},padStart:q,padEnd:function(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:" ";return void 0!==String.prototype.padEnd?e.padEnd(t,a):Y(e,!1,t,a)}});const J=e=>new Promise((t=>setTimeout(t,e)));var Q;!function(e){e[e.Common=0]="Common",e[e.Email=1]="Email",e[e.Telegram=2]="Telegram",e[e.Facebook=3]="Facebook",e[e.Twitter=4]="Twitter",e[e.Instagram=5]="Instagram",e[e.GitHub=6]="GitHub",e[e.Reddit=7]="Reddit"}(Q||(Q={}));const X=W((e=>e.trim())),$=W((e=>e.trim().replace(/\/$/,""))),ee=(e,t,a)=>{if(!e.startsWith(t))return!1;const s=X(e);return s!==t&&{rawLink:e,formattedLink:s,displayLink:$(e).replace(t,""),icon:a}},te=/^[^\s/@]+@[^\s@/]+$/,ae=/^([a-z][a-z0-9+\-.]*):/;class se{getLinkInfo(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];for(const a of se.linkInfoProviders){const t=a(e);if(t)return this.linkInfoIsValid(t)?t:null}return t?(e=>({rawLink:e,formattedLink:X(e),displayLink:$(e),icon:Q.Common}))(e):null}linkInfoIsValid(e){return"#"!==e.formattedLink}}var ne;g()(se,"linkInfoProviders",[e=>!!e.startsWith("javascript")&&(e=>({rawLink:e,formattedLink:"#",displayLink:"Invalid Link",icon:Q.Common}))(e),e=>ee(e,"https://t.me/",Q.Telegram),e=>ee(e,"https://facebook.com/",Q.Facebook),e=>ee(e,"https://twitter.com/",Q.Twitter),e=>ee(e,"https://instagram.com/",Q.Instagram),e=>ee(e,"https://github.com/",Q.GitHub),e=>{const t=X(e);return te.test(t)&&{rawLink:e,formattedLink:"mailto:".concat(t),displayLink:$(e),icon:Q.Email}},e=>ee(e,"https://www.reddit.com/",Q.Reddit),e=>{const t=X(e);return ae.test(t)&&{rawLink:e,formattedLink:t,displayLink:$(e),icon:Q.Common}}]),function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(ne||(ne={}));class ie{validate(e){let t,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!M(e))return[this.invalidPaymentObjectError];for(const s of this.validationMethods){const n=s(e);if(n){if(!a)return n;t=(t||[]).concat(n)}}return t}}const re={granadanet:{id:"NetXz969SFaFn8k",name:"granadanet"},hangzhounet:{id:"NetXZSsxBpMQeAT",name:"hangzhounet"}},ce=re,oe=Object.values(re),le=/^[a-zA-Z]\w*$/,de=le,ue="XTZ",me="Tezos",pe=6,ve="https://dashboard.tezospayments.com/tokens/tezos.png",he=[{network:ce.granadanet,type:"fa1.2",contractAddress:"KT1KcuD9MmgZuGcptdD3qRqxXpGg4WxFsfVc",metadata:{decimals:0,symbol:"fa12",name:"Test fa12",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:ce.granadanet,type:"fa2",contractAddress:"KT1BBfxboq63dbaKCAc4uwVKLFzVn1b4fy37",id:0,metadata:{decimals:0,symbol:"fa20",name:"Test fa20",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:ce.granadanet,type:"fa2",contractAddress:"KT1PMAT81mmL6NFp9rVU3xoVzU2dRdcXt4R9",id:0,metadata:{decimals:6,symbol:"USDS",name:"Stably USD",thumbnailUri:"https://quipuswap.com/tokens/stably.png"}},{network:ce.hangzhounet,type:"fa1.2",contractAddress:"KT19sYK89XKYTeGHekWK9wL5iDHVF4YYf26t",metadata:{decimals:6,symbol:"FA12",name:"Test FA 1.2",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}},{network:ce.hangzhounet,type:"fa2",contractAddress:"KT1EKo1Eihucz9N4cQyaDKeYRoMzTEoiZRAT",id:0,metadata:{decimals:6,symbol:"FA20",name:"Test FA 2.0",thumbnailUri:"https://dashboard.tezospayments.com/tokens/unknown.png"}}],be=new Map(oe.map((e=>[e,new Map(he.filter((t=>t.network===e)).map((e=>[e.contractAddress,e])))]))),je=["KT"],ye=["tz1","tz2","tz3"],ge={addressLength:36,contractAddressPrefixes:je,implicitAddressPrefixes:ye,addressPrefixes:[...je,...ye]};var Oe;!function(e){e.Ed25519="Ed25519",e.Secp256k1="Secp256k1",e.P256="P256"}(Oe||(Oe={}));const we=f.URL||globalThis.URL;var ke=Object.freeze({__proto__:null,URL:we});const xe=(e,t)=>"string"!==typeof e?[t.invalidTargetAddress]:e.length!==ge.addressLength?[t.targetAddressHasInvalidLength]:ge.addressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.targetAddressIsNotNetworkAddress],fe=(e,t)=>r.a.isBigNumber(e)&&!e.isNaN()&&e.isFinite()?e.isZero()||e.isNegative()?[t.amountIsNonPositive]:void 0:[t.invalidAmount],Se=(e,t)=>{if(void 0!==e)return e instanceof we?e.protocol.indexOf("javascript")>-1?[t.invalidProtocol]:void 0:[t.invalidUrl]},Ae=(e,t)=>{if(void 0!==e)return M(e)?void 0:[t.invalidData]},_e=(e,t)=>Ce(e.address,t)||Ne(e.id,t),Ce=(e,t)=>"string"!==typeof e?[t.invalidAssetAddress]:e.length!==ge.addressLength?[t.assetAddressHasInvalidLength]:ge.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[t.assetAddressIsNotContractAddress],Ne=(e,t)=>{if(null!==e)return"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetId]:e<0?[t.assetIdIsNegative]:Number.isInteger(e)?void 0:[t.assetIdIsNotInteger]},Pe=(e,t)=>"number"!==typeof e||Number.isNaN(e)||!Number.isFinite(e)?[t.invalidAssetDecimals]:e<0?[t.assetDecimalsNumberIsNegative]:Number.isInteger(e)?void 0:[t.assetDecimalsNumberIsNotInteger];class Te extends ie{constructor(){super(...arguments),g()(this,"validationMethods",[e=>e.type!==ne.Payment?[Te.errors.invalidType]:void 0,e=>xe(e.targetAddress,Te.errors),e=>{return t=e.id,a=Te.errors,"string"!==typeof t?[a.invalidId]:""===t?[a.emptyId]:void 0;var t,a},e=>fe(e.amount,Te.errors),e=>((e,t)=>{if(void 0!==e)return M(e)?_e(e,t)||Pe(e.decimals,t):[t.invalidAsset]})(e.asset,Te.errors),e=>Ae(e.data,Te.errors),e=>Se(e.successUrl,Te.successUrlErrors),e=>Se(e.cancelUrl,Te.cancelUrlErrors),e=>((e,t)=>{if(!(e instanceof Date)||isNaN(e.getTime()))return[t.invalidCreatedDate]})(e.created,Te.errors),e=>((e,t,a,s)=>{if(void 0!==e)return e instanceof Date&&!isNaN(e.getTime())?e.getTime()-t.getTime()<a?[s.paymentLifetimeIsShort]:void 0:[s.invalidExpiredDate]})(e.expired,e.created,Te.minimumPaymentLifetime,Te.errors)]),g()(this,"invalidPaymentObjectError",Te.errors.invalidPaymentObject)}}g()(Te,"errors",{invalidPaymentObject:"Payment is undefined or not object",invalidType:"Payment type is invalid",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidId:"Id is invalid",emptyId:"Id is empty",invalidAmount:"Amount is invalid",amountIsNonPositive:"Amount is less than or equal to zero",invalidData:"Payment data is invalid",invalidAsset:"Asset is invalid",invalidAssetAddress:"Asset address is invalid",assetAddressIsNotContractAddress:"Asset address isn't a contract address",assetAddressHasInvalidLength:"Asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidAssetDecimals:"Asset number of decimals is invalid",assetDecimalsNumberIsNegative:"Asset number of decimals is negative",assetDecimalsNumberIsNotInteger:"Asset number of decimals isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol",invalidCreatedDate:"Created date is invalid",invalidExpiredDate:"Expired date is invalid",paymentLifetimeIsShort:"Payment lifetime is short"}),g()(Te,"minimumPaymentLifetime",6e5),g()(Te,"successUrlErrors",{invalidUrl:Te.errors.invalidSuccessUrl,invalidProtocol:Te.errors.successUrlHasInvalidProtocol}),g()(Te,"cancelUrlErrors",{invalidUrl:Te.errors.invalidCancelUrl,invalidProtocol:Te.errors.cancelUrlHasInvalidProtocol});class ze extends ie{constructor(){super(...arguments),g()(this,"validationMethods",[e=>e.type!==ne.Donation?[ze.errors.invalidType]:void 0,e=>Ae(e.data,ze.errors),e=>xe(e.targetAddress,ze.errors),e=>{return t=e.desiredAmount,a=ze.errors,void 0===t?void 0:fe(t,a);var t,a},e=>((e,t)=>{if(void 0!==e)return M(e)?_e(e,t):[t.invalidAsset]})(e.desiredAsset,ze.errors),e=>Se(e.successUrl,ze.successUrlErrors),e=>Se(e.cancelUrl,ze.cancelUrlErrors)]),g()(this,"invalidPaymentObjectError",ze.errors.invalidDonationObject)}}g()(ze,"errors",{invalidDonationObject:"Donation is undefined or not object",invalidType:"Donation type is invalid",invalidData:"Donation data is invalid",invalidAmount:"Desired amount is invalid",amountIsNonPositive:"Desired amount is less than or equal to zero",invalidTargetAddress:"Target address is invalid",targetAddressIsNotNetworkAddress:"Target address isn't a network address",targetAddressHasInvalidLength:"Target address has an invalid address",invalidAsset:"Desired asset is invalid",invalidAssetAddress:"Desired asset address is invalid",assetAddressIsNotContractAddress:"Desired asset address isn't a contract address",assetAddressHasInvalidLength:"Desired asset address has an invalid address",invalidAssetId:"Asset Id is invalid",assetIdIsNegative:"Asset Id is negative",assetIdIsNotInteger:"Asset Id isn't an integer",invalidSuccessUrl:"Success URL is invalid",successUrlHasInvalidProtocol:"Success URL has an invalid protocol",invalidCancelUrl:"Cancel URL is invalid",cancelUrlHasInvalidProtocol:"Cancel URL has an invalid protocol"}),g()(ze,"successUrlErrors",{invalidUrl:ze.errors.invalidSuccessUrl,invalidProtocol:ze.errors.successUrlHasInvalidProtocol}),g()(ze,"cancelUrlErrors",{invalidUrl:ze.errors.invalidCancelUrl,invalidProtocol:ze.errors.cancelUrlHasInvalidProtocol});class De{constructor(){}}class Ue{constructor(){g()(this,"listeners",new Set)}addListener(e){return this.listeners.add(e),this}removeListener(e){return this.listeners.has(e)&&this.listeners.delete(e),this}removeAllListeners(){return this.listeners=new Set,this}emit(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];this.listeners.size&&(1===this.listeners.size?this.listeners.values().next().value(...t):[...this.listeners].forEach((e=>e(...t))))}}class Ie{constructor(e){this.objectFieldTypes=e}get minObjectFieldsCount(){if(!this._minObjectFieldsCount){let e=0;for(const t of this.objectFieldTypes)("string"===typeof t[1]?"undefined"!==t[1]:t[1].every((e=>"undefined"!==e)))&&e++;this._minObjectFieldsCount=e}return this._minObjectFieldsCount}get maxObjectFieldsCount(){return this.objectFieldTypes.size}validate(e){if(!e)return!1;const t=Object.getOwnPropertyNames(e);if(t.length<this.minObjectFieldsCount||t.length>this.maxObjectFieldsCount)return!1;for(const[a,s]of this.objectFieldTypes){const t=e[a],n=null===t?"null":typeof t;if(Array.isArray(s)?!s.some((e=>n===e)):n!==s)return!1}return!0}}class Ke{constructor(e){this.objectSerializationValidator=new Ie(e)}serialize(e){try{if(!this.objectSerializationValidator.validate(e))return null;const t=JSON.stringify(e);return z(t,"base64url")}catch{return null}}}class Ee{constructor(e){this.objectSerializationValidator=new Ie(e)}deserialize(e){try{let t;if(e){const a=T(e,"base64url");t=JSON.parse(a)}else t={};return this.objectSerializationValidator.validate(t)?t:null}catch{return null}}}(new Map).set("a","string").set("d","number").set("i",["number","undefined","null"]),(new Map).set("c","string").set("cl",["string","undefined","null"]).set("k","string");const Le=(new Map).set("i","string").set("a","string").set("as",["object","undefined","null"]).set("d",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("c","number").set("e",["number","undefined","null"]).set("s","object");class Fe{serialize(e){try{const t=this.mapPaymentToSerializedPayment(e);return Fe.serializedPaymentBase64Serializer.serialize(t)}catch{return null}}mapPaymentToSerializedPayment(e){var t,a,s;return{i:e.id,a:e.amount.toString(),as:e.asset?this.mapPaymentAssetToSerializedPaymentAsset(e.asset):void 0,d:e.data,su:null===(t=e.successUrl)||void 0===t?void 0:t.toString(),cu:null===(a=e.cancelUrl)||void 0===a?void 0:a.toString(),c:e.created.getTime(),e:null===(s=e.expired)||void 0===s?void 0:s.getTime(),s:this.mapPaymentSignatureToSerializedPaymentSignature(e.signature)}}mapPaymentAssetToSerializedPaymentAsset(e){return{a:e.address,d:e.decimals,i:null!==e.id?e.id:void 0}}mapPaymentSignatureToSerializedPaymentSignature(e){return{k:e.signingPublicKey,c:e.contract,cl:e.client}}}g()(Fe,"serializedPaymentBase64Serializer",new Ke(Le));class Be{deserialize(e,t){try{const a=Be.serializedPaymentBase64Deserializer.deserialize(e);return a?this.mapSerializedPaymentToPayment(a,t):null}catch{return null}}mapSerializedPaymentToPayment(e,t){return{type:ne.Payment,id:e.i,amount:new r.a(e.a),asset:e.as?this.mapSerializedPaymentAssetToPaymentAsset(e.as):void 0,data:e.d,successUrl:e.su?new we(e.su):void 0,cancelUrl:e.cu?new we(e.cu):void 0,created:new Date(e.c),expired:e.e?new Date(e.e):void 0,targetAddress:t.targetAddress,signature:this.mapSerializedPaymentSignatureToPaymentSignature(e.s)}}mapSerializedPaymentAssetToPaymentAsset(e){return{address:e.a,decimals:e.d,id:void 0!==e.i?e.i:null}}mapSerializedPaymentSignatureToPaymentSignature(e){return{signingPublicKey:e.k,contract:e.c,client:e.cl}}}g()(Be,"serializedPaymentBase64Deserializer",new Ee(Le)),(new Map).set("a","string").set("i",["number","undefined","null"]),(new Map).set("cl","string").set("k","string");const Me=(new Map).set("d",["object","undefined","null"]).set("da",["string","undefined","null"]).set("das",["object","undefined","null"]).set("su",["string","undefined","null"]).set("cu",["string","undefined","null"]).set("s",["object","undefined","null"]);class Ve{serialize(e){try{const t=this.mapDonationToSerializedDonation(e),a=Ve.serializedDonationBase64Serializer.serialize(t);return"e30"===a?"":a}catch{return null}}mapDonationToSerializedDonation(e){var t,a,s;return{d:e.data,da:null===(t=e.desiredAmount)||void 0===t?void 0:t.toString(),das:e.desiredAsset?this.mapDonationAssetToSerializedDonationAsset(e.desiredAsset):void 0,su:null===(a=e.successUrl)||void 0===a?void 0:a.toString(),cu:null===(s=e.cancelUrl)||void 0===s?void 0:s.toString(),s:e.signature?this.mapDonationSignatureToSerializedDonationSignature(e.signature):void 0}}mapDonationAssetToSerializedDonationAsset(e){return{a:e.address,i:null!==e.id?e.id:void 0}}mapDonationSignatureToSerializedDonationSignature(e){return{k:e.signingPublicKey,cl:e.client}}}g()(Ve,"serializedDonationBase64Serializer",new Ke(Me));class Re{deserialize(e,t){try{const a=Re.serializedDonationBase64Deserializer.deserialize(e);return a?this.mapSerializedDonationToDonation(a,t):null}catch{return null}}mapSerializedDonationToDonation(e,t){return{type:ne.Donation,data:e.d,desiredAmount:e.da?new r.a(e.da):void 0,desiredAsset:e.das?this.mapSerializedDonationAssetToDonationAsset(e.das):void 0,successUrl:e.su?new we(e.su):void 0,cancelUrl:e.cu?new we(e.cu):void 0,targetAddress:t.targetAddress,signature:e.s?this.mapSerializedDonationSignatureToDonationSignature(e.s):void 0}}mapSerializedDonationAssetToDonationAsset(e){return{address:e.a,id:void 0!==e.i?e.i:null}}mapSerializedDonationSignatureToDonationSignature(e){return{signingPublicKey:e.k,client:e.cl}}}g()(Re,"serializedDonationBase64Deserializer",new Ee(Me));class He extends De{static validate(e){return He.defaultValidator.validate(e)}static deserialize(e,t){return He.defaultDeserializer.deserialize(e,t)}}g()(He,"defaultDeserializer",new Be),g()(He,"defaultValidator",new Te);class We extends De{static validate(e){return We.defaultValidator.validate(e)}static deserialize(e,t){return We.defaultDeserializer.deserialize(e,t)}}var Ze;g()(We,"defaultDeserializer",new Re),g()(We,"defaultValidator",new ze),function(e){e[e.Base64=0]="Base64"}(Ze||(Ze={}));const Ye=new Map(Object.keys(Ze).filter((e=>!isNaN(+e))).map((e=>[+e,q(e,2,"0")]))),qe=(e,t)=>(e.template=t,e);var Ge;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation",e[e.All=3]="All"}(Ge||(Ge={}));const Je={name:"",description:"",links:Z.emptyArray,version:0,metadata:"",contractAddress:"",allowedTokens:{tez:!0,assets:Z.emptyArray},allowedOperationType:Ge.Payment,owner:"",paused:!1,deleted:!1,network:ce.granadanet,signingKeys:Z.emptyMap};var Qe,Xe,$e;!function(e){e[e.Payment=1]="Payment",e[e.Donation=2]="Donation"}(Qe||(Qe={})),function(e){e[e.Incoming=0]="Incoming",e[e.Outgoing=1]="Outgoing"}(Xe||(Xe={})),function(e){e[e.Pending=0]="Pending",e[e.Success=1]="Success",e[e.Cancelled=2]="Cancelled"}($e||($e={}));class et extends De{static parsePayload(e){const t=K(e);let a=null;try{a=JSON.parse(t)}catch{}return{value:a,valueString:t,encodedValue:e}}}const tt={prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"mutez"}]},at={prim:"pair",args:[{prim:"pair",args:[{prim:"pair",args:[{prim:"string"},{prim:"address"}]},{prim:"pair",args:[{prim:"nat"},{prim:"address"}]}]},{prim:"option",args:[{prim:"nat"}]}]};class st{encode(e){return{contractSignPayload:this.getContractSignPayload(e),clientSignPayload:this.getClientSignPayload(e)}}getContractSignPayload(e){return"0x"+(e.asset?Object(S.b)({prim:"Pair",args:[{prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{prim:"Pair",args:[{int:E(e.amount,e.asset.decimals).toString(10)},{string:e.asset.address}]}]},void 0!==e.asset.id&&null!==e.asset.id?{prim:"Some",args:[{int:e.asset.id.toString()}]}:{prim:"None"}]},at):Object(S.b)({prim:"Pair",args:[{prim:"Pair",args:[{string:e.id},{string:e.targetAddress}]},{int:F(e.amount).toString(10)}]},tt)).bytes}getClientSignPayload(e){return(e.successUrl?e.successUrl.href:"")+(e.cancelUrl?e.cancelUrl.href:"")||null}}g()(st,"contractPaymentInTezSignPayloadMichelsonType",tt),g()(st,"contractPaymentInAssetSignPayloadMichelsonType",at);class nt{constructor(){g()(this,"_isInitialized",!1)}get isInitialized(){return this._isInitialized}generate(){if(!this.isInitialized)throw new Error("Ed25519 key generator is not initialized");const e=C.a.crypto_sign_keypair("uint8array"),t={keyType:Oe.Ed25519,privateKey:e.privateKey,publicKey:e.publicKey};return{raw:t,encoded:{keyType:Oe.Ed25519,privateKey:Object(A.d)(t.privateKey,A.n.edsk),publicKey:Object(A.d)(t.publicKey,A.n.edpk)}}}async initialize(){await C.a.ready,this._isInitialized=!0}static async create(){const e=new nt;return await e.initialize(),e}}class it{constructor(e){this.ec=new N.ec(e),this.curveInfo=it.curveInfo[e]}generate(){const e=this.ec.genKeyPair();console.log(e);const t=e.getPublic(),a=t.getX().toArray(),s=t.getY().toArray(),n=s[s.length-1]%2?3:2,i=new Uint8Array(e.getPrivate().toArray()),r=new Array(32).fill(0),c=new Uint8Array([n].concat(r.concat(a).slice(-32)));return{raw:{keyType:Oe.P256,privateKey:i,publicKey:c},encoded:{keyType:this.curveInfo.keyType,privateKey:Object(A.d)(i,this.curveInfo.privateKeyPrefix),publicKey:Object(A.d)(c,this.curveInfo.publicKeyPrefix)}}}}g()(it,"curveInfo",{secp256k1:{name:"secp256k1",keyType:Oe.Secp256k1,privateKeyPrefix:A.n.spsk,publicKeyPrefix:A.n.sppk},p256:{name:"p256",keyType:Oe.P256,privateKeyPrefix:A.n.p2sk,publicKeyPrefix:A.n.p2pk}});const rt={links:{tezosPayments:{webSite:"https://tezospayments.com",paymentsApp:"https://payment.tezospayments.com",gitHub:"https://github.com/fastwaterbear/tezospayments",telegram:"https://t.me/fastwaterbear",twitter:"https://twitter.com/fastwaterbear",reddit:"https://www.reddit.com/user/fastwaterbear"}},tezos:{defaultNetwork:"hangzhounet",networks:{granadanet:{title:"Granada Testnet",color:"#667eea",minimumSupportedServiceVersion:3,default:{rpc:"ecadLabs",indexer:"tzKT",explorer:"tzKT"},rpcUrls:{ecadLabs:"https://granadanet.api.tez.ie",smartPy:"https://granadanet.smartpy.io"},indexerUrls:{tzKT:"https://api.granadanet.tzkt.io",betterCallDev:"https://api.better-call.dev"},explorers:{tzKT:{baseUrl:"https://granadanet.tzkt.io",title:"TzKT"},betterCallDev:{baseUrl:"https://better-call.dev",title:"Better Call Dev"},tzStats:{baseUrl:"https://granada.tzstats.com",title:"TzStats"}},servicesFactoryContractAddress:"KT1NxBzCJtvHFLKfiSAX3PGxdiJMAC8CtSZV"},hangzhounet:{title:"Hangzhou Testnet",color:"#b83280",minimumSupportedServiceVersion:1,default:{rpc:"smartPy",indexer:"tzKT",explorer:"tzKT"},rpcUrls:{ecadLabs:"https://hangzhounet.api.tez.ie",smartPy:"https://hangzhounet.smartpy.io"},indexerUrls:{tzKT:"https://api.hangzhou2net.tzkt.io",betterCallDev:"https://api.better-call.dev"},explorers:{tzKT:{baseUrl:"https://hangzhou2net.tzkt.io",title:"TzKT"},betterCallDev:{baseUrl:"https://better-call.dev",title:"Better Call Dev"},tzStats:{baseUrl:"https://hangzhou.tzstats.com",title:"TzStats"}},servicesFactoryContractAddress:"KT1BLQ4tfy5iizuCSaR5D8sSDiQSemhvnAif"}}}};class ct{constructor(e,t){this.network=e,this.baseUrl=t}}class ot extends ct{getEntityUrl(e){return"".concat(this.baseUrl,"/").concat(e)}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class lt extends ct{getEntityUrl(e){return ge.addressPrefixes.some((t=>e.startsWith(t)))?this.getAccountUrl(e):this.getOperationUrl(e)}getOperationUrl(e){return"".concat(this.baseUrl,"/").concat(this.network.name,"/opg/").concat(e,"/contents")}getAccountUrl(e){return"".concat(this.baseUrl,"/").concat(this.network.name,"/").concat(e)}}class dt extends ct{getEntityUrl(e){return"".concat(this.baseUrl,"/").concat(e)}getOperationUrl(e){return this.getEntityUrl(e)}getAccountUrl(e){return this.getEntityUrl(e)}}class ut{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=be.get(this.network)||Z.emptyMap}async getService(e){const t=await fetch("".concat(this.baseUrl,"/v1/contracts/").concat(e,"/storage")),a=await t.json();if("version"in a&&+a.version<this.minimumSupportedServiceVersion)return null;const s=this.mapServiceDtoToService(a,e,this.network);if(!s)throw new Error("Service not found");return s}async getServices(e){const t="".concat(this.baseUrl,"/v1/contracts/").concat(this.servicesFactoryContractAddress,"/bigmaps/services/keys"),a=await fetch(t);if((await a.json()).every((t=>t.key!==e)))return[];const s=await fetch("".concat(t,"/").concat(e)),n=(await s.json()).value;return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL("v1/accounts/".concat(e,"/operations"),this.baseUrl);t.searchParams.set("type","transaction"),t.searchParams.set("entrypoint.in","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).map((e=>this.mapOperationDtoToServiceOperation(e))).filter(Boolean)}mapServiceDtoToService(e,t,a){const s=B.bytesToObject(e.metadata);return!s||"string"!==typeof s.name||!V.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||Z.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e.version,metadata:e.metadata,contractAddress:t,network:a,allowedTokens:{tez:e.allowed_tokens.tez,assets:e.allowed_tokens.assets},allowedOperationType:+e.allowed_operation_type,owner:e.owner,paused:e.paused,deleted:e.deleted,signingKeys:this.mapSigningKeyDtosToSigningKeys(e.signing_keys)}}mapSigningKeyDtosToSigningKeys(e){return Object.keys(e).reduce(((t,a)=>{var s;return t.set(a,{publicKey:a,name:(null===(s=e[a])||void 0===s?void 0:s.name)||void 0})}),new Map)}mapOperationDtoToServiceOperation(e){var t,a,s;const n=e.parameter.value.asset_value?(null===(a=null===(t=this.tokenWhiteList.get(e.parameter.value.asset_value.token_address))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:pe,i=e.parameter.value.asset_value?e.parameter.value.asset_value.value:e.amount.toString(),c="send_payment"===e.parameter.entrypoint?Qe.Payment:Qe.Donation,o={hash:e.hash,type:c,direction:Xe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,amount:B.numberToTokensAmount(new r.a(i),n),asset:null===(s=e.parameter.value.asset_value)||void 0===s?void 0:s.token_address,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.sender.address,target:e.target.address};switch(o.type){case Qe.Payment:{const t=o;return t.paymentId=e.parameter.value.id,t}case Qe.Donation:{const t=o;return t.payload=et.parsePayload(e.parameter.value.payload),t}default:return null}}}class mt{constructor(e,t,a,s){this.network=e,this.baseUrl=t,this.servicesFactoryContractAddress=a,this.minimumSupportedServiceVersion=s,this.tokenWhiteList=be.get(this.network)||Z.emptyMap}async getService(e){var t;const a=await fetch("".concat(this.baseUrl,"/v1/contract/").concat(this.network.name,"/").concat(e,"/storage")),s=await a.json();if(+(null===(t=null===s||void 0===s?void 0:s[0].children)||void 0===t?void 0:t[s[0].children.length-1]).value<this.minimumSupportedServiceVersion)return null;const n=this.mapServiceDtoToService(s,e,this.network);if(!n)throw new Error("Service not found");return n}async getServices(e){const t=(await this.getServicesFactoryDto())[0].children[4].value,a=await fetch("".concat(this.baseUrl,"/v1/bigmap/").concat(this.network.name,"/").concat(t,"/keys")),s=(await a.json()).find((t=>t.data.key_string===e));if(!s)return Z.emptyArray;const n=s.data.value.children.map((e=>e.value));return(await Promise.all(n.map((e=>this.getService(e))))).filter(Boolean)}async getOperations(e){const t=new URL("v1/contract/".concat(this.network.name,"/").concat(e,"/operations"),this.baseUrl);t.searchParams.set("entrypoints","send_payment,send_donation");const a=await fetch(t.href);return(await a.json()).operations.filter((e=>!e.internal)).filter((e=>"send_payment"===e.entrypoint||"send_donation"===e.entrypoint)).map((e=>"send_payment"===e.entrypoint?this.mapSendPaymentOperationToServiceOperation(e):this.mapSendDonationOperationToServiceOperation(e))).filter(Boolean)}async getServicesFactoryDto(){return(await fetch("".concat(this.baseUrl,"/v1/contract/").concat(this.network.name,"/").concat(this.servicesFactoryContractAddress,"/storage"))).json()}mapServiceDtoToService(e,t,a){let s;try{s=JSON.parse(e[0].children[4].value)}catch{return null}return!s||"string"!==typeof s.name||!V.isArray(s.links)&&void 0!==s.links||"string"!==typeof s.description&&void 0!==s.description||"string"!==typeof s.iconUrl&&void 0!==s.iconUrl?null:{name:s.name,links:s.links||Z.emptyArray,description:s.description,iconUrl:s.iconUrl,version:+e[0].children[8].value,metadata:B.stringToBytes(e[0].children[4].value),contractAddress:t,network:a,allowedTokens:{tez:e[0].children[1].children[0].value,assets:Z.emptyArray},allowedOperationType:+e[0].children[0].value,owner:e[0].children[5].value,paused:e[0].children[6].value,deleted:e[0].children[3].value,signingKeys:e[0].children[7].children?this.mapSigningKeyDtosToSigningKeys(e[0].children[7].children):new Map}}mapSigningKeyDtosToSigningKeys(e){return e.reduce(((e,t)=>{const a=t.children[0].value,s=t.children[1].value;return e.set(a,{publicKey:a,name:"None"!==s?s:void 0})}),new Map)}mapSendPaymentOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[1].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(a=null===(t=this.tokenWhiteList.get(n))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:pe,o=i||(e.amount||0).toString();return{hash:e.hash,type:Qe.Payment,direction:Xe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,paymentId:e.parameters[0].children[0].value,amount:B.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination}}mapSendDonationOperationToServiceOperation(e){var t,a;const s=e.parameters[0].children[0].children,n=null===s||void 0===s?void 0:s[0].value,i=null===s||void 0===s?void 0:s[2].value,c=n?(null===(a=null===(t=this.tokenWhiteList.get(n))||void 0===t?void 0:t.metadata)||void 0===a?void 0:a.decimals)||0:pe,o=i||(e.amount||0).toString();return{hash:e.hash,type:Qe.Donation,direction:Xe.Incoming,status:"applied"===e.status?$e.Success:$e.Cancelled,amount:B.numberToTokensAmount(new r.a(o),c),asset:n,timestamp:e.timestamp,date:new Date(e.timestamp),sender:e.source,target:e.destination,payload:et.parsePayload(B.stringToBytes(e.parameters[0].children[1].value))}}}const pt=e=>{switch(e){case v.p.GRANADANET:return ce.granadanet;case v.p.HANGZHOUNET:return ce.hangzhounet;default:throw new Error("Not Supported network type")}},vt=e=>{switch(e){case ce.granadanet:return v.p.GRANADANET;case ce.hangzhounet:return v.p.HANGZHOUNET;default:throw new Error("Not Supported network type")}},ht="28db942",bt={...rt,app:{publicUrl:"/",name:"Tezos Payments",title:"Tezos Payments",version:{name:"Dev Version",link:"https://github.com/fastwaterbear/tezospayments/tree/master"},buildInfo:{commitShortSha:ht,link:"https://github.com/fastwaterbear/tezospayments/tree/".concat(ht)}},routers:{overview:"/",operations:"/operations",services:"/services",service:qe((e=>"/services/".concat(e)),"/services/:address"),createService:"/services/create",acceptPayments:"/accept",acceptServicePayments:qe((e=>"/accept/".concat(e)),"/accept/:address"),connect:"/connect",about:"/about"},links:{...rt.links,tzKT:"https://tzkt.io"}};class jt{constructor(e,t){this.tezosToolkit=e,this.dAppClient=t}async connect(e){return this.dAppClient.requestPermissions({network:{type:s.networkToBeaconNetwork(e)}}).then((t=>({address:t.address,publicKey:t.publicKey,network:e}))).catch((e=>(console.error(e),this.dAppClient.clearActiveAccount(),null)))}disconnect(){return this.dAppClient.clearActiveAccount()}async getActiveAccount(){const e=await this.dAppClient.getActiveAccount();return e?{address:e.address,publicKey:e.publicKey,network:s.beaconNetworkToNetwork(e.network.type)}:void 0}async getTezosBalance(e){return(await this.tezosToolkit.tz.getBalance(e.address)).div(10**pe)}async getTokenBalance(e,t){let a=null;switch(t.type){case"fa1.2":a=await this.getTokenFA12Balance(e,t);break;case"fa2":a=await this.getTokenFA2Balance(e,t);break;default:throw new Error("Not Supported")}const s=t.metadata?10**t.metadata.decimals:1;return a.div(s)}async getTokenFA12Balance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return await(null===(a=(s=n.views).getBalance)||void 0===a?void 0:a.call(s,e.address).read())||0}async getTokenFA2Balance(e,t){var a,s;const n=await this.tezosToolkit.contract.at(t.contractAddress);return(await(null===(a=n.views)||void 0===a||null===(s=a.balance_of)||void 0===s?void 0:s.call(a,[{owner:e.address,token_id:t.id}]).read()))[0].balance||0}}var yt=a(556),gt=a(92);const Ot=e=>e.accountsState,wt=Object(gt.a)(Ot,(e=>e.currentAccount&&e.connectedAccounts.find((t=>{var a;return t.address===(null===(a=e.currentAccount)||void 0===a?void 0:a.address)&&t.network.id===e.currentAccount.network.id}))||null)),kt=Object(gt.a)(Ot,(e=>e.connectedAccounts.reduce(((e,t)=>e.set(t.network,[...e.get(t.network)||[],t])),new Map))),xt=Object(gt.a)(wt,(e=>e&&bt.tezos.networks[e.network.name])),ft=Object(gt.a)(Ot,(e=>{var t;const a=null===(t=e.currentAccount)||void 0===t?void 0:t.network;return a&&be.get(a)||Z.emptyMap})),St=e=>e.servicesState,At=Object(gt.a)(St,ft,((e,t)=>{const a=new Set;return e.services.forEach((e=>e.allowedTokens.assets.forEach((e=>{const s=t.get(e);s&&a.add(s)})))),[...a]})),_t=Object(gt.a)(St,(e=>e.services.some((e=>e.allowedTokens.tez)))),Ct=Object(gt.a)(St,(e=>[...e.services].sort(((e,t)=>e.name.localeCompare(t.name))))),Nt=Object(gt.a)(St,(e=>{const t=new Map;return e.pendingOperations.forEach((e=>{const a=t.get(e.serviceAddress);a?a.push(e):t.set(e.serviceAddress,[e])})),t})),Pt={tezos:Z.zeroBigNumber,tokens:Z.emptyObject,initialized:!1},Tt="balances",zt=Object(n.b)("".concat(Tt,"/loadBalances"),(async(e,t)=>{let{extra:a,getState:s}=t;const n=await a.services.accountsService.getTezosBalance(e),i=At(s()),r={},c=i.map((t=>a.services.accountsService.getTokenBalance(e,t)));return(await Promise.all(c)).forEach(((e,t)=>{var a;const s=null===(a=i[t])||void 0===a?void 0:a.contractAddress;s&&(r[s]=e)})),{tezos:n,tokens:r}})),Dt=Object(n.c)({name:Tt,initialState:Pt,reducers:{clearBalances:e=>{e.tezos=Z.zeroBigNumber,e.tokens=Z.emptyObject,e.initialized=!1}},extraReducers:e=>{e.addCase(zt.fulfilled,((e,t)=>{const{tezos:a,tokens:s}=t.payload;e.tezos=a,e.tokens=s,e.initialized=!0}))}}),{clearBalances:Ut}=Dt.actions,It={operations:Z.emptyArray,initialized:!1},Kt="operations",Et=Object(n.b)("".concat(Kt,"/loadOperations"),(async(e,t)=>{let{servicesAddresses:a}=e,{extra:s}=t;const n=a.map((e=>s.services.servicesService.getOperations(e)));return(await Promise.all(n)).flat()})),Lt=Object(n.c)({name:Kt,initialState:It,reducers:{clearOperations:e=>{e.operations=Z.emptyArray,e.initialized=!1}},extraReducers:e=>{e.addCase(Et.fulfilled,((e,t)=>{e.operations=t.payload,e.initialized=!0}))}}),{clearOperations:Ft}=Lt.actions;let Bt;!function(e){e[e.loading=0]="loading",e[e.success=1]="success",e[e.error=2]="error"}(Bt||(Bt={}));const Mt={services:Z.emptyArray,initialized:!1,pendingOperations:Z.emptyArray},Vt="services",Rt=Object(n.b)("".concat(Vt,"/loadServices"),(async(e,t)=>{let{extra:a,dispatch:s}=t;const n=await a.services.servicesService.getServices(e);return n.length&&s(Et({servicesAddresses:n.map((e=>e.contractAddress)),network:e.network})),n})),Ht=Object(n.b)("".concat(Vt,"/updateService"),(async(e,t)=>{let{extra:a,dispatch:s,getState:n}=t;const i=await a.services.servicesService.updateService(e);await $t(s,i,e.contractAddress,"updating"),Xt(s,n)})),Wt=Object(n.b)("".concat(Vt,"/createService"),(async(e,t)=>{let{extra:a,dispatch:s,getState:n}=t;const i=await a.services.servicesService.createService(e);await $t(s,i,e.contractAddress,"creating new service"),Xt(s,n)})),Zt=Object(n.b)("".concat(Vt,"/setPaused"),(async(e,t)=>{let{service:a,paused:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.setPaused(a,s);await $t(i,c,a.contractAddress,s?"pausing":"unpausing"),Xt(i,r)})),Yt=Object(n.b)("".concat(Vt,"/setDeleted"),(async(e,t)=>{let{service:a,deleted:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.setDeleted(a,s);await $t(i,c,a.contractAddress,s?"deleting":"undeleting"),Xt(i,r)})),qt=Object(n.b)("".concat(Vt,"/addApiKey"),(async(e,t)=>{let{service:a,signingKey:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.addApiKey(a,s);await $t(i,c,a.contractAddress,"adding API key"),Xt(i,r)})),Gt=Object(n.b)("".concat(Vt,"/deleteApiKey"),(async(e,t)=>{let{service:a,publicKey:s}=e,{extra:n,dispatch:i,getState:r}=t;const c=await n.services.servicesService.deleteApiKey(a,s);await $t(i,c,a.contractAddress,"deleting API key"),Xt(i,r)})),Jt=Object(n.b)("".concat(Vt,"/clearServices"),(async(e,t)=>{let{dispatch:a}=t;a(Ft())})),Qt=(e,t,a,s)=>({hash:e,action:a,serviceAddress:t,targetConfirmationCount:s,confirmationCount:0,status:Bt.loading}),Xt=(e,t)=>{const a=wt(t());a&&e(Rt(a))},$t=function(e,t,a,s){let n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:2;const i=Qt(t.opHash,a,s,n);return e(ta(i)),new Promise(((a,s)=>{t.confirmationObservable(n).subscribe((t=>e(sa({hash:i.hash,confirmationCount:t.currentConfirmation}))),(async t=>{e(aa({hash:i.hash,status:Bt.error})),s(t),await J(1e3),e(na(i.hash))}),(async()=>{e(aa({hash:i.hash,status:Bt.success})),a(),await J(1e3),e(na(i.hash))}))}))},ea=Object(n.c)({name:Vt,initialState:Mt,reducers:{addPendingOperation:(e,t)=>{const a=t.payload;e.pendingOperations.push(a)},setPendingOperationStatus:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.status=t.payload.status)},setPendingOperationConfirmationCount:(e,t)=>{const a=e.pendingOperations.find((e=>e.hash===t.payload.hash));a&&(a.confirmationCount=t.payload.confirmationCount)},deletePendingOperation:(e,t)=>{e.pendingOperations=e.pendingOperations.filter((e=>e.hash!==t.payload))}},extraReducers:e=>{e.addCase(Rt.fulfilled,((e,t)=>({...e,services:t.payload,initialized:!0}))),e.addCase(Jt.fulfilled,(e=>({...e,services:Z.emptyArray,initialized:!1})))}}),{addPendingOperation:ta,setPendingOperationStatus:aa,setPendingOperationConfirmationCount:sa,deletePendingOperation:na}=ea.actions;class ia{async publicKeyHash(){return"tz1fVQangAfb9J1hRRMP2bSB6LvASD6KpY8A"}async publicKey(){return"edpkvWbk81uh1DEvdWKR4g1bjyTGhdu1mDvznPUFE2zDwNsLXrEb9K"}async secretKey(){throw new Error("Secret key cannot be exposed")}async sign(){throw new Error("Cannot sign")}}const ra=l.a.createContext({});var ca=a(901);const oa={currentAccount:null,connectedAccounts:Z.emptyArray,initialized:!1},la="accounts",da=Object(n.b)("".concat(la,"/loadActiveAccount"),(async(e,t)=>{let{extra:a}=t;return await a.services.accountsService.getActiveAccount()||null})),ua=Object(n.b)("".concat(la,"/connect"),((e,t)=>{let{extra:a}=t;return a.services.accountsService.connect(e)})),ma=Object(n.b)("".concat(la,"/disconnect"),((e,t)=>{let{extra:a}=t;return a.services.accountsService.disconnect()})),pa=Object(n.c)({name:la,initialState:oa,reducers:{},extraReducers:e=>{e.addCase(da.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a)),e.initialized=!0})),e.addCase(ua.fulfilled,((e,t)=>{const a=t.payload;a&&(e.currentAccount={address:a.address,network:a.network},e.connectedAccounts.some((e=>e.address===a.address))||e.connectedAccounts.push(a))})),e.addCase(ma.fulfilled,(e=>{e.connectedAccounts=e.connectedAccounts.filter((t=>{var a,s;return t.address!==(null===(a=e.currentAccount)||void 0===a?void 0:a.address)||t.network.id!==(null===(s=e.currentAccount)||void 0===s?void 0:s.network.id)}));const t=e.connectedAccounts[0];e.currentAccount=t?{address:t.address,network:t.network}:null}))}}),va={id:"en-US",resources:{common:{comingSoon:"Coming soon",copy:"Copy",copyLink:"Copy Link",open:"Open",new:"New",cancel:"Cancel",save:"Save",yes:"Yes",no:"No"},views:{header:{accountActions:{copyAddress:{title:"Copy address"},viewOn:"View on",connectAnotherAccount:{title:"Connect another account"},disconnect:{title:"Disconnect"}}},overview:{title:"Overview",balances:{title:"Balances"},incoming:{title:"Incoming"},outgoing:{title:"Outgoing"},operationCount:{title:"Operation count"},volume:{title:"Volume"}},createService:{title:"Create Service"},connect:{actions:{connect:{title:"Connect",connectTo:"Connect to",description:"In order to use the ".concat(bt.app.title," service you have to connect a Tezos account")}}},about:{title:"About",detailedTitle:"Decentralized Payment Solution built on Tezos blockchain",build:"build",poweredBy:"Powered by",tzKt:"TzKT",api:"API"},operations:{title:"Operations",operationList:{paymentId:"Payment Id:",donationData:"Donation Data:",income:"Income",expense:"Expense",cancelled:"Cancelled",pending:"Pending",noOperationsPerformedYet:"No operations performed yet"}},services:{title:"Services",status:{active:"Active",paused:"Paused",deleted:"Deleted",updating:"Updating"},createNewService:"Create New Service",acceptPayments:"Accept Payments",acceptPaymentsDescription:"Generate a payment link using our constructor to accept payments on your service",youDoNotHaveAnyServicesYet:"You don't have any services yet",createYourFirstService:"Create your first service to accept payments or connect another Tezos account",operations:{paymentsEnabled:"Payments Enabled",donationsEnabled:"Donations Enabled"},allowedCurrencies:"Allowed Currencies",service:"Service",links:"Links",dangerZone:{title:"Danger Zone",pauseService:"Pause Service",pauseServiceConfirmation:"Are you sure you want to pause the service",pauseServiceDescription:"Pause accepting payments and donations",unPauseService:"Unpause Service",unPauseServiceConfirmation:"Are you sure you want to unpause the service",unPauseServiceDescription:"Accepting payments and donations are paused",deleteService:"Delete Service",deleteServiceConfirmation:"Are you sure you want to delete the service",deleteServiceDescription:"Delete this service. After deleting this service can\u2019t accept payments and donations. You can restore the deleted service",unDeleteService:"Undelete Service",unDeleteServiceConfirmation:"Are you sure you want to undelete the service",unDeleteServiceDescription:"Service is marked as deleted"},devZone:{title:"API Keys",addKey:"Add Key",saveKeys:"Save Keys",generateKeys:"Generate Keys",name:"Name",algorithm:"Algorithm",publicKey:"Public Key",secretKey:"Secret Key",saveSecretKeyWarning:"Write down the secret key, we will never show it again",saveSecretKeyConfirm:"Have you written down the secret key?",noApiKeysAddedYet:"No API keys added yet",deleteKeyConfirmation:"Are you sure you want to delete the API key"},editing:{editService:"Edit Service",updateService:"Update Service",createService:"Create Service",addCurrency:"Add Currency",addLink:"Add Link",serviceName:"Service Name",description:"Description",accept:"Accept",acceptPayments:"Accept Payments",acceptDonations:"Accept Donations"}},settings:{title:"Settings"},acceptPayments:{title:"Accept Payments",type:"Type",amount:"Amount",paymentData:"Payment Data",paymentId:"Payment ID",paymentIdHelpText:"Payment ID/invoice number/any unique identifier in your system",donationData:"Donation Data",donationDescription:"Short description on the page",generateAndSignPaymentLink:"Generate and Sign Payment Link",donationDescriptionHelpText:"This message will be shown to your donators when they will donate",directLinkPaymentHelpText:"Copy the following link and paste it into your website or send to your customer directly using messengers, email, social networks, etc",directLinkDonationHelpText:"Copy the following link and paste it into your profile on social networks or website so your subscribers can donate to you by opening this link",errors:{fillRequiredData:"Fill required data to generate corresponding content"}}}}},ha=()=>va.resources,ba=m.b,ja=m.c,ya=()=>Object(o.useContext)(ra);var ga=a(154),Oa=a.n(ga),wa=a(558),ka=a(587),xa={defaultNetworkName:"mainnet",paymentAppBaseUrl:"https://payment.tezospayments.com"};const fa=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e.reduce(((e,t,a)=>"".concat(e,"\n\t").concat(a+1,". ").concat(t,";")),t)};class Sa extends Error{constructor(e){super(e),this.name=this.constructor.name}}class Aa extends Sa{constructor(e){super(V.isReadonlyArray(e)?Aa.getMessage(e):e)}static getMessage(e){return fa(e,"options are invalid, see details below:")}}class _a extends Sa{}class Ca extends Sa{constructor(e){super(V.isReadonlyArray(e)?Ca.getMessage(e):e)}static getMessage(e){return fa(e,"payment is invalid, see details below:")}}class Na extends Sa{}class Pa extends Sa{}class Ta extends Sa{}var za=Object.freeze({__proto__:null,TezosPaymentsError:Sa,InvalidTezosPaymentsOptionsError:Aa,InvalidPaymentCreateParametersError:_a,InvalidPaymentError:Ca,UnsupportedPaymentUrlTypeError:Na,PaymentUrlError:Pa,DonationUrlError:Ta});class Da{constructor(e){this.urlType=e}}class Ua extends Da{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ua.baseUrl;super(Ze.Base64),Oa()(this,"paymentSerializer",new Fe),Oa()(this,"donationSerializer",new Ve),this.baseUrl=e}createPaymentUrl(e,t){return e.type===ne.Payment?this.createPaymentUrlInternal(e,t):this.createDonationUrlInternal(e,t)}createPaymentUrlInternal(e,t){const a=this.paymentSerializer.serialize(e);if(!a)throw new Pa("It's impossible to serialize the payment");try{return this.createUrl(!0,e.targetAddress,a,t)}catch(s){throw new Pa("It's impossible to create an URL for the payment")}}createDonationUrlInternal(e,t){const a=this.donationSerializer.serialize(e);if(!a&&""!==a)throw new Ta("It's impossible to serialize the donation");try{return this.createUrl(!1,e.targetAddress,a,t)}catch(s){throw new Ta("It's impossible to create an URL for the donation")}}createUrl(e,t,a,s){const n=new ke.URL("".concat(t,"/").concat(e?"payment":"donation"),this.baseUrl);var i;return""!==a&&(n.hash=(i=this.urlType,(Ye.get(i)||"")+a)),s.name!==xa.defaultNetworkName&&n.searchParams.append("network",s.name),n.href}}Oa()(Ua,"baseUrl",xa.paymentAppBaseUrl);var Ia,Ka=Object.freeze({__proto__:null,PaymentUrlFactory:Da,Base64PaymentUrlFactory:Ua});class Ea{constructor(e){this.signingType=e}}!function(e){e[e.ApiSecretKey=0]="ApiSecretKey",e[e.Wallet=1]="Wallet",e[e.Custom=2]="Custom"}(Ia||(Ia={}));class La extends Ea{constructor(e){super(Ia.ApiSecretKey),Oa()(this,"paymentSignPayloadEncoder",new st),this.apiSecretKey=e,this.inMemorySigner=new wa.a(this.apiSecretKey)}async sign(e){var t;const a=this.paymentSignPayloadEncoder.encode(e),s=this.inMemorySigner.sign(a.contractSignPayload),n=a.clientSignPayload?[s,this.inMemorySigner.sign(a.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:await this.inMemorySigner.publicKey(),contract:i[0].prefixSig,client:null===(t=i[1])||void 0===t?void 0:t.prefixSig}}}class Fa extends Ea{constructor(e){super(Ia.Wallet),Oa()(this,"paymentSignPayloadEncoder",new st),this.walletSigning=e}async sign(e){const t=this.paymentSignPayloadEncoder.encode(e),a=t.contractSignPayload.substring(2),s=this.walletSigning(a),n=t.clientSignPayload?[s,this.walletSigning(t.clientSignPayload)]:[s],i=await Promise.all(n);return{signingPublicKey:"",contract:i[0],client:i[1]}}}class Ba extends Ea{constructor(e){super(Ia.Custom),this.customSigning=e}sign(e){throw new Error("Method not implemented.")}}var Ma=Object.freeze({__proto__:null,TezosPaymentsSigner:Ea,ApiSecretKeySigner:La,WalletSigner:Fa,CustomSigner:Ba});class Va{constructor(e){Oa()(this,"paymentValidator",new Te),Oa()(this,"paymentUrlFactories",new Map);const t=this.validateOptions(e);if(t)throw new Aa(t);this.serviceContractAddress=e.serviceContractAddress,this.defaultPaymentParameters=e.defaultPaymentParameters?{network:e.defaultPaymentParameters.network||Va.defaultPaymentParameters.network,urlType:e.defaultPaymentParameters.urlType||Va.defaultPaymentParameters.urlType}:Va.defaultPaymentParameters,this.signer=this.createSigner(e.signing),this.getPaymentUrlFactory(this.defaultPaymentParameters.urlType)}async createPayment(e){if(!e)throw new _a(e);let t;if(e.urlType&&(t=this.validateDefaultPaymentParameters(e),t))throw new Ca(t);const a=this.createPaymentByCreateParameters(e);if(t=this.paymentValidator.validate(a,!0),t)throw new Ca(t);const s=await this.getSignedPayment(a);if(t=this.paymentValidator.validate(s,!0),t)throw new Ca(t);const n=await this.getPaymentUrl(s,e.urlType);return this.applyPaymentUrl(s,n)}getPaymentUrl(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.defaultPaymentParameters.urlType;return this.getPaymentUrlFactory(t).createPaymentUrl(e,this.defaultPaymentParameters.network)}applyPaymentUrl(e,t){return e.url=t,e}getPaymentUrlFactory(e){let t=this.paymentUrlFactories.get(e);return t||(t=this.createPaymentUrlFactory(e),this.paymentUrlFactories.set(e,t)),t}async getSignedPayment(e){return e.signature=await this.signer.sign(e),e}createSigner(e){return"apiSecretKey"in e?new La(e.apiSecretKey):"walletSigning"in e?new Fa(e.walletSigning):new Ba(e)}createPaymentUrlFactory(e){switch(e){case Ze.Base64:return new Ua;default:throw new Na("This payment url type is not supported: ".concat(e))}}createPaymentByCreateParameters(e){const t={type:ne.Payment,id:e.id||Object(ka.a)(),targetAddress:this.serviceContractAddress,amount:new r.a(e.amount),data:e.data,created:e.created?new Date(e.created):new Date};return e.asset&&(t.asset=e.asset),e.expired&&(t.expired=new Date(e.expired)),e.successUrl&&(t.successUrl=new ke.URL(e.successUrl)),e.cancelUrl&&(t.cancelUrl=new ke.URL(e.cancelUrl)),t}validateOptions(e){return[this.validateServiceContractAddress(e.serviceContractAddress),this.validateSigningOptions(e.signing),this.validateDefaultPaymentParameters(e.defaultPaymentParameters)].reduce(((e,t)=>t?(e||[]).concat(t):e),void 0)}validateServiceContractAddress(e){return e&&"string"===typeof e?e.length!==ge.addressLength?[Va.optionsValidationErrors.serviceContractAddressHasInvalidLength]:ge.contractAddressPrefixes.some((t=>e.startsWith(t)))?void 0:[Va.optionsValidationErrors.serviceContractAddressIsNotContractAddress]:[Va.optionsValidationErrors.invalidServiceContractAddressType]}validateSigningOptions(e){if("object"!==typeof e)return[Va.optionsValidationErrors.invalidSigningOption];if("function"!==typeof e){if(!("apiSecretKey"in e)&&!("walletSigning"in e))return[Va.optionsValidationErrors.invalidSigningOption];if("apiSecretKey"in e){if("string"!==typeof e.apiSecretKey)return[Va.optionsValidationErrors.invalidApiSecretKeyType];if(!e.apiSecretKey)return[Va.optionsValidationErrors.emptyApiSecretKey]}return"walletSigning"in e&&"function"!==typeof e.walletSigning?[Va.optionsValidationErrors.invalidWalletSigningOptionType]:void 0}}validateDefaultPaymentParameters(e){if(void 0!==e){if("object"!==typeof e)return[Va.optionsValidationErrors.invalidDefaultPaymentParameters];if("network"in e){if("object"!==typeof e.network)return[Va.optionsValidationErrors.invalidNetwork];if(void 0===e.network.name||""===e.network.name)return[Va.optionsValidationErrors.emptyNetworkName];if("string"!==typeof e.network.name||!de.test(e.network.name))return[Va.optionsValidationErrors.invalidNetworkName];if(e.network.id&&("string"!==typeof e.network.id||!le.test(e.network.id)))return[Va.optionsValidationErrors.invalidNetworkId]}return"urlType"in e&&e.urlType!==Ze.Base64?[Va.optionsValidationErrors.invalidUrlType]:void 0}}}Oa()(Va,"defaultPaymentParameters",{network:ce.granadanet,urlType:Ze.Base64}),Oa()(Va,"optionsValidationErrors",{invalidServiceContractAddressType:"Type of the serviceContractAddress option is invalid",serviceContractAddressHasInvalidLength:"The serviceContractAddress option has an invalid address",serviceContractAddressIsNotContractAddress:"The serviceContractAddress option isn't a contract address",invalidSigningOption:"The signing option is invalid",invalidApiSecretKeyType:"The API secret key has an invalid type, it should be a string",emptyApiSecretKey:"The API secret key is empty",invalidWalletSigningOptionType:"The WalletSigning option has an invalid type, it should be a function",invalidDefaultPaymentParameters:"The default payment parameters are invalid",emptyNetworkName:"The network name is empty",invalidNetwork:"The network is invalid",invalidNetworkName:"The network name is invalid",invalidNetworkId:"The network id is invalid",invalidUrlType:"The url type is invalid"});const Ra={constants:xa,errors:za,paymentUrlFactories:Ka,signers:Ma},Ha=new Map,Wa=e=>{var t;const a=ya(),s=null===(t=ja(wt))||void 0===t?void 0:t.network;if(!e||!s)return null;let n=Ha.get(e);return n||(n=((e,t,a)=>new Va({serviceContractAddress:e,signing:{walletSigning:e=>a.client.requestSignPayload({signingType:v.C.MICHELINE,payload:e}).then((e=>e.signature))},defaultPaymentParameters:{network:t}}))(e,s,a.tezosWallet),Ha.set(e,n)),n},Za={ed25519:new nt,secp256k1:new it("secp256k1"),p256:new it("p256")},Ya=e=>{switch(e){case Oe.Ed25519:return Za.ed25519.generate().encoded;case Oe.Secp256k1:return Za.secp256k1.generate().encoded;case Oe.P256:return Za.p256.generate().encoded;default:throw new Error("Unknown algorithm type")}},qa=()=>{const[e,t]=Object(o.useState)(Za.ed25519.isInitialized);return Object(o.useEffect)((()=>{let a=!1;return e||Za.ed25519.initialize().then((()=>!a&&t(!0))),()=>{a=!0}}),[e]),!!e&&Ya};var Ga=a(3);const Ja=bt.routers.connect,Qa=e=>{let{children:t,isConnected:a,connectPath:s=Ja,...n}=e;return Object(Ga.jsx)(p.b,{...n,children:e=>a?t:Object(Ga.jsx)(p.a,{to:{pathname:s,state:{from:e.location}}})})},Xa=e=>{const t=ja((e=>e.accountsState.currentAccount));return Object(Ga.jsx)(Qa,{...e,isConnected:!!t})};var $a=a(913),es=a(114),ts=a(179);a(763);const as=e=>{var t,a;const s=Object(O.a)("token-list-item__value",{"token-list-item__value_positive":e.highlightSign&&e.value&&!e.value.isZero()&&e.value.isPositive()},{"token-list-item__value_negative":e.highlightSign&&e.value&&!e.value.isZero()&&e.value.isNegative()}),n=(null===(t=e.value)||void 0===t?void 0:t.isNegative())?"-":e.highlightSign&&(null===(a=e.value)||void 0===a?void 0:a.isPositive())?"+":"",i=e.value&&e.value.abs(),[r,c]=void 0!==i&&null!==i?(e=>{const t=e.toFormat(6,{groupSeparator:"",decimalSeparator:"."}),a=e.toString();return[a.substring(0,t.length),a]})(i):[null,null],o=null!==r&&null!==c&&(r===c||c.substr(r.length).split("").every((e=>"0"===e))),l=r&&Object(Ga.jsx)("span",{className:s,children:"".concat(n).concat(r).concat(o?"":"...")});return Object(Ga.jsxs)("li",{className:Object(O.a)("token-list-item",e.className),children:[Object(Ga.jsx)("img",{className:"token-list-item__icon",src:e.iconSrc,alt:e.name}),Object(Ga.jsxs)("div",{children:[Object(Ga.jsxs)("div",{className:"token-list-item__name-container",children:[Object(Ga.jsx)("span",{className:"token-list-item__ticker",children:e.ticker}),Object(Ga.jsx)("span",{className:"token-list-item__name",children:e.name}),e.handleDelete&&Object(Ga.jsx)(es.a,{className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Ga.jsx)($a.a,{}),onClick:()=>{var t;return null===(t=e.handleDelete)||void 0===t?void 0:t.call(e,e.contractAddress)}})]}),o||void 0===i||null===i?l:Object(Ga.jsx)(ts.a,{title:c,children:l})]})]})};a(832);const ss=e=>Object(Ga.jsx)("ul",{className:"token-list",children:e.children});ss.Item=as;var ns=a(590);a(833);const is=e=>{const t=ya(),a=ha().common,s=Object(o.useCallback)((()=>{navigator.clipboard.writeText(e.hash)}),[e.hash]);return Object(Ga.jsxs)("div",{className:"explorer-link__container",children:[Object(Ga.jsx)("a",{href:t.tezosExplorer.getEntityUrl(e.hash),target:"_blank",rel:"noreferrer",className:e.className,children:e.children}),e.showCopyButton&&Object(Ga.jsx)(ns.a,{className:"explorer-link__copy-icon",title:a.copy,onClick:s})]})},rs=l.a.memo(is),cs=e=>Object(Ga.jsx)("a",{...e,target:"_blank",rel:"noopener noreferrer",children:e.children});var os=a(905);a(834);const ls=()=>{const e=ha().views.services,t=Object(p.g)(),a=Object(o.useCallback)((()=>{t.push(bt.routers.createService)}),[t]);return Object(Ga.jsx)("div",{className:"no-services-created",children:Object(Ga.jsxs)("div",{children:[Object(Ga.jsx)("p",{children:e.youDoNotHaveAnyServicesYet}),Object(Ga.jsx)("p",{children:e.createYourFirstService}),Object(Ga.jsx)(es.a,{type:"primary",onClick:a,children:e.editing.createService})]})})},ds=l.a.memo(ls),us=e=>{const t=Object(O.a)(e.className,"view__title");return l.a.createElement(e.as,{className:t},e.children)};us.defaultProps={as:"h1"};a(835);const ms=e=>{var t;t=e.title?"".concat(e.title," | ").concat(bt.app.title):bt.app.title,Object(o.useEffect)((()=>{document.title=t}),[t]);const a=Object(O.a)("view",e.className);return l.a.createElement(e.as,{className:a},e.children)};ms.defaultProps={as:"main"},ms.Title=us;var ps=a(892);const vs=()=>{const e={data:[{month:"May",operationCount:900},{month:"June",operationCount:1600},{month:"July",operationCount:600},{month:"August",operationCount:2200},{month:"September",operationCount:950},{month:"October",operationCount:1100}],xField:"month",yField:"operationCount",height:400,meta:{operationCount:{alias:"Operation count"}}};return ja(St).initialized?Object(Ga.jsx)(ps.a,{...e}):Object(Ga.jsx)(ca.a,{active:!0,paragraph:{rows:12}})},hs=l.a.memo(vs);var bs=a(894);const js=()=>{const e={data:[{quarter:"Q1 2020",sum:24756},{quarter:"Q2 2020",sum:22178},{quarter:"Q3 2020",sum:13613},{quarter:"Q4 2020",sum:29436},{quarter:"Q1 2021",sum:25679},{quarter:"Q2 2021",sum:26483},{quarter:"Q3 2021",sum:41835},{quarter:"Q4 2021",sum:32412}],xField:"quarter",yField:"sum",height:400,smooth:!0,meta:{sum:{alias:"Sum"}}};return ja(St).initialized?Object(Ga.jsx)(bs.a,{...e}):Object(Ga.jsx)(ca.a,{active:!0,paragraph:{rows:12}})},ys=l.a.memo(js),gs=e=>e.balancesState,Os=()=>{const e=ja(_t),t=ja(At),a=ja(St),s=ja(gs);if(!a.initialized||!s.initialized)return Object(Ga.jsx)(ca.a,{active:!0});const n=[];return e&&n.push(Object(Ga.jsx)(ss.Item,{contractAddress:"",ticker:ue,name:me,decimals:pe,value:s.tezos,iconSrc:ve},ue)),t.forEach((e=>{e.metadata&&n.push(Object(Ga.jsx)(ss.Item,{contractAddress:"",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:s.tokens[e.contractAddress]||Z.zeroBigNumber,iconSrc:e.metadata.thumbnailUri},e.metadata.symbol))})),Object(Ga.jsx)(ss,{children:n})},ws=l.a.memo(Os),ks=()=>{const e=ja(_t),t=ja(St),a=ja(At);if(!t.initialized)return Object(Ga.jsx)(ca.a,{active:!0});const s=[];return e&&s.push(Object(Ga.jsx)(ss.Item,{contractAddress:"",ticker:ue,name:me,decimals:pe,value:new r.a(52.4),iconSrc:ve,highlightSign:!0},ue)),a.forEach((e=>{e.metadata&&s.push(Object(Ga.jsx)(ss.Item,{contractAddress:e.contractAddress,ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:new r.a(462518),iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ga.jsx)(ss,{children:s})},xs=l.a.memo(ks),fs=()=>{const e=ja(_t),t=ja(St),a=ja(At);if(!t.initialized)return Object(Ga.jsx)(ca.a,{active:!0});const s=[];return e&&s.push(Object(Ga.jsx)(ss.Item,{contractAddress:"",ticker:ue,name:me,decimals:pe,value:new r.a(-52.4),iconSrc:ve,highlightSign:!0},ue)),a.forEach((e=>{e.metadata&&s.push(Object(Ga.jsx)(ss.Item,{contractAddress:e.contractAddress,ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,value:new r.a(-462518.0000006),iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ga.jsx)(ss,{children:s})},Ss=l.a.memo(fs);a(842);const As=()=>{const e=ha(),t=e.common,a=e.views.overview,s=ja(St);return Object(Ga.jsxs)(ms,{title:a.title,className:"overview",children:[Object(Ga.jsx)(ms.Title,{children:a.title}),s.initialized&&!s.services.length?Object(Ga.jsx)(ds,{}):Object(Ga.jsxs)("div",{className:"cards-container",children:[Object(Ga.jsx)(os.a,{className:"cards-container__small-card",size:"small",title:a.balances.title,children:Object(Ga.jsx)(ws,{})}),Object(Ga.jsx)(os.a,{className:"cards-container__small-card",size:"small",title:"".concat(a.incoming.title," (").concat(t.comingSoon,")"),extra:Object(Ga.jsx)("a",{href:"#void",children:"All Month"}),children:Object(Ga.jsx)(xs,{})}),Object(Ga.jsx)(os.a,{className:"cards-container__small-card",size:"small",title:"".concat(a.outgoing.title," (").concat(t.comingSoon,")"),extra:Object(Ga.jsx)("a",{href:"#void",children:"All Month"}),children:Object(Ga.jsx)(Ss,{})}),Object(Ga.jsx)(os.a,{className:"cards-container__large-card",title:"".concat(a.operationCount.title," (").concat(t.comingSoon,")"),extra:Object(Ga.jsx)("a",{href:"#void",children:"6 Months"}),children:Object(Ga.jsx)(hs,{})}),Object(Ga.jsx)(os.a,{className:"cards-container__large-card",title:"".concat(a.volume.title," (").concat(t.comingSoon,")"),extra:Object(Ga.jsx)("a",{href:"#void",children:"Last 2 Years"}),children:Object(Ga.jsx)(ys,{})})]})]})},_s=l.a.memo(As),Cs=Object(gt.a)((e=>e.operationsState),(e=>[...e.operations].sort(((e,t)=>+t.date-+e.date))));var Ns=a(75),Ps=a(911),Ts=a(912),zs=a(914),Ds=a(363);a(843);const Us=e=>{const t=ha().views.operations.operationList,a=e.direction===Xe.Incoming,s=Object(O.a)(e.className,"operation-icon",{"operation-icon_income":a},{"operation-icon_expense":!a},{"operation-icon_cancelled":e.status===$e.Cancelled});return Object(Ga.jsxs)("div",{className:s,children:[a?Object(Ga.jsx)(Ps.a,{title:t.income}):Object(Ga.jsx)(Ts.a,{title:t.expense}),e.status===$e.Pending&&Object(Ga.jsx)(zs.a,{className:"operation-icon__status operation-icon__status_pending",title:t.pending}),e.status===$e.Cancelled&&Object(Ga.jsx)(Ds.a,{className:"operation-icon__status operation-icon__status_cancelled",title:t.cancelled})]})},Is=l.a.memo(Us);a(844);const Ks=e=>Object(Ga.jsx)("table",{className:"operation-list",children:e.children}),Es=e=>"".concat(e.substr(0,9),"...").concat(e.substr(e.length-6,6));Ks.Item=e=>{const t=ha().views.operations.operationList,a=e.direction===Xe.Incoming,s=a?e.accountAddress:e.serviceAddress,n=a?e.serviceAddress:e.accountAddress,i=Es(e.hash),r=e.type===Qe.Donation,c="".concat(r?t.donationData:t.paymentId," ").concat(e.data),o=a?"+":"\u2212",l=Object(O.a)("operation-list-item__amount",{"operation-list-item__amount_income":a},{"operation-list-item__amount_expense":!a},{"operation-list-item__amount_cancelled":e.status===$e.Cancelled}),d="".concat(bt.routers.services,"/").concat(e.serviceAddress);return Object(Ga.jsxs)("tbody",{className:"operation-list-group",children:[Object(Ga.jsxs)("tr",{className:"operation-list-row operation-list-row_general",children:[Object(Ga.jsx)("td",{className:"operation-list-item__icon",children:Object(Ga.jsx)(Is,{direction:e.direction,status:e.status})}),Object(Ga.jsxs)("td",{className:"operation-list-item__main-info",children:[Object(Ga.jsx)("span",{className:"operation-list-item__date",children:e.date.toLocaleString()}),Object(Ga.jsx)(is,{hash:e.hash,className:"operation-list-item__operation-hash",children:i})]}),Object(Ga.jsxs)("td",{className:"operation-list-item__transfer-info",children:[s===e.serviceAddress?Object(Ga.jsx)(Ns.a,{to:d,children:e.serviceName}):Object(Ga.jsx)(is,{hash:s,children:Es(s)}),"\xa0\u2192\xa0",n===e.serviceAddress?Object(Ga.jsx)(Ns.a,{to:d,children:e.serviceName}):Object(Ga.jsx)(is,{hash:n,children:Es(n)})]}),Object(Ga.jsxs)("td",{className:l,children:[o,e.value.toFormat()," ",e.ticker]})]}),Object(Ga.jsxs)("tr",{className:"operation-list-row operation-list-row_order-data",children:[Object(Ga.jsx)("td",{}),Object(Ga.jsx)("td",{className:"operation-list-item__data",colSpan:3,children:c})]})]})};a(845);const Ls=()=>{const e=ha().views.operations.operationList;return Object(Ga.jsx)("div",{className:"no-operations-performed-container",children:e.noOperationsPerformedYet})},Fs=l.a.memo(Ls),Bs=e=>{var t;switch(e.type){case Qe.Payment:return e.paymentId;case Qe.Donation:return null===(t=e.payload)||void 0===t?void 0:t.valueString;default:return}},Ms=()=>{const e=ha().views.operations,t=ja(Cs),a=ja(St),s=ja(ft),n=t.map((e=>{var t,n,i;const r=e.asset&&(null===(t=s.get(e.asset))||void 0===t||null===(n=t.metadata)||void 0===n?void 0:n.symbol);return{date:e.date,hash:e.hash,data:Bs(e)||"",accountAddress:e.sender,serviceAddress:e.target,serviceName:(null===(i=a.services.filter((t=>t.contractAddress===e.target))[0])||void 0===i?void 0:i.name)||"",ticker:r||"XTZ",value:e.amount,status:e.status,type:e.type,direction:Xe.Incoming}}));return Object(Ga.jsxs)(ms,{title:e.title,children:[Object(Ga.jsx)(ms.Title,{children:e.title}),a.initialized?a.services.length?t.length?Object(Ga.jsx)(Ks,{children:n.map((e=>Object(Ga.jsx)(Ks.Item,{...e},e.hash)))}):Object(Ga.jsx)(Fs,{}):Object(Ga.jsx)(ls,{}):Object(Ga.jsx)(ca.a,{active:!0})]})},Vs=l.a.memo(Ms);var Rs=a(586);a(846);const Hs=()=>{const e=ha(),t=e.common,a=e.views.services,s=Object(p.g)(),n=Object(o.useCallback)((()=>{s.push(bt.routers.createService)}),[s]);return Object(Ga.jsx)(os.a,{bodyStyle:{padding:0},className:"new-service-card-container",onClick:n,children:Object(Ga.jsx)("div",{className:"new-service-card",title:a.createNewService,children:Object(Ga.jsxs)("div",{className:"new-service-card__info",children:[Object(Ga.jsx)(Rs.a,{className:"new-service-card__icon"}),Object(Ga.jsx)("span",{children:t.new})]})})})},Ws=l.a.memo(Hs);var Zs=a(915),Ys=a(364),qs=a(916),Gs=a(365),Js=a(908);a(847);const Qs=e=>{const t=ha().views.services;return e.isUpdating?Object(Ga.jsx)(Js.a,{icon:Object(Ga.jsx)(Zs.a,{spin:!0}),className:"tag-active tag-active_updating",children:t.status.updating}):e.deleted?Object(Ga.jsx)(Js.a,{icon:Object(Ga.jsx)(Ys.a,{}),className:"tag-active tag-active_deleted",children:t.status.deleted}):e.paused?Object(Ga.jsx)(Js.a,{icon:Object(Ga.jsx)(qs.a,{}),className:"tag-active tag-active_paused",children:t.status.paused}):Object(Ga.jsx)(Js.a,{icon:Object(Ga.jsx)(Gs.a,{}),className:"tag-active tag-active_active",children:t.status.active})},Xs=l.a.memo(Qs);a(848);const $s=e=>Object(Ga.jsx)(Js.a,{className:"tag-custom",children:e.text}),en=l.a.memo($s);a(849);const tn=e=>{const t=Object(p.g)(),a=ha().common,s=Object(o.useCallback)((a=>{const s=a.target.tagName.toLowerCase();"svg"!==s&&"a"!==s&&"path"!==s&&t.push("".concat(bt.routers.services,"/").concat(e.service.contractAddress))}),[t,e.service.contractAddress]),n=Object(O.a)("service-card__logo",e.service.iconUrl?"service-card__logo_image":"service-card__logo_text");return Object(Ga.jsx)(os.a,{size:"small",bodyStyle:{padding:0},className:"service-card-container",onClick:s,children:Object(Ga.jsxs)("div",{className:"service-card",children:[Object(Ga.jsxs)("div",{className:"service-card__info-container",children:[Object(Ga.jsxs)("div",{className:"service-card__main-info",children:[e.service.iconUrl?Object(Ga.jsx)("img",{className:n,alt:"logo",src:e.service.iconUrl}):Object(Ga.jsx)("span",{className:n,children:G.getAvatarText(e.service.name)}),Object(Ga.jsxs)("div",{className:"service-card__name-container",children:[Object(Ga.jsx)("span",{className:"service-card__name",title:e.service.name,children:e.service.name}),Object(Ga.jsx)("div",{className:"service-card__tags-container",children:Object(Ga.jsx)(Xs,{paused:e.service.paused,deleted:e.service.deleted,isUpdating:e.isUpdating})})]})]}),Object(Ga.jsx)("div",{className:"service-card__link-container",children:Object(Ga.jsx)(rs,{hash:e.service.contractAddress,className:"service-card__link",showCopyButton:!0,children:e.service.contractAddress})})]}),Object(Ga.jsx)("div",{className:"service-card__button-container",children:Object(Ga.jsx)(es.a,{className:"service-card__button",type:"primary",children:a.open})})]})})},an=l.a.memo(tn);a(850);const sn=()=>{const e=ha().views.services,t=ja(St),a=ja(Nt),s=ja(Ct).map((e=>Object(Ga.jsx)(an,{service:e,isUpdating:a.has(e.contractAddress)},e.contractAddress)));return Object(Ga.jsxs)(ms,{title:e.title,children:[Object(Ga.jsx)(ms.Title,{children:e.title}),t.initialized?t.services.length?Object(Ga.jsxs)("div",{className:"services-container",children:[s,Object(Ga.jsx)(Ws,{})]}):Object(Ga.jsx)(ds,{}):Object(Ga.jsx)(ca.a,{active:!0})]})},nn=l.a.memo(sn);a(851);const rn=e=>{let{service:t,readOnly:a}=e;const s=ha().views.services,n=Object(p.g)(),i=Object(o.useCallback)((()=>{n.push(bt.routers.acceptServicePayments(t.contractAddress))}),[n,t.contractAddress]);return Object(Ga.jsxs)("div",{className:"service-actions-zone",children:[Object(Ga.jsx)("span",{className:"service-actions-zone__header",children:"Actions"}),Object(Ga.jsxs)("div",{className:"service-actions-zone__button-container",children:[Object(Ga.jsx)("p",{children:s.acceptPaymentsDescription}),Object(Ga.jsx)(es.a,{disabled:a,onClick:i,className:"service-button",type:"primary",children:s.acceptPayments})]})]})},cn=l.a.memo(rn);var on=a(902);a(852);const ln=e=>{const t=ha().views.services.dangerZone,a=ba(),s=Object(o.useCallback)((()=>{a(Zt({service:e.service,paused:!e.service.paused}))}),[a,e.service]),n=Object(o.useCallback)((()=>{a(Yt({service:e.service,deleted:!e.service.deleted}))}),[a,e.service]),i=Object(o.useCallback)(((e,t,a)=>{on.a.confirm({title:"Confirm Operation",onOk:a,content:Object(Ga.jsx)("p",{children:e}),okText:"Yes",okType:t?"danger":"primary",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((()=>{const a=e.service.paused?t.unPauseServiceConfirmation:t.pauseServiceConfirmation;i(a,!1,s)}),[i,t.pauseServiceConfirmation,t.unPauseServiceConfirmation,s,e.service.paused]),c=Object(o.useCallback)((()=>{const a=e.service.deleted?t.unDeleteServiceConfirmation:t.deleteServiceConfirmation;i(a,!e.service.deleted,n)}),[i,t.deleteServiceConfirmation,t.unDeleteServiceConfirmation,n,e.service.deleted]);return Object(Ga.jsx)(Ga.Fragment,{children:Object(Ga.jsxs)("div",{className:"service-danger-zone",children:[Object(Ga.jsx)("span",{className:"service-danger-zone__header",children:t.title}),Object(Ga.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Ga.jsx)("p",{children:e.service.paused?t.unPauseServiceDescription:t.pauseServiceDescription}),Object(Ga.jsx)(es.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:r,children:e.service.paused?t.unPauseService:t.pauseService})]}),Object(Ga.jsx)("hr",{className:"service-danger-zone__divider"}),Object(Ga.jsxs)("div",{className:"service-danger-zone__button-container",children:[Object(Ga.jsx)("p",{children:e.service.deleted?t.unDeleteServiceDescription:t.deleteServiceDescription}),Object(Ga.jsx)(es.a,{disabled:e.readOnly,className:"service-button",type:"primary",danger:!0,onClick:c,children:e.service.deleted?t.unDeleteService:t.deleteService})]})]})})},dn=l.a.memo(ln);var un=a(903),mn=a(904),pn=a(896),vn=a(897),hn=a(909),bn=a(574);a(853);const jn=un.a.Search,yn=Object.values(Oe).map((e=>({label:e,value:e}))),gn=e=>{var t;const a=qa(),s=ha(),n=s.common,i=s.views.services,[r,c]=Object(o.useState)(),l=Object(o.useRef)(null),d=Object(o.useRef)(null),u=Object(m.b)(),[p,v]=Object(o.useState)((null===(t=yn[0])||void 0===t?void 0:t.value)||Oe.Ed25519),h=Object(o.useCallback)((e=>{v(e.target.value)}),[]),[b,j]=Object(o.useState)(""),y=Object(o.useCallback)((e=>{j(e.target.value)}),[]);Object(o.useEffect)((()=>{a&&c(a(p))}),[p,a]);const g=Object(o.useCallback)((e=>{const t=e.current;t&&(t.select(),navigator.clipboard.writeText(t.state.value))}),[]),O=Object(o.useCallback)((()=>{a&&c(a(p))}),[p,a]),w=Object(o.useCallback)((()=>{(null===r||void 0===r?void 0:r.publicKey)&&u(qt({service:e.service,signingKey:{name:b,publicKey:r.publicKey}})),e.onCancel()}),[u,b,e,r]),k=!r,x=Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.name,":"]}),Object(Ga.jsx)(un.a,{disabled:k,autoFocus:!0,value:b,onChange:y}),Object(Ga.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.algorithm,":"]}),Object(Ga.jsxs)("div",{className:"api-key-modal__algorithm-container",children:[Object(Ga.jsx)(mn.a.Group,{disabled:k,options:yn,value:p,onChange:h}),Object(Ga.jsx)(es.a,{disabled:k,onClick:O,children:i.devZone.generateKeys})]}),Object(Ga.jsx)(pn.a,{}),Object(Ga.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.publicKey,":"]}),Object(Ga.jsx)(jn,{ref:l,disabled:k,readOnly:!0,value:null===r||void 0===r?void 0:r.publicKey,enterButton:Object(Ga.jsx)(es.a,{icon:Object(Ga.jsx)(ns.a,{})}),onSearch:()=>g(l)}),Object(Ga.jsxs)("span",{className:"api-key-modal__label",children:[i.devZone.secretKey,":"]}),Object(Ga.jsx)(jn,{ref:d,disabled:k,readOnly:!0,value:null===r||void 0===r?void 0:r.privateKey,enterButton:Object(Ga.jsx)(es.a,{icon:Object(Ga.jsx)(ns.a,{})}),onSearch:()=>g(d)}),Object(Ga.jsx)(vn.a.Text,{mark:!0,children:i.devZone.saveSecretKeyWarning})]});return Object(Ga.jsx)(on.a,{className:"api-key-modal",title:i.devZone.addKey,centered:!0,destroyOnClose:!0,visible:e.visible,onCancel:e.onCancel,footer:Object(Ga.jsxs)("div",{className:"api-key-modal__footer",children:[Object(Ga.jsx)(es.a,{onClick:e.onCancel,children:n.cancel},"back"),Object(Ga.jsx)(hn.a,{disabled:!b,title:i.devZone.saveSecretKeyConfirm,placement:"topRight",onConfirm:w,okText:n.yes,cancelText:n.no,children:Object(Ga.jsx)(es.a,{className:"api-key-modal__ok-button",type:"primary",disabled:!b,children:i.devZone.saveKeys},"submit")})]}),children:r?x:Object(Ga.jsx)(bn.a,{size:"large",children:x})})},On=l.a.memo(gn);var wn=a(899);a(860);const kn=e=>{const t=ha().views.services,a=ja(wt),s=Object(m.b)(),n=Object(o.useMemo)((()=>{let t=[...e.service.signingKeys.values()];return a&&(t=t.filter((e=>e.publicKey!==a.publicKey))),t}),[a,e.service.signingKeys]),i=Object(o.useCallback)(((e,t)=>{on.a.confirm({title:"Confirm Operation",onOk:t,content:Object(Ga.jsx)("p",{children:e}),okText:"Yes",okType:"danger",cancelText:"No",centered:!0,transitionName:"",maskTransitionName:""})}),[]),r=Object(o.useCallback)((a=>{const n=t.devZone.deleteKeyConfirmation+(a.name?": ".concat(a.name):"");i(n,(()=>{s(Gt({service:e.service,publicKey:a.publicKey}))}))}),[i,s,e.service,t.devZone.deleteKeyConfirmation]);return Object(Ga.jsx)(wn.b,{size:"small",bordered:!0,children:n.length?n.map((t=>Object(Ga.jsxs)(wn.b.Item,{className:"api-keys__item",children:[Object(Ga.jsx)("span",{children:t.name}),Object(Ga.jsxs)("div",{children:[Object(Ga.jsx)("span",{className:"api-keys__item-key",children:t.publicKey}),Object(Ga.jsx)(es.a,{disabled:e.readOnly,onClick:()=>r(t),icon:Object(Ga.jsx)($a.a,{}),danger:!0,type:"link"})]})]},t.publicKey))):Object(Ga.jsx)(wn.b.Item,{className:"api-keys__item api-keys__item_empty",children:t.devZone.noApiKeysAddedYet})})},xn=l.a.memo(kn);a(861);const fn=e=>{const t=ha().views.services,[a,s]=Object(o.useState)(!1),n=Object(o.useCallback)((()=>s(!0)),[]),i=Object(o.useCallback)((()=>s(!1)),[]);return Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsxs)("div",{className:"service-dev-zone__button-container",children:[Object(Ga.jsx)("span",{className:"service-dev-zone__header",children:t.devZone.title}),Object(Ga.jsx)(es.a,{disabled:e.readOnly,className:"service-button",type:"default",onClick:n,children:t.devZone.addKey})]}),Object(Ga.jsx)(xn,{service:e.service,readOnly:e.readOnly}),Object(Ga.jsx)(On,{service:e.service,visible:a,onCancel:i})]})},Sn=l.a.memo(fn);var An=a(917);a(862);const _n=e=>{let{service:t,isUpdating:a,readOnly:s}=e;const n=Object(p.g)(),i=ha().views.services,r=Object(O.a)("service__logo",(null===t||void 0===t?void 0:t.iconUrl)?"service__logo_image":"service__logo_text"),c=(null===t||void 0===t?void 0:t.allowedOperationType)===Ge.Payment||(null===t||void 0===t?void 0:t.allowedOperationType)===Ge.All,l=(null===t||void 0===t?void 0:t.allowedOperationType)===Ge.Donation||(null===t||void 0===t?void 0:t.allowedOperationType)===Ge.All,d=Object(o.useCallback)((()=>{n.push("".concat(bt.routers.services,"/").concat(t.contractAddress,"?edit=true"))}),[n,t.contractAddress]);return Object(Ga.jsxs)("div",{className:"service-header",children:[Object(Ga.jsxs)("div",{className:"service-header__logo-container",children:[t.iconUrl?Object(Ga.jsx)("img",{className:r,alt:"logo",src:t.iconUrl}):Object(Ga.jsx)("span",{className:r,children:G.getAvatarText(t.name)}),Object(Ga.jsxs)("div",{className:"service-header__main-info",children:[Object(Ga.jsx)("h1",{children:t.name}),Object(Ga.jsx)(rs,{hash:t.contractAddress,className:"service__link",showCopyButton:!0,children:t.contractAddress}),Object(Ga.jsxs)("div",{className:"service-header__tags-container",children:[Object(Ga.jsx)(Xs,{paused:t.paused,deleted:t.deleted,isUpdating:a}),c&&Object(Ga.jsx)(en,{text:i.operations.paymentsEnabled}),l&&Object(Ga.jsx)(en,{text:i.operations.donationsEnabled})]})]})]}),Object(Ga.jsx)(es.a,{disabled:s,className:"service-button",icon:Object(Ga.jsx)(An.a,{}),type:"primary",onClick:d,children:i.editing.editService})]})},Cn=l.a.memo(_n);var Nn,Pn=a(907),Tn=a(918),zn=a(919),Dn=a(920),Un=a(921),In=a(922),Kn=a(923),En=a(924);function Ln(){return(Ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var s in a)Object.prototype.hasOwnProperty.call(a,s)&&(e[s]=a[s])}return e}).apply(this,arguments)}function Fn(e,t){let{title:a,titleId:s,...n}=e;return o.createElement("svg",Ln({width:"1000px",height:"1000px",viewBox:"0 0 1000 1000",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":s},n),a?o.createElement("title",{id:s},a):null,Nn||(Nn=o.createElement("g",{id:"Artboard",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},o.createElement("circle",{id:"Oval",fill:"currentColor",cx:500,cy:500,r:500}),o.createElement("path",{d:"M226.328419,494.722069 C372.088573,431.216685 469.284839,389.350049 517.917216,369.122161 C656.772535,311.36743 685.625481,301.334815 704.431427,301.003532 C708.567621,300.93067 717.815839,301.955743 723.806446,306.816707 C728.864797,310.92121 730.256552,316.46581 730.922551,320.357329 C731.588551,324.248848 732.417879,333.113828 731.758626,340.040666 C724.234007,419.102486 691.675104,610.964674 675.110982,699.515267 C668.10208,736.984342 654.301336,749.547532 640.940618,750.777006 C611.904684,753.448938 589.856115,731.588035 561.733393,713.153237 C517.726886,684.306416 492.866009,666.349181 450.150074,638.200013 C400.78442,605.66878 432.786119,587.789048 460.919462,558.568563 C468.282091,550.921423 596.21508,434.556479 598.691227,424.000355 C599.00091,422.680135 599.288312,417.758981 596.36474,415.160431 C593.441168,412.561881 589.126229,413.450484 586.012448,414.157198 C581.598758,415.158943 511.297793,461.625274 375.109553,553.556189 C355.154858,567.258623 337.080515,573.934908 320.886524,573.585046 C303.033948,573.199351 268.692754,563.490928 243.163606,555.192408 C211.851067,545.013936 186.964484,539.632504 189.131547,522.346309 C190.260287,513.342589 202.659244,504.134509 226.328419,494.722069 Z",id:"Path-3",fill:"#FFFFFF"}))))}const Bn=o.forwardRef(Fn);a.p;const Mn={[Q.Common]:Tn.a,[Q.Email]:zn.a,[Q.Telegram]:Bn,[Q.Facebook]:Dn.a,[Q.Twitter]:Un.a,[Q.Instagram]:In.a,[Q.GitHub]:Kn.a,[Q.Reddit]:En.a};a(863);const Vn=new se,Rn=e=>{const t=Vn.getLinkInfo(e.link);if(!t)return null;const a=Mn[t.icon];return Object(Ga.jsxs)("span",{className:"service-link",children:[Object(Ga.jsx)(a,{className:"service-link__icon"}),Object(Ga.jsx)(cs,{className:"service-link__link",href:t.formattedLink,children:t.displayLink})]})};a(864);const Hn=e=>Object(Ga.jsx)("div",{className:Object(O.a)("service-links",e.className),children:e.links.map((e=>Object(Ga.jsx)(Rn,{link:e},e))).filter(Boolean)});a(865);const Wn=new se,Zn=e=>{const t=Wn.getLinkInfo(e.value,!0),a=Object(o.useCallback)((t=>{e.onChange({value:t.target.value})}),[e]);if(!t)return null;const s=Mn[t.icon];return Object(Ga.jsxs)("div",{className:"service-link-editor",children:[Object(Ga.jsx)(s,{className:"service-link-editor__icon"}),Object(Ga.jsx)(un.a,{readOnly:e.readOnly,className:"service-link-editor__input",value:e.value,onChange:a}),Object(Ga.jsx)(es.a,{disabled:e.readOnly,className:"service-link-editor__delete-button",type:"text",danger:!0,icon:Object(Ga.jsx)($a.a,{}),onClick:e.onDelete})]})};a(866);const Yn=e=>{const t=ha().views.services,a=Object(o.useCallback)(((t,a)=>{const s=[...e.value];s[t]=a.value,e.onChange({value:s})}),[e]),s=Object(o.useCallback)((t=>{const a=[...e.value];a.splice(t,1),e.onChange({value:a})}),[e]),n=Object(o.useCallback)((()=>{const t=[...e.value,""];e.onChange({value:t})}),[e]),i=e.value.map(((t,n)=>Object(Ga.jsx)(Zn,{readOnly:e.readOnly,value:t,onDelete:()=>s(n),onChange:e=>a(n,e)},n)));return Object(Ga.jsxs)("div",{className:"service-links-editor",children:[i,Object(Ga.jsx)(es.a,{disabled:e.readOnly,className:"service-links-editor__button",icon:Object(Ga.jsx)(Rs.a,{}),onClick:n,children:t.editing.addLink})]})};var qn=a(900),Gn=a(906);a(867);const Jn=e=>{const t=ha().views.services,a=ja(ft),s=Object(o.useMemo)((()=>{const t=[];return e.allowedTokens.tez&&t.push(""),e.allowedTokens.assets.forEach((e=>{const s=a.get(e);s&&t.push(s.contractAddress)})),t}),[e.allowedTokens.assets,e.allowedTokens.tez,a]),n=new Map;n.set("",{ticker:ue,address:"",name:me,iconSrc:ve});Array.from(a.values()).forEach((e=>{e.metadata&&n.set(e.contractAddress,{ticker:e.metadata.symbol,address:e.contractAddress,name:e.metadata.name,iconSrc:e.metadata.thumbnailUri})}));const i=Object(o.useCallback)((t=>{e.onChange({tez:t.some((e=>""===e)),assets:t.filter((e=>!!e))})}),[e]),r=Object(o.useCallback)((e=>i([...s,e])),[i,s]),c=Object(o.useCallback)((e=>i(s.filter((t=>t!==e)))),[i,s]),l=s.map((e=>n.get(e))),d=Array.from(n.values()).filter((e=>s.every((t=>t!==e.address)))),u=Object(Ga.jsx)(qn.a,{children:d.map((e=>Object(Ga.jsxs)(qn.a.Item,{className:"token-list-editor-menu-item",onClick:()=>r(e.address),children:[Object(Ga.jsx)("img",{className:"token-list-editor-menu-item__icon",src:e.iconSrc,alt:e.name}),Object(Ga.jsx)("span",{className:"token-list-editor-menu-item__ticker",children:e.ticker}),Object(Ga.jsx)("span",{className:"token-list-editor-menu-item__name",children:e.name})]},e.ticker)))});return Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsx)("ul",{className:"token-list-editor",children:l.map((e=>Object(Ga.jsx)(as,{className:"token-list-editor__item",name:e.name,contractAddress:e.address,ticker:e.ticker,iconSrc:e.iconSrc,handleDelete:c},e.address)))}),d.length>0&&Object(Ga.jsx)(Gn.a,{trigger:["click"],overlay:u,placement:"bottomCenter",children:Object(Ga.jsx)(es.a,{className:"token-list-editor__add-button",icon:Object(Ga.jsx)(Rs.a,{}),children:t.editing.addCurrency})})]})};a(868);const Qn=new se,Xn=e=>{const t=Object(p.g)(),a=ha(),s=a.common,n=a.views.services,i=ja(wt),r=ba(),c=Object(o.useCallback)((()=>{t.push("".concat(bt.routers.services,"/").concat(e.service.contractAddress))}),[t,e.service.contractAddress]),[l,d]=Object(o.useState)(!1),[u,m]=Object(o.useState)(e.service.name),[v,h]=Object(o.useState)(e.service.description),[b,j]=Object(o.useState)(e.service.links),[y,g]=Object(o.useState)(e.service.allowedTokens),O=Object(o.useCallback)((()=>{const e=!!u&&b.every((e=>!!Qn.getLinkInfo(e)))&&(y.tez||y.assets.length>0);d(e)}),[y.assets.length,y.tez,b,u]);Object(o.useEffect)((()=>O()),[O]);const w=Object(o.useCallback)((e=>{m(e.target.value),O()}),[O]),k=Object(o.useCallback)((e=>{h(e.target.value),O()}),[O]),x=Object(o.useCallback)((e=>{j(e.value),O()}),[O]),[f,S]=Object(o.useState)(e.service.allowedOperationType===Ge.All||e.service.allowedOperationType===Ge.Payment),[A,_]=Object(o.useState)(e.service.allowedOperationType===Ge.All||e.service.allowedOperationType===Ge.Donation),C=Object(o.useCallback)((e=>{g(e),O()}),[O]),N=Object(o.useCallback)((e=>{S(e.target.checked),e.target.checked||A||_(!0)}),[A]),P=Object(o.useCallback)((e=>{_(e.target.checked),e.target.checked||f||S(!0)}),[f]),T=Object(o.useCallback)((()=>{const t=f&&A?Ge.All:f?Ge.Payment:Ge.Donation,a=e.isCreateMode&&!!i,s={...e.service,name:u,description:v,allowedOperationType:t,allowedTokens:y,links:b,signingKeys:a?(new Map).set(i.publicKey,{publicKey:i.publicKey}):e.service.signingKeys,network:a?i.network:e.service.network};e.isCreateMode?r(Wt(s)):r(Ht(s)),c()}),[A,f,y,i,v,r,c,b,u,e.isCreateMode,e.service]),z=e.isCreateMode?n.editing.createService:n.editing.updateService;return Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsx)(ms.Title,{children:z}),Object(Ga.jsxs)("div",{className:"service-edit",children:[Object(Ga.jsx)("span",{className:"service-edit__caption",children:n.editing.serviceName}),Object(Ga.jsx)(un.a,{readOnly:e.readOnly,placeholder:n.editing.serviceName,value:u,onChange:w}),Object(Ga.jsx)("span",{className:"service-edit__caption",children:n.editing.description}),Object(Ga.jsx)(un.a.TextArea,{readOnly:e.readOnly,rows:5,placeholder:n.editing.description,value:v,onChange:k}),Object(Ga.jsxs)("div",{className:"service-edit__lists-container",children:[Object(Ga.jsxs)("div",{className:"service-edit__list-container",children:[Object(Ga.jsx)("span",{className:"service-edit__list-header",children:n.allowedCurrencies}),Object(Ga.jsx)(Jn,{allowedTokens:y,onChange:C})]}),Object(Ga.jsxs)("div",{className:"service-edit__list-container",children:[Object(Ga.jsx)("span",{className:"service-edit__list-header",children:n.links}),Object(Ga.jsx)(Yn,{readOnly:e.readOnly,value:b,onChange:x})]})]}),Object(Ga.jsx)("span",{className:"service-edit__caption",children:n.editing.accept}),Object(Ga.jsxs)("div",{className:"service-edit__accept-list",children:[Object(Ga.jsx)(Pn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:f,onChange:N,children:n.editing.acceptPayments}),Object(Ga.jsx)(Pn.a,{disabled:e.readOnly,className:"service-edit__accept-list-item",checked:A,onChange:P,children:n.editing.acceptDonations})]}),Object(Ga.jsxs)("div",{className:"service-edit__buttons-container",children:[Object(Ga.jsx)(es.a,{className:"service-edit__button",onClick:c,children:s.cancel}),Object(Ga.jsx)(es.a,{className:"service-edit__button",onClick:T,disabled:!l||e.readOnly,type:"primary",children:z})]})]})]})},$n=l.a.memo(Xn);a(869);const ei=e=>{let{service:t}=e;const a=ja(ft),s=[];null===t||void 0===t||t.allowedTokens.assets.forEach((e=>{const t=a.get(e);t&&s.push(t)}));const n=[];return(null===t||void 0===t?void 0:t.allowedTokens.tez)&&n.push(Object(Ga.jsx)(ss.Item,{contractAddress:"",className:"service-token-list-item",ticker:ue,name:me,decimals:pe,iconSrc:ve,highlightSign:!0},ue)),s.forEach((e=>{e.metadata&&n.push(Object(Ga.jsx)(ss.Item,{contractAddress:e.contractAddress,className:"service-token-list-item",ticker:e.metadata.symbol,name:e.metadata.name,decimals:e.metadata.decimals,iconSrc:e.metadata.thumbnailUri,highlightSign:!0},e.metadata.symbol))})),Object(Ga.jsx)(ss,{children:n})},ti=l.a.memo(ei);a(870);const ai=e=>{let{service:t}=e;const a=ha().views.services;return Object(Ga.jsxs)("div",{className:"service-view-zone",children:[Object(Ga.jsx)("p",{className:"service-view-zone__description",children:t.description}),Object(Ga.jsxs)("div",{className:"service-view-zone__lists-container",children:[Object(Ga.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Ga.jsx)("span",{className:"service-view-zone__list-header",children:a.allowedCurrencies}),Object(Ga.jsx)(ti,{service:t})]}),Object(Ga.jsxs)("div",{className:"service-view-zone__list-container",children:[Object(Ga.jsx)("span",{className:"service-view-zone__list-header",children:a.links}),Object(Ga.jsx)(Hn,{className:"service-info__links",links:t.links})]})]})]})},si=l.a.memo(ai);a(871);let ni;!function(e){e[e.ViewAndEdit=0]="ViewAndEdit",e[e.Create=1]="Create"}(ni||(ni={}));const ii=e=>{const t=!!new URLSearchParams(Object(p.h)().search).get("edit"),{address:a}=Object(p.i)(),{services:s,initialized:n}=ja(St),i=ja(Nt),r=i.has(a),c=!!i.size,o=e.mode===ni.Create,l=o?{...Je}:s.filter((e=>e.contractAddress===a))[0],d=n&&l?l.name:a,u=Object(O.a)("service-container",t||o?"service-container_edit":"service-container_view");return Object(Ga.jsx)(ms,{title:d,className:u,children:n&&l?t||o?Object(Ga.jsx)($n,{service:l,isCreateMode:o,readOnly:c}):Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsx)(Cn,{service:l,isUpdating:r,readOnly:c}),Object(Ga.jsx)(si,{service:l}),Object(Ga.jsx)(cn,{service:l,readOnly:r||l.deleted}),Object(Ga.jsx)(Sn,{service:l,readOnly:c}),Object(Ga.jsx)(dn,{service:l,readOnly:c})]}):Object(Ga.jsx)(ca.a,{active:!0})})},ri=l.a.memo(ii);var ci=a(925),oi=a(926),li=a(927),di=a(928);a(872);const ui=()=>{const e=ha().views.about;return Object(Ga.jsxs)(ms,{title:e.title,className:"about-view",children:[Object(Ga.jsx)(ms.Title,{className:"about-view__title",children:e.detailedTitle}),Object(Ga.jsxs)("div",{className:"about-view__version-info",children:[Object(Ga.jsx)(cs,{href:bt.app.version.link,children:bt.app.version.name}),"\xa0",e.build,"\xa0",Object(Ga.jsx)(cs,{href:bt.app.buildInfo.link,children:bt.app.buildInfo.commitShortSha})]}),Object(Ga.jsxs)("div",{className:"about-view__links",children:[Object(Ga.jsx)(cs,{className:"about-link",href:bt.links.tezosPayments.webSite,children:Object(Ga.jsx)(ci.a,{className:"about-link__icon"})}),Object(Ga.jsx)(cs,{className:"about-link",href:bt.links.tezosPayments.gitHub,children:Object(Ga.jsx)(oi.a,{className:"about-link__icon"})}),Object(Ga.jsx)(cs,{className:"about-link",href:bt.links.tezosPayments.telegram,children:Object(Ga.jsx)(Bn,{className:"about-link__icon"})}),Object(Ga.jsx)(cs,{className:"about-link",href:bt.links.tezosPayments.twitter,children:Object(Ga.jsx)(li.a,{className:"about-link__icon"})}),Object(Ga.jsx)(cs,{className:"about-link",href:bt.links.tezosPayments.reddit,children:Object(Ga.jsx)(di.a,{className:"about-link__icon"})})]}),Object(Ga.jsxs)("div",{className:"about-view__powered-by",children:[e.poweredBy,"\xa0",Object(Ga.jsx)(cs,{href:bt.links.tzKT,children:e.tzKt}),"\xa0",e.api]})]})},mi=l.a.memo(ui);a(873),a(874);const pi=()=>{const e=ba(),t=Object(o.useCallback)((()=>{e(ua(ce.granadanet))}),[e]),a=Object(o.useCallback)((t=>{const a=oe.find((e=>e.id===t.key));a&&e(ua(a))}),[e]),s=ha().views.connect.actions.connect,n=[ce.hangzhounet].map((e=>{const t=bt.tezos.networks[e.name];return Object(Ga.jsx)(qn.a.Item,{children:Object(Ga.jsxs)("div",{className:"connect-dropdown__item-container",children:[Object(Ga.jsx)("div",{className:"connect-dropdown__item-icon-container",children:Object(Ga.jsx)("div",{className:"connect-dropdown__item-icon",style:{backgroundColor:t.color}})}),Object(Ga.jsx)("div",{className:"connect-dropdown__item-text",children:"".concat(s.connectTo," ").concat(t.title)})]})},e.id)})),i=Object(Ga.jsx)(qn.a,{onClick:a,children:n}),r="".concat(s.connectTo," ").concat(bt.tezos.networks.granadanet.title);return n.length?Object(Ga.jsx)(Gn.a.Button,{className:"connect-dropdown",type:"primary",onClick:t,overlay:i,children:r}):Object(Ga.jsx)(es.a,{type:"primary",onClick:t,children:r})},vi=l.a.memo(pi),hi=()=>{const e=ha().views.connect.actions.connect;return ja(wt)?Object(Ga.jsx)(p.a,{push:!0,to:bt.routers.overview}):Object(Ga.jsx)(ms,{title:"Connect",className:"connect",children:Object(Ga.jsxs)("div",{className:"connect-info-container",children:[Object(Ga.jsx)("div",{className:"connect-info-container__message",children:e.description}),Object(Ga.jsx)(vi,{})]})})},bi=l.a.memo(hi);var ji=a(271),yi=a(898);a(875);const gi=e=>{const t=ja(St).services.find((t=>t.contractAddress===e.serviceAddress)),a=ja(ft),s=[];if(t){const e=[];t.allowedTokens.assets.forEach((t=>{const s=a.get(t);s&&e.push(s)})),t.allowedTokens.tez&&s.push({label:ue,value:"",imageUrl:ve}),e.forEach((e=>e.metadata&&s.push({label:e.metadata.symbol,value:e.contractAddress,imageUrl:e.metadata.thumbnailUri})))}const n=s.map((e=>Object(Ga.jsx)(ji.a.Option,{value:e.value,label:e.label,children:Object(Ga.jsxs)("div",{className:"payment-amount__select-option",children:[Object(Ga.jsx)("img",{className:"payment-amount__select-option-image",alt:e.label,src:e.imageUrl}),Object(Ga.jsx)("span",{className:"payment-amount__select-option-label",children:e.label})]})},e.label))),i=0===s.length;return Object(Ga.jsxs)("div",{className:"payment-amount",children:[Object(Ga.jsx)(ji.a,{className:"payment-amount__select",value:e.asset||"",onChange:e.onAssetChange,disabled:i,children:n}),Object(Ga.jsx)(yi.a,{className:"payment-amount__input",stringMode:!0,min:"0",value:e.amount.toString(),onChange:e.onAmountChange,disabled:i})]})},Oi=l.a.memo(gi);a(876);const wi=e=>{const t=ha(),a=t.views.acceptPayments,s=t.views.services,n=Object(m.c)(Nt),i=ja(Ct).filter((e=>!e.deleted)).map((e=>({label:e.name,value:e.contractAddress,disabled:n.has(e.contractAddress)}))),r=[{label:"Payment",value:ne.Payment},{label:"Donation",value:ne.Donation}];return Object(Ga.jsxs)("div",{className:"accept-payments-settings",children:[Object(Ga.jsx)("span",{className:"accept-payments-settings__caption",children:s.service}),Object(Ga.jsx)(ji.a,{className:"accept-payments-settings__service-select",options:i,value:e.serviceAddress,onChange:e.onServiceAddressChange}),Object(Ga.jsx)("span",{className:"accept-payments-settings__caption",children:a.type}),Object(Ga.jsx)(mn.a.Group,{className:"accept-payments-settings__type-select",optionType:"button",buttonStyle:"outline",options:r,value:e.paymentType,onChange:e.onPaymentTypeChange}),e.paymentType===ne.Payment?Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsx)("span",{className:"accept-payments-settings__caption",children:a.amount}),Object(Ga.jsx)(Oi,{serviceAddress:e.serviceAddress,amount:e.amount,onAmountChange:e.onAmountChange,asset:e.asset,onAssetChange:e.onAssetChange}),Object(Ga.jsx)("span",{className:"accept-payments-settings__header",children:a.paymentData}),Object(Ga.jsx)("span",{className:"accept-payments-settings__caption",children:a.paymentId}),Object(Ga.jsx)(un.a,{className:"accept-payments-settings__payment-id-input",value:e.paymentId,onChange:e.onPaymentIdChange}),Object(Ga.jsx)("span",{className:"accept-payments-settings__help-text",children:a.paymentIdHelpText})]}):Object(Ga.jsxs)(Ga.Fragment,{children:[Object(Ga.jsx)("span",{className:"accept-payments-settings__header",children:a.donationData}),Object(Ga.jsx)("span",{className:"accept-payments-settings__description-caption",children:a.donationDescription}),Object(Ga.jsx)(un.a.TextArea,{className:"accept-payments-settings__description-input",value:e.donationDescription,onChange:e.onDonationDescriptionChange,showCount:!0,rows:5,maxLength:250}),Object(Ga.jsx)("span",{className:"accept-payments-settings__help-text",children:a.donationDescriptionHelpText})]})]})};a(877);const ki=new Ra.paymentUrlFactories.Base64PaymentUrlFactory(bt.links.tezosPayments.paymentsApp),xi=e=>{let{paymentOrDonation:t,serviceAddress:a}=e;const s=ha(),n=s.common,i=s.views.acceptPayments,r=ja(wt),c=Wa(a),[l,d]=Object(o.useState)(""),u=Object(o.useCallback)((async()=>{const e=(null===r||void 0===r?void 0:r.network)||ce[bt.tezos.defaultNetwork];if(t.type===ne.Donation)return ki.createPaymentUrl(t,e);if(!c)return"";try{return(await c.createPayment({id:t.id,amount:t.amount.toString(),asset:t.asset,created:Date.now(),data:t.data})).url}catch(a){return console.error(a),""}}),[null===r||void 0===r?void 0:r.network,t,c]);Object(o.useEffect)((()=>{(async()=>{d(t.type===ne.Payment?"":await u())})()}),[u,t]);const m=t.type===ne.Payment?i.directLinkPaymentHelpText:i.directLinkDonationHelpText,p=Object(o.useCallback)((()=>{(async()=>{d(await u())})()}),[u]),v=Object(o.useCallback)((()=>{navigator.clipboard.writeText(l)}),[l]);return Object(Ga.jsxs)("div",{className:"generator__direct-link",children:[l&&Object(Ga.jsx)("span",{className:"generator__direct-link-help-text",children:m}),Object(Ga.jsx)(cs,{className:"generator__direct-link-link",href:l,children:l}),Object(Ga.jsxs)("div",{className:"generator__direct-link-buttons",children:[!l&&Object(Ga.jsx)(es.a,{type:"primary",onClick:p,children:i.generateAndSignPaymentLink}),l&&Object(Ga.jsx)(es.a,{onClick:v,icon:Object(Ga.jsx)(ns.a,{}),children:n.copyLink})]})]})},fi=l.a.memo(xi);a(878);const Si=e=>{const t=ha().views.acceptPayments;return Object(Ga.jsx)("div",{className:"failed-validation-result",children:t.errors.fillRequiredData})};a(879);const Ai=e=>{var t;const a=ja(ft),s=Wa(e.serviceAddress),n=e.assetAddress?a.get(e.assetAddress):void 0,i=[{key:"widget",tab:"Widget",disabled:!0},{key:"typescript",tab:"TypeScript Library",disabled:!0},{key:"dotnet",tab:".NET Library",disabled:!0}];s&&i.splice(0,0,{key:"directLink",tab:"Direct Link"});const c=e.paymentType===ne.Payment?{type:e.paymentType,targetAddress:e.serviceAddress,id:e.paymentId,asset:n?{address:n.contractAddress,decimals:(null===(t=n.metadata)||void 0===t?void 0:t.decimals)||0,id:"fa2"===n.type?n.id:null}:void 0,amount:new r.a(e.amount),created:new Date,signature:{signingPublicKey:"edpkuWJYhY5TVZ6xaoubNkidXArJmVhjA2yuZZuucEN6FF4fQeV9Dd",contract:"edsigtaNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNoneNog2Ndso"}}:{type:e.paymentType,targetAddress:e.serviceAddress,data:e.clientData},o=c.type===ne.Payment?He.validate(c):We.validate(c);return Object(Ga.jsx)(os.a,{className:"generator",style:{width:"100%"},tabList:i,activeTabKey:"directLink",children:o?Object(Ga.jsx)(Si,{results:o}):Object(Ga.jsx)(fi,{paymentOrDonation:c,serviceAddress:e.serviceAddress})})},_i=l.a.memo(Ai);a(880);const Ci=()=>{var e,t;const a=ha().views.acceptPayments,s=ja(St),n=ja(ft),{address:i}=Object(p.i)(),[c,l]=Object(o.useState)(i),[d,u]=Object(o.useState)(ne.Payment),[m,v]=Object(o.useState)(""),h=Object(o.useCallback)((e=>{const t=s.services.filter((t=>t.contractAddress===e))[0];return t?t.allowedTokens.tez?void 0:t.allowedTokens.assets[0]:void 0}),[s.services]),[b,j]=Object(o.useState)(h(c)),[y,g]=Object(o.useState)(""),[O,w]=Object(o.useState)(),k=b?(null===(e=n.get(b))||void 0===e||null===(t=e.metadata)||void 0===t?void 0:t.decimals)||0:pe,x=Object(o.useCallback)((e=>{const t=e;l(t),j(h(t))}),[h]),f=Object(o.useCallback)((e=>{u(e.target.value)}),[]),S=Object(o.useCallback)((e=>{const t=e?new r.a(e).toFormat(k,{groupSeparator:"",decimalSeparator:"."}):"";v(t)}),[k]),A=Object(o.useCallback)((e=>{j(e||void 0),v("")}),[]),_=Object(o.useCallback)((e=>{g(e.target.value)}),[]),C=Object(o.useCallback)((e=>{w({description:e.target.value})}),[]);return Object(Ga.jsxs)(ms,{title:a.title,children:[Object(Ga.jsx)(ms.Title,{children:a.title}),s.initialized?s.services.length?Object(Ga.jsxs)("div",{className:"accept-payments",children:[Object(Ga.jsx)("div",{className:"accept-payments__settings",children:Object(Ga.jsx)(wi,{serviceAddress:c,onServiceAddressChange:x,paymentType:d,onPaymentTypeChange:f,amount:m,onAmountChange:S,asset:b,onAssetChange:A,paymentId:y,onPaymentIdChange:_,donationDescription:(null===O||void 0===O?void 0:O.description)||"",onDonationDescriptionChange:C})}),Object(Ga.jsx)("div",{className:"accept-payments__generator",children:Object(Ga.jsx)(_i,{serviceAddress:c,paymentType:d,assetAddress:b,amount:m,paymentId:y,clientData:O})})]}):Object(Ga.jsx)(ds,{}):Object(Ga.jsx)(ca.a,{active:!0})]})},Ni=l.a.memo(Ci);var Pi=a(150),Ti=a(929),zi=a(930),Di=a(931);a(881);class Ui extends De{static getShortAddress(e){return"".concat(e.address.substr(0,9),"...").concat(e.address.substr(e.address.length-6,6))}}a(882);const Ii=e=>{const t=bt.tezos.networks[e.network.name];return Object(Ga.jsxs)("div",{className:"account-network-group",children:[Object(Ga.jsx)("div",{className:"account-network-group__icon-container",children:Object(Ga.jsx)("div",{className:"account-network-group__icon",style:{backgroundColor:t.color}})}),Object(Ga.jsx)("div",{children:t.title})]})},Ki=l.a.memo(Ii),Ei=()=>{const e=ya(),t=ha(),a=t.views.header.accountActions,s=ja(kt),n=ja(wt),i=(null===n||void 0===n?void 0:n.address)||"",r=ja(xt),c=r&&r.explorers[r.default.explorer],l=Object(o.useCallback)((()=>{navigator.clipboard.writeText(i)}),[i]),d=Object(o.useCallback)((()=>{c&&window.open(e.tezosExplorer.getAccountUrl(i),"_blank")}),[e.tezosExplorer,i,c]),u=ba(),m=Object(o.useCallback)((()=>{u(ma())}),[u]);if(!n)return null;const p=[...s.keys()].map((e=>{var t;return Object(Ga.jsx)(qn.a.ItemGroup,{title:Object(Ga.jsx)(Ki,{network:e}),children:null===(t=s.get(e))||void 0===t?void 0:t.map((e=>Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Ti.a,{}),className:Object(O.a)("account-menu-item",{"account-menu-item_selected":e.address===n.address}),style:e.address!==n.address?void 0:{backgroundColor:Pi.a[0],color:Pi.a.primary},children:e.address},e.address)))},e.id)})),v=Object(Ga.jsxs)(qn.a,{children:[p,Object(Ga.jsx)(qn.a.Divider,{}),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(ns.a,{}),onClick:l,children:a.copyAddress.title},1),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Ps.a,{}),onClick:d,children:"".concat(a.viewOn," ").concat(null===c||void 0===c?void 0:c.title)},2),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(zi.a,{}),children:"".concat(a.connectAnotherAccount.title," (").concat(t.common.comingSoon.toLowerCase(),")")},3),Object(Ga.jsx)(qn.a.Divider,{}),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Di.a,{}),onClick:m,children:a.disconnect.title},5)]});return Object(Ga.jsx)(Gn.a,{overlay:v,placement:"bottomRight",children:Object(Ga.jsx)(es.a,{style:{borderColor:Pi.a.primary,color:Pi.a.primary},className:"account-dropdown",children:Ui.getShortAddress(n)})})},Li=l.a.memo(Ei);a(883);const Fi=()=>{const e=ja(wt);return Object(Ga.jsxs)("header",{className:"header",children:[Object(Ga.jsx)(Ns.a,{className:"header__title",to:bt.routers.overview,children:bt.app.name}),e&&Object(Ga.jsx)(Li,{})]})},Bi=l.a.memo(Fi);var Mi=a(932),Vi=a(933),Ri=a(934),Hi=a(935),Wi=a(367);a(884);const Zi=()=>{const e=Object(p.h)(),t=ha().views,a=Object(p.g)(),s=Object(o.useCallback)((()=>{a.push(bt.routers.createService)}),[a]),n=Object(o.useCallback)((()=>{a.push(bt.routers.acceptPayments)}),[a]);return Object(Ga.jsxs)("nav",{className:"navbar",children:[Object(Ga.jsxs)(qn.a,{className:"navbar__menu",mode:"inline",selectedKeys:[e.pathname],children:[Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Mi.a,{}),children:Object(Ga.jsx)(Ns.a,{to:bt.routers.overview,children:t.overview.title})},bt.routers.overview),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Vi.a,{}),children:Object(Ga.jsx)(Ns.a,{to:bt.routers.operations,children:t.operations.title})},bt.routers.operations),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Ri.a,{}),children:Object(Ga.jsx)(Ns.a,{to:bt.routers.services,children:t.services.title})},bt.routers.services),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Hi.a,{}),disabled:!0,children:t.settings.title},"settings"),Object(Ga.jsx)(qn.a.Item,{icon:Object(Ga.jsx)(Wi.a,{}),children:Object(Ga.jsx)(Ns.a,{to:bt.routers.about,children:t.about.title})},bt.routers.about)]}),Object(Ga.jsxs)("div",{className:"navbar__bottom-buttons",children:[Object(Ga.jsx)(es.a,{onClick:s,children:t.createService.title}),Object(Ga.jsx)(es.a,{onClick:n,type:"primary",children:t.acceptPayments.title})]})]})},Yi=l.a.memo(Zi);var qi=a(582);const Gi=()=>{const{services:e,pendingOperations:t}=Object(m.c)(St);return Object(o.useEffect)((()=>{t.forEach((t=>{const a=e.find((e=>e.contractAddress===t.serviceAddress)),s=Object(Ga.jsxs)("span",{children:[Object(Ga.jsx)("b",{children:t.action}),a&&Object(Ga.jsxs)(Ga.Fragment,{children:[" for service: ",Object(Ga.jsx)("b",{children:"".concat(a.name)})]})]}),n=t.hash;switch(t.status){case Bt.loading:{const e="".concat(t.confirmationCount," / ").concat(t.targetConfirmationCount);qi.b.loading({content:Object(Ga.jsxs)("span",{children:["Executing operation: ",s," (",e,")"]}),key:n,duration:0});break}case Bt.success:qi.b.success({content:Object(Ga.jsxs)("span",{children:["Finished operation: ",s]}),key:n,duration:4});break;case Bt.error:qi.b.error({content:Object(Ga.jsxs)("span",{children:["Failed operation: ",s]}),key:n,duration:4})}}))}),[t,e]),null},Ji=l.a.memo(Gi);a(885),a(886);const Qi=()=>{const e=ja(Ot).initialized,t=ba();return Object(o.useEffect)((()=>{t(da())}),[t]),Object(Ga.jsxs)("div",{className:"main-container",children:[Object(Ga.jsx)(Ji,{}),Object(Ga.jsx)(Bi,{}),Object(Ga.jsx)(Yi,{}),e?Object(Ga.jsxs)(p.d,{children:[Object(Ga.jsx)(Xa,{exact:!0,path:bt.routers.overview,children:Object(Ga.jsx)(_s,{})}),Object(Ga.jsx)(Xa,{exact:!0,path:bt.routers.operations,children:Object(Ga.jsx)(Vs,{})}),Object(Ga.jsx)(Xa,{exact:!0,path:bt.routers.createService,children:Object(Ga.jsx)(ri,{mode:ni.Create})}),Object(Ga.jsx)(Xa,{exact:!0,path:bt.routers.service.template,children:Object(Ga.jsx)(ri,{mode:ni.ViewAndEdit})}),Object(Ga.jsx)(Xa,{exact:!0,path:bt.routers.services,children:Object(Ga.jsx)(nn,{})}),Object(Ga.jsx)(Xa,{exact:!0,path:[bt.routers.acceptPayments,bt.routers.acceptServicePayments.template],children:Object(Ga.jsx)(Ni,{})}),Object(Ga.jsx)(p.b,{path:bt.routers.about,children:Object(Ga.jsx)(mi,{})}),Object(Ga.jsx)(p.b,{path:bt.routers.connect,children:Object(Ga.jsx)(bi,{})})]}):Object(Ga.jsx)(ca.a,{})]})},Xi=e=>{let{getReactAppContext:t,networkChangedEvent:a,children:s}=e;const[n,i]=Object(o.useState)(t()),r=Object(o.useCallback)((()=>i(t())),[t]);return Object(o.useEffect)((()=>(a.addListener(r),()=>{a.removeListener(r)})),[a,r]),Object(Ga.jsx)(ra.Provider,{value:n,children:s})};var $i=e=>{e&&e instanceof Function&&a.e(3).then(a.bind(null,937)).then((t=>{let{getCLS:a,getFID:s,getFCP:n,getLCP:i,getTTFB:r}=t;a(e),s(e),n(e),i(e),r(e)}))},er=a(146);const tr=Object(er.b)({accountsState:pa.reducer,servicesState:ea.reducer,balancesState:Dt.reducer,operationsState:Lt.reducer});a(887);Object(c.d)();const ar=new class{constructor(e){this.store=void 0,this.tezosWallet=new h.a({name:bt.app.name,colorMode:v.i.LIGHT}),this.history=void 0,this.networkChanged=new Ue,this.onStoreChangedListener=this.onStoreChanged.bind(this),this.unsubscribeStoreChanged=void 0,this._network=void 0,this._tezosToolkit=void 0,this._services=void 0,this._reactAppContext=void 0,this.currentAccountAddress=void 0,this.store=e(this),this.history=this.createHistory(),this.applyNetwork(ce[bt.tezos.defaultNetwork]),this.currentAccountAddress=null,this.unsubscribeStoreChanged=this.store.subscribe(this.onStoreChangedListener)}get network(){if(!this._network)throw this.getNetworkError();return this._network}get tezosToolkit(){if(!this._tezosToolkit)throw this.getNetworkError();return this._tezosToolkit}get services(){if(!this._services)throw this.getNetworkError();return this._services}get reactAppContext(){if(!this._reactAppContext)throw this.getNetworkError();return this._reactAppContext}createHistory(){return Object(j.a)()}onStoreChanged(){const e=this.store.getState(),t=wt(e),a=t&&t.address;a!==this.currentAccountAddress&&(this.currentAccountAddress=a,this.clearAccountData(),t&&(t.network!==this.network&&this.applyNetwork(t.network),this.fetchAccountData(t)))}async fetchAccountData(e){await this.store.dispatch(Rt(e)),await this.store.dispatch(zt(e))}async clearAccountData(){await Promise.all([this.store.dispatch(Ut()),this.store.dispatch(Jt())])}applyNetwork(e){this._network=e;const t=bt.tezos.networks[this.network.name];this._tezosToolkit=new b.b(t.rpcUrls[t.default.rpc]),this.tezosToolkit.setSignerProvider(new ia),this.tezosToolkit.setWalletProvider(this.tezosWallet),this._services=this.createServices(),this._reactAppContext=this.createReactAppContext(),this.networkChanged.emit(this._network,e)}createServices(){const e=bt.tezos.networks[this.network.name],t=this.createServicesProvider(this.network);return{accountsService:new jt(this.tezosToolkit,this.tezosWallet.client),servicesService:new yt.a(this.tezosToolkit,t,e.servicesFactoryContractAddress)}}createReactAppContext(){return{tezosWallet:this.tezosWallet,tezosExplorer:this.createTezosBlockchainUrlExplorer(this.network)}}createServicesProvider(e){const t=bt.tezos.networks[e.name];switch(t.default.indexer){case"tzKT":return new ut(e,t.indexerUrls.tzKT,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);case"betterCallDev":return new mt(e,t.indexerUrls.betterCallDev,t.servicesFactoryContractAddress,t.minimumSupportedServiceVersion);default:throw new Error("Unknown service provider")}}createTezosBlockchainUrlExplorer(e){const t=bt.tezos.networks[e.name];switch(t.default.explorer){case"tzKT":return new ot(e,t.explorers.tzKT.baseUrl);case"tzStats":return new dt(e,t.explorers.tzStats.baseUrl);case"betterCallDev":return new lt(e,t.explorers.betterCallDev.baseUrl);default:throw new Error("Unknown blockchain explorer")}}getNetworkError(){return new Error("Network is not defined")}}((e=>Object(n.a)({reducer:tr,devTools:{serialize:!0},middleware:t=>t({thunk:{extraArgument:e},serializableCheck:{isSerializable:e=>Object(n.d)(e)||e instanceof Map||e instanceof Set||i.BigNumber.isBigNumber(e)||e instanceof Date,getEntries:e=>e instanceof Map||e instanceof Set?[...e.entries()]:Object.entries(e)}})})));u.a.render(Object(Ga.jsx)(l.a.StrictMode,{children:Object(Ga.jsx)(m.a,{store:ar.store,children:Object(Ga.jsx)(p.c,{history:ar.history,children:Object(Ga.jsx)(Xi,{getReactAppContext:()=>ar.reactAppContext,networkChangedEvent:ar.networkChanged,children:Object(Ga.jsx)(Qi,{})})})})}),document.getElementById("root")),window.webApp=ar,window.config=bt,$i()}},[[888,1,2]]]);
//# sourceMappingURL=main.f1ee64e1.chunk.js.map