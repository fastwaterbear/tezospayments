{"version":3,"file":"index.es5.esm.js","sources":["../../src/utils/converters.ts","../../src/utils/guards.ts","../../src/utils/memoize.ts","../../src/utils/optimization.ts","../../src/utils/shallowEqual.ts","../../src/utils/text.ts","../../src/utils/index.ts","../../src/helpers/serviceLinkHelper.ts","../../src/models/payment/paymentBase.ts","../../src/native/index.ts","../../src/helpers/paymentParser/paymentParserBase.ts","../../src/helpers/paymentParser/paymentParser.ts","../../src/helpers/paymentParser/donationParser.ts","../../src/helpers/paymentValidator/paymentValidatorBase.ts","../../src/models/blockchain/network.ts","../../src/models/blockchain/token.ts","../../src/models/blockchain/tezosInfo.ts","../../src/helpers/paymentValidator/validationMethods.ts","../../src/helpers/paymentValidator/paymentValidator.ts","../../src/helpers/paymentValidator/donationValidator.ts","../../src/models/core/stateModel.ts","../../src/models/payment/payment.ts","../../src/models/payment/donation.ts","../../src/models/routing/parameterizedRoute.ts","../../src/models/service/serviceOperationType.ts","../../src/models/service/service.ts","../../src/models/service/serviceOperation.ts","../../src/models/service/serviceOperationDirection.ts","../../src/models/service/serviceOperationStatus.ts"],"sourcesContent":["import { Buffer } from 'buffer';\n\nexport const stringToUint8Array = (hex: string): Uint8Array => {\n  const integers = hex.match(/[\\da-f]{2}/gi)?.map(val => parseInt(val, 16));\n\n  // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n  return new Uint8Array(integers!);\n};\n\nexport const stringToBytes = (value: string): string => Buffer.from(value, 'utf8').toString('hex');\nexport const bytesToString = (value: string): string => Buffer.from(stringToUint8Array(value)).toString('utf8');\n\nexport const objectToBytes = (value: Record<string, unknown>): string => stringToBytes(JSON.stringify(value));\nexport const bytesToObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: string): T | null => {\n  try {\n    return JSON.parse(bytesToString(value));\n  }\n  catch {\n    return null;\n  }\n};\n\nexport function tezToMutez(tez: number): number;\nexport function tezToMutez(tez: bigint): bigint;\nexport function tezToMutez(tez: bigint | number): bigint | number {\n  return typeof tez === 'number'\n    ? tez * 1000000\n    : tez * BigInt(1000000);\n}\n","import isPlainObjectLodashFunction from 'lodash.isplainobject';\n\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\nexport const isArray = (arg: any): arg is any[] => {\n  return Array.isArray(arg);\n};\n\nexport const isReadonlyArray = (arg: unknown): arg is readonly unknown[] => {\n  return Array.isArray(arg);\n};\n\nexport const isPlainObject = <T extends Record<string, unknown> = Record<string, unknown>>(value: unknown): value is T => {\n  return isPlainObjectLodashFunction(value);\n};\n","const defaultEqualityCheck = <T>(a: T, b: T) => a === b;\n\nconst areArgumentsShallowlyEqual = <T extends IArguments | null>(equalityCheck: (a: T, b: T) => boolean, prev: T, next: T) => {\n    if (prev === null || next === null || prev.length !== next.length) {\n        return false;\n    }\n\n    // Do this in a for loop (and not a `forEach` or an `every`) so we can determine equality as fast as possible.\n    const length = prev.length;\n    for (let i = 0; i < length; i++) {\n        if (!equalityCheck(prev[i], next[i])) {\n            return false;\n        }\n    }\n\n    return true;\n};\n\n/* eslint-disable prefer-rest-params  */\n/* eslint-disable prefer-spread */\n/* eslint-disable @typescript-eslint/no-explicit-any */\nexport const memoize = <TF extends (...args: any) => any>(func: TF, equalityCheck = defaultEqualityCheck): TF => {\n    let lastArgs: IArguments | null = null;\n    let lastResult: unknown = null;\n\n    return (function () {\n        if (!areArgumentsShallowlyEqual(equalityCheck, lastArgs, arguments)) {\n            // apply arguments instead of spreading for performance.\n            // eslint-disable-next-line @typescript-eslint/no-explicit-any\n            lastResult = func.apply(null, arguments as any);\n        }\n\n        lastArgs = arguments;\n        return lastResult;\n    } as TF);\n};\n/* eslint-enable prefer-spread */\n/* eslint-enable prefer-rest-params */\n/* eslint-enable @typescript-eslint/no-explicit-any */\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nconst emptyArray: any[] = [];\nconst emptyObject = {};\nconst emptyMap = new Map();\nconst emptySet: Set<any> = new Set();\n\nexport default {\n    emptyArray,\n    emptyMap,\n    emptySet,\n    emptyObject\n};\n","const is = (x: unknown, y: unknown) => {\n    return (x === y)\n        ? x !== 0 || y !== 0 || (1 / x) === (1 / y)\n        : x !== x && y !== y;\n};\n\nexport default function shallowEqual(objA: unknown, objB: unknown) {\n    if (is(objA, objB))\n        return true;\n\n    if (typeof objA !== 'object' || objA === null || typeof objB !== 'object' || objB === null)\n        return false;\n\n    const keysA = Object.keys(objA);\n    const keysB = Object.keys(objB);\n\n    if (keysA.length !== keysB.length)\n        return false;\n\n    for (let i = 0; i < keysA.length; i++) {\n        /* eslint-disable @typescript-eslint/no-explicit-any */\n        /* eslint-disable @typescript-eslint/no-non-null-assertion */\n\n        if (!Object.prototype.hasOwnProperty.call(objB, keysA[i]!)\n            || !is((objA as any)[keysA[i]!], (objB as any)[keysA[i]!])\n        )\n            return false;\n\n        /* eslint-enable @typescript-eslint/no-non-null-assertion */\n        /* eslint-enable @typescript-eslint/no-explicit-any */\n    }\n\n    return true;\n}\n","export const capitalize = (value: string): string => value && (value[0]?.toLocaleUpperCase() + value.slice(1));\n\nexport const getAvatarText = (value: string, maxLength = 2) => {\n  if (!value || !maxLength)\n    return '';\n\n  let result = '';\n\n  for (let i = 0, j = 0, isWord = false; i < value.length; i++) {\n    if (!isWord && value[i] !== ' ') {\n      isWord = true;\n      // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n      result += value[i]!;\n\n      if (++j === maxLength)\n        return result;\n    }\n    else if (isWord && value[i] === ' ') {\n      isWord = false;\n    }\n  }\n\n  return result;\n};\n","import combineClassNames from 'clsx';\n\nimport * as converters from './converters';\nimport * as guards from './guards';\nimport { memoize } from './memoize';\nimport optimization from './optimization';\nimport shallowEqual from './shallowEqual';\nimport * as text from './text';\n\nconst wait = (ms: number) => new Promise<void>(resolve => setTimeout(resolve, ms));\n\nexport {\n  wait,\n  combineClassNames,\n  memoize,\n  shallowEqual,\n  optimization,\n  guards,\n  text,\n  converters\n};\n","import { memoize } from '../utils';\n\nexport enum IconId {\n  Common = 0,\n  Email = 1,\n  Telegram = 2,\n  Facebook = 3,\n  Twitter = 4,\n  Instagram = 5,\n  GitHub = 6,\n  Reddit = 7\n}\n\ninterface LinkInfo {\n  readonly rawLink: string;\n  readonly formattedLink: string;\n  readonly displayLink: string;\n  readonly icon: IconId;\n}\n\nconst getInvalidLinkInfo = (link: string): LinkInfo => ({\n  rawLink: link,\n  formattedLink: '#',\n  displayLink: 'Invalid Link',\n  icon: IconId.Common\n});\n\ntype LinkInfoProvider = (link: string) => LinkInfo | false;\n\nconst prepareFormattedLink = memoize((link: string) => link.trim());\nconst prepareDisplayLink = memoize((link: string) => link.trim().replace(/\\/$/, ''));\n\nconst socialMediaLinkInfoProvider = (link: string, baseUrl: string, icon: IconId): LinkInfo | false => {\n  if (!link.startsWith(baseUrl))\n    return false;\n\n  const formattedLink = prepareFormattedLink(link);\n  if (formattedLink == baseUrl)\n    return false;\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link).replace(baseUrl, ''),\n    icon\n  };\n};\n\nconst telegramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://t.me/', IconId.Telegram);\nconst facebookLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://facebook.com/', IconId.Facebook);\nconst twitterLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://twitter.com/', IconId.Twitter);\nconst instagramLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://instagram.com/', IconId.Instagram);\nconst gitHubLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://github.com/', IconId.GitHub);\nconst redditLinkInfoProvider: LinkInfoProvider = link => socialMediaLinkInfoProvider(link, 'https://www.reddit.com/', IconId.Reddit);\n\n// This regex should not use for email validation\nconst emailCheckingRegEx = /^[^\\s/@]+@[^\\s@/]+$/;\nconst emailLinkInfoProvider: LinkInfoProvider = link => {\n  const preparedFormattedLink = prepareFormattedLink(link);\n\n  return emailCheckingRegEx.test(preparedFormattedLink) && {\n    rawLink: link,\n    formattedLink: `mailto:${preparedFormattedLink}`,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Email\n  };\n};\n\nconst javascriptLinkInfoProvider: LinkInfoProvider = link => link.startsWith('javascript') ? getInvalidLinkInfo(link) : false;\n\n// https://datatracker.ietf.org/doc/html/rfc3986#section-3.1\nconst urlSchemeRegEx = /^([a-z][a-z0-9+\\-.]*):/;\nconst commonLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return urlSchemeRegEx.test(formattedLink) && {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nconst editLinkInfoProvider: LinkInfoProvider = link => {\n  const formattedLink = prepareFormattedLink(link);\n\n  return {\n    rawLink: link,\n    formattedLink,\n    displayLink: prepareDisplayLink(link),\n    icon: IconId.Common\n  };\n};\n\nexport class ServiceLinkHelper {\n  // Order is important\n  static readonly linkInfoProviders: readonly LinkInfoProvider[] = [\n    // Disallowed\n    javascriptLinkInfoProvider,\n    // Allowed\n    telegramLinkInfoProvider,\n    facebookLinkInfoProvider,\n    twitterLinkInfoProvider,\n    instagramLinkInfoProvider,\n    gitHubLinkInfoProvider,\n    emailLinkInfoProvider,\n    redditLinkInfoProvider,\n    commonLinkInfoProvider\n  ];\n\n  getLinkInfo(link: string, isEditMode = false): LinkInfo | null {\n    for (const provider of ServiceLinkHelper.linkInfoProviders) {\n      const linkInfo = provider(link);\n\n      if (linkInfo)\n        return this.linkInfoIsValid(linkInfo) ? linkInfo : null;\n    }\n\n    if (isEditMode)\n      return editLinkInfoProvider(link) as LinkInfo;\n\n    return null;\n  }\n\n  linkInfoIsValid(linkInfo: LinkInfo) {\n    return linkInfo.formattedLink !== '#';\n  }\n}\n","import { URL } from '../../native';\n\nexport enum PaymentType {\n  Payment = 1,\n  Donation = 2\n}\n\nexport type PaymentUrl =\n  | { type: 'base64', url: URL };\n\nexport interface PaymentBase {\n  readonly type: PaymentType;\n  readonly targetAddress: string;\n  readonly urls: readonly PaymentUrl[];\n}\n","/* eslint-disable @typescript-eslint/no-explicit-any */\nimport { URL as NodeURL } from 'url';\n\nexport type URL = NodeURL;\nexport const URL = NodeURL || (globalThis as any).URL;\n","import { Buffer } from 'buffer';\n\nimport { PaymentBase } from '../../models/payment/paymentBase';\n\nexport type PaymentFieldInfoType = 'object' | 'string' | 'number' | 'undefined' | 'null';\n\nexport abstract class PaymentParserBase<\n  TPayment extends PaymentBase,\n  TRawPayment extends Record<string, unknown>,\n  TValidRawPayment extends TRawPayment,\n  TNonIncludedFields extends Record<string, unknown>\n  > {\n  private _minPaymentFieldsCount: number | undefined;\n\n  protected abstract get paymentFieldTypes(): ReadonlyMap<keyof TRawPayment, PaymentFieldInfoType | readonly PaymentFieldInfoType[]>;\n\n  private get minPaymentFieldsCount() {\n    if (!this._minPaymentFieldsCount) {\n      let count = 0;\n      for (const info of this.paymentFieldTypes) {\n        if (typeof info[1] === 'string' ? info[1] !== 'undefined' : info[1].every(type => type !== 'undefined'))\n          count++;\n      }\n\n      this._minPaymentFieldsCount = count;\n    }\n\n    return this._minPaymentFieldsCount;\n  }\n\n  private get maxPaymentFieldsCount() {\n    return this.paymentFieldTypes.size;\n  }\n\n  parse(paymentBase64: string, nonIncludedFields: TNonIncludedFields): TPayment | null {\n    try {\n      let rawPayment: TRawPayment;\n\n      if (paymentBase64) {\n        const paymentString = Buffer.from(paymentBase64, 'base64').toString('utf8');\n        rawPayment = JSON.parse(paymentString);\n      }\n      else\n        rawPayment = {} as TRawPayment;\n\n      return this.validateAndMapRawPaymentToPayment(rawPayment, nonIncludedFields);\n    }\n    catch {\n      return null;\n    }\n  }\n\n  protected abstract mapRawPaymentToPayment(rawPayment: TValidRawPayment, nonIncludedFields: TNonIncludedFields): TPayment;\n\n  private validateAndMapRawPaymentToPayment(rawPayment: TRawPayment, nonIncludedFields: TNonIncludedFields): TPayment | null {\n    return this.validateRawPayment(rawPayment)\n      ? this.mapRawPaymentToPayment(rawPayment, nonIncludedFields)\n      : null;\n  }\n\n  private validateRawPayment(rawPayment: TRawPayment): rawPayment is TValidRawPayment {\n    const rawPaymentFieldNames = Object.getOwnPropertyNames(rawPayment) as ReadonlyArray<keyof TRawPayment>;\n\n    // Prevent the field checking if the rawPayment has an invalid number of fields\n    if (rawPaymentFieldNames.length < this.minPaymentFieldsCount || rawPaymentFieldNames.length > this.maxPaymentFieldsCount)\n      return false;\n\n    for (const [rawPaymentFieldName, expectedPaymentFieldType] of this.paymentFieldTypes) {\n      const actualPaymentFieldType = typeof rawPayment[rawPaymentFieldName];\n\n      if (Array.isArray(expectedPaymentFieldType)\n        ? !expectedPaymentFieldType.some(expectedType => actualPaymentFieldType === expectedType)\n        : actualPaymentFieldType !== expectedPaymentFieldType\n      ) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n}\n","import { BigNumber } from 'bignumber.js';\n\nimport type { Payment } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { PaymentFieldInfoType, PaymentParserBase } from './paymentParserBase';\n\ntype RawPaymentBase = {\n  amount: string;\n  data: Payment['data'];\n  created: number;\n  asset?: string;\n  successUrl?: string;\n  cancelUrl?: string;\n  expired?: number;\n};\n\nexport type RawPayment = Partial<RawPaymentBase>;\nexport type ValidRawPayment = RawPaymentBase;\nexport type NonIncludedPaymentFields = Pick<Payment, 'type' | 'targetAddress' | 'urls'>;\n\nexport class PaymentParser extends PaymentParserBase<Payment, RawPayment, ValidRawPayment, NonIncludedPaymentFields> {\n  private _paymentFieldTypes: ReadonlyMap<\n    keyof RawPayment, PaymentFieldInfoType | readonly PaymentFieldInfoType[]\n  > = new Map<keyof RawPayment, PaymentFieldInfoType | readonly PaymentFieldInfoType[]>()\n    .set('amount', 'string')\n    .set('data', 'object')\n    .set('asset', ['string', 'undefined', 'null'])\n    .set('successUrl', ['string', 'undefined', 'null'])\n    .set('cancelUrl', ['string', 'undefined', 'null'])\n    .set('created', 'number')\n    .set('expired', ['number', 'undefined', 'null']);\n\n  protected get paymentFieldTypes() {\n    return this._paymentFieldTypes;\n  }\n\n  protected mapRawPaymentToPayment(rawPayment: ValidRawPayment, nonIncludedFields: NonIncludedPaymentFields): Payment {\n    return {\n      type: PaymentType.Payment,\n      amount: new BigNumber(rawPayment.amount),\n      data: rawPayment.data,\n      asset: rawPayment.asset,\n      successUrl: rawPayment.successUrl ? new URL(rawPayment.successUrl) : undefined,\n      cancelUrl: rawPayment.cancelUrl ? new URL(rawPayment.cancelUrl) : undefined,\n      created: new Date(rawPayment.created),\n      expired: rawPayment.expired ? new Date(rawPayment.expired) : undefined,\n      targetAddress: nonIncludedFields.targetAddress,\n      urls: nonIncludedFields.urls\n    };\n  }\n}\n","import { BigNumber } from 'bignumber.js';\n\nimport type { Donation } from '../../models/payment/donation';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport { URL } from '../../native';\nimport { PaymentFieldInfoType, PaymentParserBase } from './paymentParserBase';\n\ntype RawDonationBase = {\n  desiredAmount?: string;\n  desiredAsset?: string;\n  successUrl?: string;\n  cancelUrl?: string;\n};\n\nexport type RawDonation = Partial<RawDonationBase>;\nexport type ValidRawDonation = RawDonationBase;\nexport type NonIncludedDonationFields = Pick<Donation, 'type' | 'targetAddress' | 'urls'>;\n\nexport class DonationParser extends PaymentParserBase<Donation, RawDonation, ValidRawDonation, NonIncludedDonationFields> {\n  private _paymentFieldTypes: ReadonlyMap<\n    keyof RawDonation, PaymentFieldInfoType | readonly PaymentFieldInfoType[]\n  > = new Map<keyof RawDonation, PaymentFieldInfoType | readonly PaymentFieldInfoType[]>()\n    .set('desiredAmount', ['string', 'undefined', 'null'])\n    .set('desiredAsset', ['string', 'undefined', 'null'])\n    .set('successUrl', ['string', 'undefined', 'null'])\n    .set('cancelUrl', ['string', 'undefined', 'null']);\n\n  protected get paymentFieldTypes() {\n    return this._paymentFieldTypes;\n  }\n\n  protected mapRawPaymentToPayment(rawDonation: ValidRawDonation, nonIncludedFields: NonIncludedDonationFields): Donation {\n    return {\n      type: PaymentType.Donation,\n      desiredAmount: rawDonation.desiredAmount ? new BigNumber(rawDonation.desiredAmount) : undefined,\n      desiredAsset: rawDonation.desiredAsset,\n      successUrl: rawDonation.successUrl ? new URL(rawDonation.successUrl) : undefined,\n      cancelUrl: rawDonation.cancelUrl ? new URL(rawDonation.cancelUrl) : undefined,\n      targetAddress: nonIncludedFields.targetAddress,\n      urls: nonIncludedFields.urls\n    };\n  }\n}\n","import { PaymentBase } from '../../models/payment/paymentBase';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { guards } from '../../utils';\nimport { PaymentValidationMethod } from './paymentValidationMethod';\n\nexport abstract class PaymentValidatorBase<TPayment extends PaymentBase> {\n  protected readonly abstract validationMethods: ReadonlyArray<PaymentValidationMethod<TPayment>>;\n  protected readonly abstract invalidPaymentObjectError: string;\n\n  validate(payment: TPayment, bail = false): FailedValidationResults {\n    if (!guards.isPlainObject(payment))\n      return [this.invalidPaymentObjectError];\n\n    const failedValidationResults: FailedValidationResults = bail ? [] : undefined;\n    for (const validationMethod of this.validationMethods) {\n      const currentFailedValidationResults = validationMethod(payment);\n      if (currentFailedValidationResults) {\n        if (!bail)\n          return currentFailedValidationResults;\n\n        // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n        failedValidationResults!.concat(currentFailedValidationResults);\n      }\n    }\n\n    return failedValidationResults;\n  }\n}\n","const networksInternal = {\n  // mainnet: {\n  //   id: 'NetXdQprcVkpaWU',\n  //   name: 'mainnet',\n  // },\n  granadanet: {\n    id: 'NetXz969SFaFn8k',\n    name: 'granadanet',\n  },\n  edo2net: {\n    id: 'NetXSgo1ZT2DRUG',\n    name: 'edo2net',\n  }\n} as const;\n\ninterface NetworkInternal {\n  readonly id: string;\n  readonly name: string;\n}\n\ntype Networks = {\n  readonly [P in keyof typeof networksInternal]: (typeof networksInternal)[P] extends NetworkInternal & {\n    readonly name: P;\n  }\n  ? (typeof networksInternal)[P]\n  : never\n};\n\nexport type Network = Networks[keyof Networks];\n\nexport const networks: Networks = networksInternal;\nexport const networksCollection = Object.values(networksInternal);\n","import { Network, networks } from './network';\n\ninterface TokenBase {\n  readonly network: Network;\n  readonly contractAddress: string;\n  readonly metadata?: TokenMetadata;\n}\n\nexport interface TokenFA12 extends TokenBase {\n  readonly type: 'fa1.2';\n}\n\nexport interface TokenFA2 extends TokenBase {\n  readonly type: 'fa2';\n  readonly fa2TokenId: number;\n}\n\nexport type Token = TokenFA12 | TokenFA2;\n\nexport type TokenMetadata = {\n  readonly decimals: number;\n  readonly symbol: string;\n  readonly name: string;\n  readonly thumbnailUri: string;\n};\n\nexport const tezosMeta: TokenMetadata = {\n  symbol: 'XTZ',\n  name: 'Tezos',\n  decimals: 6,\n  // eslint-disable-next-line max-len\n  thumbnailUri: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAMAAAD04JH5AAABC1BMVEUAAABCfe5LcORAfetCffBDfe9CffBCfe9Cf/BBfe9Df/JBe+xDeu5Df/JCfvBCfO9Cfe9Cfe9DfvBDfvBBfe9BffA+eu9Df/JCfe8+eeVCfvFCfe9Cfe9Cfu5BffBCffBBfu8+fO9CffJEf/JEfe9CfvFDfu////9Ff+/8/f8+e+87eO9FgvdGg/rr8f5EgPRWjPFTifFAfO9Ghfz0+P5gk/I4d+5Hhv+vyPg3du7n7/1Ef/BIgvD5+v+hv/dOhvBomPNajvHP3vu50PpvnPPv9P7d6PzW5PyMsfbn7v3H2fvB1fp5pPTj7P1ml/KIrfWCqfWow/irxvi0zPmzyvmZufeStPaWt/Ywce7hqexUAAAAJnRSTlMA/QMTxv6QilFW0DQM9a9K8d7WwrYuB/nqHJnL4l4ooHMXQ9p0cw375J8AAAlzSURBVHja1VsHe9JAGE7CHqWD2ta21h2uGQQCJEZWyxbtcv//X+J3hMuJwh2XxEf9nhaoIO9737z1SUKiKIunRCH3LF1KHpzsyarc3js/SJbSr3OFBPnMH5LFFx9dZNPJ/T3LNQ3DardVkLZlGUbDNfb2y+ncxVH8HOi4EtnTM7nRMA1L9kVdiP86ZRmm2ZDP0rsJyiFO+KPc0xOrYbYpMhXKo202rJPTXJFoLDbdP8rsG67lY7MEf8Byjf30o9goKPCTPZRd4ydwLgmjIR/u4v8Zy+izZaPRBnQBAVs0rHJWiewLCsAnDZMxeIYaTKu8C18RDb5QMk1ADyWYwmGBUAiFX8wcE/hwFFKNnUxCUsIOfzcPtlcjCfjCS2IH8eFbBh+ebwfDOC1Kijh+Ie8ytC9kB/esIM7gyY5B8SMrYeeJ4PCVjEmsHwsFy8wIOIIiJUo85xePyBKNBi7+86R7DPjxMnCThAEX/3HeJPBxUjDzjwkDDv4BwY+ZQeMAGMQ7/vh1AP6Xb1D82HWQf85jkEgyxo+IhNdBMsFRQMlljF8jEpqC7JYUhYWfYdkf1a9rC6nrekgGKbmRAZiN+E/MlLwR3u4Pqr68G7acsCpImU8AaAP+ox1LVhkEqhUi3V5HReEYWDuPNjEo5lnlF/DeVy4X8PDUrGkopA6MfHGDAk5ZDohV0JlXiLyraeEdEdxgHf6uwSkASEOBDqoRCBwbu+sYFPexATgM6tVKZAJghIPiugjkZ0Bk19/FQEAlsbg6A6MRwNLA21gIpIJIoAQOqQLECYir4FBRfvFAK0XfFycg7gbZVRUcMWrQHyFgJpUVBWSZDhA/ATW1qgKlbEYjEEkFwOQFSwGIik0JXNuII9urQFGYIaDpGhGnH+SBuqP9JvqKIF4gAAFSBY9VRhW8bgVyPSKZcDwK/pnK7VUgt1ctpo0AkOQCeEy78maz126aP0mFSHONXP4szZmHuDWJXwWAwLgSTi5nHtsJ9otLBeSMFItA9bJLx0W/fpOQj8DzVxsxNECSkSI9dRkeoF13w2qg8t5m2+Cpb4PECSsI7f7DGyqfiBN0h2/Wy8MNxUc2Yk7OThJ+GeDMA3QqXicIw76nrxHte2sc4KsYn8kAbIBjgCaByInI7t/wx09tcArwjDoknIoR0mDO5uMPYfzcdHyG99YvjtXYCDjfCP5HXWXhk1x0AQRyYIF4CCB9BPA+vkbw2ek4BwTSZkwEwAH8d+n4uTZIA4FyXARUew7YGP+B4HMJlCELnBvxEEBOb4nfI/j8idl5QirsWbEQQM4HDI/xnW1X77K1V4BCIEciQN8aL/F1Lj4tB1ZOegaFIBYTDABcDB+noleQB+MggLyPYvg0DEpGDASQc3/p4zsC8NgLS1IyBgJIvx4T+6sikrKS0oEVgwY6U0DH41fFCMjWgXTejkwAeZ+wAyzsL0igfSLtRSaAvNkCf/YdTwiEKMDJt9SG50gEkH7bXGxbXd99vRvVNM8WigMJHiIRQHZnghXQnPrrhfd3HUdk1RadgD4k+0bLGfG7Xt3b3hklORoB5H0FfMJg+TueadsqoR3RCZEz6i7G3W02u0t4/DCv62hLJzyJQgBp/QlGnN+1Ov3Wh49vAwoTnyCXwHnERGQPYfCfWpqj2bbmeP2v1YBBXUNbJaKklQpNAP7udj+3wOtBVPi1vfqAMBjY29SCpGgxugnWBZiA3e/dOjoAI20Bh5DeCRh88dAWxUigHNOYB+m2dLQIQoCHyVB12LGXUUk2Uy/HfDeQG2nplSuLxOGcjO/eQf6YAbMGmPfL8SLnjsTkG4dLwH0m5SxZQAXeQ7Dy0YNU3J9WupUZVfh0qaUmmIl3qJwTmpQC2CjYIbn1Ogvf82oAeNm91RGtTXR6yp2UCk3LQWwyvMpNy9M13bPvIfJgKaojuqNN9lQmHZs/LZe2W5vSyTchUBn3Rq3RbFBZlKKWhqia/ECAN3gbVWaZLM0E3PANYQDSJS/vQAGUQI985M7hEEiTxamAQPLDOqeJH28GUSCqJRwHHuIvTi92VCEVqPaX6s+bVFB/7wk+maGQRfKcVZIA9hgvz4/OwAZCDLz6lwHdMKw+1Al+sK81XhKYdjj7xUeMwzJWQvTU69Gs93k4/NT7UPc0tLZiAIGbvo3YeVAhW/VCAtGP94UdkDXTUKRtebIkW3B6xtim4+5cdbBg+I0EcDlgb9MxNir5vqB7nqcTHYtqgG5Ugg3C3BiCAjz68tD70KGO/rsTThg+IKegEChkszoljl8b+On2ig7ytzAcMPPwfjE4sxS3gV2f+LmAZOG1iWjosSwAMRAc26uikeiRjEwLM9XAN5KKv3mIkYXwgQU9tRR0wPYkKAlNYuiAQHDEfaUj/tml74YpUQ+o0m35X72gT9676diMIHwBwEQUqMmRCVAXIMZ5cBCjElN4cRXgXfHABN26vUqOWOASLMDeqpfCq0AfbHBCpF9VaC1k16EVFQgS8L4QDYxXwhDZ6pQQGG0mkPLLAAj77JJ1lNT0YQa3K/iq9pngDzVWCFD8IBekhBg4fiKoXn9HIKRA6epnkoSqdQ1tvspTAEiBKxyM6yTVe9XTFwszW3O00ZTgNxkGWH+dqnhgCDHQP1z6YFOYlHQArFO7n1covoOYVUD8Gg8VugAhjti9mc4Hky7dJLkBfMFrPOI1CTmzLtQj/EMEXuG/up/6oH/mYRnjKpcIg9vBApaKf6Z5pWsMfOPsiHmZTcgP1Lv5Lye7015L0xESvcxGr/OJTtHt2v3H+WSCL/lNBp9nrY6jATznOh/nQqMYBU33HNTH1xw7Og5IxFmNQQSyumlKrhxifgw5QNNs/JJ7Wlsi+JxLrcIsmOA0AyUT3Gvdf/Zab0JS/u2Lzf7VbqKDuPEPAP/fv9yOGSSSrizHDH/sJuFa919scGiUEiItFpCRrFhbPIyMIin/T5OLf8n0zE3J8eC7+UKYRqPiqRGHEmTDyhQJvmir18s4Wr3yL6TQ3WaJzE4jih1k2TzGw4/S7ndoRWn3M0qFyB2Hu2UrbMOjkcwS+Cj9tkoWKIRo+TTKAB9P16myeyg3xJpeXfkwp8TYdysV0rjtV+WSkEGshrGfeRR753Exd7pV47NrnTzNHf2R3mspsZuG1m/TNKzU763fkO/NBrR+n2YTf7L9/Ogily6T5nfLb35vW4YBA8fN71lofhfTfaT2/3N88i3vneD2/2ch2/9/ABtem2hAUcJLAAAAAElFTkSuQmCC'\n};\n\nexport const tokenWhitelist: readonly Token[] = [\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa1.2',\n  //   contractAddress: 'KT1K9gCRgaLRFKTErYt1wVxA3Frb9FjasjTV',\n  //   metadata: {\n  //     decimals: 18,\n  //     symbol: 'KUSD',\n  //     name: 'Kolibri',\n  //     thumbnailUri: 'https://kolibri-data.s3.amazonaws.com/logo.png',\n  //   },\n  // },\n  // {\n  //   network: networks.mainnet,\n  //   type: 'fa2',\n  //   contractAddress: 'KT1REEb5VxWRjcHm5GzDMwErMmNFftsE5Gpf',\n  //   fa2TokenId: 0,\n  //   metadata: {\n  //     decimals: 6,\n  //     symbol: 'USDS',\n  //     name: 'Stably USD',\n  //     thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n  //   },\n  // },\n  {\n    network: networks.edo2net,\n    type: 'fa2',\n    contractAddress: 'KT1Mn2HUUKUPg8wiQhUJ8Z9jUtZLaZn8EWL2',\n    fa2TokenId: 0,\n    metadata: {\n      decimals: 0,\n      symbol: 'MBRG',\n      name: 'MAX BURGER',\n      thumbnailUri: 'https://quipuswap.com/tokens/stably.png',\n    },\n  }\n];\n\nexport const tokenWhitelistMap: ReadonlyMap<Token['contractAddress'], Token> = new Map<Token['contractAddress'], Token>(\n  tokenWhitelist.map(token => [token.contractAddress, token])\n);\n","const contractAddressPrefixes = ['KT'] as const;\nconst implicitAddressPrefixes = ['tz1', 'tz2', 'tz3'] as const;\nconst addressPrefixes = [...contractAddressPrefixes, ...implicitAddressPrefixes] as const;\n\nexport const tezosInfo = {\n  addressLength: 36,\n  contractAddressPrefixes,\n  implicitAddressPrefixes,\n  addressPrefixes,\n} as const;\n","import { BigNumber } from 'bignumber.js';\n\nimport { tezosInfo } from '../../models/blockchain';\nimport { Payment } from '../../models/payment';\nimport type { FailedValidationResults } from '../../models/validation';\nimport { URL } from '../../native';\nimport { guards } from '../../utils';\n\ntype Errors<FieldNames extends string> = {\n  readonly [P in FieldNames]: string;\n};\n\nexport const validateTargetAddress = (\n  targetAddress: string,\n  errors: Errors<'invalidTargetAddress' | 'targetAddressHasInvalidLength' | 'targetAddressIsNotNetworkAddress'>\n): FailedValidationResults => {\n  if (typeof targetAddress !== 'string')\n    return [errors.invalidTargetAddress];\n\n  if (targetAddress.length !== tezosInfo.addressLength)\n    return [errors.targetAddressHasInvalidLength];\n\n  if (!tezosInfo.addressPrefixes.some(prefix => targetAddress.startsWith(prefix)))\n    return [errors.targetAddressIsNotNetworkAddress];\n};\n\nexport const validateAmount = (\n  amount: BigNumber,\n  errors: Errors<'invalidAmount' | 'amountIsNegative'>\n): FailedValidationResults => {\n  if (!BigNumber.isBigNumber(amount) || amount.isNaN() || !amount.isFinite())\n    return [errors.invalidAmount];\n\n  if (amount.isNegative())\n    return [errors.amountIsNegative];\n};\n\nexport const validateDesiredAmount = (\n  desiredAmount: BigNumber | undefined,\n  errors: Errors<'invalidAmount' | 'amountIsNegative'>\n): FailedValidationResults => {\n  return desiredAmount === undefined ? undefined : validateAmount(desiredAmount, errors);\n};\n\nexport const validateAsset = (\n  asset: string | undefined,\n  errors: Errors<'invalidAsset' | 'assetHasInvalidLength' | 'assetIsNotContractAddress'>\n): FailedValidationResults => {\n  if (asset === undefined)\n    return;\n\n  if (typeof asset !== 'string')\n    return [errors.invalidAsset];\n\n  if (asset.length !== tezosInfo.addressLength)\n    return [errors.assetHasInvalidLength];\n\n  if (!tezosInfo.contractAddressPrefixes.some(prefix => asset.startsWith(prefix)))\n    return [errors.assetIsNotContractAddress];\n};\n\nexport const validateCreatedDate = (\n  date: Date,\n  errors: Errors<'invalidCreatedDate'>\n): FailedValidationResults => {\n  if (!(date instanceof Date))\n    return [errors.invalidCreatedDate];\n};\n\nexport const validateUrl = (\n  url: URL | undefined,\n  errors: Errors<'invalidUrl' | 'invalidProtocol'>\n): FailedValidationResults => {\n  if (url === undefined)\n    return;\n\n  if (!(url instanceof URL))\n    return [errors.invalidUrl];\n\n  if (url.protocol.indexOf('javascript') > -1)\n    return [errors.invalidProtocol];\n};\n\nexport const validateExpiredDate = (\n  expiredDate: Date | undefined,\n  createdDate: Date,\n  minimumPaymentLifetime: number,\n  errors: Errors<'invalidExpiredDate' | 'paymentLifetimeIsShort'>\n): FailedValidationResults => {\n  if (expiredDate === undefined)\n    return;\n\n  if (!(expiredDate instanceof Date))\n    return [errors.invalidExpiredDate];\n\n  if (expiredDate.getTime() - createdDate.getTime() < minimumPaymentLifetime) {\n    return [errors.paymentLifetimeIsShort];\n  }\n};\n\nexport const validateData = (\n  data: Payment['data'],\n  errors: Errors<'invalidData' | 'invalidPublicData' | 'publicDataShouldBeFlat' | 'invalidPrivateData' | 'privateDataShouldBeFlat'>\n): FailedValidationResults => {\n  if (!guards.isPlainObject(data) || Object.keys(data).some(key => key !== 'public' && key !== 'private'))\n    return [errors.invalidData];\n\n  const publicData = (data as Exclude<Payment['data'], { private: unknown }>).public;\n  const privateData = (data as Exclude<Payment['data'], { public: unknown }>).private;\n  if (!(publicData || privateData))\n    return [errors.invalidData];\n\n  if (publicData !== undefined) {\n    if (!guards.isPlainObject(publicData))\n      return [errors.invalidPublicData];\n    if (!isFlatObject(publicData))\n      return [errors.publicDataShouldBeFlat];\n  }\n\n  if (privateData !== undefined) {\n    if (!guards.isPlainObject(privateData))\n      return [errors.invalidPrivateData];\n    if (!isFlatObject(privateData))\n      return [errors.privateDataShouldBeFlat];\n  }\n};\n\nconst isFlatObject = (obj: Record<string, unknown>) => {\n  for (const propertyName of Object.getOwnPropertyNames(obj)) {\n    const property = obj[propertyName];\n    if (typeof property === 'object' || typeof property === 'function')\n      return false;\n  }\n\n  return true;\n};\n","import type { Payment } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport {\n  validateTargetAddress, validateAmount, validateData, validateAsset, validateCreatedDate,\n  validateExpiredDate, validateUrl\n} from './validationMethods';\n\nexport class PaymentValidator extends PaymentValidatorBase<Payment> {\n  static readonly errors = {\n    invalidPaymentObject: 'Payment is undefined or not object',\n    invalidType: 'Payment type is invalid',\n    invalidAmount: 'Amount is invalid',\n    amountIsNegative: 'Amount is less than zero',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidData: 'Payment data is invalid',\n    invalidPublicData: 'Payment public data is invalid',\n    invalidPrivateData: 'Payment private data is invalid',\n    publicDataShouldBeFlat: 'Public data should be flat',\n    privateDataShouldBeFlat: 'Private data should be flat',\n    invalidAsset: 'Asset address is invalid',\n    assetIsNotContractAddress: 'Asset address isn\\'t a contract address',\n    assetHasInvalidLength: 'Asset address has an invalid address',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol',\n    invalidCreatedDate: 'Created date is invalid',\n    invalidExpiredDate: 'Expired date is invalid',\n    paymentLifetimeIsShort: 'Payment lifetime is short'\n  } as const;\n  static readonly minimumPaymentLifetime = 600000; // 10 * 60 * 1000;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Payment>> = [\n    payment => payment.type !== PaymentType.Payment ? [PaymentValidator.errors.invalidType] : undefined,\n    payment => validateTargetAddress(payment.targetAddress, PaymentValidator.errors),\n    payment => validateAmount(payment.amount, PaymentValidator.errors),\n    payment => validateData(payment.data, PaymentValidator.errors),\n    payment => validateAsset(payment.asset, PaymentValidator.errors),\n    payment => validateUrl(payment.successUrl, PaymentValidator.successUrlErrors),\n    payment => validateUrl(payment.cancelUrl, PaymentValidator.cancelUrlErrors),\n    payment => validateCreatedDate(payment.created, PaymentValidator.errors),\n    payment => validateExpiredDate(payment.expired, payment.created, PaymentValidator.minimumPaymentLifetime, PaymentValidator.errors),\n  ];\n\n  protected readonly invalidPaymentObjectError = PaymentValidator.errors.invalidPaymentObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidSuccessUrl,\n    invalidProtocol: PaymentValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: PaymentValidator.errors.invalidCancelUrl,\n    invalidProtocol: PaymentValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","import type { Donation } from '../../models/payment';\nimport { PaymentType } from '../../models/payment/paymentBase';\nimport type { PaymentValidationMethod } from './paymentValidationMethod';\nimport { PaymentValidatorBase } from './paymentValidatorBase';\nimport { validateTargetAddress, validateDesiredAmount, validateAsset, validateUrl } from './validationMethods';\n\nexport class DonationValidator extends PaymentValidatorBase<Donation> {\n  static readonly errors = {\n    invalidDonationObject: 'Donation is undefined or not object',\n    invalidType: 'Donation type is invalid',\n    invalidAmount: 'Desired amount is invalid',\n    amountIsNegative: 'Desired amount is less than zero',\n    invalidTargetAddress: 'Target address is invalid',\n    targetAddressIsNotNetworkAddress: 'Target address isn\\'t a network address',\n    targetAddressHasInvalidLength: 'Target address has an invalid address',\n    invalidAsset: 'Desired asset address is invalid',\n    assetIsNotContractAddress: 'Desired asset address isn\\'t a contract address',\n    assetHasInvalidLength: 'Desired asset address has an invalid address',\n    invalidSuccessUrl: 'Success URL is invalid',\n    successUrlHasInvalidProtocol: 'Success URL has an invalid protocol',\n    invalidCancelUrl: 'Cancel URL is invalid',\n    cancelUrlHasInvalidProtocol: 'Cancel URL has an invalid protocol'\n  } as const;\n\n  protected readonly validationMethods: ReadonlyArray<PaymentValidationMethod<Donation>> = [\n    donation => donation.type !== PaymentType.Donation ? [DonationValidator.errors.invalidType] : undefined,\n    donation => validateTargetAddress(donation.targetAddress, DonationValidator.errors),\n    donation => validateDesiredAmount(donation.desiredAmount, DonationValidator.errors),\n    donation => validateAsset(donation.desiredAsset, DonationValidator.errors),\n    donation => validateUrl(donation.successUrl, DonationValidator.successUrlErrors),\n    donation => validateUrl(donation.cancelUrl, DonationValidator.cancelUrlErrors)\n  ];\n\n  protected readonly invalidPaymentObjectError = DonationValidator.errors.invalidDonationObject;\n\n  private static readonly successUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidSuccessUrl,\n    invalidProtocol: DonationValidator.errors.successUrlHasInvalidProtocol\n  };\n\n  private static readonly cancelUrlErrors = {\n    invalidUrl: DonationValidator.errors.invalidCancelUrl,\n    invalidProtocol: DonationValidator.errors.cancelUrlHasInvalidProtocol\n  };\n}\n","export abstract class StateModel {\n    protected constructor() {\n    // All derived classes should be static\n    }\n}\n","import { BigNumber } from 'bignumber.js';\n\nimport { PaymentParser, NonIncludedPaymentFields, PaymentValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { StateModel } from '../core';\nimport { PaymentBase, PaymentType } from './paymentBase';\n\ninterface PublicPaymentData {\n  readonly public: { readonly [fieldName: string]: unknown; };\n}\n\ninterface PrivatePaymentData {\n  readonly private: { readonly [fieldName: string]: unknown; };\n}\n\ntype PaymentData =\n  | PublicPaymentData\n  | PrivatePaymentData\n  | PublicPaymentData & PrivatePaymentData;\n\nexport interface Payment extends PaymentBase {\n  readonly type: PaymentType.Payment;\n  readonly amount: BigNumber;\n  readonly asset?: string;\n  readonly data: PaymentData;\n  readonly created: Date;\n  readonly expired?: Date;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n}\n\nexport class Payment extends StateModel {\n  static readonly defaultParser: PaymentParser = new PaymentParser();\n  static readonly defaultValidator: PaymentValidator = new PaymentValidator();\n\n  static validate(payment: Payment) {\n    return this.defaultValidator.validate(payment);\n  }\n\n  static parse(payment64: string, nonIncludedFields: NonIncludedPaymentFields, parser = Payment.defaultParser): Payment | null {\n    return parser.parse(payment64, nonIncludedFields);\n  }\n\n  static publicDataExists(payment: Payment): payment is Payment & { readonly data: PublicPaymentData };\n  static publicDataExists(paymentData: Payment['data']): paymentData is Payment['data'] & PublicPaymentData;\n  static publicDataExists(\n    paymentOrPaymentDataOrPaymentData: Payment | Payment['data']\n  ): paymentOrPaymentDataOrPaymentData is (Payment & { readonly data: PublicPaymentData }) | (Payment['data'] & PublicPaymentData) {\n    return this.publicDataExistsInternal(paymentOrPaymentDataOrPaymentData);\n  }\n\n  static privateDataExists(payment: Payment): payment is Payment & { readonly data: PrivatePaymentData } {\n    return !!(payment.data as PrivatePaymentData).private;\n  }\n\n  protected static publicDataExistsInternal(\n    paymentOrPaymentDataOrPaymentData: Payment | Payment['data']\n  ): paymentOrPaymentDataOrPaymentData is (Payment & { readonly data: PublicPaymentData }) | (Payment['data'] & PublicPaymentData) {\n    return !!(Payment.isPayment(paymentOrPaymentDataOrPaymentData)\n      ? (paymentOrPaymentDataOrPaymentData.data as PublicPaymentData).public\n      : (paymentOrPaymentDataOrPaymentData as PublicPaymentData).public\n    );\n  }\n\n  private static isPayment(paymentOrPaymentDataOrPaymentData: Payment | Payment['data']): paymentOrPaymentDataOrPaymentData is Payment {\n    return !!(paymentOrPaymentDataOrPaymentData as Payment).amount;\n  }\n}\n","import { BigNumber } from 'bignumber.js';\n\nimport { DonationParser, NonIncludedDonationFields, DonationValidator } from '../../helpers';\nimport { URL } from '../../native';\nimport { StateModel } from '../core';\nimport { PaymentBase, PaymentType } from './paymentBase';\n\nexport interface Donation extends PaymentBase {\n  readonly type: PaymentType.Donation;\n  readonly desiredAmount?: BigNumber;\n  readonly desiredAsset?: string;\n  readonly successUrl?: URL;\n  readonly cancelUrl?: URL;\n}\n\nexport class Donation extends StateModel {\n  static readonly defaultParser: DonationParser = new DonationParser();\n  static readonly defaultValidator: DonationValidator = new DonationValidator();\n\n  static validate(donation: Donation) {\n    return this.defaultValidator.validate(donation);\n  }\n\n  static parse(donationBase64: string, nonIncludedFields: NonIncludedDonationFields, parser = Donation.defaultParser): Donation | null {\n    return parser.parse(donationBase64, nonIncludedFields);\n  }\n}\n\n","// eslint-disable-next-line @typescript-eslint/no-explicit-any\ntype ParameterizedRouteFactory = (...args: any[]) => string;\nexport type ParameterizedRoute<Factory extends ParameterizedRouteFactory> = Factory & {\n  readonly template: string;\n};\n\nexport const getParameterizedRoute = <Factory extends ParameterizedRouteFactory>(\n  factory: Factory, template: string\n): ParameterizedRoute<Factory> => {\n  (factory as Factory & { template: string }).template = template;\n\n  return factory as ParameterizedRoute<Factory>;\n};\n","export enum ServiceOperationType {\n  Payment = 1,\n  Donation = 2,\n\n  All = Payment | Donation\n}\n","import { Network, networks } from '../blockchain/network';\nimport { ServiceOperationType } from './serviceOperationType';\n\nexport interface Service {\n  readonly name: string;\n  readonly links: readonly string[];\n  readonly description?: string;\n  readonly iconUrl?: string;\n  readonly version: number;\n  readonly metadata: string;\n\n  readonly contractAddress: string;\n  readonly network: Network;\n  readonly allowedTokens: {\n    readonly tez: boolean;\n    readonly assets: readonly string[];\n  }\n  readonly allowedOperationType: ServiceOperationType;\n\n  readonly owner: string;\n  readonly paused: boolean;\n  readonly deleted: boolean;\n}\n\nexport const emptyService: Service = {\n  name: '',\n  description: '',\n  links: [],\n  version: 0,\n  metadata: '',\n  contractAddress: '',\n  allowedTokens: {\n    tez: true,\n    assets: []\n  },\n  allowedOperationType: ServiceOperationType.Payment,\n  owner: '',\n  paused: false,\n  deleted: false,\n  network: networks.edo2net,\n};\n","import { BigNumber } from 'bignumber.js';\n\nimport { converters } from '../../utils';\nimport { StateModel } from '../core';\nimport { ServiceOperationDirection } from './serviceOperationDirection';\nimport { ServiceOperationStatus } from './serviceOperationStatus';\nimport { ServiceOperationType } from './serviceOperationType';\n\ninterface ServiceOperationPayloadData {\n  readonly value: { readonly [fieldName: string]: unknown; } | null;\n  readonly valueString: string;\n  readonly encodedValue: string;\n}\n\ninterface PublicServiceOperationPayload {\n  readonly public: ServiceOperationPayloadData;\n}\n\ninterface PrivateServiceOperationPayload {\n  readonly private: ServiceOperationPayloadData;\n}\n\ntype ServiceOperationPayload =\n  | PublicServiceOperationPayload\n  | PrivateServiceOperationPayload\n  | PublicServiceOperationPayload & PrivateServiceOperationPayload;\n\nexport interface ServiceOperation {\n  readonly hash: string;\n  readonly type: ServiceOperationType;\n  readonly direction: ServiceOperationDirection;\n  readonly status: ServiceOperationStatus;\n  readonly amount: BigNumber;\n  readonly payload: ServiceOperationPayload;\n  readonly asset?: string;\n  readonly timestamp: string;\n  readonly date: Date;\n  readonly sender: string;\n  readonly target: string;\n}\n\nexport class ServiceOperation extends StateModel {\n  static publicPayloadExists(operation: ServiceOperation): operation is ServiceOperation & { readonly payload: PublicServiceOperationPayload } {\n    return !!(operation.payload as PublicServiceOperationPayload).public;\n  }\n\n  static privatePayloadExists(operation: ServiceOperation): operation is ServiceOperation & { readonly payload: PrivateServiceOperationPayload } {\n    return !!(operation.payload as PrivateServiceOperationPayload).private;\n  }\n\n  static isPayloadDecoded(\n    data: ServiceOperationPayloadData\n  ): data is ServiceOperationPayloadData & { readonly value: NonNullable<ServiceOperationPayloadData['value']> } {\n    return !!data.value;\n  }\n\n  static parseServiceOperationPayload(encodedValue: string): ServiceOperationPayloadData {\n    const valueString = converters.bytesToString(encodedValue);\n\n    let value: ServiceOperationPayloadData['value'] = null;\n    try { value = JSON.parse(valueString); } catch { /**/ }\n\n    return {\n      value,\n      valueString,\n      encodedValue,\n    };\n  }\n}\n","export enum ServiceOperationDirection {\n  Incoming = 0,\n  Outgoing = 1\n}\n","export enum ServiceOperationStatus {\n  Pending = 0,\n  Success = 1,\n  Cancelled = 2\n}\n"],"names":["stringToUint8Array","hex","integers","match","map","val","parseInt","Uint8Array","stringToBytes","value","Buffer","from","toString","bytesToString","objectToBytes","JSON","stringify","bytesToObject","parse","tezToMutez","tez","BigInt","isArray","arg","Array","isReadonlyArray","isPlainObject","isPlainObjectLodashFunction","defaultEqualityCheck","a","b","areArgumentsShallowlyEqual","equalityCheck","prev","next","length","i","memoize","func","lastArgs","lastResult","arguments","apply","emptyArray","emptyObject","emptyMap","Map","emptySet","Set","is","x","y","shallowEqual","objA","objB","keysA","Object","keys","keysB","prototype","hasOwnProperty","call","capitalize","toLocaleUpperCase","slice","getAvatarText","maxLength","result","j","isWord","wait","ms","Promise","resolve","setTimeout","IconId","getInvalidLinkInfo","link","rawLink","formattedLink","displayLink","icon","Common","prepareFormattedLink","trim","prepareDisplayLink","replace","socialMediaLinkInfoProvider","baseUrl","startsWith","telegramLinkInfoProvider","Telegram","facebookLinkInfoProvider","Facebook","twitterLinkInfoProvider","Twitter","instagramLinkInfoProvider","Instagram","gitHubLinkInfoProvider","GitHub","redditLinkInfoProvider","Reddit","emailCheckingRegEx","emailLinkInfoProvider","preparedFormattedLink","test","Email","javascriptLinkInfoProvider","urlSchemeRegEx","commonLinkInfoProvider","editLinkInfoProvider","ServiceLinkHelper","isEditMode","linkInfoProviders","provider","linkInfo","linkInfoIsValid","PaymentType","URL","NodeURL","globalThis","PaymentParserBase","_minPaymentFieldsCount","count","paymentFieldTypes","info","every","type","size","paymentBase64","nonIncludedFields","rawPayment","paymentString","validateAndMapRawPaymentToPayment","validateRawPayment","mapRawPaymentToPayment","rawPaymentFieldNames","getOwnPropertyNames","minPaymentFieldsCount","maxPaymentFieldsCount","rawPaymentFieldName","expectedPaymentFieldType","actualPaymentFieldType","some","expectedType","PaymentParser","set","_paymentFieldTypes","Payment","amount","BigNumber","data","asset","successUrl","undefined","cancelUrl","created","Date","expired","targetAddress","urls","DonationParser","rawDonation","Donation","desiredAmount","desiredAsset","PaymentValidatorBase","payment","bail","guards","invalidPaymentObjectError","failedValidationResults","validationMethods","validationMethod","currentFailedValidationResults","concat","networksInternal","granadanet","id","name","edo2net","networks","networksCollection","values","tezosMeta","symbol","decimals","thumbnailUri","tokenWhitelist","network","contractAddress","fa2TokenId","metadata","tokenWhitelistMap","token","contractAddressPrefixes","implicitAddressPrefixes","addressPrefixes","tezosInfo","addressLength","validateTargetAddress","errors","invalidTargetAddress","targetAddressHasInvalidLength","prefix","targetAddressIsNotNetworkAddress","validateAmount","isBigNumber","isNaN","isFinite","invalidAmount","isNegative","amountIsNegative","validateDesiredAmount","validateAsset","invalidAsset","assetHasInvalidLength","assetIsNotContractAddress","validateCreatedDate","date","invalidCreatedDate","validateUrl","url","invalidUrl","protocol","indexOf","invalidProtocol","validateExpiredDate","expiredDate","createdDate","minimumPaymentLifetime","invalidExpiredDate","getTime","paymentLifetimeIsShort","validateData","key","invalidData","publicData","privateData","invalidPublicData","isFlatObject","publicDataShouldBeFlat","invalidPrivateData","privateDataShouldBeFlat","obj","propertyName","property","PaymentValidator","invalidType","successUrlErrors","cancelUrlErrors","invalidPaymentObject","invalidSuccessUrl","successUrlHasInvalidProtocol","invalidCancelUrl","cancelUrlHasInvalidProtocol","DonationValidator","donation","invalidDonationObject","StateModel","defaultValidator","validate","payment64","parser","defaultParser","paymentOrPaymentDataOrPaymentData","publicDataExistsInternal","isPayment","donationBase64","getParameterizedRoute","factory","template","ServiceOperationType","emptyService","description","links","version","allowedTokens","assets","allowedOperationType","owner","paused","deleted","ServiceOperation","operation","payload","encodedValue","valueString","converters","ServiceOperationDirection","ServiceOperationStatus"],"mappings":"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"}